var Eb=Object.defineProperty;var Tb=(n,d,c)=>d in n?Eb(n,d,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[d]=c;var hf=(n,d,c)=>Tb(n,typeof d!="symbol"?d+"":d,c);var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ph={exports:{}},Gm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function Rb(){if(Ap)return Gm;Ap=1;var n=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function c(o,f,h){var p=null;if(h!==void 0&&(p=""+h),f.key!==void 0&&(p=""+f.key),"key"in f){h={};for(var y in f)y!=="key"&&(h[y]=f[y])}else h=f;return f=h.ref,{$$typeof:n,type:o,key:p,ref:f!==void 0?f:null,props:h}}return Gm.Fragment=d,Gm.jsx=c,Gm.jsxs=c,Gm}var kp;function Mb(){return kp||(kp=1,Ph.exports=Rb()),Ph.exports}var e=Mb(),Qm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Ob=Qm.exports,Ep;function Lb(){return Ep||(Ep=1,(function(n,d){(function(){var c,o="4.17.21",f=200,h="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",p="Expected a function",y="Invalid `variable` option passed into `_.template`",N="__lodash_hash_undefined__",j=500,v="__lodash_placeholder__",S=1,M=2,U=4,k=1,B=2,A=1,$=2,Y=4,w=8,D=16,z=32,W=64,F=128,J=256,I=512,Q=30,de="...",te=800,pe=16,q=1,ae=2,H=3,L=1/0,Z=9007199254740991,Te=17976931348623157e292,ye=NaN,E=4294967295,ee=E-1,V=E>>>1,re=[["ary",F],["bind",A],["bindKey",$],["curry",w],["curryRight",D],["flip",I],["partial",z],["partialRight",W],["rearg",J]],Re="[object Arguments]",De="[object Array]",ge="[object AsyncFunction]",ke="[object Boolean]",Oe="[object Date]",Rt="[object DOMException]",pt="[object Error]",ns="[object Function]",Wt="[object GeneratorFunction]",Nt="[object Map]",rs="[object Number]",Mt="[object Null]",is="[object Object]",zs="[object Promise]",Bs="[object Proxy]",es="[object RegExp]",It="[object Set]",fs="[object String]",Is="[object Symbol]",os="[object Undefined]",Qs="[object WeakMap]",Us="[object WeakSet]",ts="[object ArrayBuffer]",ds="[object DataView]",Gs="[object Float32Array]",Vs="[object Float64Array]",sa="[object Int8Array]",He="[object Int16Array]",ht="[object Int32Array]",gt="[object Uint8Array]",cs="[object Uint8ClampedArray]",Ct="[object Uint16Array]",Hs="[object Uint32Array]",xa=/\b__p \+= '';/g,ia=/\b(__p \+=) '' \+/g,je=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ae=/&(?:amp|lt|gt|quot|#39);/g,Be=/[&<>"']/g,qe=RegExp(Ae.source),et=RegExp(Be.source),Ye=/<%-([\s\S]+?)%>/g,ot=/<%([\s\S]+?)%>/g,we=/<%=([\s\S]+?)%>/g,Ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$e=/^\w*$/,Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qt=/[\\^$.*+?()[\]{}|]/g,At=RegExp(Qt.source),zt=/^\s+/,he=/\s/,Ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xe=/\{\n\/\* \[wrapped with (.+)\] \*/,dt=/,? & /,_t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,at=/[()=,{}\[\]\/\s]/,Tt=/\\(\\)?/g,vs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ea=/\w*$/,tn=/^[-+]0x[0-9a-f]+$/i,$l=/^0b[01]+$/i,Fl=/^\[object .+?Constructor\]$/,el=/^0o[0-7]+$/i,ca=/^(?:0|[1-9]\d*)$/,yl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tl=/($^)/,Tn=/['\n\r\u2028\u2029\\]/g,sl="\\ud800-\\udfff",ks="\\u0300-\\u036f",Ui="\\ufe20-\\ufe2f",Hi="\\u20d0-\\u20ff",Nl=ks+Ui+Hi,ql="\\u2700-\\u27bf",$i="a-z\\xdf-\\xf6\\xf8-\\xff",Fi="\\xac\\xb1\\xd7\\xf7",Ot="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pl="\\u2000-\\u206f",sn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rn="A-Z\\xc0-\\xd6\\xd8-\\xde",Ta="\\ufe0e\\ufe0f",Ra=Fi+Ot+Pl+sn,ro="['’]",Ff="["+sl+"]",io="["+Ra+"]",qi="["+Nl+"]",Pi="\\d+",qf="["+ql+"]",Ma="["+$i+"]",co="[^"+sl+Ra+Pi+ql+$i+Rn+"]",oo="\\ud83c[\\udffb-\\udfff]",Kd="(?:"+qi+"|"+oo+")",dr="[^"+sl+"]",uo="(?:\\ud83c[\\udde6-\\uddff]){2}",mo="[\\ud800-\\udbff][\\udc00-\\udfff]",_l="["+Rn+"]",nx="\\u200d",Jd="(?:"+Ma+"|"+co+")",rx="(?:"+_l+"|"+co+")",xo="(?:"+ro+"(?:d|ll|m|re|s|t|ve))?",ix="(?:"+ro+"(?:D|LL|M|RE|S|T|VE))?",cx=Kd+"?",Ii="["+Ta+"]?",an="(?:"+nx+"(?:"+[dr,uo,mo].join("|")+")"+Ii+cx+")*",eu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ur=Ii+cx+an,Hr="(?:"+[qf,uo,mo].join("|")+")"+ur,ox="(?:"+[dr+qi+"?",qi,uo,mo,Ff].join("|")+")",su=RegExp(ro,"g"),dx=RegExp(qi,"g"),mr=RegExp(oo+"(?="+oo+")|"+ox+ur,"g"),ln=RegExp([_l+"?"+Ma+"+"+xo+"(?="+[io,_l,"$"].join("|")+")",rx+"+"+ix+"(?="+[io,_l+Jd,"$"].join("|")+")",_l+"?"+Jd+"+"+xo,_l+"+"+ix,tu,eu,Pi,Hr].join("|"),"g"),au=RegExp("["+nx+sl+Nl+Ta+"]"),Gi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],lu=-1,Xt={};Xt[Gs]=Xt[Vs]=Xt[sa]=Xt[He]=Xt[ht]=Xt[gt]=Xt[cs]=Xt[Ct]=Xt[Hs]=!0,Xt[Re]=Xt[De]=Xt[ts]=Xt[ke]=Xt[ds]=Xt[Oe]=Xt[pt]=Xt[ns]=Xt[Nt]=Xt[rs]=Xt[is]=Xt[es]=Xt[It]=Xt[fs]=Xt[Qs]=!1;var ss={};ss[Re]=ss[De]=ss[ts]=ss[ds]=ss[ke]=ss[Oe]=ss[Gs]=ss[Vs]=ss[sa]=ss[He]=ss[ht]=ss[Nt]=ss[rs]=ss[is]=ss[es]=ss[It]=ss[fs]=ss[Is]=ss[gt]=ss[cs]=ss[Ct]=ss[Hs]=!0,ss[pt]=ss[ns]=ss[Qs]=!1;var fo={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},ho={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ux={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xr=parseFloat,po=parseInt,$r=typeof pf=="object"&&pf&&pf.Object===Object&&pf,Pf=typeof self=="object"&&self&&self.Object===Object&&self,$s=$r||Pf||Function("return this")(),Vi=d&&!d.nodeType&&d,wl=Vi&&!0&&n&&!n.nodeType&&n,Yi=wl&&wl.exports===Vi,go=Yi&&$r.process,al=(function(){try{var se=wl&&wl.require&&wl.require("util").types;return se||go&&go.binding&&go.binding("util")}catch{}})(),mx=al&&al.isArrayBuffer,xx=al&&al.isDate,bo=al&&al.isMap,fx=al&&al.isRegExp,hx=al&&al.isSet,px=al&&al.isTypedArray;function Oa(se,be,me){switch(me.length){case 0:return se.call(be);case 1:return se.call(be,me[0]);case 2:return se.call(be,me[0],me[1]);case 3:return se.call(be,me[0],me[1],me[2])}return se.apply(be,me)}function If(se,be,me,ze){for(var tt=-1,vt=se==null?0:se.length;++tt<vt;){var ps=se[tt];be(ze,ps,me(ps),se)}return ze}function La(se,be){for(var me=-1,ze=se==null?0:se.length;++me<ze&&be(se[me],me,se)!==!1;);return se}function Gf(se,be){for(var me=se==null?0:se.length;me--&&be(se[me],me,se)!==!1;);return se}function gx(se,be){for(var me=-1,ze=se==null?0:se.length;++me<ze;)if(!be(se[me],me,se))return!1;return!0}function On(se,be){for(var me=-1,ze=se==null?0:se.length,tt=0,vt=[];++me<ze;){var ps=se[me];be(ps,me,se)&&(vt[tt++]=ps)}return vt}function vo(se,be){var me=se==null?0:se.length;return!!me&&Fr(se,be,0)>-1}function Wi(se,be,me){for(var ze=-1,tt=se==null?0:se.length;++ze<tt;)if(me(be,se[ze]))return!0;return!1}function hs(se,be){for(var me=-1,ze=se==null?0:se.length,tt=Array(ze);++me<ze;)tt[me]=be(se[me],me,se);return tt}function Ln(se,be){for(var me=-1,ze=be.length,tt=se.length;++me<ze;)se[tt+me]=be[me];return se}function nu(se,be,me,ze){var tt=-1,vt=se==null?0:se.length;for(ze&&vt&&(me=se[++tt]);++tt<vt;)me=be(me,se[tt],tt,se);return me}function bx(se,be,me,ze){var tt=se==null?0:se.length;for(ze&&tt&&(me=se[--tt]);tt--;)me=be(me,se[tt],tt,se);return me}function ru(se,be){for(var me=-1,ze=se==null?0:se.length;++me<ze;)if(be(se[me],me,se))return!0;return!1}var Vf=fr("length");function Yf(se){return se.split("")}function Wf(se){return se.match(_t)||[]}function vx(se,be,me){var ze;return me(se,function(tt,vt,ps){if(be(tt,vt,ps))return ze=vt,!1}),ze}function jo(se,be,me,ze){for(var tt=se.length,vt=me+(ze?1:-1);ze?vt--:++vt<tt;)if(be(se[vt],vt,se))return vt;return-1}function Fr(se,be,me){return be===be?Kf(se,be,me):jo(se,jx,me)}function Qf(se,be,me,ze){for(var tt=me-1,vt=se.length;++tt<vt;)if(ze(se[tt],be))return tt;return-1}function jx(se){return se!==se}function yo(se,be){var me=se==null?0:se.length;return me?No(se,be)/me:ye}function fr(se){return function(be){return be==null?c:be[se]}}function iu(se){return function(be){return se==null?c:se[be]}}function cu(se,be,me,ze,tt){return tt(se,function(vt,ps,Gt){me=ze?(ze=!1,vt):be(me,vt,ps,Gt)}),me}function yx(se,be){var me=se.length;for(se.sort(be);me--;)se[me]=se[me].value;return se}function No(se,be){for(var me,ze=-1,tt=se.length;++ze<tt;){var vt=be(se[ze]);vt!==c&&(me=me===c?vt:me+vt)}return me}function _o(se,be){for(var me=-1,ze=Array(se);++me<se;)ze[me]=be(me);return ze}function Nx(se,be){return hs(be,function(me){return[me,se[me]]})}function hr(se){return se&&se.slice(0,Pr(se)+1).replace(zt,"")}function Da(se){return function(be){return se(be)}}function ou(se,be){return hs(be,function(me){return se[me]})}function Qi(se,be){return se.has(be)}function du(se,be){for(var me=-1,ze=se.length;++me<ze&&Fr(be,se[me],0)>-1;);return me}function uu(se,be){for(var me=se.length;me--&&Fr(be,se[me],0)>-1;);return me}function Xi(se,be){for(var me=se.length,ze=0;me--;)se[me]===be&&++ze;return ze}var Zi=iu(fo),Xf=iu(ho);function wo(se){return"\\"+fa[se]}function _x(se,be){return se==null?c:se[be]}function pr(se){return au.test(se)}function mu(se){return Gi.test(se)}function xu(se){for(var be,me=[];!(be=se.next()).done;)me.push(be.value);return me}function So(se){var be=-1,me=Array(se.size);return se.forEach(function(ze,tt){me[++be]=[tt,ze]}),me}function fu(se,be){return function(me){return se(be(me))}}function nn(se,be){for(var me=-1,ze=se.length,tt=0,vt=[];++me<ze;){var ps=se[me];(ps===be||ps===v)&&(se[me]=v,vt[tt++]=me)}return vt}function Co(se){var be=-1,me=Array(se.size);return se.forEach(function(ze){me[++be]=ze}),me}function Zf(se){var be=-1,me=Array(se.size);return se.forEach(function(ze){me[++be]=[ze,ze]}),me}function Kf(se,be,me){for(var ze=me-1,tt=se.length;++ze<tt;)if(se[ze]===be)return ze;return-1}function Jf(se,be,me){for(var ze=me+1;ze--;)if(se[ze]===be)return ze;return ze}function qr(se){return pr(se)?Sx(se):Vf(se)}function js(se){return pr(se)?Cx(se):Yf(se)}function Pr(se){for(var be=se.length;be--&&he.test(se.charAt(be)););return be}var wx=iu(ux);function Sx(se){for(var be=mr.lastIndex=0;mr.test(se);)++be;return be}function Cx(se){return se.match(mr)||[]}function Ax(se){return se.match(ln)||[]}var hu=(function se(be){be=be==null?$s:Ir.defaults($s.Object(),be,Ir.pick($s,Mn));var me=be.Array,ze=be.Date,tt=be.Error,vt=be.Function,ps=be.Math,Gt=be.Object,Ao=be.RegExp,gr=be.String,za=be.TypeError,Ki=me.prototype,kx=vt.prototype,Gr=Gt.prototype,ko=be["__core-js_shared__"],Eo=kx.toString,$t=Gr.hasOwnProperty,Ex=0,To=(function(){var l=/[^.]+$/.exec(ko&&ko.keys&&ko.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""})(),ha=Gr.toString,Ro=Eo.call(Gt),ll=$s._,Vr=Ao("^"+Eo.call($t).replace(Qt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yr=Yi?be.Buffer:c,Sl=be.Symbol,br=be.Uint8Array,Mo=Yr?Yr.allocUnsafe:c,Il=fu(Gt.getPrototypeOf,Gt),pu=Gt.create,Ji=Gr.propertyIsEnumerable,rn=Ki.splice,Tx=Sl?Sl.isConcatSpreadable:c,Xs=Sl?Sl.iterator:c,cn=Sl?Sl.toStringTag:c,nl=(function(){try{var l=Yn(Gt,"defineProperty");return l({},"",{}),l}catch{}})(),Rx=be.clearTimeout!==$s.clearTimeout&&be.clearTimeout,Oo=ze&&ze.now!==$s.Date.now&&ze.now,vr=be.setTimeout!==$s.setTimeout&&be.setTimeout,Wr=ps.ceil,ec=ps.floor,tc=Gt.getOwnPropertySymbols,Mx=Yr?Yr.isBuffer:c,Ba=be.isFinite,Qr=Ki.join,Xr=fu(Gt.keys,Gt),_s=ps.max,Ms=ps.min,rl=ze.now,il=be.parseInt,on=ps.random,Gl=Ki.reverse,cl=Yn(be,"DataView"),Ua=Yn(be,"Map"),Lo=Yn(be,"Promise"),Dn=Yn(be,"Set"),jr=Yn(be,"WeakMap"),Zr=Yn(Gt,"create"),Os=jr&&new jr,Ft={},kt=na(cl),zn=na(Ua),ol=na(Lo),gu=na(Dn),Bn=na(jr),sc=Sl?Sl.prototype:c,Kr=sc?sc.valueOf:c,yr=sc?sc.toString:c;function R(l){if(Cs(l)&&!st(l)&&!(l instanceof nt)){if(l instanceof pa)return l;if($t.call(l,"__wrapped__"))return ud(l)}return new pa(l)}var Un=(function(){function l(){}return function(i){if(!bs(i))return{};if(pu)return pu(i);l.prototype=i;var m=new l;return l.prototype=c,m}})();function Hn(){}function pa(l,i){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=c}R.templateSettings={escape:Ye,evaluate:ot,interpolate:we,variable:"",imports:{_:R}},R.prototype=Hn.prototype,R.prototype.constructor=R,pa.prototype=Un(Hn.prototype),pa.prototype.constructor=pa;function nt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=E,this.__views__=[]}function dn(){var l=new nt(this.__wrapped__);return l.__actions__=da(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=da(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=da(this.__views__),l}function $n(){if(this.__filtered__){var l=new nt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function un(){var l=this.__wrapped__.value(),i=this.__dir__,m=st(l),b=i<0,C=m?l.length:0,O=ch(0,C,this.__views__),P=O.start,X=O.end,ne=X-P,Se=b?X:P-1,Ce=this.__iteratees__,Ee=Ce.length,Le=0,Pe=Ms(ne,this.__takeCount__);if(!m||!b&&C==ne&&Pe==ne)return Mu(l,this.__actions__);var Ke=[];e:for(;ne--&&Le<Pe;){Se+=i;for(var bt=-1,Je=l[Se];++bt<Ee;){var Et=Ce[bt],Lt=Et.iteratee,Bl=Et.type,Xa=Lt(Je);if(Bl==ae)Je=Xa;else if(!Xa){if(Bl==q)continue e;break e}}Ke[Le++]=Je}return Ke}nt.prototype=Un(Hn.prototype),nt.prototype.constructor=nt;function mn(l){var i=-1,m=l==null?0:l.length;for(this.clear();++i<m;){var b=l[i];this.set(b[0],b[1])}}function bu(){this.__data__=Zr?Zr(null):{},this.size=0}function Jr(l){var i=this.has(l)&&delete this.__data__[l];return this.size-=i?1:0,i}function Do(l){var i=this.__data__;if(Zr){var m=i[l];return m===N?c:m}return $t.call(i,l)?i[l]:c}function Nr(l){var i=this.__data__;return Zr?i[l]!==c:$t.call(i,l)}function Zs(l,i){var m=this.__data__;return this.size+=this.has(l)?0:1,m[l]=Zr&&i===c?N:i,this}mn.prototype.clear=bu,mn.prototype.delete=Jr,mn.prototype.get=Do,mn.prototype.has=Nr,mn.prototype.set=Zs;function dl(l){var i=-1,m=l==null?0:l.length;for(this.clear();++i<m;){var b=l[i];this.set(b[0],b[1])}}function Ox(){this.__data__=[],this.size=0}function eh(l){var i=this.__data__,m=Vl(i,l);if(m<0)return!1;var b=i.length-1;return m==b?i.pop():rn.call(i,m,1),--this.size,!0}function th(l){var i=this.__data__,m=Vl(i,l);return m<0?c:i[m][1]}function sh(l){return Vl(this.__data__,l)>-1}function Ls(l,i){var m=this.__data__,b=Vl(m,l);return b<0?(++this.size,m.push([l,i])):m[b][1]=i,this}dl.prototype.clear=Ox,dl.prototype.delete=eh,dl.prototype.get=th,dl.prototype.has=sh,dl.prototype.set=Ls;function Cl(l){var i=-1,m=l==null?0:l.length;for(this.clear();++i<m;){var b=l[i];this.set(b[0],b[1])}}function ac(){this.size=0,this.__data__={hash:new mn,map:new(Ua||dl),string:new mn}}function lc(l){var i=Nc(this,l).delete(l);return this.size-=i?1:0,i}function vu(l){return Nc(this,l).get(l)}function ei(l){return Nc(this,l).has(l)}function ti(l,i){var m=Nc(this,l),b=m.size;return m.set(l,i),this.size+=m.size==b?0:1,this}Cl.prototype.clear=ac,Cl.prototype.delete=lc,Cl.prototype.get=vu,Cl.prototype.has=ei,Cl.prototype.set=ti;function _r(l){var i=-1,m=l==null?0:l.length;for(this.__data__=new Cl;++i<m;)this.add(l[i])}function Lx(l){return this.__data__.set(l,N),this}function ah(l){return this.__data__.has(l)}_r.prototype.add=_r.prototype.push=Lx,_r.prototype.has=ah;function ul(l){var i=this.__data__=new dl(l);this.size=i.size}function wr(){this.__data__=new dl,this.size=0}function ju(l){var i=this.__data__,m=i.delete(l);return this.size=i.size,m}function zo(l){return this.__data__.get(l)}function Dx(l){return this.__data__.has(l)}function si(l,i){var m=this.__data__;if(m instanceof dl){var b=m.__data__;if(!Ua||b.length<f-1)return b.push([l,i]),this.size=++m.size,this;m=this.__data__=new Cl(b)}return m.set(l,i),this.size=m.size,this}ul.prototype.clear=wr,ul.prototype.delete=ju,ul.prototype.get=zo,ul.prototype.has=Dx,ul.prototype.set=si;function Bo(l,i){var m=st(l),b=!m&&Mr(l),C=!m&&!b&&er(l),O=!m&&!b&&!C&&tr(l),P=m||b||C||O,X=P?_o(l.length,gr):[],ne=X.length;for(var Se in l)(i||$t.call(l,Se))&&!(P&&(Se=="length"||C&&(Se=="offset"||Se=="parent")||O&&(Se=="buffer"||Se=="byteLength"||Se=="byteOffset")||Ol(Se,ne)))&&X.push(Se);return X}function nc(l){var i=l.length;return i?l[di(0,i-1)]:c}function Uo(l,i){return Tc(da(l),kl(i,0,l.length))}function zx(l){return Tc(da(l))}function Ho(l,i,m){(m!==c&&!Ya(l[i],m)||m===c&&!(i in l))&&Ha(l,i,m)}function Al(l,i,m){var b=l[i];(!($t.call(l,i)&&Ya(b,m))||m===c&&!(i in l))&&Ha(l,i,m)}function Vl(l,i){for(var m=l.length;m--;)if(Ya(l[m][0],i))return m;return-1}function Bx(l,i,m,b){return Yl(l,function(C,O,P){i(b,C,m(C),P)}),b}function yu(l,i){return l&&hl(i,Ws(i),l)}function ai(l,i){return l&&hl(i,Ca(i),l)}function Ha(l,i,m){i=="__proto__"&&nl?nl(l,i,{configurable:!0,enumerable:!0,value:m,writable:!0}):l[i]=m}function li(l,i){for(var m=-1,b=i.length,C=me(b),O=l==null;++m<b;)C[m]=O?c:sr(l,i[m]);return C}function kl(l,i,m){return l===l&&(m!==c&&(l=l<=m?l:m),i!==c&&(l=l>=i?l:i)),l}function oa(l,i,m,b,C,O){var P,X=i&S,ne=i&M,Se=i&U;if(m&&(P=C?m(l,b,C,O):m(l)),P!==c)return P;if(!bs(l))return l;var Ce=st(l);if(Ce){if(P=e0(l),!X)return da(l,P)}else{var Ee=Js(l),Le=Ee==ns||Ee==Wt;if(er(l))return Du(l,X);if(Ee==is||Ee==Re||Le&&!C){if(P=ne||Le?{}:Qu(l),!X)return ne?Qx(l,ai(P,l)):Wx(l,yu(P,l))}else{if(!ss[Ee])return C?l:{};P=t0(l,Ee,X)}}O||(O=new ul);var Pe=O.get(l);if(Pe)return Pe;O.set(l,P),Vc(l)?l.forEach(function(Je){P.add(oa(Je,i,m,Je,l,O))}):B0(l)&&l.forEach(function(Je,Et){P.set(Et,oa(Je,i,m,Et,l,O))});var Ke=Se?ne?Wu:ad:ne?Ca:Ws,bt=Ce?c:Ke(l);return La(bt||l,function(Je,Et){bt&&(Et=Je,Je=l[Et]),Al(P,Et,oa(Je,i,m,Et,l,O))}),P}function Ux(l){var i=Ws(l);return function(m){return Fn(m,l,i)}}function Fn(l,i,m){var b=m.length;if(l==null)return!b;for(l=Gt(l);b--;){var C=m[b],O=i[C],P=l[C];if(P===c&&!(C in l)||!O(P))return!1}return!0}function Nu(l,i,m){if(typeof l!="function")throw new za(p);return Ec(function(){l.apply(c,m)},i)}function ml(l,i,m,b){var C=-1,O=vo,P=!0,X=l.length,ne=[],Se=i.length;if(!X)return ne;m&&(i=hs(i,Da(m))),b?(O=Wi,P=!1):i.length>=f&&(O=Qi,P=!1,i=new _r(i));e:for(;++C<X;){var Ce=l[C],Ee=m==null?Ce:m(Ce);if(Ce=b||Ce!==0?Ce:0,P&&Ee===Ee){for(var Le=Se;Le--;)if(i[Le]===Ee)continue e;ne.push(Ce)}else O(i,Ee,b)||ne.push(Ce)}return ne}var Yl=Hu(Tl),$o=Hu(qo,!0);function qn(l,i){var m=!0;return Yl(l,function(b,C,O){return m=!!i(b,C,O),m}),m}function El(l,i,m){for(var b=-1,C=l.length;++b<C;){var O=l[b],P=i(O);if(P!=null&&(X===c?P===P&&!Sa(P):m(P,X)))var X=P,ne=O}return ne}function rc(l,i,m,b){var C=l.length;for(m=Ze(m),m<0&&(m=-m>C?0:C+m),b=b===c||b>C?C:Ze(b),b<0&&(b+=C),b=m>b?0:Lm(b);m<b;)l[m++]=i;return l}function Fo(l,i){var m=[];return Yl(l,function(b,C,O){i(b,C,O)&&m.push(b)}),m}function Fs(l,i,m,b,C){var O=-1,P=l.length;for(m||(m=Zu),C||(C=[]);++O<P;){var X=l[O];i>0&&m(X)?i>1?Fs(X,i-1,m,b,C):Ln(C,X):b||(C[C.length]=X)}return C}var Sr=$u(),ni=$u(!0);function Tl(l,i){return l&&Sr(l,i,Ws)}function qo(l,i){return l&&ni(l,i,Ws)}function xn(l,i){return On(i,function(m){return Wa(l[m])})}function Wl(l,i){i=Pa(i,l);for(var m=0,b=i.length;l!=null&&m<b;)l=l[va(i[m++])];return m&&m==b?l:c}function _u(l,i,m){var b=i(l);return st(l)?b:Ln(b,m(l))}function Ks(l){return l==null?l===c?os:Mt:cn&&cn in Gt(l)?_c(l):Ju(l)}function ic(l,i){return l>i}function $a(l,i){return l!=null&&$t.call(l,i)}function xl(l,i){return l!=null&&i in Gt(l)}function Pn(l,i,m){return l>=Ms(i,m)&&l<_s(i,m)}function cc(l,i,m){for(var b=m?Wi:vo,C=l[0].length,O=l.length,P=O,X=me(O),ne=1/0,Se=[];P--;){var Ce=l[P];P&&i&&(Ce=hs(Ce,Da(i))),ne=Ms(Ce.length,ne),X[P]=!m&&(i||C>=120&&Ce.length>=120)?new _r(P&&Ce):c}Ce=l[0];var Ee=-1,Le=X[0];e:for(;++Ee<C&&Se.length<ne;){var Pe=Ce[Ee],Ke=i?i(Pe):Pe;if(Pe=m||Pe!==0?Pe:0,!(Le?Qi(Le,Ke):b(Se,Ke,m))){for(P=O;--P;){var bt=X[P];if(!(bt?Qi(bt,Ke):b(l[P],Ke,m)))continue e}Le&&Le.push(Ke),Se.push(Pe)}}return Se}function Hx(l,i,m,b){return Tl(l,function(C,O,P){i(b,m(C),O,P)}),b}function fl(l,i,m){i=Pa(i,l),l=Ac(l,i);var b=l==null?l:l[va(ms(i))];return b==null?c:Oa(b,l,m)}function ga(l){return Cs(l)&&Ks(l)==Re}function Es(l){return Cs(l)&&Ks(l)==ts}function Po(l){return Cs(l)&&Ks(l)==Oe}function Fa(l,i,m,b,C){return l===i?!0:l==null||i==null||!Cs(l)&&!Cs(i)?l!==l&&i!==i:rt(l,i,m,b,Fa,C)}function rt(l,i,m,b,C,O){var P=st(l),X=st(i),ne=P?De:Js(l),Se=X?De:Js(i);ne=ne==Re?is:ne,Se=Se==Re?is:Se;var Ce=ne==is,Ee=Se==is,Le=ne==Se;if(Le&&er(l)){if(!er(i))return!1;P=!0,Ce=!1}if(Le&&!Ce)return O||(O=new ul),P||tr(l)?jc(l,i,m,b,C,O):Jx(l,i,ne,m,b,C,O);if(!(m&k)){var Pe=Ce&&$t.call(l,"__wrapped__"),Ke=Ee&&$t.call(i,"__wrapped__");if(Pe||Ke){var bt=Pe?l.value():l,Je=Ke?i.value():i;return O||(O=new ul),C(bt,Je,m,b,O)}}return Le?(O||(O=new ul),Yu(l,i,m,b,C,O)):!1}function Zt(l){return Cs(l)&&Js(l)==Nt}function ws(l,i,m,b){var C=m.length,O=C,P=!b;if(l==null)return!O;for(l=Gt(l);C--;){var X=m[C];if(P&&X[2]?X[1]!==l[X[0]]:!(X[0]in l))return!1}for(;++C<O;){X=m[C];var ne=X[0],Se=l[ne],Ce=X[1];if(P&&X[2]){if(Se===c&&!(ne in l))return!1}else{var Ee=new ul;if(b)var Le=b(Se,Ce,ne,l,i,Ee);if(!(Le===c?Fa(Ce,Se,k|B,b,Ee):Le))return!1}}return!0}function oc(l){if(!bs(l)||s0(l))return!1;var i=Wa(l)?Vr:Fl;return i.test(na(l))}function ri(l){return Cs(l)&&Ks(l)==es}function Cr(l){return Cs(l)&&Js(l)==It}function Io(l){return Cs(l)&&wd(l.length)&&!!Xt[Ks(l)]}function ii(l){return typeof l=="function"?l:l==null?ma:typeof l=="object"?st(l)?wu(l[0],l[1]):Vo(l):T(l)}function In(l){if(!hi(l))return Xr(l);var i=[];for(var m in Gt(l))$t.call(l,m)&&m!="constructor"&&i.push(m);return i}function lh(l){if(!bs(l))return hn(l);var i=hi(l),m=[];for(var b in l)b=="constructor"&&(i||!$t.call(l,b))||m.push(b);return m}function gs(l,i){return l<i}function Go(l,i){var m=-1,b=wa(l)?me(l.length):[];return Yl(l,function(C,O,P){b[++m]=i(C,O,P)}),b}function Vo(l){var i=ld(l);return i.length==1&&i[0][2]?od(i[0][0],i[0][1]):function(m){return m===l||ws(m,l,i)}}function wu(l,i){return Sc(l)&&Xl(i)?od(va(l),i):function(m){var b=sr(m,l);return b===c&&b===i?zm(m,l):Fa(i,b,k|B)}}function dc(l,i,m,b,C){l!==i&&Sr(i,function(O,P){if(C||(C=new ul),bs(O))nh(l,i,P,m,dc,b,C);else{var X=b?b(as(l,P),O,P+"",l,i,C):c;X===c&&(X=O),Ho(l,P,X)}},Ca)}function nh(l,i,m,b,C,O,P){var X=as(l,m),ne=as(i,m),Se=P.get(ne);if(Se){Ho(l,m,Se);return}var Ce=O?O(X,ne,m+"",l,i,P):c,Ee=Ce===c;if(Ee){var Le=st(ne),Pe=!Le&&er(ne),Ke=!Le&&!Pe&&tr(ne);Ce=ne,Le||Pe||Ke?st(X)?Ce=X:Rs(X)?Ce=da(X):Pe?(Ee=!1,Ce=Du(ne,!0)):Ke?(Ee=!1,Ce=zu(ne,!0)):Ce=[]:Ic(ne)||Mr(ne)?(Ce=X,Mr(X)?Ce=Sd(X):(!bs(X)||Wa(X))&&(Ce=Qu(ne))):Ee=!1}Ee&&(P.set(ne,Ce),C(Ce,ne,b,O,P),P.delete(ne)),Ho(l,m,Ce)}function Yo(l,i){var m=l.length;if(m)return i+=i<0?m:0,Ol(i,m)?l[i]:c}function Wo(l,i,m){i.length?i=hs(i,function(O){return st(O)?function(P){return Wl(P,O.length===1?O[0]:O)}:O}):i=[ma];var b=-1;i=hs(i,Da(We()));var C=Go(l,function(O,P,X){var ne=hs(i,function(Se){return Se(O)});return{criteria:ne,index:++b,value:O}});return yx(C,function(O,P){return Yx(O,P,m)})}function Su(l,i){return aa(l,i,function(m,b){return zm(l,b)})}function aa(l,i,m){for(var b=-1,C=i.length,O={};++b<C;){var P=i[b],X=Wl(l,P);m(X,P)&&ui(O,Pa(P,l),X)}return O}function Ts(l){return function(i){return Wl(i,l)}}function ci(l,i,m,b){var C=b?Qf:Fr,O=-1,P=i.length,X=l;for(l===i&&(i=da(i)),m&&(X=hs(l,Da(m)));++O<P;)for(var ne=0,Se=i[O],Ce=m?m(Se):Se;(ne=C(X,Ce,ne,b))>-1;)X!==l&&rn.call(X,ne,1),rn.call(l,ne,1);return l}function oi(l,i){for(var m=l?i.length:0,b=m-1;m--;){var C=i[m];if(m==b||C!==O){var O=C;Ol(C)?rn.call(l,C,1):uc(l,C)}}return l}function di(l,i){return l+ec(on()*(i-l+1))}function Cu(l,i,m,b){for(var C=-1,O=_s(Wr((i-l)/(m||1)),0),P=me(O);O--;)P[b?O:++C]=l,l+=m;return P}function Rl(l,i){var m="";if(!l||i<1||i>Z)return m;do i%2&&(m+=l),i=ec(i/2),i&&(l+=l);while(i);return m}function it(l,i){return dd(em(l,i,ma),l+"")}function Au(l){return nc(Ei(l))}function ku(l,i){var m=Ei(l);return Tc(m,kl(i,0,m.length))}function ui(l,i,m,b){if(!bs(l))return l;i=Pa(i,l);for(var C=-1,O=i.length,P=O-1,X=l;X!=null&&++C<O;){var ne=va(i[C]),Se=m;if(ne==="__proto__"||ne==="constructor"||ne==="prototype")return l;if(C!=P){var Ce=X[ne];Se=b?b(Ce,ne,X):c,Se===c&&(Se=bs(Ce)?Ce:Ol(i[C+1])?[]:{})}Al(X,ne,Se),X=X[ne]}return l}var Eu=Os?function(l,i){return Os.set(l,i),l}:ma,$x=nl?function(l,i){return nl(l,"toString",{configurable:!0,enumerable:!1,value:Ri(i),writable:!0})}:ma;function Fx(l){return Tc(Ei(l))}function qa(l,i,m){var b=-1,C=l.length;i<0&&(i=-i>C?0:C+i),m=m>C?C:m,m<0&&(m+=C),C=i>m?0:m-i>>>0,i>>>=0;for(var O=me(C);++b<C;)O[b]=l[b+i];return O}function qx(l,i){var m;return Yl(l,function(b,C,O){return m=i(b,C,O),!m}),!!m}function mi(l,i,m){var b=0,C=l==null?b:l.length;if(typeof i=="number"&&i===i&&C<=V){for(;b<C;){var O=b+C>>>1,P=l[O];P!==null&&!Sa(P)&&(m?P<=i:P<i)?b=O+1:C=O}return C}return Qo(l,i,ma,m)}function Qo(l,i,m,b){var C=0,O=l==null?0:l.length;if(O===0)return 0;i=m(i);for(var P=i!==i,X=i===null,ne=Sa(i),Se=i===c;C<O;){var Ce=ec((C+O)/2),Ee=m(l[Ce]),Le=Ee!==c,Pe=Ee===null,Ke=Ee===Ee,bt=Sa(Ee);if(P)var Je=b||Ke;else Se?Je=Ke&&(b||Le):X?Je=Ke&&Le&&(b||!Pe):ne?Je=Ke&&Le&&!Pe&&(b||!bt):Pe||bt?Je=!1:Je=b?Ee<=i:Ee<i;Je?C=Ce+1:O=Ce}return Ms(O,ee)}function Px(l,i){for(var m=-1,b=l.length,C=0,O=[];++m<b;){var P=l[m],X=i?i(P):P;if(!m||!Ya(X,ne)){var ne=X;O[C++]=P===0?0:P}}return O}function Tu(l){return typeof l=="number"?l:Sa(l)?ye:+l}function ba(l){if(typeof l=="string")return l;if(st(l))return hs(l,ba)+"";if(Sa(l))return yr?yr.call(l):"";var i=l+"";return i=="0"&&1/l==-L?"-0":i}function fn(l,i,m){var b=-1,C=vo,O=l.length,P=!0,X=[],ne=X;if(m)P=!1,C=Wi;else if(O>=f){var Se=i?null:Zx(l);if(Se)return Co(Se);P=!1,C=Qi,ne=new _r}else ne=i?[]:X;e:for(;++b<O;){var Ce=l[b],Ee=i?i(Ce):Ce;if(Ce=m||Ce!==0?Ce:0,P&&Ee===Ee){for(var Le=ne.length;Le--;)if(ne[Le]===Ee)continue e;i&&ne.push(Ee),X.push(Ce)}else C(ne,Ee,m)||(ne!==X&&ne.push(Ee),X.push(Ce))}return X}function uc(l,i){return i=Pa(i,l),l=Ac(l,i),l==null||delete l[va(ms(i))]}function Ru(l,i,m,b){return ui(l,i,m(Wl(l,i)),b)}function mc(l,i,m,b){for(var C=l.length,O=b?C:-1;(b?O--:++O<C)&&i(l[O],O,l););return m?qa(l,b?0:O,b?O+1:C):qa(l,b?O+1:0,b?C:O)}function Mu(l,i){var m=l;return m instanceof nt&&(m=m.value()),nu(i,function(b,C){return C.func.apply(C.thisArg,Ln([b],C.args))},m)}function Xo(l,i,m){var b=l.length;if(b<2)return b?fn(l[0]):[];for(var C=-1,O=me(b);++C<b;)for(var P=l[C],X=-1;++X<b;)X!=C&&(O[C]=ml(O[C]||P,l[X],i,m));return fn(Fs(O,1),i,m)}function Ou(l,i,m){for(var b=-1,C=l.length,O=i.length,P={};++b<C;){var X=b<O?i[b]:c;m(P,l[b],X)}return P}function Lu(l){return Rs(l)?l:[]}function Zo(l){return typeof l=="function"?l:ma}function Pa(l,i){return st(l)?l:Sc(l,i)?[l]:tm(qt(l))}var Ix=it;function Ml(l,i,m){var b=l.length;return m=m===c?b:m,!i&&m>=b?l:qa(l,i,m)}var xc=Rx||function(l){return $s.clearTimeout(l)};function Du(l,i){if(i)return l.slice();var m=l.length,b=Mo?Mo(m):new l.constructor(m);return l.copy(b),b}function fc(l){var i=new l.constructor(l.byteLength);return new br(i).set(new br(l)),i}function rh(l,i){var m=i?fc(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.byteLength)}function Gx(l){var i=new l.constructor(l.source,Ea.exec(l));return i.lastIndex=l.lastIndex,i}function Vx(l){return Kr?Gt(Kr.call(l)):{}}function zu(l,i){var m=i?fc(l.buffer):l.buffer;return new l.constructor(m,l.byteOffset,l.length)}function Bu(l,i){if(l!==i){var m=l!==c,b=l===null,C=l===l,O=Sa(l),P=i!==c,X=i===null,ne=i===i,Se=Sa(i);if(!X&&!Se&&!O&&l>i||O&&P&&ne&&!X&&!Se||b&&P&&ne||!m&&ne||!C)return 1;if(!b&&!O&&!Se&&l<i||Se&&m&&C&&!b&&!O||X&&m&&C||!P&&C||!ne)return-1}return 0}function Yx(l,i,m){for(var b=-1,C=l.criteria,O=i.criteria,P=C.length,X=m.length;++b<P;){var ne=Bu(C[b],O[b]);if(ne){if(b>=X)return ne;var Se=m[b];return ne*(Se=="desc"?-1:1)}}return l.index-i.index}function Ko(l,i,m,b){for(var C=-1,O=l.length,P=m.length,X=-1,ne=i.length,Se=_s(O-P,0),Ce=me(ne+Se),Ee=!b;++X<ne;)Ce[X]=i[X];for(;++C<P;)(Ee||C<O)&&(Ce[m[C]]=l[C]);for(;Se--;)Ce[X++]=l[C++];return Ce}function Uu(l,i,m,b){for(var C=-1,O=l.length,P=-1,X=m.length,ne=-1,Se=i.length,Ce=_s(O-X,0),Ee=me(Ce+Se),Le=!b;++C<Ce;)Ee[C]=l[C];for(var Pe=C;++ne<Se;)Ee[Pe+ne]=i[ne];for(;++P<X;)(Le||C<O)&&(Ee[Pe+m[P]]=l[C++]);return Ee}function da(l,i){var m=-1,b=l.length;for(i||(i=me(b));++m<b;)i[m]=l[m];return i}function hl(l,i,m,b){var C=!m;m||(m={});for(var O=-1,P=i.length;++O<P;){var X=i[O],ne=b?b(m[X],l[X],X,m,l):c;ne===c&&(ne=l[X]),C?Ha(m,X,ne):Al(m,X,ne)}return m}function Wx(l,i){return hl(l,nd(l),i)}function Qx(l,i){return hl(l,wc(l),i)}function Jo(l,i){return function(m,b){var C=st(m)?If:Bx,O=i?i():{};return C(m,l,We(b,2),O)}}function Gn(l){return it(function(i,m){var b=-1,C=m.length,O=C>1?m[C-1]:c,P=C>2?m[2]:c;for(O=l.length>3&&typeof O=="function"?(C--,O):c,P&&la(m[0],m[1],P)&&(O=C<3?c:O,C=1),i=Gt(i);++b<C;){var X=m[b];X&&l(i,X,b,O)}return i})}function Hu(l,i){return function(m,b){if(m==null)return m;if(!wa(m))return l(m,b);for(var C=m.length,O=i?C:-1,P=Gt(m);(i?O--:++O<C)&&b(P[O],O,P)!==!1;);return m}}function $u(l){return function(i,m,b){for(var C=-1,O=Gt(i),P=b(i),X=P.length;X--;){var ne=P[l?X:++C];if(m(O[ne],ne,O)===!1)break}return i}}function Fu(l,i,m){var b=i&A,C=hc(l);function O(){var P=this&&this!==$s&&this instanceof O?C:l;return P.apply(b?m:this,arguments)}return O}function qu(l){return function(i){i=qt(i);var m=pr(i)?js(i):c,b=m?m[0]:i.charAt(0),C=m?Ml(m,1).join(""):i.slice(1);return b[l]()+C}}function Ar(l){return function(i){return nu(uf(Ti(i).replace(su,"")),l,"")}}function hc(l){return function(){var i=arguments;switch(i.length){case 0:return new l;case 1:return new l(i[0]);case 2:return new l(i[0],i[1]);case 3:return new l(i[0],i[1],i[2]);case 4:return new l(i[0],i[1],i[2],i[3]);case 5:return new l(i[0],i[1],i[2],i[3],i[4]);case 6:return new l(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new l(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var m=Un(l.prototype),b=l.apply(m,i);return bs(b)?b:m}}function ih(l,i,m){var b=hc(l);function C(){for(var O=arguments.length,P=me(O),X=O,ne=Ss(C);X--;)P[X]=arguments[X];var Se=O<3&&P[0]!==ne&&P[O-1]!==ne?[]:nn(P,ne);if(O-=Se.length,O<m)return sd(l,i,fi,C.placeholder,c,P,Se,c,c,m-O);var Ce=this&&this!==$s&&this instanceof C?b:l;return Oa(Ce,this,P)}return C}function Pu(l){return function(i,m,b){var C=Gt(i);if(!wa(i)){var O=We(m,3);i=Ws(i),m=function(X){return O(C[X],X,C)}}var P=l(i,m,b);return P>-1?C[O?i[P]:P]:c}}function xi(l){return Ql(function(i){var m=i.length,b=m,C=pa.prototype.thru;for(l&&i.reverse();b--;){var O=i[b];if(typeof O!="function")throw new za(p);if(C&&!P&&ys(O)=="wrapper")var P=new pa([],!0)}for(b=P?b:m;++b<m;){O=i[b];var X=ys(O),ne=X=="wrapper"?yc(O):c;ne&&Cc(ne[0])&&ne[1]==(F|w|z|J)&&!ne[4].length&&ne[9]==1?P=P[ys(ne[0])].apply(P,ne[3]):P=O.length==1&&Cc(O)?P[X]():P.thru(O)}return function(){var Se=arguments,Ce=Se[0];if(P&&Se.length==1&&st(Ce))return P.plant(Ce).value();for(var Ee=0,Le=m?i[Ee].apply(this,Se):Ce;++Ee<m;)Le=i[Ee].call(this,Le);return Le}})}function fi(l,i,m,b,C,O,P,X,ne,Se){var Ce=i&F,Ee=i&A,Le=i&$,Pe=i&(w|D),Ke=i&I,bt=Le?c:hc(l);function Je(){for(var Et=arguments.length,Lt=me(Et),Bl=Et;Bl--;)Lt[Bl]=arguments[Bl];if(Pe)var Xa=Ss(Je),Ul=Xi(Lt,Xa);if(b&&(Lt=Ko(Lt,b,C,Pe)),O&&(Lt=Uu(Lt,O,P,Pe)),Et-=Ul,Pe&&Et<Se){var Ps=nn(Lt,Xa);return sd(l,i,fi,Je.placeholder,m,Lt,Ps,X,ne,Se-Et)}var wn=Ee?m:this,Lr=Le?wn[l]:l;return Et=Lt.length,X?Lt=kc(Lt,X):Ke&&Et>1&&Lt.reverse(),Ce&&ne<Et&&(Lt.length=ne),this&&this!==$s&&this instanceof Je&&(Lr=bt||hc(Lr)),Lr.apply(wn,Lt)}return Je}function pc(l,i){return function(m,b){return Hx(m,l,i(b),{})}}function gc(l,i){return function(m,b){var C;if(m===c&&b===c)return i;if(m!==c&&(C=m),b!==c){if(C===c)return b;typeof m=="string"||typeof b=="string"?(m=ba(m),b=ba(b)):(m=Tu(m),b=Tu(b)),C=l(m,b)}return C}}function ed(l){return Ql(function(i){return i=hs(i,Da(We())),it(function(m){var b=this;return l(i,function(C){return Oa(C,b,m)})})})}function Vn(l,i){i=i===c?" ":ba(i);var m=i.length;if(m<2)return m?Rl(i,l):i;var b=Rl(i,Wr(l/qr(i)));return pr(i)?Ml(js(b),0,l).join(""):b.slice(0,l)}function Xx(l,i,m,b){var C=i&A,O=hc(l);function P(){for(var X=-1,ne=arguments.length,Se=-1,Ce=b.length,Ee=me(Ce+ne),Le=this&&this!==$s&&this instanceof P?O:l;++Se<Ce;)Ee[Se]=b[Se];for(;ne--;)Ee[Se++]=arguments[++X];return Oa(Le,C?m:this,Ee)}return P}function td(l){return function(i,m,b){return b&&typeof b!="number"&&la(i,m,b)&&(m=b=c),i=Nn(i),m===c?(m=i,i=0):m=Nn(m),b=b===c?i<m?1:-1:Nn(b),Cu(i,m,b,l)}}function bc(l){return function(i,m){return typeof i=="string"&&typeof m=="string"||(i=Qa(i),m=Qa(m)),l(i,m)}}function sd(l,i,m,b,C,O,P,X,ne,Se){var Ce=i&w,Ee=Ce?P:c,Le=Ce?c:P,Pe=Ce?O:c,Ke=Ce?c:O;i|=Ce?z:W,i&=~(Ce?W:z),i&Y||(i&=-4);var bt=[l,i,C,Pe,Ee,Ke,Le,X,ne,Se],Je=m.apply(c,bt);return Cc(l)&&l0(Je,bt),Je.placeholder=b,pi(Je,l,i)}function vc(l){var i=ps[l];return function(m,b){if(m=Qa(m),b=b==null?0:Ms(Ze(b),292),b&&Ba(m)){var C=(qt(m)+"e").split("e"),O=i(C[0]+"e"+(+C[1]+b));return C=(qt(O)+"e").split("e"),+(C[0]+"e"+(+C[1]-b))}return i(m)}}var Zx=Dn&&1/Co(new Dn([,-0]))[1]==L?function(l){return new Dn(l)}:a;function Iu(l){return function(i){var m=Js(i);return m==Nt?So(i):m==It?Zf(i):Nx(i,l(i))}}function ua(l,i,m,b,C,O,P,X){var ne=i&$;if(!ne&&typeof l!="function")throw new za(p);var Se=b?b.length:0;if(Se||(i&=-97,b=C=c),P=P===c?P:_s(Ze(P),0),X=X===c?X:Ze(X),Se-=C?C.length:0,i&W){var Ce=b,Ee=C;b=C=c}var Le=ne?c:yc(l),Pe=[l,i,m,b,C,Ce,Ee,O,P,X];if(Le&&a0(Pe,Le),l=Pe[0],i=Pe[1],m=Pe[2],b=Pe[3],C=Pe[4],X=Pe[9]=Pe[9]===c?ne?0:l.length:_s(Pe[9]-Se,0),!X&&i&(w|D)&&(i&=-25),!i||i==A)var Ke=Fu(l,i,m);else i==w||i==D?Ke=ih(l,i,X):(i==z||i==(A|z))&&!C.length?Ke=Xx(l,i,m,b):Ke=fi.apply(c,Pe);var bt=Le?Eu:l0;return pi(bt(Ke,Pe),l,i)}function Gu(l,i,m,b){return l===c||Ya(l,Gr[m])&&!$t.call(b,m)?i:l}function Vu(l,i,m,b,C,O){return bs(l)&&bs(i)&&(O.set(i,l),dc(l,i,c,Vu,O),O.delete(i)),l}function Kx(l){return Ic(l)?c:l}function jc(l,i,m,b,C,O){var P=m&k,X=l.length,ne=i.length;if(X!=ne&&!(P&&ne>X))return!1;var Se=O.get(l),Ce=O.get(i);if(Se&&Ce)return Se==i&&Ce==l;var Ee=-1,Le=!0,Pe=m&B?new _r:c;for(O.set(l,i),O.set(i,l);++Ee<X;){var Ke=l[Ee],bt=i[Ee];if(b)var Je=P?b(bt,Ke,Ee,i,l,O):b(Ke,bt,Ee,l,i,O);if(Je!==c){if(Je)continue;Le=!1;break}if(Pe){if(!ru(i,function(Et,Lt){if(!Qi(Pe,Lt)&&(Ke===Et||C(Ke,Et,m,b,O)))return Pe.push(Lt)})){Le=!1;break}}else if(!(Ke===bt||C(Ke,bt,m,b,O))){Le=!1;break}}return O.delete(l),O.delete(i),Le}function Jx(l,i,m,b,C,O,P){switch(m){case ds:if(l.byteLength!=i.byteLength||l.byteOffset!=i.byteOffset)return!1;l=l.buffer,i=i.buffer;case ts:return!(l.byteLength!=i.byteLength||!O(new br(l),new br(i)));case ke:case Oe:case rs:return Ya(+l,+i);case pt:return l.name==i.name&&l.message==i.message;case es:case fs:return l==i+"";case Nt:var X=So;case It:var ne=b&k;if(X||(X=Co),l.size!=i.size&&!ne)return!1;var Se=P.get(l);if(Se)return Se==i;b|=B,P.set(l,i);var Ce=jc(X(l),X(i),b,C,O,P);return P.delete(l),Ce;case Is:if(Kr)return Kr.call(l)==Kr.call(i)}return!1}function Yu(l,i,m,b,C,O){var P=m&k,X=ad(l),ne=X.length,Se=ad(i),Ce=Se.length;if(ne!=Ce&&!P)return!1;for(var Ee=ne;Ee--;){var Le=X[Ee];if(!(P?Le in i:$t.call(i,Le)))return!1}var Pe=O.get(l),Ke=O.get(i);if(Pe&&Ke)return Pe==i&&Ke==l;var bt=!0;O.set(l,i),O.set(i,l);for(var Je=P;++Ee<ne;){Le=X[Ee];var Et=l[Le],Lt=i[Le];if(b)var Bl=P?b(Lt,Et,Le,i,l,O):b(Et,Lt,Le,l,i,O);if(!(Bl===c?Et===Lt||C(Et,Lt,m,b,O):Bl)){bt=!1;break}Je||(Je=Le=="constructor")}if(bt&&!Je){var Xa=l.constructor,Ul=i.constructor;Xa!=Ul&&"constructor"in l&&"constructor"in i&&!(typeof Xa=="function"&&Xa instanceof Xa&&typeof Ul=="function"&&Ul instanceof Ul)&&(bt=!1)}return O.delete(l),O.delete(i),bt}function Ql(l){return dd(em(l,c,us),l+"")}function ad(l){return _u(l,Ws,nd)}function Wu(l){return _u(l,Ca,wc)}var yc=Os?function(l){return Os.get(l)}:a;function ys(l){for(var i=l.name+"",m=Ft[i],b=$t.call(Ft,i)?m.length:0;b--;){var C=m[b],O=C.func;if(O==null||O==l)return C.name}return i}function Ss(l){var i=$t.call(R,"placeholder")?R:l;return i.placeholder}function We(){var l=R.iteratee||Kc;return l=l===Kc?ii:l,arguments.length?l(arguments[0],arguments[1]):l}function Nc(l,i){var m=l.__data__;return cd(i)?m[typeof i=="string"?"string":"hash"]:m.map}function ld(l){for(var i=Ws(l),m=i.length;m--;){var b=i[m],C=l[b];i[m]=[b,C,Xl(C)]}return i}function Yn(l,i){var m=_x(l,i);return oc(m)?m:c}function _c(l){var i=$t.call(l,cn),m=l[cn];try{l[cn]=c;var b=!0}catch{}var C=ha.call(l);return b&&(i?l[cn]=m:delete l[cn]),C}var nd=tc?function(l){return l==null?[]:(l=Gt(l),On(tc(l),function(i){return Ji.call(l,i)}))}:_e,wc=tc?function(l){for(var i=[];l;)Ln(i,nd(l)),l=Il(l);return i}:_e,Js=Ks;(cl&&Js(new cl(new ArrayBuffer(1)))!=ds||Ua&&Js(new Ua)!=Nt||Lo&&Js(Lo.resolve())!=zs||Dn&&Js(new Dn)!=It||jr&&Js(new jr)!=Qs)&&(Js=function(l){var i=Ks(l),m=i==is?l.constructor:c,b=m?na(m):"";if(b)switch(b){case kt:return ds;case zn:return Nt;case ol:return zs;case gu:return It;case Bn:return Qs}return i});function ch(l,i,m){for(var b=-1,C=m.length;++b<C;){var O=m[b],P=O.size;switch(O.type){case"drop":l+=P;break;case"dropRight":i-=P;break;case"take":i=Ms(i,l+P);break;case"takeRight":l=_s(l,i-P);break}}return{start:l,end:i}}function rd(l){var i=l.match(Xe);return i?i[1].split(dt):[]}function id(l,i,m){i=Pa(i,l);for(var b=-1,C=i.length,O=!1;++b<C;){var P=va(i[b]);if(!(O=l!=null&&m(l,P)))break;l=l[P]}return O||++b!=C?O:(C=l==null?0:l.length,!!C&&wd(C)&&Ol(P,C)&&(st(l)||Mr(l)))}function e0(l){var i=l.length,m=new l.constructor(i);return i&&typeof l[0]=="string"&&$t.call(l,"index")&&(m.index=l.index,m.input=l.input),m}function Qu(l){return typeof l.constructor=="function"&&!hi(l)?Un(Il(l)):{}}function t0(l,i,m){var b=l.constructor;switch(i){case ts:return fc(l);case ke:case Oe:return new b(+l);case ds:return rh(l,m);case Gs:case Vs:case sa:case He:case ht:case gt:case cs:case Ct:case Hs:return zu(l,m);case Nt:return new b;case rs:case fs:return new b(l);case es:return Gx(l);case It:return new b;case Is:return Vx(l)}}function Xu(l,i){var m=i.length;if(!m)return l;var b=m-1;return i[b]=(m>1?"& ":"")+i[b],i=i.join(m>2?", ":" "),l.replace(Ie,`{
/* [wrapped with `+i+`] */
`)}function Zu(l){return st(l)||Mr(l)||!!(Tx&&l&&l[Tx])}function Ol(l,i){var m=typeof l;return i=i??Z,!!i&&(m=="number"||m!="symbol"&&ca.test(l))&&l>-1&&l%1==0&&l<i}function la(l,i,m){if(!bs(m))return!1;var b=typeof i;return(b=="number"?wa(m)&&Ol(i,m.length):b=="string"&&i in m)?Ya(m[i],l):!1}function Sc(l,i){if(st(l))return!1;var m=typeof l;return m=="number"||m=="symbol"||m=="boolean"||l==null||Sa(l)?!0:$e.test(l)||!Ge.test(l)||i!=null&&l in Gt(i)}function cd(l){var i=typeof l;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?l!=="__proto__":l===null}function Cc(l){var i=ys(l),m=R[i];if(typeof m!="function"||!(i in nt.prototype))return!1;if(l===m)return!0;var b=yc(m);return!!b&&l===b[0]}function s0(l){return!!To&&To in l}var Ku=ko?Wa:oe;function hi(l){var i=l&&l.constructor,m=typeof i=="function"&&i.prototype||Gr;return l===m}function Xl(l){return l===l&&!bs(l)}function od(l,i){return function(m){return m==null?!1:m[l]===i&&(i!==c||l in Gt(m))}}function oh(l){var i=$c(l,function(b){return m.size===j&&m.clear(),b}),m=i.cache;return i}function a0(l,i){var m=l[1],b=i[1],C=m|b,O=C<(A|$|F),P=b==F&&m==w||b==F&&m==J&&l[7].length<=i[8]||b==(F|J)&&i[7].length<=i[8]&&m==w;if(!(O||P))return l;b&A&&(l[2]=i[2],C|=m&A?0:Y);var X=i[3];if(X){var ne=l[3];l[3]=ne?Ko(ne,X,i[4]):X,l[4]=ne?nn(l[3],v):i[4]}return X=i[5],X&&(ne=l[5],l[5]=ne?Uu(ne,X,i[6]):X,l[6]=ne?nn(l[5],v):i[6]),X=i[7],X&&(l[7]=X),b&F&&(l[8]=l[8]==null?i[8]:Ms(l[8],i[8])),l[9]==null&&(l[9]=i[9]),l[0]=i[0],l[1]=C,l}function hn(l){var i=[];if(l!=null)for(var m in Gt(l))i.push(m);return i}function Ju(l){return ha.call(l)}function em(l,i,m){return i=_s(i===c?l.length-1:i,0),function(){for(var b=arguments,C=-1,O=_s(b.length-i,0),P=me(O);++C<O;)P[C]=b[i+C];C=-1;for(var X=me(i+1);++C<i;)X[C]=b[C];return X[i]=m(P),Oa(l,this,X)}}function Ac(l,i){return i.length<2?l:Wl(l,qa(i,0,-1))}function kc(l,i){for(var m=l.length,b=Ms(i.length,m),C=da(l);b--;){var O=i[b];l[b]=Ol(O,m)?C[O]:c}return l}function as(l,i){if(!(i==="constructor"&&typeof l[i]=="function")&&i!="__proto__")return l[i]}var l0=pn(Eu),Ec=vr||function(l,i){return $s.setTimeout(l,i)},dd=pn($x);function pi(l,i,m){var b=i+"";return dd(l,Xu(b,n0(rd(b),m)))}function pn(l){var i=0,m=0;return function(){var b=rl(),C=pe-(b-m);if(m=b,C>0){if(++i>=te)return arguments[0]}else i=0;return l.apply(c,arguments)}}function Tc(l,i){var m=-1,b=l.length,C=b-1;for(i=i===c?b:i;++m<i;){var O=di(m,C),P=l[O];l[O]=l[m],l[m]=P}return l.length=i,l}var tm=oh(function(l){var i=[];return l.charCodeAt(0)===46&&i.push(""),l.replace(Dt,function(m,b,C,O){i.push(C?O.replace(Tt,"$1"):b||m)}),i});function va(l){if(typeof l=="string"||Sa(l))return l;var i=l+"";return i=="0"&&1/l==-L?"-0":i}function na(l){if(l!=null){try{return Eo.call(l)}catch{}try{return l+""}catch{}}return""}function n0(l,i){return La(re,function(m){var b="_."+m[0];i&m[1]&&!vo(l,b)&&l.push(b)}),l.sort()}function ud(l){if(l instanceof nt)return l.clone();var i=new pa(l.__wrapped__,l.__chain__);return i.__actions__=da(l.__actions__),i.__index__=l.__index__,i.__values__=l.__values__,i}function r0(l,i,m){(m?la(l,i,m):i===c)?i=1:i=_s(Ze(i),0);var b=l==null?0:l.length;if(!b||i<1)return[];for(var C=0,O=0,P=me(Wr(b/i));C<b;)P[O++]=qa(l,C,C+=i);return P}function sm(l){for(var i=-1,m=l==null?0:l.length,b=0,C=[];++i<m;){var O=l[i];O&&(C[b++]=O)}return C}function am(){var l=arguments.length;if(!l)return[];for(var i=me(l-1),m=arguments[0],b=l;b--;)i[b-1]=arguments[b];return Ln(st(m)?da(m):[m],Fs(i,1))}var md=it(function(l,i){return Rs(l)?ml(l,Fs(i,1,Rs,!0)):[]}),i0=it(function(l,i){var m=ms(i);return Rs(m)&&(m=c),Rs(l)?ml(l,Fs(i,1,Rs,!0),We(m,2)):[]}),gn=it(function(l,i){var m=ms(i);return Rs(m)&&(m=c),Rs(l)?ml(l,Fs(i,1,Rs,!0),c,m):[]});function Ds(l,i,m){var b=l==null?0:l.length;return b?(i=m||i===c?1:Ze(i),qa(l,i<0?0:i,b)):[]}function lm(l,i,m){var b=l==null?0:l.length;return b?(i=m||i===c?1:Ze(i),i=b-i,qa(l,0,i<0?0:i)):[]}function c0(l,i){return l&&l.length?mc(l,We(i,3),!0,!0):[]}function Ys(l,i){return l&&l.length?mc(l,We(i,3),!0):[]}function dh(l,i,m,b){var C=l==null?0:l.length;return C?(m&&typeof m!="number"&&la(l,i,m)&&(m=0,b=C),rc(l,i,m,b)):[]}function nm(l,i,m){var b=l==null?0:l.length;if(!b)return-1;var C=m==null?0:Ze(m);return C<0&&(C=_s(b+C,0)),jo(l,We(i,3),C)}function rm(l,i,m){var b=l==null?0:l.length;if(!b)return-1;var C=b-1;return m!==c&&(C=Ze(m),C=m<0?_s(b+C,0):Ms(C,b-1)),jo(l,We(i,3),C,!0)}function us(l){var i=l==null?0:l.length;return i?Fs(l,1):[]}function ja(l){var i=l==null?0:l.length;return i?Fs(l,L):[]}function bn(l,i){var m=l==null?0:l.length;return m?(i=i===c?1:Ze(i),Fs(l,i)):[]}function o0(l){for(var i=-1,m=l==null?0:l.length,b={};++i<m;){var C=l[i];b[C[0]]=C[1]}return b}function im(l){return l&&l.length?l[0]:c}function d0(l,i,m){var b=l==null?0:l.length;if(!b)return-1;var C=m==null?0:Ze(m);return C<0&&(C=_s(b+C,0)),Fr(l,i,C)}function uh(l){var i=l==null?0:l.length;return i?qa(l,0,-1):[]}var xd=it(function(l){var i=hs(l,Lu);return i.length&&i[0]===l[0]?cc(i):[]}),ya=it(function(l){var i=ms(l),m=hs(l,Lu);return i===ms(m)?i=c:m.pop(),m.length&&m[0]===l[0]?cc(m,We(i,2)):[]}),Ll=it(function(l){var i=ms(l),m=hs(l,Lu);return i=typeof i=="function"?i:c,i&&m.pop(),m.length&&m[0]===l[0]?cc(m,c,i):[]});function u0(l,i){return l==null?"":Qr.call(l,i)}function ms(l){var i=l==null?0:l.length;return i?l[i-1]:c}function m0(l,i,m){var b=l==null?0:l.length;if(!b)return-1;var C=b;return m!==c&&(C=Ze(m),C=C<0?_s(b+C,0):Ms(C,b-1)),i===i?Jf(l,i,C):jo(l,jx,C,!0)}function vn(l,i){return l&&l.length?Yo(l,Ze(i)):c}var kr=it(Zl);function Zl(l,i){return l&&l.length&&i&&i.length?ci(l,i):l}function cm(l,i,m){return l&&l.length&&i&&i.length?ci(l,i,We(m,2)):l}function om(l,i,m){return l&&l.length&&i&&i.length?ci(l,i,c,m):l}var Dl=Ql(function(l,i){var m=l==null?0:l.length,b=li(l,i);return oi(l,hs(i,function(C){return Ol(C,m)?+C:C}).sort(Bu)),b});function x0(l,i){var m=[];if(!(l&&l.length))return m;var b=-1,C=[],O=l.length;for(i=We(i,3);++b<O;){var P=l[b];i(P,b,l)&&(m.push(P),C.push(b))}return oi(l,C),m}function Wn(l){return l==null?l:Gl.call(l)}function Rc(l,i,m){var b=l==null?0:l.length;return b?(m&&typeof m!="number"&&la(l,i,m)?(i=0,m=b):(i=i==null?0:Ze(i),m=m===c?b:Ze(m)),qa(l,i,m)):[]}function Mc(l,i){return mi(l,i)}function gi(l,i,m){return Qo(l,i,We(m,2))}function f0(l,i){var m=l==null?0:l.length;if(m){var b=mi(l,i);if(b<m&&Ya(l[b],i))return b}return-1}function h0(l,i){return mi(l,i,!0)}function Oc(l,i,m){return Qo(l,i,We(m,2),!0)}function p0(l,i){var m=l==null?0:l.length;if(m){var b=mi(l,i,!0)-1;if(Ya(l[b],i))return b}return-1}function fd(l){return l&&l.length?Px(l):[]}function g0(l,i){return l&&l.length?Px(l,We(i,2)):[]}function mh(l){var i=l==null?0:l.length;return i?qa(l,1,i):[]}function xh(l,i,m){return l&&l.length?(i=m||i===c?1:Ze(i),qa(l,0,i<0?0:i)):[]}function Ht(l,i,m){var b=l==null?0:l.length;return b?(i=m||i===c?1:Ze(i),i=b-i,qa(l,i<0?0:i,b)):[]}function ls(l,i){return l&&l.length?mc(l,We(i,3),!1,!0):[]}function jt(l,i){return l&&l.length?mc(l,We(i,3)):[]}var wt=it(function(l){return fn(Fs(l,1,Rs,!0))}),Vt=it(function(l){var i=ms(l);return Rs(i)&&(i=c),fn(Fs(l,1,Rs,!0),We(i,2))}),Ia=it(function(l){var i=ms(l);return i=typeof i=="function"?i:c,fn(Fs(l,1,Rs,!0),c,i)});function Qn(l){return l&&l.length?fn(l):[]}function bi(l,i){return l&&l.length?fn(l,We(i,2)):[]}function dm(l,i){return i=typeof i=="function"?i:c,l&&l.length?fn(l,c,i):[]}function zl(l){if(!(l&&l.length))return[];var i=0;return l=On(l,function(m){if(Rs(m))return i=_s(m.length,i),!0}),_o(i,function(m){return hs(l,fr(m))})}function Ns(l,i){if(!(l&&l.length))return[];var m=zl(l);return i==null?m:hs(m,function(b){return Oa(i,c,b)})}var Xn=it(function(l,i){return Rs(l)?ml(l,i):[]}),Er=it(function(l){return Xo(On(l,Rs))}),um=it(function(l){var i=ms(l);return Rs(i)&&(i=c),Xo(On(l,Rs),We(i,2))}),Ga=it(function(l){var i=ms(l);return i=typeof i=="function"?i:c,Xo(On(l,Rs),c,i)}),vi=it(zl);function Lc(l,i){return Ou(l||[],i||[],Al)}function Na(l,i){return Ou(l||[],i||[],ui)}var mm=it(function(l){var i=l.length,m=i>1?l[i-1]:c;return m=typeof m=="function"?(l.pop(),m):c,Ns(l,m)});function Dc(l){var i=R(l);return i.__chain__=!0,i}function b0(l,i){return i(l),l}function Tr(l,i){return i(l)}var hd=Ql(function(l){var i=l.length,m=i?l[0]:0,b=this.__wrapped__,C=function(O){return li(O,l)};return i>1||this.__actions__.length||!(b instanceof nt)||!Ol(m)?this.thru(C):(b=b.slice(m,+m+(i?1:0)),b.__actions__.push({func:Tr,args:[C],thisArg:c}),new pa(b,this.__chain__).thru(function(O){return i&&!O.length&&O.push(c),O}))});function Zn(){return Dc(this)}function qs(){return new pa(this.value(),this.__chain__)}function Kn(){this.__values__===c&&(this.__values__=q0(this.value()));var l=this.__index__>=this.__values__.length,i=l?c:this.__values__[this.__index__++];return{done:l,value:i}}function ji(){return this}function jn(l){for(var i,m=this;m instanceof Hn;){var b=ud(m);b.__index__=0,b.__values__=c,i?C.__wrapped__=b:i=b;var C=b;m=m.__wrapped__}return C.__wrapped__=l,i}function xm(){var l=this.__wrapped__;if(l instanceof nt){var i=l;return this.__actions__.length&&(i=new nt(this)),i=i.reverse(),i.__actions__.push({func:Tr,args:[Wn],thisArg:c}),new pa(i,this.__chain__)}return this.thru(Wn)}function fm(){return Mu(this.__wrapped__,this.__actions__)}var v0=Jo(function(l,i,m){$t.call(l,m)?++l[m]:Ha(l,m,1)});function zc(l,i,m){var b=st(l)?gx:qn;return m&&la(l,i,m)&&(i=c),b(l,We(i,3))}function hm(l,i){var m=st(l)?On:Fo;return m(l,We(i,3))}var Va=Pu(nm),j0=Pu(rm);function _a(l,i){return Fs(Bc(l,i),1)}function y0(l,i){return Fs(Bc(l,i),L)}function N0(l,i,m){return m=m===c?1:Ze(m),Fs(Bc(l,i),m)}function _0(l,i){var m=st(l)?La:Yl;return m(l,We(i,3))}function yn(l,i){var m=st(l)?Gf:$o;return m(l,We(i,3))}var pd=Jo(function(l,i,m){$t.call(l,m)?l[m].push(i):Ha(l,m,[i])});function pm(l,i,m,b){l=wa(l)?l:Ei(l),m=m&&!b?Ze(m):0;var C=l.length;return m<0&&(m=_s(C+m,0)),Yc(l)?m<=C&&l.indexOf(i,m)>-1:!!C&&Fr(l,i,m)>-1}var yi=it(function(l,i,m){var b=-1,C=typeof i=="function",O=wa(l)?me(l.length):[];return Yl(l,function(P){O[++b]=C?Oa(i,P,m):fl(P,i,m)}),O}),w0=Jo(function(l,i,m){Ha(l,m,i)});function Bc(l,i){var m=st(l)?hs:Go;return m(l,We(i,3))}function S0(l,i,m,b){return l==null?[]:(st(i)||(i=i==null?[]:[i]),m=b?c:m,st(m)||(m=m==null?[]:[m]),Wo(l,i,m))}var C0=Jo(function(l,i,m){l[m?0:1].push(i)},function(){return[[],[]]});function gd(l,i,m){var b=st(l)?nu:cu,C=arguments.length<3;return b(l,We(i,4),m,C,Yl)}function gm(l,i,m){var b=st(l)?bx:cu,C=arguments.length<3;return b(l,We(i,4),m,C,$o)}function fh(l,i){var m=st(l)?On:Fo;return m(l,jd(We(i,3)))}function hh(l){var i=st(l)?nc:Au;return i(l)}function ph(l,i,m){(m?la(l,i,m):i===c)?i=1:i=Ze(i);var b=st(l)?Uo:ku;return b(l,i)}function A0(l){var i=st(l)?zx:Fx;return i(l)}function k0(l){if(l==null)return 0;if(wa(l))return Yc(l)?qr(l):l.length;var i=Js(l);return i==Nt||i==It?l.size:In(l).length}function Ni(l,i,m){var b=st(l)?ru:qx;return m&&la(l,i,m)&&(i=c),b(l,We(i,3))}var bd=it(function(l,i){if(l==null)return[];var m=i.length;return m>1&&la(l,i[0],i[1])?i=[]:m>2&&la(i[0],i[1],i[2])&&(i=[i[0]]),Wo(l,Fs(i,1),[])}),Uc=Oo||function(){return $s.Date.now()};function E0(l,i){if(typeof i!="function")throw new za(p);return l=Ze(l),function(){if(--l<1)return i.apply(this,arguments)}}function bm(l,i,m){return i=m?c:i,i=l&&i==null?l.length:i,ua(l,F,c,c,c,c,i)}function vm(l,i){var m;if(typeof i!="function")throw new za(p);return l=Ze(l),function(){return--l>0&&(m=i.apply(this,arguments)),l<=1&&(i=c),m}}var vd=it(function(l,i,m){var b=A;if(m.length){var C=nn(m,Ss(vd));b|=z}return ua(l,b,i,m,C)}),jm=it(function(l,i,m){var b=A|$;if(m.length){var C=nn(m,Ss(jm));b|=z}return ua(i,b,l,m,C)});function Hc(l,i,m){i=m?c:i;var b=ua(l,w,c,c,c,c,c,i);return b.placeholder=Hc.placeholder,b}function ym(l,i,m){i=m?c:i;var b=ua(l,D,c,c,c,c,c,i);return b.placeholder=ym.placeholder,b}function Nm(l,i,m){var b,C,O,P,X,ne,Se=0,Ce=!1,Ee=!1,Le=!0;if(typeof l!="function")throw new za(p);i=Qa(i)||0,bs(m)&&(Ce=!!m.leading,Ee="maxWait"in m,O=Ee?_s(Qa(m.maxWait)||0,i):O,Le="trailing"in m?!!m.trailing:Le);function Pe(Ps){var wn=b,Lr=C;return b=C=c,Se=Ps,P=l.apply(Lr,wn),P}function Ke(Ps){return Se=Ps,X=Ec(Et,i),Ce?Pe(Ps):P}function bt(Ps){var wn=Ps-ne,Lr=Ps-Se,Cp=i-wn;return Ee?Ms(Cp,O-Lr):Cp}function Je(Ps){var wn=Ps-ne,Lr=Ps-Se;return ne===c||wn>=i||wn<0||Ee&&Lr>=O}function Et(){var Ps=Uc();if(Je(Ps))return Lt(Ps);X=Ec(Et,bt(Ps))}function Lt(Ps){return X=c,Le&&b?Pe(Ps):(b=C=c,P)}function Bl(){X!==c&&xc(X),Se=0,b=ne=C=X=c}function Xa(){return X===c?P:Lt(Uc())}function Ul(){var Ps=Uc(),wn=Je(Ps);if(b=arguments,C=this,ne=Ps,wn){if(X===c)return Ke(ne);if(Ee)return xc(X),X=Ec(Et,i),Pe(ne)}return X===c&&(X=Ec(Et,i)),P}return Ul.cancel=Bl,Ul.flush=Xa,Ul}var Yt=it(function(l,i){return Nu(l,1,i)}),_m=it(function(l,i,m){return Nu(l,Qa(i)||0,m)});function gh(l){return ua(l,I)}function $c(l,i){if(typeof l!="function"||i!=null&&typeof i!="function")throw new za(p);var m=function(){var b=arguments,C=i?i.apply(this,b):b[0],O=m.cache;if(O.has(C))return O.get(C);var P=l.apply(this,b);return m.cache=O.set(C,P)||O,P};return m.cache=new($c.Cache||Cl),m}$c.Cache=Cl;function jd(l){if(typeof l!="function")throw new za(p);return function(){var i=arguments;switch(i.length){case 0:return!l.call(this);case 1:return!l.call(this,i[0]);case 2:return!l.call(this,i[0],i[1]);case 3:return!l.call(this,i[0],i[1],i[2])}return!l.apply(this,i)}}function bh(l){return vm(2,l)}var vh=Ix(function(l,i){i=i.length==1&&st(i[0])?hs(i[0],Da(We())):hs(Fs(i,1),Da(We()));var m=i.length;return it(function(b){for(var C=-1,O=Ms(b.length,m);++C<O;)b[C]=i[C].call(this,b[C]);return Oa(l,this,b)})}),_i=it(function(l,i){var m=nn(i,Ss(_i));return ua(l,z,c,i,m)}),Rr=it(function(l,i){var m=nn(i,Ss(Rr));return ua(l,W,c,i,m)}),wm=Ql(function(l,i){return ua(l,J,c,c,c,i)});function yd(l,i){if(typeof l!="function")throw new za(p);return i=i===c?i:Ze(i),it(l,i)}function Sm(l,i){if(typeof l!="function")throw new za(p);return i=i==null?0:_s(Ze(i),0),it(function(m){var b=m[i],C=Ml(m,0,i);return b&&Ln(C,b),Oa(l,this,C)})}function Jn(l,i,m){var b=!0,C=!0;if(typeof l!="function")throw new za(p);return bs(m)&&(b="leading"in m?!!m.leading:b,C="trailing"in m?!!m.trailing:C),Nm(l,i,{leading:b,maxWait:i,trailing:C})}function Kl(l){return bm(l,1)}function Fc(l,i){return _i(Zo(i),l)}function jh(){if(!arguments.length)return[];var l=arguments[0];return st(l)?l:[l]}function T0(l){return oa(l,U)}function R0(l,i){return i=typeof i=="function"?i:c,oa(l,U,i)}function M0(l){return oa(l,S|U)}function O0(l,i){return i=typeof i=="function"?i:c,oa(l,S|U,i)}function yh(l,i){return i==null||Fn(l,i,Ws(i))}function Ya(l,i){return l===i||l!==l&&i!==i}var L0=bc(ic),D0=bc(function(l,i){return l>=i}),Mr=ga((function(){return arguments})())?ga:function(l){return Cs(l)&&$t.call(l,"callee")&&!Ji.call(l,"callee")},st=me.isArray,Cm=mx?Da(mx):Es;function wa(l){return l!=null&&wd(l.length)&&!Wa(l)}function Rs(l){return Cs(l)&&wa(l)}function qc(l){return l===!0||l===!1||Cs(l)&&Ks(l)==ke}var er=Mx||oe,z0=xx?Da(xx):Po;function yt(l){return Cs(l)&&l.nodeType===1&&!Ic(l)}function Am(l){if(l==null)return!0;if(wa(l)&&(st(l)||typeof l=="string"||typeof l.splice=="function"||er(l)||tr(l)||Mr(l)))return!l.length;var i=Js(l);if(i==Nt||i==It)return!l.size;if(hi(l))return!In(l).length;for(var m in l)if($t.call(l,m))return!1;return!0}function Nd(l,i){return Fa(l,i)}function km(l,i,m){m=typeof m=="function"?m:c;var b=m?m(l,i):c;return b===c?Fa(l,i,c,m):!!b}function _d(l){if(!Cs(l))return!1;var i=Ks(l);return i==pt||i==Rt||typeof l.message=="string"&&typeof l.name=="string"&&!Ic(l)}function Em(l){return typeof l=="number"&&Ba(l)}function Wa(l){if(!bs(l))return!1;var i=Ks(l);return i==ns||i==Wt||i==ge||i==Bs}function Pc(l){return typeof l=="number"&&l==Ze(l)}function wd(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=Z}function bs(l){var i=typeof l;return l!=null&&(i=="object"||i=="function")}function Cs(l){return l!=null&&typeof l=="object"}var B0=bo?Da(bo):Zt;function U0(l,i){return l===i||ws(l,i,ld(i))}function H0(l,i,m){return m=typeof m=="function"?m:c,ws(l,i,ld(i),m)}function Kt(l){return Rm(l)&&l!=+l}function Tm(l){if(Ku(l))throw new tt(h);return oc(l)}function ea(l){return l===null}function Nh(l){return l==null}function Rm(l){return typeof l=="number"||Cs(l)&&Ks(l)==rs}function Ic(l){if(!Cs(l)||Ks(l)!=is)return!1;var i=Il(l);if(i===null)return!0;var m=$t.call(i,"constructor")&&i.constructor;return typeof m=="function"&&m instanceof m&&Eo.call(m)==Ro}var Gc=fx?Da(fx):ri;function Mm(l){return Pc(l)&&l>=-Z&&l<=Z}var Vc=hx?Da(hx):Cr;function Yc(l){return typeof l=="string"||!st(l)&&Cs(l)&&Ks(l)==fs}function Sa(l){return typeof l=="symbol"||Cs(l)&&Ks(l)==Is}var tr=px?Da(px):Io;function Om(l){return l===c}function _h(l){return Cs(l)&&Js(l)==Qs}function $0(l){return Cs(l)&&Ks(l)==Us}var wh=bc(gs),F0=bc(function(l,i){return l<=i});function q0(l){if(!l)return[];if(wa(l))return Yc(l)?js(l):da(l);if(Xs&&l[Xs])return xu(l[Xs]());var i=Js(l),m=i==Nt?So:i==It?Co:Ei;return m(l)}function Nn(l){if(!l)return l===0?l:0;if(l=Qa(l),l===L||l===-L){var i=l<0?-1:1;return i*Te}return l===l?l:0}function Ze(l){var i=Nn(l),m=i%1;return i===i?m?i-m:i:0}function Lm(l){return l?kl(Ze(l),0,E):0}function Qa(l){if(typeof l=="number")return l;if(Sa(l))return ye;if(bs(l)){var i=typeof l.valueOf=="function"?l.valueOf():l;l=bs(i)?i+"":i}if(typeof l!="string")return l===0?l:+l;l=hr(l);var m=$l.test(l);return m||el.test(l)?po(l.slice(2),m?2:8):tn.test(l)?ye:+l}function Sd(l){return hl(l,Ca(l))}function Sh(l){return l?kl(Ze(l),-Z,Z):l===0?l:0}function qt(l){return l==null?"":ba(l)}var P0=Gn(function(l,i){if(hi(i)||wa(i)){hl(i,Ws(i),l);return}for(var m in i)$t.call(i,m)&&Al(l,m,i[m])}),Cd=Gn(function(l,i){hl(i,Ca(i),l)}),wi=Gn(function(l,i,m,b){hl(i,Ca(i),l,b)}),Ch=Gn(function(l,i,m,b){hl(i,Ws(i),l,b)}),pl=Ql(li);function Dm(l,i){var m=Un(l);return i==null?m:yu(m,i)}var I0=it(function(l,i){l=Gt(l);var m=-1,b=i.length,C=b>2?i[2]:c;for(C&&la(i[0],i[1],C)&&(b=1);++m<b;)for(var O=i[m],P=Ca(O),X=-1,ne=P.length;++X<ne;){var Se=P[X],Ce=l[Se];(Ce===c||Ya(Ce,Gr[Se])&&!$t.call(l,Se))&&(l[Se]=O[Se])}return l}),G0=it(function(l){return l.push(c,Vu),Oa(Ci,c,l)});function V0(l,i){return vx(l,We(i,3),Tl)}function Wc(l,i){return vx(l,We(i,3),qo)}function gl(l,i){return l==null?l:Sr(l,We(i,3),Ca)}function Y0(l,i){return l==null?l:ni(l,We(i,3),Ca)}function Ad(l,i){return l&&Tl(l,We(i,3))}function _n(l,i){return l&&qo(l,We(i,3))}function Ah(l){return l==null?[]:xn(l,Ws(l))}function kh(l){return l==null?[]:xn(l,Ca(l))}function sr(l,i,m){var b=l==null?c:Wl(l,i);return b===c?m:b}function W0(l,i){return l!=null&&id(l,i,$a)}function zm(l,i){return l!=null&&id(l,i,xl)}var Eh=pc(function(l,i,m){i!=null&&typeof i.toString!="function"&&(i=ha.call(i)),l[i]=m},Ri(ma)),Th=pc(function(l,i,m){i!=null&&typeof i.toString!="function"&&(i=ha.call(i)),$t.call(l,i)?l[i].push(m):l[i]=[m]},We),Rh=it(fl);function Ws(l){return wa(l)?Bo(l):In(l)}function Ca(l){return wa(l)?Bo(l,!0):lh(l)}function Mh(l,i){var m={};return i=We(i,3),Tl(l,function(b,C,O){Ha(m,i(b,C,O),b)}),m}function Q0(l,i){var m={};return i=We(i,3),Tl(l,function(b,C,O){Ha(m,C,i(b,C,O))}),m}var Si=Gn(function(l,i,m){dc(l,i,m)}),Ci=Gn(function(l,i,m,b){dc(l,i,m,b)}),X0=Ql(function(l,i){var m={};if(l==null)return m;var b=!1;i=hs(i,function(O){return O=Pa(O,l),b||(b=O.length>1),O}),hl(l,Wu(l),m),b&&(m=oa(m,S|M|U,Kx));for(var C=i.length;C--;)uc(m,i[C]);return m});function Oh(l,i){return ki(l,jd(We(i)))}var Ai=Ql(function(l,i){return l==null?{}:Su(l,i)});function ki(l,i){if(l==null)return{};var m=hs(Wu(l),function(b){return[b]});return i=We(i),aa(l,m,function(b,C){return i(b,C[0])})}function Z0(l,i,m){i=Pa(i,l);var b=-1,C=i.length;for(C||(C=1,l=c);++b<C;){var O=l==null?c:l[va(i[b])];O===c&&(b=C,O=m),l=Wa(O)?O.call(l):O}return l}function kd(l,i,m){return l==null?l:ui(l,i,m)}function Bm(l,i,m,b){return b=typeof b=="function"?b:c,l==null?l:ui(l,i,m,b)}var Ed=Iu(Ws),Qc=Iu(Ca);function K0(l,i,m){var b=st(l),C=b||er(l)||tr(l);if(i=We(i,4),m==null){var O=l&&l.constructor;C?m=b?new O:[]:bs(l)?m=Wa(O)?Un(Il(l)):{}:m={}}return(C?La:Tl)(l,function(P,X,ne){return i(m,P,X,ne)}),m}function J0(l,i){return l==null?!0:uc(l,i)}function Lh(l,i,m){return l==null?l:Ru(l,i,Zo(m))}function ef(l,i,m,b){return b=typeof b=="function"?b:c,l==null?l:Ru(l,i,Zo(m),b)}function Ei(l){return l==null?[]:ou(l,Ws(l))}function Um(l){return l==null?[]:ou(l,Ca(l))}function Dh(l,i,m){return m===c&&(m=i,i=c),m!==c&&(m=Qa(m),m=m===m?m:0),i!==c&&(i=Qa(i),i=i===i?i:0),kl(Qa(l),i,m)}function Td(l,i,m){return i=Nn(i),m===c?(m=i,i=0):m=Nn(m),l=Qa(l),Pn(l,i,m)}function Rd(l,i,m){if(m&&typeof m!="boolean"&&la(l,i,m)&&(i=m=c),m===c&&(typeof i=="boolean"?(m=i,i=c):typeof l=="boolean"&&(m=l,l=c)),l===c&&i===c?(l=0,i=1):(l=Nn(l),i===c?(i=l,l=0):i=Nn(i)),l>i){var b=l;l=i,i=b}if(m||l%1||i%1){var C=on();return Ms(l+C*(i-l+xr("1e-"+((C+"").length-1))),i)}return di(l,i)}var Md=Ar(function(l,i,m){return i=i.toLowerCase(),l+(m?tf(i):i)});function tf(l){return Or(qt(l).toLowerCase())}function Ti(l){return l=qt(l),l&&l.replace(yl,Zi).replace(dx,"")}function zh(l,i,m){l=qt(l),i=ba(i);var b=l.length;m=m===c?b:kl(Ze(m),0,b);var C=m;return m-=i.length,m>=0&&l.slice(m,C)==i}function sf(l){return l=qt(l),l&&et.test(l)?l.replace(Be,Xf):l}function af(l){return l=qt(l),l&&At.test(l)?l.replace(Qt,"\\$&"):l}var lf=Ar(function(l,i,m){return l+(m?"-":"")+i.toLowerCase()}),nf=Ar(function(l,i,m){return l+(m?" ":"")+i.toLowerCase()}),Hm=qu("toLowerCase");function rf(l,i,m){l=qt(l),i=Ze(i);var b=i?qr(l):0;if(!i||b>=i)return l;var C=(i-b)/2;return Vn(ec(C),m)+l+Vn(Wr(C),m)}function cf(l,i,m){l=qt(l),i=Ze(i);var b=i?qr(l):0;return i&&b<i?l+Vn(i-b,m):l}function Od(l,i,m){l=qt(l),i=Ze(i);var b=i?qr(l):0;return i&&b<i?Vn(i-b,m)+l:l}function Bh(l,i,m){return m||i==null?i=0:i&&(i=+i),il(qt(l).replace(zt,""),i||0)}function Uh(l,i,m){return(m?la(l,i,m):i===c)?i=1:i=Ze(i),Rl(qt(l),i)}function $m(){var l=arguments,i=qt(l[0]);return l.length<3?i:i.replace(l[1],l[2])}var Fm=Ar(function(l,i,m){return l+(m?"_":"")+i.toLowerCase()});function Ld(l,i,m){return m&&typeof m!="number"&&la(l,i,m)&&(i=m=c),m=m===c?E:m>>>0,m?(l=qt(l),l&&(typeof i=="string"||i!=null&&!Gc(i))&&(i=ba(i),!i&&pr(l))?Ml(js(l),0,m):l.split(i,m)):[]}var qm=Ar(function(l,i,m){return l+(m?" ":"")+Or(i)});function of(l,i,m){return l=qt(l),m=m==null?0:kl(Ze(m),0,l.length),i=ba(i),l.slice(m,m+i.length)==i}function Pm(l,i,m){var b=R.templateSettings;m&&la(l,i,m)&&(i=c),l=qt(l),i=wi({},i,b,Gu);var C=wi({},i.imports,b.imports,Gu),O=Ws(C),P=ou(C,O),X,ne,Se=0,Ce=i.interpolate||tl,Ee="__p += '",Le=Ao((i.escape||tl).source+"|"+Ce.source+"|"+(Ce===we?vs:tl).source+"|"+(i.evaluate||tl).source+"|$","g"),Pe="//# sourceURL="+($t.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++lu+"]")+`
`;l.replace(Le,function(Je,Et,Lt,Bl,Xa,Ul){return Lt||(Lt=Bl),Ee+=l.slice(Se,Ul).replace(Tn,wo),Et&&(X=!0,Ee+=`' +
__e(`+Et+`) +
'`),Xa&&(ne=!0,Ee+=`';
`+Xa+`;
__p += '`),Lt&&(Ee+=`' +
((__t = (`+Lt+`)) == null ? '' : __t) +
'`),Se=Ul+Je.length,Je}),Ee+=`';
`;var Ke=$t.call(i,"variable")&&i.variable;if(!Ke)Ee=`with (obj) {
`+Ee+`
}
`;else if(at.test(Ke))throw new tt(y);Ee=(ne?Ee.replace(xa,""):Ee).replace(ia,"$1").replace(je,"$1;"),Ee="function("+(Ke||"obj")+`) {
`+(Ke?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(X?", __e = _.escape":"")+(ne?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ee+`return __p
}`;var bt=Im(function(){return vt(O,Pe+"return "+Ee).apply(c,P)});if(bt.source=Ee,_d(bt))throw bt;return bt}function ar(l){return qt(l).toLowerCase()}function lr(l){return qt(l).toUpperCase()}function nr(l,i,m){if(l=qt(l),l&&(m||i===c))return hr(l);if(!l||!(i=ba(i)))return l;var b=js(l),C=js(i),O=du(b,C),P=uu(b,C)+1;return Ml(b,O,P).join("")}function Xc(l,i,m){if(l=qt(l),l&&(m||i===c))return l.slice(0,Pr(l)+1);if(!l||!(i=ba(i)))return l;var b=js(l),C=uu(b,js(i))+1;return Ml(b,0,C).join("")}function Zc(l,i,m){if(l=qt(l),l&&(m||i===c))return l.replace(zt,"");if(!l||!(i=ba(i)))return l;var b=js(l),C=du(b,js(i));return Ml(b,C).join("")}function rr(l,i){var m=Q,b=de;if(bs(i)){var C="separator"in i?i.separator:C;m="length"in i?Ze(i.length):m,b="omission"in i?ba(i.omission):b}l=qt(l);var O=l.length;if(pr(l)){var P=js(l);O=P.length}if(m>=O)return l;var X=m-qr(b);if(X<1)return b;var ne=P?Ml(P,0,X).join(""):l.slice(0,X);if(C===c)return ne+b;if(P&&(X+=ne.length-X),Gc(C)){if(l.slice(X).search(C)){var Se,Ce=ne;for(C.global||(C=Ao(C.source,qt(Ea.exec(C))+"g")),C.lastIndex=0;Se=C.exec(Ce);)var Ee=Se.index;ne=ne.slice(0,Ee===c?X:Ee)}}else if(l.indexOf(ba(C),X)!=X){var Le=ne.lastIndexOf(C);Le>-1&&(ne=ne.slice(0,Le))}return ne+b}function Hh(l){return l=qt(l),l&&qe.test(l)?l.replace(Ae,wx):l}var df=Ar(function(l,i,m){return l+(m?" ":"")+i.toUpperCase()}),Or=qu("toUpperCase");function uf(l,i,m){return l=qt(l),i=m?c:i,i===c?mu(l)?Ax(l):Wf(l):l.match(i)||[]}var Im=it(function(l,i){try{return Oa(l,c,i)}catch(m){return _d(m)?m:new tt(m)}}),Dd=Ql(function(l,i){return La(i,function(m){m=va(m),Ha(l,m,vd(l[m],l))}),l});function mf(l){var i=l==null?0:l.length,m=We();return l=i?hs(l,function(b){if(typeof b[1]!="function")throw new za(p);return[m(b[0]),b[1]]}):[],it(function(b){for(var C=-1;++C<i;){var O=l[C];if(Oa(O[0],this,b))return Oa(O[1],this,b)}})}function $h(l){return Ux(oa(l,S))}function Ri(l){return function(){return l}}function zd(l,i){return l==null||l!==l?i:l}var xf=xi(),Mi=xi(!0);function ma(l){return l}function Kc(l){return ii(typeof l=="function"?l:oa(l,S))}function Bd(l){return Vo(oa(l,S))}function ff(l,i){return wu(l,oa(i,S))}var Fh=it(function(l,i){return function(m){return fl(m,l,i)}}),Ud=it(function(l,i){return function(m){return fl(l,m,i)}});function t(l,i,m){var b=Ws(i),C=xn(i,b);m==null&&!(bs(i)&&(C.length||!b.length))&&(m=i,i=l,l=this,C=xn(i,Ws(i)));var O=!(bs(m)&&"chain"in m)||!!m.chain,P=Wa(l);return La(C,function(X){var ne=i[X];l[X]=ne,P&&(l.prototype[X]=function(){var Se=this.__chain__;if(O||Se){var Ce=l(this.__wrapped__),Ee=Ce.__actions__=da(this.__actions__);return Ee.push({func:ne,args:arguments,thisArg:l}),Ce.__chain__=Se,Ce}return ne.apply(l,Ln([this.value()],arguments))})}),l}function s(){return $s._===this&&($s._=ll),this}function a(){}function r(l){return l=Ze(l),it(function(i){return Yo(i,l)})}var u=ed(hs),x=ed(gx),_=ed(ru);function T(l){return Sc(l)?fr(va(l)):Ts(l)}function G(l){return function(i){return l==null?c:Wl(l,i)}}var ce=td(),ve=td(!0);function _e(){return[]}function oe(){return!1}function fe(){return{}}function Ue(){return""}function Qe(){return!0}function Jt(l,i){if(l=Ze(l),l<1||l>Z)return[];var m=E,b=Ms(l,E);i=We(i),l-=E;for(var C=_o(b,i);++m<l;)i(m);return C}function le(l){return st(l)?hs(l,va):Sa(l)?[l]:da(tm(qt(l)))}function K(l){var i=++Ex;return qt(l)+i}var ie=gc(function(l,i){return l+i},0),Ne=vc("ceil"),Ve=gc(function(l,i){return l/i},1),Bt=vc("floor");function Fe(l){return l&&l.length?El(l,ma,ic):c}function ut(l,i){return l&&l.length?El(l,We(i,2),ic):c}function St(l){return yo(l,ma)}function Ut(l,i){return yo(l,We(i,2))}function ir(l){return l&&l.length?El(l,ma,gs):c}function qh(l,i){return l&&l.length?El(l,We(i,2),gs):c}var wb=gc(function(l,i){return l*i},1),Sb=vc("round"),Cb=gc(function(l,i){return l-i},0);function Ab(l){return l&&l.length?No(l,ma):0}function kb(l,i){return l&&l.length?No(l,We(i,2)):0}return R.after=E0,R.ary=bm,R.assign=P0,R.assignIn=Cd,R.assignInWith=wi,R.assignWith=Ch,R.at=pl,R.before=vm,R.bind=vd,R.bindAll=Dd,R.bindKey=jm,R.castArray=jh,R.chain=Dc,R.chunk=r0,R.compact=sm,R.concat=am,R.cond=mf,R.conforms=$h,R.constant=Ri,R.countBy=v0,R.create=Dm,R.curry=Hc,R.curryRight=ym,R.debounce=Nm,R.defaults=I0,R.defaultsDeep=G0,R.defer=Yt,R.delay=_m,R.difference=md,R.differenceBy=i0,R.differenceWith=gn,R.drop=Ds,R.dropRight=lm,R.dropRightWhile=c0,R.dropWhile=Ys,R.fill=dh,R.filter=hm,R.flatMap=_a,R.flatMapDeep=y0,R.flatMapDepth=N0,R.flatten=us,R.flattenDeep=ja,R.flattenDepth=bn,R.flip=gh,R.flow=xf,R.flowRight=Mi,R.fromPairs=o0,R.functions=Ah,R.functionsIn=kh,R.groupBy=pd,R.initial=uh,R.intersection=xd,R.intersectionBy=ya,R.intersectionWith=Ll,R.invert=Eh,R.invertBy=Th,R.invokeMap=yi,R.iteratee=Kc,R.keyBy=w0,R.keys=Ws,R.keysIn=Ca,R.map=Bc,R.mapKeys=Mh,R.mapValues=Q0,R.matches=Bd,R.matchesProperty=ff,R.memoize=$c,R.merge=Si,R.mergeWith=Ci,R.method=Fh,R.methodOf=Ud,R.mixin=t,R.negate=jd,R.nthArg=r,R.omit=X0,R.omitBy=Oh,R.once=bh,R.orderBy=S0,R.over=u,R.overArgs=vh,R.overEvery=x,R.overSome=_,R.partial=_i,R.partialRight=Rr,R.partition=C0,R.pick=Ai,R.pickBy=ki,R.property=T,R.propertyOf=G,R.pull=kr,R.pullAll=Zl,R.pullAllBy=cm,R.pullAllWith=om,R.pullAt=Dl,R.range=ce,R.rangeRight=ve,R.rearg=wm,R.reject=fh,R.remove=x0,R.rest=yd,R.reverse=Wn,R.sampleSize=ph,R.set=kd,R.setWith=Bm,R.shuffle=A0,R.slice=Rc,R.sortBy=bd,R.sortedUniq=fd,R.sortedUniqBy=g0,R.split=Ld,R.spread=Sm,R.tail=mh,R.take=xh,R.takeRight=Ht,R.takeRightWhile=ls,R.takeWhile=jt,R.tap=b0,R.throttle=Jn,R.thru=Tr,R.toArray=q0,R.toPairs=Ed,R.toPairsIn=Qc,R.toPath=le,R.toPlainObject=Sd,R.transform=K0,R.unary=Kl,R.union=wt,R.unionBy=Vt,R.unionWith=Ia,R.uniq=Qn,R.uniqBy=bi,R.uniqWith=dm,R.unset=J0,R.unzip=zl,R.unzipWith=Ns,R.update=Lh,R.updateWith=ef,R.values=Ei,R.valuesIn=Um,R.without=Xn,R.words=uf,R.wrap=Fc,R.xor=Er,R.xorBy=um,R.xorWith=Ga,R.zip=vi,R.zipObject=Lc,R.zipObjectDeep=Na,R.zipWith=mm,R.entries=Ed,R.entriesIn=Qc,R.extend=Cd,R.extendWith=wi,t(R,R),R.add=ie,R.attempt=Im,R.camelCase=Md,R.capitalize=tf,R.ceil=Ne,R.clamp=Dh,R.clone=T0,R.cloneDeep=M0,R.cloneDeepWith=O0,R.cloneWith=R0,R.conformsTo=yh,R.deburr=Ti,R.defaultTo=zd,R.divide=Ve,R.endsWith=zh,R.eq=Ya,R.escape=sf,R.escapeRegExp=af,R.every=zc,R.find=Va,R.findIndex=nm,R.findKey=V0,R.findLast=j0,R.findLastIndex=rm,R.findLastKey=Wc,R.floor=Bt,R.forEach=_0,R.forEachRight=yn,R.forIn=gl,R.forInRight=Y0,R.forOwn=Ad,R.forOwnRight=_n,R.get=sr,R.gt=L0,R.gte=D0,R.has=W0,R.hasIn=zm,R.head=im,R.identity=ma,R.includes=pm,R.indexOf=d0,R.inRange=Td,R.invoke=Rh,R.isArguments=Mr,R.isArray=st,R.isArrayBuffer=Cm,R.isArrayLike=wa,R.isArrayLikeObject=Rs,R.isBoolean=qc,R.isBuffer=er,R.isDate=z0,R.isElement=yt,R.isEmpty=Am,R.isEqual=Nd,R.isEqualWith=km,R.isError=_d,R.isFinite=Em,R.isFunction=Wa,R.isInteger=Pc,R.isLength=wd,R.isMap=B0,R.isMatch=U0,R.isMatchWith=H0,R.isNaN=Kt,R.isNative=Tm,R.isNil=Nh,R.isNull=ea,R.isNumber=Rm,R.isObject=bs,R.isObjectLike=Cs,R.isPlainObject=Ic,R.isRegExp=Gc,R.isSafeInteger=Mm,R.isSet=Vc,R.isString=Yc,R.isSymbol=Sa,R.isTypedArray=tr,R.isUndefined=Om,R.isWeakMap=_h,R.isWeakSet=$0,R.join=u0,R.kebabCase=lf,R.last=ms,R.lastIndexOf=m0,R.lowerCase=nf,R.lowerFirst=Hm,R.lt=wh,R.lte=F0,R.max=Fe,R.maxBy=ut,R.mean=St,R.meanBy=Ut,R.min=ir,R.minBy=qh,R.stubArray=_e,R.stubFalse=oe,R.stubObject=fe,R.stubString=Ue,R.stubTrue=Qe,R.multiply=wb,R.nth=vn,R.noConflict=s,R.noop=a,R.now=Uc,R.pad=rf,R.padEnd=cf,R.padStart=Od,R.parseInt=Bh,R.random=Rd,R.reduce=gd,R.reduceRight=gm,R.repeat=Uh,R.replace=$m,R.result=Z0,R.round=Sb,R.runInContext=se,R.sample=hh,R.size=k0,R.snakeCase=Fm,R.some=Ni,R.sortedIndex=Mc,R.sortedIndexBy=gi,R.sortedIndexOf=f0,R.sortedLastIndex=h0,R.sortedLastIndexBy=Oc,R.sortedLastIndexOf=p0,R.startCase=qm,R.startsWith=of,R.subtract=Cb,R.sum=Ab,R.sumBy=kb,R.template=Pm,R.times=Jt,R.toFinite=Nn,R.toInteger=Ze,R.toLength=Lm,R.toLower=ar,R.toNumber=Qa,R.toSafeInteger=Sh,R.toString=qt,R.toUpper=lr,R.trim=nr,R.trimEnd=Xc,R.trimStart=Zc,R.truncate=rr,R.unescape=Hh,R.uniqueId=K,R.upperCase=df,R.upperFirst=Or,R.each=_0,R.eachRight=yn,R.first=im,t(R,(function(){var l={};return Tl(R,function(i,m){$t.call(R.prototype,m)||(l[m]=i)}),l})(),{chain:!1}),R.VERSION=o,La(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){R[l].placeholder=R}),La(["drop","take"],function(l,i){nt.prototype[l]=function(m){m=m===c?1:_s(Ze(m),0);var b=this.__filtered__&&!i?new nt(this):this.clone();return b.__filtered__?b.__takeCount__=Ms(m,b.__takeCount__):b.__views__.push({size:Ms(m,E),type:l+(b.__dir__<0?"Right":"")}),b},nt.prototype[l+"Right"]=function(m){return this.reverse()[l](m).reverse()}}),La(["filter","map","takeWhile"],function(l,i){var m=i+1,b=m==q||m==H;nt.prototype[l]=function(C){var O=this.clone();return O.__iteratees__.push({iteratee:We(C,3),type:m}),O.__filtered__=O.__filtered__||b,O}}),La(["head","last"],function(l,i){var m="take"+(i?"Right":"");nt.prototype[l]=function(){return this[m](1).value()[0]}}),La(["initial","tail"],function(l,i){var m="drop"+(i?"":"Right");nt.prototype[l]=function(){return this.__filtered__?new nt(this):this[m](1)}}),nt.prototype.compact=function(){return this.filter(ma)},nt.prototype.find=function(l){return this.filter(l).head()},nt.prototype.findLast=function(l){return this.reverse().find(l)},nt.prototype.invokeMap=it(function(l,i){return typeof l=="function"?new nt(this):this.map(function(m){return fl(m,l,i)})}),nt.prototype.reject=function(l){return this.filter(jd(We(l)))},nt.prototype.slice=function(l,i){l=Ze(l);var m=this;return m.__filtered__&&(l>0||i<0)?new nt(m):(l<0?m=m.takeRight(-l):l&&(m=m.drop(l)),i!==c&&(i=Ze(i),m=i<0?m.dropRight(-i):m.take(i-l)),m)},nt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},nt.prototype.toArray=function(){return this.take(E)},Tl(nt.prototype,function(l,i){var m=/^(?:filter|find|map|reject)|While$/.test(i),b=/^(?:head|last)$/.test(i),C=R[b?"take"+(i=="last"?"Right":""):i],O=b||/^find/.test(i);C&&(R.prototype[i]=function(){var P=this.__wrapped__,X=b?[1]:arguments,ne=P instanceof nt,Se=X[0],Ce=ne||st(P),Ee=function(Et){var Lt=C.apply(R,Ln([Et],X));return b&&Le?Lt[0]:Lt};Ce&&m&&typeof Se=="function"&&Se.length!=1&&(ne=Ce=!1);var Le=this.__chain__,Pe=!!this.__actions__.length,Ke=O&&!Le,bt=ne&&!Pe;if(!O&&Ce){P=bt?P:new nt(this);var Je=l.apply(P,X);return Je.__actions__.push({func:Tr,args:[Ee],thisArg:c}),new pa(Je,Le)}return Ke&&bt?l.apply(this,X):(Je=this.thru(Ee),Ke?b?Je.value()[0]:Je.value():Je)})}),La(["pop","push","shift","sort","splice","unshift"],function(l){var i=Ki[l],m=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",b=/^(?:pop|shift)$/.test(l);R.prototype[l]=function(){var C=arguments;if(b&&!this.__chain__){var O=this.value();return i.apply(st(O)?O:[],C)}return this[m](function(P){return i.apply(st(P)?P:[],C)})}}),Tl(nt.prototype,function(l,i){var m=R[i];if(m){var b=m.name+"";$t.call(Ft,b)||(Ft[b]=[]),Ft[b].push({name:i,func:m})}}),Ft[fi(c,$).name]=[{name:"wrapper",func:c}],nt.prototype.clone=dn,nt.prototype.reverse=$n,nt.prototype.value=un,R.prototype.at=hd,R.prototype.chain=Zn,R.prototype.commit=qs,R.prototype.next=Kn,R.prototype.plant=jn,R.prototype.reverse=xm,R.prototype.toJSON=R.prototype.valueOf=R.prototype.value=fm,R.prototype.first=R.prototype.head,Xs&&(R.prototype[Xs]=ji),R}),Ir=hu();wl?((wl.exports=Ir)._=Ir,Vi._=Ir):$s._=Ir}).call(Ob)})(Qm,Qm.exports)),Qm.exports}var Db=Lb();const zb=yg(Db);function Ng(n,d){return function(){return n.apply(d,arguments)}}const{toString:Bb}=Object.prototype,{getPrototypeOf:up}=Object,{iterator:Rf,toStringTag:_g}=Symbol,Mf=(n=>d=>{const c=Bb.call(d);return n[c]||(n[c]=c.slice(8,-1).toLowerCase())})(Object.create(null)),An=n=>(n=n.toLowerCase(),d=>Mf(d)===n),Of=n=>d=>typeof d===n,{isArray:Vd}=Array,Pd=Of("undefined");function Jm(n){return n!==null&&!Pd(n)&&n.constructor!==null&&!Pd(n.constructor)&&vl(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const wg=An("ArrayBuffer");function Ub(n){let d;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?d=ArrayBuffer.isView(n):d=n&&n.buffer&&wg(n.buffer),d}const Hb=Of("string"),vl=Of("function"),Sg=Of("number"),ex=n=>n!==null&&typeof n=="object",$b=n=>n===!0||n===!1,jf=n=>{if(Mf(n)!=="object")return!1;const d=up(n);return(d===null||d===Object.prototype||Object.getPrototypeOf(d)===null)&&!(_g in n)&&!(Rf in n)},Fb=n=>{if(!ex(n)||Jm(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},qb=An("Date"),Pb=An("File"),Ib=An("Blob"),Gb=An("FileList"),Vb=n=>ex(n)&&vl(n.pipe),Yb=n=>{let d;return n&&(typeof FormData=="function"&&n instanceof FormData||vl(n.append)&&((d=Mf(n))==="formdata"||d==="object"&&vl(n.toString)&&n.toString()==="[object FormData]"))},Wb=An("URLSearchParams"),[Qb,Xb,Zb,Kb]=["ReadableStream","Request","Response","Headers"].map(An),Jb=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tx(n,d,{allOwnKeys:c=!1}={}){if(n===null||typeof n>"u")return;let o,f;if(typeof n!="object"&&(n=[n]),Vd(n))for(o=0,f=n.length;o<f;o++)d.call(null,n[o],o,n);else{if(Jm(n))return;const h=c?Object.getOwnPropertyNames(n):Object.keys(n),p=h.length;let y;for(o=0;o<p;o++)y=h[o],d.call(null,n[y],y,n)}}function Cg(n,d){if(Jm(n))return null;d=d.toLowerCase();const c=Object.keys(n);let o=c.length,f;for(;o-- >0;)if(f=c[o],d===f.toLowerCase())return f;return null}const to=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ag=n=>!Pd(n)&&n!==to;function ap(){const{caseless:n,skipUndefined:d}=Ag(this)&&this||{},c={},o=(f,h)=>{const p=n&&Cg(c,h)||h;jf(c[p])&&jf(f)?c[p]=ap(c[p],f):jf(f)?c[p]=ap({},f):Vd(f)?c[p]=f.slice():(!d||!Pd(f))&&(c[p]=f)};for(let f=0,h=arguments.length;f<h;f++)arguments[f]&&tx(arguments[f],o);return c}const ev=(n,d,c,{allOwnKeys:o}={})=>(tx(d,(f,h)=>{c&&vl(f)?n[h]=Ng(f,c):n[h]=f},{allOwnKeys:o}),n),tv=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),sv=(n,d,c,o)=>{n.prototype=Object.create(d.prototype,o),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:d.prototype}),c&&Object.assign(n.prototype,c)},av=(n,d,c,o)=>{let f,h,p;const y={};if(d=d||{},n==null)return d;do{for(f=Object.getOwnPropertyNames(n),h=f.length;h-- >0;)p=f[h],(!o||o(p,n,d))&&!y[p]&&(d[p]=n[p],y[p]=!0);n=c!==!1&&up(n)}while(n&&(!c||c(n,d))&&n!==Object.prototype);return d},lv=(n,d,c)=>{n=String(n),(c===void 0||c>n.length)&&(c=n.length),c-=d.length;const o=n.indexOf(d,c);return o!==-1&&o===c},nv=n=>{if(!n)return null;if(Vd(n))return n;let d=n.length;if(!Sg(d))return null;const c=new Array(d);for(;d-- >0;)c[d]=n[d];return c},rv=(n=>d=>n&&d instanceof n)(typeof Uint8Array<"u"&&up(Uint8Array)),iv=(n,d)=>{const o=(n&&n[Rf]).call(n);let f;for(;(f=o.next())&&!f.done;){const h=f.value;d.call(n,h[0],h[1])}},cv=(n,d)=>{let c;const o=[];for(;(c=n.exec(d))!==null;)o.push(c);return o},ov=An("HTMLFormElement"),dv=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(c,o,f){return o.toUpperCase()+f}),Tp=(({hasOwnProperty:n})=>(d,c)=>n.call(d,c))(Object.prototype),uv=An("RegExp"),kg=(n,d)=>{const c=Object.getOwnPropertyDescriptors(n),o={};tx(c,(f,h)=>{let p;(p=d(f,h,n))!==!1&&(o[h]=p||f)}),Object.defineProperties(n,o)},mv=n=>{kg(n,(d,c)=>{if(vl(n)&&["arguments","caller","callee"].indexOf(c)!==-1)return!1;const o=n[c];if(vl(o)){if(d.enumerable=!1,"writable"in d){d.writable=!1;return}d.set||(d.set=()=>{throw Error("Can not rewrite read-only method '"+c+"'")})}})},xv=(n,d)=>{const c={},o=f=>{f.forEach(h=>{c[h]=!0})};return Vd(n)?o(n):o(String(n).split(d)),c},fv=()=>{},hv=(n,d)=>n!=null&&Number.isFinite(n=+n)?n:d;function pv(n){return!!(n&&vl(n.append)&&n[_g]==="FormData"&&n[Rf])}const gv=n=>{const d=new Array(10),c=(o,f)=>{if(ex(o)){if(d.indexOf(o)>=0)return;if(Jm(o))return o;if(!("toJSON"in o)){d[f]=o;const h=Vd(o)?[]:{};return tx(o,(p,y)=>{const N=c(p,f+1);!Pd(N)&&(h[y]=N)}),d[f]=void 0,h}}return o};return c(n,0)},bv=An("AsyncFunction"),vv=n=>n&&(ex(n)||vl(n))&&vl(n.then)&&vl(n.catch),Eg=((n,d)=>n?setImmediate:d?((c,o)=>(to.addEventListener("message",({source:f,data:h})=>{f===to&&h===c&&o.length&&o.shift()()},!1),f=>{o.push(f),to.postMessage(c,"*")}))(`axios@${Math.random()}`,[]):c=>setTimeout(c))(typeof setImmediate=="function",vl(to.postMessage)),jv=typeof queueMicrotask<"u"?queueMicrotask.bind(to):typeof process<"u"&&process.nextTick||Eg,yv=n=>n!=null&&vl(n[Rf]),xe={isArray:Vd,isArrayBuffer:wg,isBuffer:Jm,isFormData:Yb,isArrayBufferView:Ub,isString:Hb,isNumber:Sg,isBoolean:$b,isObject:ex,isPlainObject:jf,isEmptyObject:Fb,isReadableStream:Qb,isRequest:Xb,isResponse:Zb,isHeaders:Kb,isUndefined:Pd,isDate:qb,isFile:Pb,isBlob:Ib,isRegExp:uv,isFunction:vl,isStream:Vb,isURLSearchParams:Wb,isTypedArray:rv,isFileList:Gb,forEach:tx,merge:ap,extend:ev,trim:Jb,stripBOM:tv,inherits:sv,toFlatObject:av,kindOf:Mf,kindOfTest:An,endsWith:lv,toArray:nv,forEachEntry:iv,matchAll:cv,isHTMLForm:ov,hasOwnProperty:Tp,hasOwnProp:Tp,reduceDescriptors:kg,freezeMethods:mv,toObjectSet:xv,toCamelCase:dv,noop:fv,toFiniteNumber:hv,findKey:Cg,global:to,isContextDefined:Ag,isSpecCompliantForm:pv,toJSONObject:gv,isAsyncFn:bv,isThenable:vv,setImmediate:Eg,asap:jv,isIterable:yv};function ft(n,d,c,o,f){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",d&&(this.code=d),c&&(this.config=c),o&&(this.request=o),f&&(this.response=f,this.status=f.status?f.status:null)}xe.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.status}}});const Tg=ft.prototype,Rg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Rg[n]={value:n}});Object.defineProperties(ft,Rg);Object.defineProperty(Tg,"isAxiosError",{value:!0});ft.from=(n,d,c,o,f,h)=>{const p=Object.create(Tg);xe.toFlatObject(n,p,function(v){return v!==Error.prototype},j=>j!=="isAxiosError");const y=n&&n.message?n.message:"Error",N=d==null&&n?n.code:d;return ft.call(p,y,N,c,o,f),n&&p.cause==null&&Object.defineProperty(p,"cause",{value:n,configurable:!0}),p.name=n&&n.name||"Error",h&&Object.assign(p,h),p};const Nv=null;function lp(n){return xe.isPlainObject(n)||xe.isArray(n)}function Mg(n){return xe.endsWith(n,"[]")?n.slice(0,-2):n}function Rp(n,d,c){return n?n.concat(d).map(function(f,h){return f=Mg(f),!c&&h?"["+f+"]":f}).join(c?".":""):d}function _v(n){return xe.isArray(n)&&!n.some(lp)}const wv=xe.toFlatObject(xe,{},null,function(d){return/^is[A-Z]/.test(d)});function Lf(n,d,c){if(!xe.isObject(n))throw new TypeError("target must be an object");d=d||new FormData,c=xe.toFlatObject(c,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,A){return!xe.isUndefined(A[B])});const o=c.metaTokens,f=c.visitor||v,h=c.dots,p=c.indexes,N=(c.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(d);if(!xe.isFunction(f))throw new TypeError("visitor must be a function");function j(k){if(k===null)return"";if(xe.isDate(k))return k.toISOString();if(xe.isBoolean(k))return k.toString();if(!N&&xe.isBlob(k))throw new ft("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(k)||xe.isTypedArray(k)?N&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function v(k,B,A){let $=k;if(k&&!A&&typeof k=="object"){if(xe.endsWith(B,"{}"))B=o?B:B.slice(0,-2),k=JSON.stringify(k);else if(xe.isArray(k)&&_v(k)||(xe.isFileList(k)||xe.endsWith(B,"[]"))&&($=xe.toArray(k)))return B=Mg(B),$.forEach(function(w,D){!(xe.isUndefined(w)||w===null)&&d.append(p===!0?Rp([B],D,h):p===null?B:B+"[]",j(w))}),!1}return lp(k)?!0:(d.append(Rp(A,B,h),j(k)),!1)}const S=[],M=Object.assign(wv,{defaultVisitor:v,convertValue:j,isVisitable:lp});function U(k,B){if(!xe.isUndefined(k)){if(S.indexOf(k)!==-1)throw Error("Circular reference detected in "+B.join("."));S.push(k),xe.forEach(k,function($,Y){(!(xe.isUndefined($)||$===null)&&f.call(d,$,xe.isString(Y)?Y.trim():Y,B,M))===!0&&U($,B?B.concat(Y):[Y])}),S.pop()}}if(!xe.isObject(n))throw new TypeError("data must be an object");return U(n),d}function Mp(n){const d={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(o){return d[o]})}function mp(n,d){this._pairs=[],n&&Lf(n,this,d)}const Og=mp.prototype;Og.append=function(d,c){this._pairs.push([d,c])};Og.toString=function(d){const c=d?function(o){return d.call(this,o,Mp)}:Mp;return this._pairs.map(function(f){return c(f[0])+"="+c(f[1])},"").join("&")};function Sv(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Lg(n,d,c){if(!d)return n;const o=c&&c.encode||Sv;xe.isFunction(c)&&(c={serialize:c});const f=c&&c.serialize;let h;if(f?h=f(d,c):h=xe.isURLSearchParams(d)?d.toString():new mp(d,c).toString(o),h){const p=n.indexOf("#");p!==-1&&(n=n.slice(0,p)),n+=(n.indexOf("?")===-1?"?":"&")+h}return n}class Op{constructor(){this.handlers=[]}use(d,c,o){return this.handlers.push({fulfilled:d,rejected:c,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(d){this.handlers[d]&&(this.handlers[d]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(d){xe.forEach(this.handlers,function(o){o!==null&&d(o)})}}const Dg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cv=typeof URLSearchParams<"u"?URLSearchParams:mp,Av=typeof FormData<"u"?FormData:null,kv=typeof Blob<"u"?Blob:null,Ev={isBrowser:!0,classes:{URLSearchParams:Cv,FormData:Av,Blob:kv},protocols:["http","https","file","blob","url","data"]},xp=typeof window<"u"&&typeof document<"u",np=typeof navigator=="object"&&navigator||void 0,Tv=xp&&(!np||["ReactNative","NativeScript","NS"].indexOf(np.product)<0),Rv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Mv=xp&&window.location.href||"http://localhost",Ov=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xp,hasStandardBrowserEnv:Tv,hasStandardBrowserWebWorkerEnv:Rv,navigator:np,origin:Mv},Symbol.toStringTag,{value:"Module"})),ka={...Ov,...Ev};function Lv(n,d){return Lf(n,new ka.classes.URLSearchParams,{visitor:function(c,o,f,h){return ka.isNode&&xe.isBuffer(c)?(this.append(o,c.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...d})}function Dv(n){return xe.matchAll(/\w+|\[(\w*)]/g,n).map(d=>d[0]==="[]"?"":d[1]||d[0])}function zv(n){const d={},c=Object.keys(n);let o;const f=c.length;let h;for(o=0;o<f;o++)h=c[o],d[h]=n[h];return d}function zg(n){function d(c,o,f,h){let p=c[h++];if(p==="__proto__")return!0;const y=Number.isFinite(+p),N=h>=c.length;return p=!p&&xe.isArray(f)?f.length:p,N?(xe.hasOwnProp(f,p)?f[p]=[f[p],o]:f[p]=o,!y):((!f[p]||!xe.isObject(f[p]))&&(f[p]=[]),d(c,o,f[p],h)&&xe.isArray(f[p])&&(f[p]=zv(f[p])),!y)}if(xe.isFormData(n)&&xe.isFunction(n.entries)){const c={};return xe.forEachEntry(n,(o,f)=>{d(Dv(o),f,c,0)}),c}return null}function Bv(n,d,c){if(xe.isString(n))try{return(d||JSON.parse)(n),xe.trim(n)}catch(o){if(o.name!=="SyntaxError")throw o}return(c||JSON.stringify)(n)}const sx={transitional:Dg,adapter:["xhr","http","fetch"],transformRequest:[function(d,c){const o=c.getContentType()||"",f=o.indexOf("application/json")>-1,h=xe.isObject(d);if(h&&xe.isHTMLForm(d)&&(d=new FormData(d)),xe.isFormData(d))return f?JSON.stringify(zg(d)):d;if(xe.isArrayBuffer(d)||xe.isBuffer(d)||xe.isStream(d)||xe.isFile(d)||xe.isBlob(d)||xe.isReadableStream(d))return d;if(xe.isArrayBufferView(d))return d.buffer;if(xe.isURLSearchParams(d))return c.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),d.toString();let y;if(h){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Lv(d,this.formSerializer).toString();if((y=xe.isFileList(d))||o.indexOf("multipart/form-data")>-1){const N=this.env&&this.env.FormData;return Lf(y?{"files[]":d}:d,N&&new N,this.formSerializer)}}return h||f?(c.setContentType("application/json",!1),Bv(d)):d}],transformResponse:[function(d){const c=this.transitional||sx.transitional,o=c&&c.forcedJSONParsing,f=this.responseType==="json";if(xe.isResponse(d)||xe.isReadableStream(d))return d;if(d&&xe.isString(d)&&(o&&!this.responseType||f)){const p=!(c&&c.silentJSONParsing)&&f;try{return JSON.parse(d,this.parseReviver)}catch(y){if(p)throw y.name==="SyntaxError"?ft.from(y,ft.ERR_BAD_RESPONSE,this,null,this.response):y}}return d}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ka.classes.FormData,Blob:ka.classes.Blob},validateStatus:function(d){return d>=200&&d<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],n=>{sx.headers[n]={}});const Uv=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hv=n=>{const d={};let c,o,f;return n&&n.split(`
`).forEach(function(p){f=p.indexOf(":"),c=p.substring(0,f).trim().toLowerCase(),o=p.substring(f+1).trim(),!(!c||d[c]&&Uv[c])&&(c==="set-cookie"?d[c]?d[c].push(o):d[c]=[o]:d[c]=d[c]?d[c]+", "+o:o)}),d},Lp=Symbol("internals");function Vm(n){return n&&String(n).trim().toLowerCase()}function yf(n){return n===!1||n==null?n:xe.isArray(n)?n.map(yf):String(n)}function $v(n){const d=Object.create(null),c=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=c.exec(n);)d[o[1]]=o[2];return d}const Fv=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Ih(n,d,c,o,f){if(xe.isFunction(o))return o.call(this,d,c);if(f&&(d=c),!!xe.isString(d)){if(xe.isString(o))return d.indexOf(o)!==-1;if(xe.isRegExp(o))return o.test(d)}}function qv(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(d,c,o)=>c.toUpperCase()+o)}function Pv(n,d){const c=xe.toCamelCase(" "+d);["get","set","has"].forEach(o=>{Object.defineProperty(n,o+c,{value:function(f,h,p){return this[o].call(this,d,f,h,p)},configurable:!0})})}let jl=class{constructor(d){d&&this.set(d)}set(d,c,o){const f=this;function h(y,N,j){const v=Vm(N);if(!v)throw new Error("header name must be a non-empty string");const S=xe.findKey(f,v);(!S||f[S]===void 0||j===!0||j===void 0&&f[S]!==!1)&&(f[S||N]=yf(y))}const p=(y,N)=>xe.forEach(y,(j,v)=>h(j,v,N));if(xe.isPlainObject(d)||d instanceof this.constructor)p(d,c);else if(xe.isString(d)&&(d=d.trim())&&!Fv(d))p(Hv(d),c);else if(xe.isObject(d)&&xe.isIterable(d)){let y={},N,j;for(const v of d){if(!xe.isArray(v))throw TypeError("Object iterator must return a key-value pair");y[j=v[0]]=(N=y[j])?xe.isArray(N)?[...N,v[1]]:[N,v[1]]:v[1]}p(y,c)}else d!=null&&h(c,d,o);return this}get(d,c){if(d=Vm(d),d){const o=xe.findKey(this,d);if(o){const f=this[o];if(!c)return f;if(c===!0)return $v(f);if(xe.isFunction(c))return c.call(this,f,o);if(xe.isRegExp(c))return c.exec(f);throw new TypeError("parser must be boolean|regexp|function")}}}has(d,c){if(d=Vm(d),d){const o=xe.findKey(this,d);return!!(o&&this[o]!==void 0&&(!c||Ih(this,this[o],o,c)))}return!1}delete(d,c){const o=this;let f=!1;function h(p){if(p=Vm(p),p){const y=xe.findKey(o,p);y&&(!c||Ih(o,o[y],y,c))&&(delete o[y],f=!0)}}return xe.isArray(d)?d.forEach(h):h(d),f}clear(d){const c=Object.keys(this);let o=c.length,f=!1;for(;o--;){const h=c[o];(!d||Ih(this,this[h],h,d,!0))&&(delete this[h],f=!0)}return f}normalize(d){const c=this,o={};return xe.forEach(this,(f,h)=>{const p=xe.findKey(o,h);if(p){c[p]=yf(f),delete c[h];return}const y=d?qv(h):String(h).trim();y!==h&&delete c[h],c[y]=yf(f),o[y]=!0}),this}concat(...d){return this.constructor.concat(this,...d)}toJSON(d){const c=Object.create(null);return xe.forEach(this,(o,f)=>{o!=null&&o!==!1&&(c[f]=d&&xe.isArray(o)?o.join(", "):o)}),c}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([d,c])=>d+": "+c).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(d){return d instanceof this?d:new this(d)}static concat(d,...c){const o=new this(d);return c.forEach(f=>o.set(f)),o}static accessor(d){const o=(this[Lp]=this[Lp]={accessors:{}}).accessors,f=this.prototype;function h(p){const y=Vm(p);o[y]||(Pv(f,p),o[y]=!0)}return xe.isArray(d)?d.forEach(h):h(d),this}};jl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xe.reduceDescriptors(jl.prototype,({value:n},d)=>{let c=d[0].toUpperCase()+d.slice(1);return{get:()=>n,set(o){this[c]=o}}});xe.freezeMethods(jl);function Gh(n,d){const c=this||sx,o=d||c,f=jl.from(o.headers);let h=o.data;return xe.forEach(n,function(y){h=y.call(c,h,f.normalize(),d?d.status:void 0)}),f.normalize(),h}function Bg(n){return!!(n&&n.__CANCEL__)}function Yd(n,d,c){ft.call(this,n??"canceled",ft.ERR_CANCELED,d,c),this.name="CanceledError"}xe.inherits(Yd,ft,{__CANCEL__:!0});function Ug(n,d,c){const o=c.config.validateStatus;!c.status||!o||o(c.status)?n(c):d(new ft("Request failed with status code "+c.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(c.status/100)-4],c.config,c.request,c))}function Iv(n){const d=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return d&&d[1]||""}function Gv(n,d){n=n||10;const c=new Array(n),o=new Array(n);let f=0,h=0,p;return d=d!==void 0?d:1e3,function(N){const j=Date.now(),v=o[h];p||(p=j),c[f]=N,o[f]=j;let S=h,M=0;for(;S!==f;)M+=c[S++],S=S%n;if(f=(f+1)%n,f===h&&(h=(h+1)%n),j-p<d)return;const U=v&&j-v;return U?Math.round(M*1e3/U):void 0}}function Vv(n,d){let c=0,o=1e3/d,f,h;const p=(j,v=Date.now())=>{c=v,f=null,h&&(clearTimeout(h),h=null),n(...j)};return[(...j)=>{const v=Date.now(),S=v-c;S>=o?p(j,v):(f=j,h||(h=setTimeout(()=>{h=null,p(f)},o-S)))},()=>f&&p(f)]}const Af=(n,d,c=3)=>{let o=0;const f=Gv(50,250);return Vv(h=>{const p=h.loaded,y=h.lengthComputable?h.total:void 0,N=p-o,j=f(N),v=p<=y;o=p;const S={loaded:p,total:y,progress:y?p/y:void 0,bytes:N,rate:j||void 0,estimated:j&&y&&v?(y-p)/j:void 0,event:h,lengthComputable:y!=null,[d?"download":"upload"]:!0};n(S)},c)},Dp=(n,d)=>{const c=n!=null;return[o=>d[0]({lengthComputable:c,total:n,loaded:o}),d[1]]},zp=n=>(...d)=>xe.asap(()=>n(...d)),Yv=ka.hasStandardBrowserEnv?((n,d)=>c=>(c=new URL(c,ka.origin),n.protocol===c.protocol&&n.host===c.host&&(d||n.port===c.port)))(new URL(ka.origin),ka.navigator&&/(msie|trident)/i.test(ka.navigator.userAgent)):()=>!0,Wv=ka.hasStandardBrowserEnv?{write(n,d,c,o,f,h,p){if(typeof document>"u")return;const y=[`${n}=${encodeURIComponent(d)}`];xe.isNumber(c)&&y.push(`expires=${new Date(c).toUTCString()}`),xe.isString(o)&&y.push(`path=${o}`),xe.isString(f)&&y.push(`domain=${f}`),h===!0&&y.push("secure"),xe.isString(p)&&y.push(`SameSite=${p}`),document.cookie=y.join("; ")},read(n){if(typeof document>"u")return null;const d=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return d?decodeURIComponent(d[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Qv(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Xv(n,d){return d?n.replace(/\/?\/$/,"")+"/"+d.replace(/^\/+/,""):n}function Hg(n,d,c){let o=!Qv(d);return n&&(o||c==!1)?Xv(n,d):d}const Bp=n=>n instanceof jl?{...n}:n;function no(n,d){d=d||{};const c={};function o(j,v,S,M){return xe.isPlainObject(j)&&xe.isPlainObject(v)?xe.merge.call({caseless:M},j,v):xe.isPlainObject(v)?xe.merge({},v):xe.isArray(v)?v.slice():v}function f(j,v,S,M){if(xe.isUndefined(v)){if(!xe.isUndefined(j))return o(void 0,j,S,M)}else return o(j,v,S,M)}function h(j,v){if(!xe.isUndefined(v))return o(void 0,v)}function p(j,v){if(xe.isUndefined(v)){if(!xe.isUndefined(j))return o(void 0,j)}else return o(void 0,v)}function y(j,v,S){if(S in d)return o(j,v);if(S in n)return o(void 0,j)}const N={url:h,method:h,data:h,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,withXSRFToken:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:y,headers:(j,v,S)=>f(Bp(j),Bp(v),S,!0)};return xe.forEach(Object.keys({...n,...d}),function(v){const S=N[v]||f,M=S(n[v],d[v],v);xe.isUndefined(M)&&S!==y||(c[v]=M)}),c}const $g=n=>{const d=no({},n);let{data:c,withXSRFToken:o,xsrfHeaderName:f,xsrfCookieName:h,headers:p,auth:y}=d;if(d.headers=p=jl.from(p),d.url=Lg(Hg(d.baseURL,d.url,d.allowAbsoluteUrls),n.params,n.paramsSerializer),y&&p.set("Authorization","Basic "+btoa((y.username||"")+":"+(y.password?unescape(encodeURIComponent(y.password)):""))),xe.isFormData(c)){if(ka.hasStandardBrowserEnv||ka.hasStandardBrowserWebWorkerEnv)p.setContentType(void 0);else if(xe.isFunction(c.getHeaders)){const N=c.getHeaders(),j=["content-type","content-length"];Object.entries(N).forEach(([v,S])=>{j.includes(v.toLowerCase())&&p.set(v,S)})}}if(ka.hasStandardBrowserEnv&&(o&&xe.isFunction(o)&&(o=o(d)),o||o!==!1&&Yv(d.url))){const N=f&&h&&Wv.read(h);N&&p.set(f,N)}return d},Zv=typeof XMLHttpRequest<"u",Kv=Zv&&function(n){return new Promise(function(c,o){const f=$g(n);let h=f.data;const p=jl.from(f.headers).normalize();let{responseType:y,onUploadProgress:N,onDownloadProgress:j}=f,v,S,M,U,k;function B(){U&&U(),k&&k(),f.cancelToken&&f.cancelToken.unsubscribe(v),f.signal&&f.signal.removeEventListener("abort",v)}let A=new XMLHttpRequest;A.open(f.method.toUpperCase(),f.url,!0),A.timeout=f.timeout;function $(){if(!A)return;const w=jl.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),z={data:!y||y==="text"||y==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:w,config:n,request:A};Ug(function(F){c(F),B()},function(F){o(F),B()},z),A=null}"onloadend"in A?A.onloadend=$:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout($)},A.onabort=function(){A&&(o(new ft("Request aborted",ft.ECONNABORTED,n,A)),A=null)},A.onerror=function(D){const z=D&&D.message?D.message:"Network Error",W=new ft(z,ft.ERR_NETWORK,n,A);W.event=D||null,o(W),A=null},A.ontimeout=function(){let D=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded";const z=f.transitional||Dg;f.timeoutErrorMessage&&(D=f.timeoutErrorMessage),o(new ft(D,z.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,n,A)),A=null},h===void 0&&p.setContentType(null),"setRequestHeader"in A&&xe.forEach(p.toJSON(),function(D,z){A.setRequestHeader(z,D)}),xe.isUndefined(f.withCredentials)||(A.withCredentials=!!f.withCredentials),y&&y!=="json"&&(A.responseType=f.responseType),j&&([M,k]=Af(j,!0),A.addEventListener("progress",M)),N&&A.upload&&([S,U]=Af(N),A.upload.addEventListener("progress",S),A.upload.addEventListener("loadend",U)),(f.cancelToken||f.signal)&&(v=w=>{A&&(o(!w||w.type?new Yd(null,n,A):w),A.abort(),A=null)},f.cancelToken&&f.cancelToken.subscribe(v),f.signal&&(f.signal.aborted?v():f.signal.addEventListener("abort",v)));const Y=Iv(f.url);if(Y&&ka.protocols.indexOf(Y)===-1){o(new ft("Unsupported protocol "+Y+":",ft.ERR_BAD_REQUEST,n));return}A.send(h||null)})},Jv=(n,d)=>{const{length:c}=n=n?n.filter(Boolean):[];if(d||c){let o=new AbortController,f;const h=function(j){if(!f){f=!0,y();const v=j instanceof Error?j:this.reason;o.abort(v instanceof ft?v:new Yd(v instanceof Error?v.message:v))}};let p=d&&setTimeout(()=>{p=null,h(new ft(`timeout ${d} of ms exceeded`,ft.ETIMEDOUT))},d);const y=()=>{n&&(p&&clearTimeout(p),p=null,n.forEach(j=>{j.unsubscribe?j.unsubscribe(h):j.removeEventListener("abort",h)}),n=null)};n.forEach(j=>j.addEventListener("abort",h));const{signal:N}=o;return N.unsubscribe=()=>xe.asap(y),N}},ej=function*(n,d){let c=n.byteLength;if(c<d){yield n;return}let o=0,f;for(;o<c;)f=o+d,yield n.slice(o,f),o=f},tj=async function*(n,d){for await(const c of sj(n))yield*ej(c,d)},sj=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const d=n.getReader();try{for(;;){const{done:c,value:o}=await d.read();if(c)break;yield o}}finally{await d.cancel()}},Up=(n,d,c,o)=>{const f=tj(n,d);let h=0,p,y=N=>{p||(p=!0,o&&o(N))};return new ReadableStream({async pull(N){try{const{done:j,value:v}=await f.next();if(j){y(),N.close();return}let S=v.byteLength;if(c){let M=h+=S;c(M)}N.enqueue(new Uint8Array(v))}catch(j){throw y(j),j}},cancel(N){return y(N),f.return()}},{highWaterMark:2})},Hp=64*1024,{isFunction:gf}=xe,aj=(({Request:n,Response:d})=>({Request:n,Response:d}))(xe.global),{ReadableStream:$p,TextEncoder:Fp}=xe.global,qp=(n,...d)=>{try{return!!n(...d)}catch{return!1}},lj=n=>{n=xe.merge.call({skipUndefined:!0},aj,n);const{fetch:d,Request:c,Response:o}=n,f=d?gf(d):typeof fetch=="function",h=gf(c),p=gf(o);if(!f)return!1;const y=f&&gf($p),N=f&&(typeof Fp=="function"?(k=>B=>k.encode(B))(new Fp):async k=>new Uint8Array(await new c(k).arrayBuffer())),j=h&&y&&qp(()=>{let k=!1;const B=new c(ka.origin,{body:new $p,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!B}),v=p&&y&&qp(()=>xe.isReadableStream(new o("").body)),S={stream:v&&(k=>k.body)};f&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!S[k]&&(S[k]=(B,A)=>{let $=B&&B[k];if($)return $.call(B);throw new ft(`Response type '${k}' is not supported`,ft.ERR_NOT_SUPPORT,A)})});const M=async k=>{if(k==null)return 0;if(xe.isBlob(k))return k.size;if(xe.isSpecCompliantForm(k))return(await new c(ka.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(xe.isArrayBufferView(k)||xe.isArrayBuffer(k))return k.byteLength;if(xe.isURLSearchParams(k)&&(k=k+""),xe.isString(k))return(await N(k)).byteLength},U=async(k,B)=>{const A=xe.toFiniteNumber(k.getContentLength());return A??M(B)};return async k=>{let{url:B,method:A,data:$,signal:Y,cancelToken:w,timeout:D,onDownloadProgress:z,onUploadProgress:W,responseType:F,headers:J,withCredentials:I="same-origin",fetchOptions:Q}=$g(k),de=d||fetch;F=F?(F+"").toLowerCase():"text";let te=Jv([Y,w&&w.toAbortSignal()],D),pe=null;const q=te&&te.unsubscribe&&(()=>{te.unsubscribe()});let ae;try{if(W&&j&&A!=="get"&&A!=="head"&&(ae=await U(J,$))!==0){let E=new c(B,{method:"POST",body:$,duplex:"half"}),ee;if(xe.isFormData($)&&(ee=E.headers.get("content-type"))&&J.setContentType(ee),E.body){const[V,re]=Dp(ae,Af(zp(W)));$=Up(E.body,Hp,V,re)}}xe.isString(I)||(I=I?"include":"omit");const H=h&&"credentials"in c.prototype,L={...Q,signal:te,method:A.toUpperCase(),headers:J.normalize().toJSON(),body:$,duplex:"half",credentials:H?I:void 0};pe=h&&new c(B,L);let Z=await(h?de(pe,Q):de(B,L));const Te=v&&(F==="stream"||F==="response");if(v&&(z||Te&&q)){const E={};["status","statusText","headers"].forEach(Re=>{E[Re]=Z[Re]});const ee=xe.toFiniteNumber(Z.headers.get("content-length")),[V,re]=z&&Dp(ee,Af(zp(z),!0))||[];Z=new o(Up(Z.body,Hp,V,()=>{re&&re(),q&&q()}),E)}F=F||"text";let ye=await S[xe.findKey(S,F)||"text"](Z,k);return!Te&&q&&q(),await new Promise((E,ee)=>{Ug(E,ee,{data:ye,headers:jl.from(Z.headers),status:Z.status,statusText:Z.statusText,config:k,request:pe})})}catch(H){throw q&&q(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,k,pe),{cause:H.cause||H}):ft.from(H,H&&H.code,k,pe)}}},nj=new Map,Fg=n=>{let d=n&&n.env||{};const{fetch:c,Request:o,Response:f}=d,h=[o,f,c];let p=h.length,y=p,N,j,v=nj;for(;y--;)N=h[y],j=v.get(N),j===void 0&&v.set(N,j=y?new Map:lj(d)),v=j;return j};Fg();const fp={http:Nv,xhr:Kv,fetch:{get:Fg}};xe.forEach(fp,(n,d)=>{if(n){try{Object.defineProperty(n,"name",{value:d})}catch{}Object.defineProperty(n,"adapterName",{value:d})}});const Pp=n=>`- ${n}`,rj=n=>xe.isFunction(n)||n===null||n===!1;function ij(n,d){n=xe.isArray(n)?n:[n];const{length:c}=n;let o,f;const h={};for(let p=0;p<c;p++){o=n[p];let y;if(f=o,!rj(o)&&(f=fp[(y=String(o)).toLowerCase()],f===void 0))throw new ft(`Unknown adapter '${y}'`);if(f&&(xe.isFunction(f)||(f=f.get(d))))break;h[y||"#"+p]=f}if(!f){const p=Object.entries(h).map(([N,j])=>`adapter ${N} `+(j===!1?"is not supported by the environment":"is not available in the build"));let y=c?p.length>1?`since :
`+p.map(Pp).join(`
`):" "+Pp(p[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return f}const qg={getAdapter:ij,adapters:fp};function Vh(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Yd(null,n)}function Ip(n){return Vh(n),n.headers=jl.from(n.headers),n.data=Gh.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),qg.getAdapter(n.adapter||sx.adapter,n)(n).then(function(o){return Vh(n),o.data=Gh.call(n,n.transformResponse,o),o.headers=jl.from(o.headers),o},function(o){return Bg(o)||(Vh(n),o&&o.response&&(o.response.data=Gh.call(n,n.transformResponse,o.response),o.response.headers=jl.from(o.response.headers))),Promise.reject(o)})}const Pg="1.13.2",Df={};["object","boolean","number","function","string","symbol"].forEach((n,d)=>{Df[n]=function(o){return typeof o===n||"a"+(d<1?"n ":" ")+n}});const Gp={};Df.transitional=function(d,c,o){function f(h,p){return"[Axios v"+Pg+"] Transitional option '"+h+"'"+p+(o?". "+o:"")}return(h,p,y)=>{if(d===!1)throw new ft(f(p," has been removed"+(c?" in "+c:"")),ft.ERR_DEPRECATED);return c&&!Gp[p]&&(Gp[p]=!0,console.warn(f(p," has been deprecated since v"+c+" and will be removed in the near future"))),d?d(h,p,y):!0}};Df.spelling=function(d){return(c,o)=>(console.warn(`${o} is likely a misspelling of ${d}`),!0)};function cj(n,d,c){if(typeof n!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const o=Object.keys(n);let f=o.length;for(;f-- >0;){const h=o[f],p=d[h];if(p){const y=n[h],N=y===void 0||p(y,h,n);if(N!==!0)throw new ft("option "+h+" must be "+N,ft.ERR_BAD_OPTION_VALUE);continue}if(c!==!0)throw new ft("Unknown option "+h,ft.ERR_BAD_OPTION)}}const Nf={assertOptions:cj,validators:Df},cr=Nf.validators;let lo=class{constructor(d){this.defaults=d||{},this.interceptors={request:new Op,response:new Op}}async request(d,c){try{return await this._request(d,c)}catch(o){if(o instanceof Error){let f={};Error.captureStackTrace?Error.captureStackTrace(f):f=new Error;const h=f.stack?f.stack.replace(/^.+\n/,""):"";try{o.stack?h&&!String(o.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+h):o.stack=h}catch{}}throw o}}_request(d,c){typeof d=="string"?(c=c||{},c.url=d):c=d||{},c=no(this.defaults,c);const{transitional:o,paramsSerializer:f,headers:h}=c;o!==void 0&&Nf.assertOptions(o,{silentJSONParsing:cr.transitional(cr.boolean),forcedJSONParsing:cr.transitional(cr.boolean),clarifyTimeoutError:cr.transitional(cr.boolean)},!1),f!=null&&(xe.isFunction(f)?c.paramsSerializer={serialize:f}:Nf.assertOptions(f,{encode:cr.function,serialize:cr.function},!0)),c.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?c.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:c.allowAbsoluteUrls=!0),Nf.assertOptions(c,{baseUrl:cr.spelling("baseURL"),withXsrfToken:cr.spelling("withXSRFToken")},!0),c.method=(c.method||this.defaults.method||"get").toLowerCase();let p=h&&xe.merge(h.common,h[c.method]);h&&xe.forEach(["delete","get","head","post","put","patch","common"],k=>{delete h[k]}),c.headers=jl.concat(p,h);const y=[];let N=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(c)===!1||(N=N&&B.synchronous,y.unshift(B.fulfilled,B.rejected))});const j=[];this.interceptors.response.forEach(function(B){j.push(B.fulfilled,B.rejected)});let v,S=0,M;if(!N){const k=[Ip.bind(this),void 0];for(k.unshift(...y),k.push(...j),M=k.length,v=Promise.resolve(c);S<M;)v=v.then(k[S++],k[S++]);return v}M=y.length;let U=c;for(;S<M;){const k=y[S++],B=y[S++];try{U=k(U)}catch(A){B.call(this,A);break}}try{v=Ip.call(this,U)}catch(k){return Promise.reject(k)}for(S=0,M=j.length;S<M;)v=v.then(j[S++],j[S++]);return v}getUri(d){d=no(this.defaults,d);const c=Hg(d.baseURL,d.url,d.allowAbsoluteUrls);return Lg(c,d.params,d.paramsSerializer)}};xe.forEach(["delete","get","head","options"],function(d){lo.prototype[d]=function(c,o){return this.request(no(o||{},{method:d,url:c,data:(o||{}).data}))}});xe.forEach(["post","put","patch"],function(d){function c(o){return function(h,p,y){return this.request(no(y||{},{method:d,headers:o?{"Content-Type":"multipart/form-data"}:{},url:h,data:p}))}}lo.prototype[d]=c(),lo.prototype[d+"Form"]=c(!0)});let oj=class Ig{constructor(d){if(typeof d!="function")throw new TypeError("executor must be a function.");let c;this.promise=new Promise(function(h){c=h});const o=this;this.promise.then(f=>{if(!o._listeners)return;let h=o._listeners.length;for(;h-- >0;)o._listeners[h](f);o._listeners=null}),this.promise.then=f=>{let h;const p=new Promise(y=>{o.subscribe(y),h=y}).then(f);return p.cancel=function(){o.unsubscribe(h)},p},d(function(h,p,y){o.reason||(o.reason=new Yd(h,p,y),c(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(d){if(this.reason){d(this.reason);return}this._listeners?this._listeners.push(d):this._listeners=[d]}unsubscribe(d){if(!this._listeners)return;const c=this._listeners.indexOf(d);c!==-1&&this._listeners.splice(c,1)}toAbortSignal(){const d=new AbortController,c=o=>{d.abort(o)};return this.subscribe(c),d.signal.unsubscribe=()=>this.unsubscribe(c),d.signal}static source(){let d;return{token:new Ig(function(f){d=f}),cancel:d}}};function dj(n){return function(c){return n.apply(null,c)}}function uj(n){return xe.isObject(n)&&n.isAxiosError===!0}const rp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(rp).forEach(([n,d])=>{rp[d]=n});function Gg(n){const d=new lo(n),c=Ng(lo.prototype.request,d);return xe.extend(c,lo.prototype,d,{allOwnKeys:!0}),xe.extend(c,d,null,{allOwnKeys:!0}),c.create=function(f){return Gg(no(n,f))},c}const Pt=Gg(sx);Pt.Axios=lo;Pt.CanceledError=Yd;Pt.CancelToken=oj;Pt.isCancel=Bg;Pt.VERSION=Pg;Pt.toFormData=Lf;Pt.AxiosError=ft;Pt.Cancel=Pt.CanceledError;Pt.all=function(d){return Promise.all(d)};Pt.spread=dj;Pt.isAxiosError=uj;Pt.mergeConfig=no;Pt.AxiosHeaders=jl;Pt.formToJSON=n=>zg(xe.isHTMLForm(n)?new FormData(n):n);Pt.getAdapter=qg.getAdapter;Pt.HttpStatusCode=rp;Pt.default=Pt;const{Axios:t_,AxiosError:s_,CanceledError:a_,isCancel:l_,CancelToken:n_,VERSION:r_,all:i_,Cancel:c_,isAxiosError:o_,spread:d_,toFormData:u_,AxiosHeaders:m_,HttpStatusCode:x_,formToJSON:f_,getAdapter:h_,mergeConfig:p_}=Pt;window._=zb;window.axios=Pt;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.axios.defaults.headers.common.Accept="application/json";window.axios.defaults.withCredentials=!0;var Yh={exports:{}},ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vp;function mj(){if(Vp)return ct;Vp=1;var n=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),M=Symbol.iterator;function U(E){return E===null||typeof E!="object"?null:(E=M&&E[M]||E["@@iterator"],typeof E=="function"?E:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,A={};function $(E,ee,V){this.props=E,this.context=ee,this.refs=A,this.updater=V||k}$.prototype.isReactComponent={},$.prototype.setState=function(E,ee){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,ee,"setState")},$.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function Y(){}Y.prototype=$.prototype;function w(E,ee,V){this.props=E,this.context=ee,this.refs=A,this.updater=V||k}var D=w.prototype=new Y;D.constructor=w,B(D,$.prototype),D.isPureReactComponent=!0;var z=Array.isArray;function W(){}var F={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function I(E,ee,V){var re=V.ref;return{$$typeof:n,type:E,key:ee,ref:re!==void 0?re:null,props:V}}function Q(E,ee){return I(E.type,ee,E.props)}function de(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function te(E){var ee={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(V){return ee[V]})}var pe=/\/+/g;function q(E,ee){return typeof E=="object"&&E!==null&&E.key!=null?te(""+E.key):ee.toString(36)}function ae(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(W,W):(E.status="pending",E.then(function(ee){E.status==="pending"&&(E.status="fulfilled",E.value=ee)},function(ee){E.status==="pending"&&(E.status="rejected",E.reason=ee)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function H(E,ee,V,re,Re){var De=typeof E;(De==="undefined"||De==="boolean")&&(E=null);var ge=!1;if(E===null)ge=!0;else switch(De){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(E.$$typeof){case n:case d:ge=!0;break;case v:return ge=E._init,H(ge(E._payload),ee,V,re,Re)}}if(ge)return Re=Re(E),ge=re===""?"."+q(E,0):re,z(Re)?(V="",ge!=null&&(V=ge.replace(pe,"$&/")+"/"),H(Re,ee,V,"",function(Rt){return Rt})):Re!=null&&(de(Re)&&(Re=Q(Re,V+(Re.key==null||E&&E.key===Re.key?"":(""+Re.key).replace(pe,"$&/")+"/")+ge)),ee.push(Re)),1;ge=0;var ke=re===""?".":re+":";if(z(E))for(var Oe=0;Oe<E.length;Oe++)re=E[Oe],De=ke+q(re,Oe),ge+=H(re,ee,V,De,Re);else if(Oe=U(E),typeof Oe=="function")for(E=Oe.call(E),Oe=0;!(re=E.next()).done;)re=re.value,De=ke+q(re,Oe++),ge+=H(re,ee,V,De,Re);else if(De==="object"){if(typeof E.then=="function")return H(ae(E),ee,V,re,Re);throw ee=String(E),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ge}function L(E,ee,V){if(E==null)return E;var re=[],Re=0;return H(E,re,"","",function(De){return ee.call(V,De,Re++)}),re}function Z(E){if(E._status===-1){var ee=E._result;ee=ee(),ee.then(function(V){(E._status===0||E._status===-1)&&(E._status=1,E._result=V)},function(V){(E._status===0||E._status===-1)&&(E._status=2,E._result=V)}),E._status===-1&&(E._status=0,E._result=ee)}if(E._status===1)return E._result.default;throw E._result}var Te=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},ye={map:L,forEach:function(E,ee,V){L(E,function(){ee.apply(this,arguments)},V)},count:function(E){var ee=0;return L(E,function(){ee++}),ee},toArray:function(E){return L(E,function(ee){return ee})||[]},only:function(E){if(!de(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return ct.Activity=S,ct.Children=ye,ct.Component=$,ct.Fragment=c,ct.Profiler=f,ct.PureComponent=w,ct.StrictMode=o,ct.Suspense=N,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,ct.__COMPILER_RUNTIME={__proto__:null,c:function(E){return F.H.useMemoCache(E)}},ct.cache=function(E){return function(){return E.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(E,ee,V){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var re=B({},E.props),Re=E.key;if(ee!=null)for(De in ee.key!==void 0&&(Re=""+ee.key),ee)!J.call(ee,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ee.ref===void 0||(re[De]=ee[De]);var De=arguments.length-2;if(De===1)re.children=V;else if(1<De){for(var ge=Array(De),ke=0;ke<De;ke++)ge[ke]=arguments[ke+2];re.children=ge}return I(E.type,Re,re)},ct.createContext=function(E){return E={$$typeof:p,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:h,_context:E},E},ct.createElement=function(E,ee,V){var re,Re={},De=null;if(ee!=null)for(re in ee.key!==void 0&&(De=""+ee.key),ee)J.call(ee,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(Re[re]=ee[re]);var ge=arguments.length-2;if(ge===1)Re.children=V;else if(1<ge){for(var ke=Array(ge),Oe=0;Oe<ge;Oe++)ke[Oe]=arguments[Oe+2];Re.children=ke}if(E&&E.defaultProps)for(re in ge=E.defaultProps,ge)Re[re]===void 0&&(Re[re]=ge[re]);return I(E,De,Re)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(E){return{$$typeof:y,render:E}},ct.isValidElement=de,ct.lazy=function(E){return{$$typeof:v,_payload:{_status:-1,_result:E},_init:Z}},ct.memo=function(E,ee){return{$$typeof:j,type:E,compare:ee===void 0?null:ee}},ct.startTransition=function(E){var ee=F.T,V={};F.T=V;try{var re=E(),Re=F.S;Re!==null&&Re(V,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(W,Te)}catch(De){Te(De)}finally{ee!==null&&V.types!==null&&(ee.types=V.types),F.T=ee}},ct.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},ct.use=function(E){return F.H.use(E)},ct.useActionState=function(E,ee,V){return F.H.useActionState(E,ee,V)},ct.useCallback=function(E,ee){return F.H.useCallback(E,ee)},ct.useContext=function(E){return F.H.useContext(E)},ct.useDebugValue=function(){},ct.useDeferredValue=function(E,ee){return F.H.useDeferredValue(E,ee)},ct.useEffect=function(E,ee){return F.H.useEffect(E,ee)},ct.useEffectEvent=function(E){return F.H.useEffectEvent(E)},ct.useId=function(){return F.H.useId()},ct.useImperativeHandle=function(E,ee,V){return F.H.useImperativeHandle(E,ee,V)},ct.useInsertionEffect=function(E,ee){return F.H.useInsertionEffect(E,ee)},ct.useLayoutEffect=function(E,ee){return F.H.useLayoutEffect(E,ee)},ct.useMemo=function(E,ee){return F.H.useMemo(E,ee)},ct.useOptimistic=function(E,ee){return F.H.useOptimistic(E,ee)},ct.useReducer=function(E,ee,V){return F.H.useReducer(E,ee,V)},ct.useRef=function(E){return F.H.useRef(E)},ct.useState=function(E){return F.H.useState(E)},ct.useSyncExternalStore=function(E,ee,V){return F.H.useSyncExternalStore(E,ee,V)},ct.useTransition=function(){return F.H.useTransition()},ct.version="19.2.0",ct}var Yp;function hp(){return Yp||(Yp=1,Yh.exports=mj()),Yh.exports}var g=hp();const Vg=yg(g);var Wh={exports:{}},Ym={},Qh={exports:{}},Xh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp;function xj(){return Wp||(Wp=1,(function(n){function d(H,L){var Z=H.length;H.push(L);e:for(;0<Z;){var Te=Z-1>>>1,ye=H[Te];if(0<f(ye,L))H[Te]=L,H[Z]=ye,Z=Te;else break e}}function c(H){return H.length===0?null:H[0]}function o(H){if(H.length===0)return null;var L=H[0],Z=H.pop();if(Z!==L){H[0]=Z;e:for(var Te=0,ye=H.length,E=ye>>>1;Te<E;){var ee=2*(Te+1)-1,V=H[ee],re=ee+1,Re=H[re];if(0>f(V,Z))re<ye&&0>f(Re,V)?(H[Te]=Re,H[re]=Z,Te=re):(H[Te]=V,H[ee]=Z,Te=ee);else if(re<ye&&0>f(Re,Z))H[Te]=Re,H[re]=Z,Te=re;else break e}}return L}function f(H,L){var Z=H.sortIndex-L.sortIndex;return Z!==0?Z:H.id-L.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var p=Date,y=p.now();n.unstable_now=function(){return p.now()-y}}var N=[],j=[],v=1,S=null,M=3,U=!1,k=!1,B=!1,A=!1,$=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var L=c(j);L!==null;){if(L.callback===null)o(j);else if(L.startTime<=H)o(j),L.sortIndex=L.expirationTime,d(N,L);else break;L=c(j)}}function z(H){if(B=!1,D(H),!k)if(c(N)!==null)k=!0,W||(W=!0,te());else{var L=c(j);L!==null&&ae(z,L.startTime-H)}}var W=!1,F=-1,J=5,I=-1;function Q(){return A?!0:!(n.unstable_now()-I<J)}function de(){if(A=!1,W){var H=n.unstable_now();I=H;var L=!0;try{e:{k=!1,B&&(B=!1,Y(F),F=-1),U=!0;var Z=M;try{t:{for(D(H),S=c(N);S!==null&&!(S.expirationTime>H&&Q());){var Te=S.callback;if(typeof Te=="function"){S.callback=null,M=S.priorityLevel;var ye=Te(S.expirationTime<=H);if(H=n.unstable_now(),typeof ye=="function"){S.callback=ye,D(H),L=!0;break t}S===c(N)&&o(N),D(H)}else o(N);S=c(N)}if(S!==null)L=!0;else{var E=c(j);E!==null&&ae(z,E.startTime-H),L=!1}}break e}finally{S=null,M=Z,U=!1}L=void 0}}finally{L?te():W=!1}}}var te;if(typeof w=="function")te=function(){w(de)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,q=pe.port2;pe.port1.onmessage=de,te=function(){q.postMessage(null)}}else te=function(){$(de,0)};function ae(H,L){F=$(function(){H(n.unstable_now())},L)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_next=function(H){switch(M){case 1:case 2:case 3:var L=3;break;default:L=M}var Z=M;M=L;try{return H()}finally{M=Z}},n.unstable_requestPaint=function(){A=!0},n.unstable_runWithPriority=function(H,L){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Z=M;M=H;try{return L()}finally{M=Z}},n.unstable_scheduleCallback=function(H,L,Z){var Te=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Te+Z:Te):Z=Te,H){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=Z+ye,H={id:v++,callback:L,priorityLevel:H,startTime:Z,expirationTime:ye,sortIndex:-1},Z>Te?(H.sortIndex=Z,d(j,H),c(N)===null&&H===c(j)&&(B?(Y(F),F=-1):B=!0,ae(z,Z-Te))):(H.sortIndex=ye,d(N,H),k||U||(k=!0,W||(W=!0,te()))),H},n.unstable_shouldYield=Q,n.unstable_wrapCallback=function(H){var L=M;return function(){var Z=M;M=L;try{return H.apply(this,arguments)}finally{M=Z}}}})(Xh)),Xh}var Qp;function fj(){return Qp||(Qp=1,Qh.exports=xj()),Qh.exports}var Zh={exports:{}},Aa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp;function hj(){if(Xp)return Aa;Xp=1;var n=hp();function d(N){var j="https://react.dev/errors/"+N;if(1<arguments.length){j+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)j+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+N+"; visit "+j+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(){}var o={d:{f:c,r:function(){throw Error(d(522))},D:c,C:c,L:c,m:c,X:c,S:c,M:c},p:0,findDOMNode:null},f=Symbol.for("react.portal");function h(N,j,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:S==null?null:""+S,children:N,containerInfo:j,implementation:v}}var p=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(N,j){if(N==="font")return"";if(typeof j=="string")return j==="use-credentials"?j:""}return Aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Aa.createPortal=function(N,j){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j||j.nodeType!==1&&j.nodeType!==9&&j.nodeType!==11)throw Error(d(299));return h(N,j,null,v)},Aa.flushSync=function(N){var j=p.T,v=o.p;try{if(p.T=null,o.p=2,N)return N()}finally{p.T=j,o.p=v,o.d.f()}},Aa.preconnect=function(N,j){typeof N=="string"&&(j?(j=j.crossOrigin,j=typeof j=="string"?j==="use-credentials"?j:"":void 0):j=null,o.d.C(N,j))},Aa.prefetchDNS=function(N){typeof N=="string"&&o.d.D(N)},Aa.preinit=function(N,j){if(typeof N=="string"&&j&&typeof j.as=="string"){var v=j.as,S=y(v,j.crossOrigin),M=typeof j.integrity=="string"?j.integrity:void 0,U=typeof j.fetchPriority=="string"?j.fetchPriority:void 0;v==="style"?o.d.S(N,typeof j.precedence=="string"?j.precedence:void 0,{crossOrigin:S,integrity:M,fetchPriority:U}):v==="script"&&o.d.X(N,{crossOrigin:S,integrity:M,fetchPriority:U,nonce:typeof j.nonce=="string"?j.nonce:void 0})}},Aa.preinitModule=function(N,j){if(typeof N=="string")if(typeof j=="object"&&j!==null){if(j.as==null||j.as==="script"){var v=y(j.as,j.crossOrigin);o.d.M(N,{crossOrigin:v,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0})}}else j==null&&o.d.M(N)},Aa.preload=function(N,j){if(typeof N=="string"&&typeof j=="object"&&j!==null&&typeof j.as=="string"){var v=j.as,S=y(v,j.crossOrigin);o.d.L(N,v,{crossOrigin:S,integrity:typeof j.integrity=="string"?j.integrity:void 0,nonce:typeof j.nonce=="string"?j.nonce:void 0,type:typeof j.type=="string"?j.type:void 0,fetchPriority:typeof j.fetchPriority=="string"?j.fetchPriority:void 0,referrerPolicy:typeof j.referrerPolicy=="string"?j.referrerPolicy:void 0,imageSrcSet:typeof j.imageSrcSet=="string"?j.imageSrcSet:void 0,imageSizes:typeof j.imageSizes=="string"?j.imageSizes:void 0,media:typeof j.media=="string"?j.media:void 0})}},Aa.preloadModule=function(N,j){if(typeof N=="string")if(j){var v=y(j.as,j.crossOrigin);o.d.m(N,{as:typeof j.as=="string"&&j.as!=="script"?j.as:void 0,crossOrigin:v,integrity:typeof j.integrity=="string"?j.integrity:void 0})}else o.d.m(N)},Aa.requestFormReset=function(N){o.d.r(N)},Aa.unstable_batchedUpdates=function(N,j){return N(j)},Aa.useFormState=function(N,j,v){return p.H.useFormState(N,j,v)},Aa.useFormStatus=function(){return p.H.useHostTransitionStatus()},Aa.version="19.2.0",Aa}var Zp;function Yg(){if(Zp)return Zh.exports;Zp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(d){console.error(d)}}return n(),Zh.exports=hj(),Zh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kp;function pj(){if(Kp)return Ym;Kp=1;var n=fj(),d=hp(),c=Yg();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function p(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function y(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function N(t){if(h(t)!==t)throw Error(o(188))}function j(t){var s=t.alternate;if(!s){if(s=h(t),s===null)throw Error(o(188));return s!==t?null:t}for(var a=t,r=s;;){var u=a.return;if(u===null)break;var x=u.alternate;if(x===null){if(r=u.return,r!==null){a=r;continue}break}if(u.child===x.child){for(x=u.child;x;){if(x===a)return N(u),t;if(x===r)return N(u),s;x=x.sibling}throw Error(o(188))}if(a.return!==r.return)a=u,r=x;else{for(var _=!1,T=u.child;T;){if(T===a){_=!0,a=u,r=x;break}if(T===r){_=!0,r=u,a=x;break}T=T.sibling}if(!_){for(T=x.child;T;){if(T===a){_=!0,a=x,r=u;break}if(T===r){_=!0,r=x,a=u;break}T=T.sibling}if(!_)throw Error(o(189))}}if(a.alternate!==r)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?t:s}function v(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=v(t),s!==null)return s;t=t.sibling}return null}var S=Object.assign,M=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),w=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function te(t){return t===null||typeof t!="object"?null:(t=de&&t[de]||t["@@iterator"],typeof t=="function"?t:null)}var pe=Symbol.for("react.client.reference");function q(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===pe?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case $:return"Profiler";case A:return"StrictMode";case z:return"Suspense";case W:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case w:return t.displayName||"Context";case Y:return(t._context.displayName||"Context")+".Consumer";case D:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return s=t.displayName||null,s!==null?s:q(t.type)||"Memo";case J:s=t._payload,t=t._init;try{return q(t(s))}catch{}}return null}var ae=Array.isArray,H=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},Te=[],ye=-1;function E(t){return{current:t}}function ee(t){0>ye||(t.current=Te[ye],Te[ye]=null,ye--)}function V(t,s){ye++,Te[ye]=t.current,t.current=s}var re=E(null),Re=E(null),De=E(null),ge=E(null);function ke(t,s){switch(V(De,s),V(Re,t),V(re,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Yc(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Yc(s),t=Sa(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ee(re),V(re,t)}function Oe(){ee(re),ee(Re),ee(De)}function Rt(t){t.memoizedState!==null&&V(ge,t);var s=re.current,a=Sa(s,t.type);s!==a&&(V(Re,t),V(re,a))}function pt(t){Re.current===t&&(ee(re),ee(Re)),ge.current===t&&(ee(ge),Ti._currentValue=Z)}var ns,Wt;function Nt(t){if(ns===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);ns=s&&s[1]||"",Wt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ns+t+Wt}var rs=!1;function Mt(t,s){if(!t||rs)return"";rs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(s){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(fe){var oe=fe}Reflect.construct(t,[],_e)}else{try{_e.call()}catch(fe){oe=fe}t.call(_e.prototype)}}else{try{throw Error()}catch(fe){oe=fe}(_e=t())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(fe){if(fe&&oe&&typeof fe.stack=="string")return[fe.stack,oe.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=r.DetermineComponentFrameRoot(),_=x[0],T=x[1];if(_&&T){var G=_.split(`
`),ce=T.split(`
`);for(u=r=0;r<G.length&&!G[r].includes("DetermineComponentFrameRoot");)r++;for(;u<ce.length&&!ce[u].includes("DetermineComponentFrameRoot");)u++;if(r===G.length||u===ce.length)for(r=G.length-1,u=ce.length-1;1<=r&&0<=u&&G[r]!==ce[u];)u--;for(;1<=r&&0<=u;r--,u--)if(G[r]!==ce[u]){if(r!==1||u!==1)do if(r--,u--,0>u||G[r]!==ce[u]){var ve=`
`+G[r].replace(" at new "," at ");return t.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",t.displayName)),ve}while(1<=r&&0<=u);break}}}finally{rs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Nt(a):""}function is(t,s){switch(t.tag){case 26:case 27:case 5:return Nt(t.type);case 16:return Nt("Lazy");case 13:return t.child!==s&&s!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return Mt(t.type,!1);case 11:return Mt(t.type.render,!1);case 1:return Mt(t.type,!0);case 31:return Nt("Activity");default:return""}}function zs(t){try{var s="",a=null;do s+=is(t,a),a=t,t=t.return;while(t);return s}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var Bs=Object.prototype.hasOwnProperty,es=n.unstable_scheduleCallback,It=n.unstable_cancelCallback,fs=n.unstable_shouldYield,Is=n.unstable_requestPaint,os=n.unstable_now,Qs=n.unstable_getCurrentPriorityLevel,Us=n.unstable_ImmediatePriority,ts=n.unstable_UserBlockingPriority,ds=n.unstable_NormalPriority,Gs=n.unstable_LowPriority,Vs=n.unstable_IdlePriority,sa=n.log,He=n.unstable_setDisableYieldValue,ht=null,gt=null;function cs(t){if(typeof sa=="function"&&He(t),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(ht,t)}catch{}}var Ct=Math.clz32?Math.clz32:ia,Hs=Math.log,xa=Math.LN2;function ia(t){return t>>>=0,t===0?32:31-(Hs(t)/xa|0)|0}var je=256,Ae=262144,Be=4194304;function qe(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function et(t,s,a){var r=t.pendingLanes;if(r===0)return 0;var u=0,x=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=r&134217727;return T!==0?(r=T&~x,r!==0?u=qe(r):(_&=T,_!==0?u=qe(_):a||(a=T&~t,a!==0&&(u=qe(a))))):(T=r&~x,T!==0?u=qe(T):_!==0?u=qe(_):a||(a=r&~t,a!==0&&(u=qe(a)))),u===0?0:s!==0&&s!==u&&(s&x)===0&&(x=u&-u,a=s&-s,x>=a||x===32&&(a&4194048)!==0)?s:u}function Ye(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function ot(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function we(){var t=Be;return Be<<=1,(Be&62914560)===0&&(Be=4194304),t}function Ge(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function $e(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Dt(t,s,a,r,u,x){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,G=t.expirationTimes,ce=t.hiddenUpdates;for(a=_&~a;0<a;){var ve=31-Ct(a),_e=1<<ve;T[ve]=0,G[ve]=-1;var oe=ce[ve];if(oe!==null)for(ce[ve]=null,ve=0;ve<oe.length;ve++){var fe=oe[ve];fe!==null&&(fe.lane&=-536870913)}a&=~_e}r!==0&&Qt(t,r,0),x!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=x&~(_&~s))}function Qt(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var r=31-Ct(s);t.entangledLanes|=s,t.entanglements[r]=t.entanglements[r]|1073741824|a&261930}function At(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var r=31-Ct(a),u=1<<r;u&s|t[r]&s&&(t[r]|=s),a&=~u}}function zt(t,s){var a=s&-s;return a=(a&42)!==0?1:he(a),(a&(t.suspendedLanes|s))!==0?0:a}function he(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ie(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Xe(){var t=L.p;return t!==0?t:(t=window.event,t===void 0?32:of(t.type))}function dt(t,s){var a=L.p;try{return L.p=t,s()}finally{L.p=a}}var _t=Math.random().toString(36).slice(2),at="__reactFiber$"+_t,Tt="__reactProps$"+_t,vs="__reactContainer$"+_t,Ea="__reactEvents$"+_t,tn="__reactListeners$"+_t,$l="__reactHandles$"+_t,Fl="__reactResources$"+_t,el="__reactMarker$"+_t;function ca(t){delete t[at],delete t[Tt],delete t[Ea],delete t[tn],delete t[$l]}function yl(t){var s=t[at];if(s)return s;for(var a=t.parentNode;a;){if(s=a[vs]||a[at]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=G0(t);t!==null;){if(a=t[at])return a;t=G0(t)}return s}t=a,a=t.parentNode}return null}function tl(t){if(t=t[at]||t[vs]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Tn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function sl(t){var s=t[Fl];return s||(s=t[Fl]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ks(t){t[el]=!0}var Ui=new Set,Hi={};function Nl(t,s){ql(t,s),ql(t+"Capture",s)}function ql(t,s){for(Hi[t]=s,t=0;t<s.length;t++)Ui.add(s[t])}var $i=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fi={},Ot={};function Pl(t){return Bs.call(Ot,t)?!0:Bs.call(Fi,t)?!1:$i.test(t)?Ot[t]=!0:(Fi[t]=!0,!1)}function sn(t,s,a){if(Pl(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var r=s.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Rn(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Ta(t,s,a,r){if(r===null)t.removeAttribute(a);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+r)}}function Ra(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ro(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ff(t,s,a){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,x=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return u.call(this)},set:function(_){a=""+_,x.call(this,_)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function io(t){if(!t._valueTracker){var s=ro(t)?"checked":"value";t._valueTracker=Ff(t,s,""+t[s])}}function qi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),r="";return t&&(r=ro(t)?t.checked?"true":"false":t.value),t=r,t!==a?(s.setValue(t),!0):!1}function Pi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var qf=/[\n"\\]/g;function Ma(t){return t.replace(qf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function co(t,s,a,r,u,x,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),s!=null?_==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Ra(s)):t.value!==""+Ra(s)&&(t.value=""+Ra(s)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),s!=null?Kd(t,_,Ra(s)):a!=null?Kd(t,_,Ra(a)):r!=null&&t.removeAttribute("value"),u==null&&x!=null&&(t.defaultChecked=!!x),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ra(T):t.removeAttribute("name")}function oo(t,s,a,r,u,x,_,T){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),s!=null||a!=null){if(!(x!=="submit"&&x!=="reset"||s!=null)){io(t);return}a=a!=null?""+Ra(a):"",s=s!=null?""+Ra(s):a,T||s===t.value||(t.value=s),t.defaultValue=s}r=r??u,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=T?t.checked:!!r,t.defaultChecked=!!r,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),io(t)}function Kd(t,s,a){s==="number"&&Pi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function dr(t,s,a,r){if(t=t.options,s){s={};for(var u=0;u<a.length;u++)s["$"+a[u]]=!0;for(a=0;a<t.length;a++)u=s.hasOwnProperty("$"+t[a].value),t[a].selected!==u&&(t[a].selected=u),u&&r&&(t[a].defaultSelected=!0)}else{for(a=""+Ra(a),s=null,u=0;u<t.length;u++){if(t[u].value===a){t[u].selected=!0,r&&(t[u].defaultSelected=!0);return}s!==null||t[u].disabled||(s=t[u])}s!==null&&(s.selected=!0)}}function uo(t,s,a){if(s!=null&&(s=""+Ra(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Ra(a):""}function mo(t,s,a,r){if(s==null){if(r!=null){if(a!=null)throw Error(o(92));if(ae(r)){if(1<r.length)throw Error(o(93));r=r[0]}a=r}a==null&&(a=""),s=a}a=Ra(s),t.defaultValue=a,r=t.textContent,r===a&&r!==""&&r!==null&&(t.value=r),io(t)}function _l(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var nx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jd(t,s,a){var r=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?r?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":r?t.setProperty(s,a):typeof a!="number"||a===0||nx.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function rx(t,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,a!=null){for(var r in a)!a.hasOwnProperty(r)||s!=null&&s.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var u in s)r=s[u],s.hasOwnProperty(u)&&a[u]!==r&&Jd(t,u,r)}else for(var x in s)s.hasOwnProperty(x)&&Jd(t,x,s[x])}function xo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ix=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ii(t){return cx.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function an(){}var eu=null;function tu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ur=null,Hr=null;function ox(t){var s=tl(t);if(s&&(t=s.stateNode)){var a=t[Tt]||null;e:switch(t=s.stateNode,s.type){case"input":if(co(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Ma(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var r=a[s];if(r!==t&&r.form===t.form){var u=r[Tt]||null;if(!u)throw Error(o(90));co(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(s=0;s<a.length;s++)r=a[s],r.form===t.form&&qi(r)}break e;case"textarea":uo(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&dr(t,!!a.multiple,s,!1)}}}var su=!1;function dx(t,s,a){if(su)return t(s,a);su=!0;try{var r=t(s);return r}finally{if(su=!1,(ur!==null||Hr!==null)&&(pd(),ur&&(s=ur,t=Hr,Hr=ur=null,ox(s),t)))for(s=0;s<t.length;s++)ox(t[s])}}function mr(t,s){var a=t.stateNode;if(a===null)return null;var r=a[Tt]||null;if(r===null)return null;a=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),au=!1;if(ln)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){au=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{au=!1}var Mn=null,lu=null,Xt=null;function ss(){if(Xt)return Xt;var t,s=lu,a=s.length,r,u="value"in Mn?Mn.value:Mn.textContent,x=u.length;for(t=0;t<a&&s[t]===u[t];t++);var _=a-t;for(r=1;r<=_&&s[a-r]===u[x-r];r++);return Xt=u.slice(t,1<r?1-r:void 0)}function fo(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ho(){return!0}function ux(){return!1}function fa(t){function s(a,r,u,x,_){this._reactName=a,this._targetInst=u,this.type=r,this.nativeEvent=x,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(x):x[T]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?ho:ux,this.isPropagationStopped=ux,this}return S(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),s}var xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},po=fa(xr),$r=S({},xr,{view:0,detail:0}),Pf=fa($r),$s,Vi,wl,Yi=S({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wi,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wl&&(wl&&t.type==="mousemove"?($s=t.screenX-wl.screenX,Vi=t.screenY-wl.screenY):Vi=$s=0,wl=t),$s)},movementY:function(t){return"movementY"in t?t.movementY:Vi}}),go=fa(Yi),al=S({},Yi,{dataTransfer:0}),mx=fa(al),xx=S({},$r,{relatedTarget:0}),bo=fa(xx),fx=S({},xr,{animationName:0,elapsedTime:0,pseudoElement:0}),hx=fa(fx),px=S({},xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Oa=fa(px),If=S({},xr,{data:0}),La=fa(If),Gf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},On={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vo(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=On[t])?!!s[t]:!1}function Wi(){return vo}var hs=S({},$r,{key:function(t){if(t.key){var s=Gf[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=fo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wi,charCode:function(t){return t.type==="keypress"?fo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ln=fa(hs),nu=S({},Yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bx=fa(nu),ru=S({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wi}),Vf=fa(ru),Yf=S({},xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wf=fa(Yf),vx=S({},Yi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jo=fa(vx),Fr=S({},xr,{newState:0,oldState:0}),Qf=fa(Fr),jx=[9,13,27,32],yo=ln&&"CompositionEvent"in window,fr=null;ln&&"documentMode"in document&&(fr=document.documentMode);var iu=ln&&"TextEvent"in window&&!fr,cu=ln&&(!yo||fr&&8<fr&&11>=fr),yx=" ",No=!1;function _o(t,s){switch(t){case"keyup":return jx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var hr=!1;function Da(t,s){switch(t){case"compositionend":return Nx(s);case"keypress":return s.which!==32?null:(No=!0,yx);case"textInput":return t=s.data,t===yx&&No?null:t;default:return null}}function ou(t,s){if(hr)return t==="compositionend"||!yo&&_o(t,s)?(t=ss(),Xt=lu=Mn=null,hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return cu&&s.locale!=="ko"?null:s.data;default:return null}}var Qi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Qi[t.type]:s==="textarea"}function uu(t,s,a,r){ur?Hr?Hr.push(r):Hr=[r]:ur=r,s=Pc(s,"onChange"),0<s.length&&(a=new po("onChange","change",null,a,r),t.push({event:a,listeners:s}))}var Xi=null,Zi=null;function Xf(t){z0(t,0)}function wo(t){var s=Tn(t);if(qi(s))return t}function _x(t,s){if(t==="change")return s}var pr=!1;if(ln){var mu;if(ln){var xu="oninput"in document;if(!xu){var So=document.createElement("div");So.setAttribute("oninput","return;"),xu=typeof So.oninput=="function"}mu=xu}else mu=!1;pr=mu&&(!document.documentMode||9<document.documentMode)}function fu(){Xi&&(Xi.detachEvent("onpropertychange",nn),Zi=Xi=null)}function nn(t){if(t.propertyName==="value"&&wo(Zi)){var s=[];uu(s,Zi,t,tu(t)),dx(Xf,s)}}function Co(t,s,a){t==="focusin"?(fu(),Xi=s,Zi=a,Xi.attachEvent("onpropertychange",nn)):t==="focusout"&&fu()}function Zf(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wo(Zi)}function Kf(t,s){if(t==="click")return wo(s)}function Jf(t,s){if(t==="input"||t==="change")return wo(s)}function qr(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var js=typeof Object.is=="function"?Object.is:qr;function Pr(t,s){if(js(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),r=Object.keys(s);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var u=a[r];if(!Bs.call(s,u)||!js(t[u],s[u]))return!1}return!0}function wx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sx(t,s){var a=wx(t);t=0;for(var r;a;){if(a.nodeType===3){if(r=t+a.textContent.length,t<=s&&r>=s)return{node:a,offset:s-t};t=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=wx(a)}}function Cx(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Cx(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Ax(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Pi(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Pi(t.document)}return s}function hu(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Ir=ln&&"documentMode"in document&&11>=document.documentMode,se=null,be=null,me=null,ze=!1;function tt(t,s,a){var r=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ze||se==null||se!==Pi(r)||(r=se,"selectionStart"in r&&hu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),me&&Pr(me,r)||(me=r,r=Pc(be,"onSelect"),0<r.length&&(s=new po("onSelect","select",null,s,a),t.push({event:s,listeners:r}),s.target=se)))}function vt(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var ps={animationend:vt("Animation","AnimationEnd"),animationiteration:vt("Animation","AnimationIteration"),animationstart:vt("Animation","AnimationStart"),transitionrun:vt("Transition","TransitionRun"),transitionstart:vt("Transition","TransitionStart"),transitioncancel:vt("Transition","TransitionCancel"),transitionend:vt("Transition","TransitionEnd")},Gt={},Ao={};ln&&(Ao=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function gr(t){if(Gt[t])return Gt[t];if(!ps[t])return t;var s=ps[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ao)return Gt[t]=s[a];return t}var za=gr("animationend"),Ki=gr("animationiteration"),kx=gr("animationstart"),Gr=gr("transitionrun"),ko=gr("transitionstart"),Eo=gr("transitioncancel"),$t=gr("transitionend"),Ex=new Map,To="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");To.push("scrollEnd");function ha(t,s){Ex.set(t,s),Nl(s,[t])}var Ro=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},ll=[],Vr=0,Yr=0;function Sl(){for(var t=Vr,s=Yr=Vr=0;s<t;){var a=ll[s];ll[s++]=null;var r=ll[s];ll[s++]=null;var u=ll[s];ll[s++]=null;var x=ll[s];if(ll[s++]=null,r!==null&&u!==null){var _=r.pending;_===null?u.next=u:(u.next=_.next,_.next=u),r.pending=u}x!==0&&pu(a,u,x)}}function br(t,s,a,r){ll[Vr++]=t,ll[Vr++]=s,ll[Vr++]=a,ll[Vr++]=r,Yr|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function Mo(t,s,a,r){return br(t,s,a,r),Ji(t)}function Il(t,s){return br(t,null,null,s),Ji(t)}function pu(t,s,a){t.lanes|=a;var r=t.alternate;r!==null&&(r.lanes|=a);for(var u=!1,x=t.return;x!==null;)x.childLanes|=a,r=x.alternate,r!==null&&(r.childLanes|=a),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(u=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,u&&s!==null&&(u=31-Ct(a),t=x.hiddenUpdates,r=t[u],r===null?t[u]=[s]:r.push(s),s.lane=a|536870912),x):null}function Ji(t){if(50<zc)throw zc=0,hm=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var rn={};function Tx(t,s,a,r){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(t,s,a,r){return new Tx(t,s,a,r)}function cn(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nl(t,s){var a=t.alternate;return a===null?(a=Xs(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Rx(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Oo(t,s,a,r,u,x){var _=0;if(r=t,typeof t=="function")cn(t)&&(_=1);else if(typeof t=="string")_=Lh(t,a,re.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Xs(31,a,s,u),t.elementType=I,t.lanes=x,t;case B:return vr(a.children,u,x,s);case A:_=8,u|=24;break;case $:return t=Xs(12,a,s,u|2),t.elementType=$,t.lanes=x,t;case z:return t=Xs(13,a,s,u),t.elementType=z,t.lanes=x,t;case W:return t=Xs(19,a,s,u),t.elementType=W,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w:_=10;break e;case Y:_=9;break e;case D:_=11;break e;case F:_=14;break e;case J:_=16,r=null;break e}_=29,a=Error(o(130,t===null?"null":typeof t,"")),r=null}return s=Xs(_,a,s,u),s.elementType=t,s.type=r,s.lanes=x,s}function vr(t,s,a,r){return t=Xs(7,t,r,s),t.lanes=a,t}function Wr(t,s,a){return t=Xs(6,t,null,s),t.lanes=a,t}function ec(t){var s=Xs(18,null,null,0);return s.stateNode=t,s}function tc(t,s,a){return s=Xs(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Mx=new WeakMap;function Ba(t,s){if(typeof t=="object"&&t!==null){var a=Mx.get(t);return a!==void 0?a:(s={value:t,source:s,stack:zs(s)},Mx.set(t,s),s)}return{value:t,source:s,stack:zs(s)}}var Qr=[],Xr=0,_s=null,Ms=0,rl=[],il=0,on=null,Gl=1,cl="";function Ua(t,s){Qr[Xr++]=Ms,Qr[Xr++]=_s,_s=t,Ms=s}function Lo(t,s,a){rl[il++]=Gl,rl[il++]=cl,rl[il++]=on,on=t;var r=Gl;t=cl;var u=32-Ct(r)-1;r&=~(1<<u),a+=1;var x=32-Ct(s)+u;if(30<x){var _=u-u%5;x=(r&(1<<_)-1).toString(32),r>>=_,u-=_,Gl=1<<32-Ct(s)+u|a<<u|r,cl=x+t}else Gl=1<<x|a<<u|r,cl=t}function Dn(t){t.return!==null&&(Ua(t,1),Lo(t,1,0))}function jr(t){for(;t===_s;)_s=Qr[--Xr],Qr[Xr]=null,Ms=Qr[--Xr],Qr[Xr]=null;for(;t===on;)on=rl[--il],rl[il]=null,cl=rl[--il],rl[il]=null,Gl=rl[--il],rl[il]=null}function Zr(t,s){rl[il++]=Gl,rl[il++]=cl,rl[il++]=on,Gl=s.id,cl=s.overflow,on=t}var Os=null,Ft=null,kt=!1,zn=null,ol=!1,gu=Error(o(519));function Bn(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hn(Ba(s,t)),gu}function sc(t){var s=t.stateNode,a=t.type,r=t.memoizedProps;switch(s[at]=t,s[Tt]=r,a){case"dialog":yt("cancel",s),yt("close",s);break;case"iframe":case"object":case"embed":yt("load",s);break;case"video":case"audio":for(a=0;a<qc.length;a++)yt(qc[a],s);break;case"source":yt("error",s);break;case"img":case"image":case"link":yt("error",s),yt("load",s);break;case"details":yt("toggle",s);break;case"input":yt("invalid",s),oo(s,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":yt("invalid",s);break;case"textarea":yt("invalid",s),mo(s,r.value,r.defaultValue,r.children)}a=r.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||r.suppressHydrationWarning===!0||H0(s.textContent,a)?(r.popover!=null&&(yt("beforetoggle",s),yt("toggle",s)),r.onScroll!=null&&yt("scroll",s),r.onScrollEnd!=null&&yt("scrollend",s),r.onClick!=null&&(s.onclick=an),s=!0):s=!1,s||Bn(t,!0)}function Kr(t){for(Os=t.return;Os;)switch(Os.tag){case 5:case 31:case 13:ol=!1;return;case 27:case 3:ol=!0;return;default:Os=Os.return}}function yr(t){if(t!==Os)return!1;if(!kt)return Kr(t),kt=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||tr(t.type,t.memoizedProps)),a=!a),a&&Ft&&Bn(t),Kr(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Ft=I0(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));Ft=I0(t)}else s===27?(s=Ft,Ze(t.type)?(t=Dm,Dm=null,Ft=t):Ft=s):Ft=Os?pl(t.stateNode.nextSibling):null;return!0}function R(){Ft=Os=null,kt=!1}function Un(){var t=zn;return t!==null&&(Na===null?Na=t:Na.push.apply(Na,t),zn=null),t}function Hn(t){zn===null?zn=[t]:zn.push(t)}var pa=E(null),nt=null,dn=null;function $n(t,s,a){V(pa,s._currentValue),s._currentValue=a}function un(t){t._currentValue=pa.current,ee(pa)}function mn(t,s,a){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===a)break;t=t.return}}function bu(t,s,a,r){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var x=u.dependencies;if(x!==null){var _=u.child;x=x.firstContext;e:for(;x!==null;){var T=x;x=u;for(var G=0;G<s.length;G++)if(T.context===s[G]){x.lanes|=a,T=x.alternate,T!==null&&(T.lanes|=a),mn(x.return,a,t),r||(_=null);break e}x=T.next}}else if(u.tag===18){if(_=u.return,_===null)throw Error(o(341));_.lanes|=a,x=_.alternate,x!==null&&(x.lanes|=a),mn(_,a,t),_=null}else _=u.child;if(_!==null)_.return=u;else for(_=u;_!==null;){if(_===t){_=null;break}if(u=_.sibling,u!==null){u.return=_.return,_=u;break}_=_.return}u=_}}function Jr(t,s,a,r){t=null;for(var u=s,x=!1;u!==null;){if(!x){if((u.flags&524288)!==0)x=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var _=u.alternate;if(_===null)throw Error(o(387));if(_=_.memoizedProps,_!==null){var T=u.type;js(u.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(u===ge.current){if(_=u.alternate,_===null)throw Error(o(387));_.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(Ti):t=[Ti])}u=u.return}t!==null&&bu(s,t,a,r),s.flags|=262144}function Do(t){for(t=t.firstContext;t!==null;){if(!js(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Nr(t){nt=t,dn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zs(t){return Ox(nt,t)}function dl(t,s){return nt===null&&Nr(t),Ox(t,s)}function Ox(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},dn===null){if(t===null)throw Error(o(308));dn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else dn=dn.next=s;return a}var eh=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,r){t.push(r)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},th=n.unstable_scheduleCallback,sh=n.unstable_NormalPriority,Ls={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cl(){return{controller:new eh,data:new Map,refCount:0}}function ac(t){t.refCount--,t.refCount===0&&th(sh,function(){t.controller.abort()})}var lc=null,vu=0,ei=0,ti=null;function _r(t,s){if(lc===null){var a=lc=[];vu=0,ei=Ya(),ti={status:"pending",value:void 0,then:function(r){a.push(r)}}}return vu++,s.then(Lx,Lx),s}function Lx(){if(--vu===0&&lc!==null){ti!==null&&(ti.status="fulfilled");var t=lc;lc=null,ei=0,ti=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function ah(t,s){var a=[],r={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return t.then(function(){r.status="fulfilled",r.value=s;for(var u=0;u<a.length;u++)(0,a[u])(s)},function(u){for(r.status="rejected",r.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),r}var ul=H.S;H.S=function(t,s){b0=os(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&_r(t,s),ul!==null&&ul(t,s)};var wr=E(null);function ju(){var t=wr.current;return t!==null?t:ls.pooledCache}function zo(t,s){s===null?V(wr,wr.current):V(wr,s.pool)}function Dx(){var t=ju();return t===null?null:{parent:Ls._currentValue,pool:t}}var si=Error(o(460)),Bo=Error(o(474)),nc=Error(o(542)),Uo={then:function(){}};function zx(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ho(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(an,an),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,yu(t),t;default:if(typeof s.status=="string")s.then(an,an);else{if(t=ls,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(r){if(s.status==="pending"){var u=s;u.status="fulfilled",u.value=r}},function(r){if(s.status==="pending"){var u=s;u.status="rejected",u.reason=r}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,yu(t),t}throw Vl=s,si}}function Al(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Vl=a,si):a}}var Vl=null;function Bx(){if(Vl===null)throw Error(o(459));var t=Vl;return Vl=null,t}function yu(t){if(t===si||t===nc)throw Error(o(483))}var ai=null,Ha=0;function li(t){var s=Ha;return Ha+=1,ai===null&&(ai=[]),Ho(ai,t,s)}function kl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function oa(t,s){throw s.$$typeof===M?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ux(t){function s(le,K){if(t){var ie=le.deletions;ie===null?(le.deletions=[K],le.flags|=16):ie.push(K)}}function a(le,K){if(!t)return null;for(;K!==null;)s(le,K),K=K.sibling;return null}function r(le){for(var K=new Map;le!==null;)le.key!==null?K.set(le.key,le):K.set(le.index,le),le=le.sibling;return K}function u(le,K){return le=nl(le,K),le.index=0,le.sibling=null,le}function x(le,K,ie){return le.index=ie,t?(ie=le.alternate,ie!==null?(ie=ie.index,ie<K?(le.flags|=67108866,K):ie):(le.flags|=67108866,K)):(le.flags|=1048576,K)}function _(le){return t&&le.alternate===null&&(le.flags|=67108866),le}function T(le,K,ie,Ne){return K===null||K.tag!==6?(K=Wr(ie,le.mode,Ne),K.return=le,K):(K=u(K,ie),K.return=le,K)}function G(le,K,ie,Ne){var Ve=ie.type;return Ve===B?ve(le,K,ie.props.children,Ne,ie.key):K!==null&&(K.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===J&&Al(Ve)===K.type)?(K=u(K,ie.props),kl(K,ie),K.return=le,K):(K=Oo(ie.type,ie.key,ie.props,null,le.mode,Ne),kl(K,ie),K.return=le,K)}function ce(le,K,ie,Ne){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=tc(ie,le.mode,Ne),K.return=le,K):(K=u(K,ie.children||[]),K.return=le,K)}function ve(le,K,ie,Ne,Ve){return K===null||K.tag!==7?(K=vr(ie,le.mode,Ne,Ve),K.return=le,K):(K=u(K,ie),K.return=le,K)}function _e(le,K,ie){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Wr(""+K,le.mode,ie),K.return=le,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case U:return ie=Oo(K.type,K.key,K.props,null,le.mode,ie),kl(ie,K),ie.return=le,ie;case k:return K=tc(K,le.mode,ie),K.return=le,K;case J:return K=Al(K),_e(le,K,ie)}if(ae(K)||te(K))return K=vr(K,le.mode,ie,null),K.return=le,K;if(typeof K.then=="function")return _e(le,li(K),ie);if(K.$$typeof===w)return _e(le,dl(le,K),ie);oa(le,K)}return null}function oe(le,K,ie,Ne){var Ve=K!==null?K.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ve!==null?null:T(le,K,""+ie,Ne);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case U:return ie.key===Ve?G(le,K,ie,Ne):null;case k:return ie.key===Ve?ce(le,K,ie,Ne):null;case J:return ie=Al(ie),oe(le,K,ie,Ne)}if(ae(ie)||te(ie))return Ve!==null?null:ve(le,K,ie,Ne,null);if(typeof ie.then=="function")return oe(le,K,li(ie),Ne);if(ie.$$typeof===w)return oe(le,K,dl(le,ie),Ne);oa(le,ie)}return null}function fe(le,K,ie,Ne,Ve){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return le=le.get(ie)||null,T(K,le,""+Ne,Ve);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case U:return le=le.get(Ne.key===null?ie:Ne.key)||null,G(K,le,Ne,Ve);case k:return le=le.get(Ne.key===null?ie:Ne.key)||null,ce(K,le,Ne,Ve);case J:return Ne=Al(Ne),fe(le,K,ie,Ne,Ve)}if(ae(Ne)||te(Ne))return le=le.get(ie)||null,ve(K,le,Ne,Ve,null);if(typeof Ne.then=="function")return fe(le,K,ie,li(Ne),Ve);if(Ne.$$typeof===w)return fe(le,K,ie,dl(K,Ne),Ve);oa(K,Ne)}return null}function Ue(le,K,ie,Ne){for(var Ve=null,Bt=null,Fe=K,ut=K=0,St=null;Fe!==null&&ut<ie.length;ut++){Fe.index>ut?(St=Fe,Fe=null):St=Fe.sibling;var Ut=oe(le,Fe,ie[ut],Ne);if(Ut===null){Fe===null&&(Fe=St);break}t&&Fe&&Ut.alternate===null&&s(le,Fe),K=x(Ut,K,ut),Bt===null?Ve=Ut:Bt.sibling=Ut,Bt=Ut,Fe=St}if(ut===ie.length)return a(le,Fe),kt&&Ua(le,ut),Ve;if(Fe===null){for(;ut<ie.length;ut++)Fe=_e(le,ie[ut],Ne),Fe!==null&&(K=x(Fe,K,ut),Bt===null?Ve=Fe:Bt.sibling=Fe,Bt=Fe);return kt&&Ua(le,ut),Ve}for(Fe=r(Fe);ut<ie.length;ut++)St=fe(Fe,le,ut,ie[ut],Ne),St!==null&&(t&&St.alternate!==null&&Fe.delete(St.key===null?ut:St.key),K=x(St,K,ut),Bt===null?Ve=St:Bt.sibling=St,Bt=St);return t&&Fe.forEach(function(ir){return s(le,ir)}),kt&&Ua(le,ut),Ve}function Qe(le,K,ie,Ne){if(ie==null)throw Error(o(151));for(var Ve=null,Bt=null,Fe=K,ut=K=0,St=null,Ut=ie.next();Fe!==null&&!Ut.done;ut++,Ut=ie.next()){Fe.index>ut?(St=Fe,Fe=null):St=Fe.sibling;var ir=oe(le,Fe,Ut.value,Ne);if(ir===null){Fe===null&&(Fe=St);break}t&&Fe&&ir.alternate===null&&s(le,Fe),K=x(ir,K,ut),Bt===null?Ve=ir:Bt.sibling=ir,Bt=ir,Fe=St}if(Ut.done)return a(le,Fe),kt&&Ua(le,ut),Ve;if(Fe===null){for(;!Ut.done;ut++,Ut=ie.next())Ut=_e(le,Ut.value,Ne),Ut!==null&&(K=x(Ut,K,ut),Bt===null?Ve=Ut:Bt.sibling=Ut,Bt=Ut);return kt&&Ua(le,ut),Ve}for(Fe=r(Fe);!Ut.done;ut++,Ut=ie.next())Ut=fe(Fe,le,ut,Ut.value,Ne),Ut!==null&&(t&&Ut.alternate!==null&&Fe.delete(Ut.key===null?ut:Ut.key),K=x(Ut,K,ut),Bt===null?Ve=Ut:Bt.sibling=Ut,Bt=Ut);return t&&Fe.forEach(function(qh){return s(le,qh)}),kt&&Ua(le,ut),Ve}function Jt(le,K,ie,Ne){if(typeof ie=="object"&&ie!==null&&ie.type===B&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case U:e:{for(var Ve=ie.key;K!==null;){if(K.key===Ve){if(Ve=ie.type,Ve===B){if(K.tag===7){a(le,K.sibling),Ne=u(K,ie.props.children),Ne.return=le,le=Ne;break e}}else if(K.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===J&&Al(Ve)===K.type){a(le,K.sibling),Ne=u(K,ie.props),kl(Ne,ie),Ne.return=le,le=Ne;break e}a(le,K);break}else s(le,K);K=K.sibling}ie.type===B?(Ne=vr(ie.props.children,le.mode,Ne,ie.key),Ne.return=le,le=Ne):(Ne=Oo(ie.type,ie.key,ie.props,null,le.mode,Ne),kl(Ne,ie),Ne.return=le,le=Ne)}return _(le);case k:e:{for(Ve=ie.key;K!==null;){if(K.key===Ve)if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){a(le,K.sibling),Ne=u(K,ie.children||[]),Ne.return=le,le=Ne;break e}else{a(le,K);break}else s(le,K);K=K.sibling}Ne=tc(ie,le.mode,Ne),Ne.return=le,le=Ne}return _(le);case J:return ie=Al(ie),Jt(le,K,ie,Ne)}if(ae(ie))return Ue(le,K,ie,Ne);if(te(ie)){if(Ve=te(ie),typeof Ve!="function")throw Error(o(150));return ie=Ve.call(ie),Qe(le,K,ie,Ne)}if(typeof ie.then=="function")return Jt(le,K,li(ie),Ne);if(ie.$$typeof===w)return Jt(le,K,dl(le,ie),Ne);oa(le,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,K!==null&&K.tag===6?(a(le,K.sibling),Ne=u(K,ie),Ne.return=le,le=Ne):(a(le,K),Ne=Wr(ie,le.mode,Ne),Ne.return=le,le=Ne),_(le)):a(le,K)}return function(le,K,ie,Ne){try{Ha=0;var Ve=Jt(le,K,ie,Ne);return ai=null,Ve}catch(Fe){if(Fe===si||Fe===nc)throw Fe;var Bt=Xs(29,Fe,null,le.mode);return Bt.lanes=Ne,Bt.return=le,Bt}finally{}}}var Fn=Ux(!0),Nu=Ux(!1),ml=!1;function Yl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $o(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function El(t,s,a){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Ht&2)!==0){var u=r.pending;return u===null?s.next=s:(s.next=u.next,u.next=s),r.pending=s,s=Ji(t),pu(t,null,a),s}return br(t,r,s,a),Ji(t)}function rc(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var r=s.lanes;r&=t.pendingLanes,a|=r,s.lanes=a,At(t,a)}}function Fo(t,s){var a=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,a===r)){var u=null,x=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};x===null?u=x=_:x=x.next=_,a=a.next}while(a!==null);x===null?u=x=s:x=x.next=s}else u=x=s;a={baseState:r.baseState,firstBaseUpdate:u,lastBaseUpdate:x,shared:r.shared,callbacks:r.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Fs=!1;function Sr(){if(Fs){var t=ti;if(t!==null)throw t}}function ni(t,s,a,r){Fs=!1;var u=t.updateQueue;ml=!1;var x=u.firstBaseUpdate,_=u.lastBaseUpdate,T=u.shared.pending;if(T!==null){u.shared.pending=null;var G=T,ce=G.next;G.next=null,_===null?x=ce:_.next=ce,_=G;var ve=t.alternate;ve!==null&&(ve=ve.updateQueue,T=ve.lastBaseUpdate,T!==_&&(T===null?ve.firstBaseUpdate=ce:T.next=ce,ve.lastBaseUpdate=G))}if(x!==null){var _e=u.baseState;_=0,ve=ce=G=null,T=x;do{var oe=T.lane&-536870913,fe=oe!==T.lane;if(fe?(wt&oe)===oe:(r&oe)===oe){oe!==0&&oe===ei&&(Fs=!0),ve!==null&&(ve=ve.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ue=t,Qe=T;oe=s;var Jt=a;switch(Qe.tag){case 1:if(Ue=Qe.payload,typeof Ue=="function"){_e=Ue.call(Jt,_e,oe);break e}_e=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=Qe.payload,oe=typeof Ue=="function"?Ue.call(Jt,_e,oe):Ue,oe==null)break e;_e=S({},_e,oe);break e;case 2:ml=!0}}oe=T.callback,oe!==null&&(t.flags|=64,fe&&(t.flags|=8192),fe=u.callbacks,fe===null?u.callbacks=[oe]:fe.push(oe))}else fe={lane:oe,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ve===null?(ce=ve=fe,G=_e):ve=ve.next=fe,_|=oe;if(T=T.next,T===null){if(T=u.shared.pending,T===null)break;fe=T,T=fe.next,fe.next=null,u.lastBaseUpdate=fe,u.shared.pending=null}}while(!0);ve===null&&(G=_e),u.baseState=G,u.firstBaseUpdate=ce,u.lastBaseUpdate=ve,x===null&&(u.shared.lanes=0),Xn|=_,t.lanes=_,t.memoizedState=_e}}function Tl(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function qo(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Tl(a[t],s)}var xn=E(null),Wl=E(0);function _u(t,s){t=zl,V(Wl,t),V(xn,s),zl=t|s.baseLanes}function Ks(){V(Wl,zl),V(xn,xn.current)}function ic(){zl=Wl.current,ee(xn),ee(Wl)}var $a=E(null),xl=null;function Pn(t){var s=t.alternate;V(Es,Es.current&1),V($a,t),xl===null&&(s===null||xn.current!==null||s.memoizedState!==null)&&(xl=t)}function cc(t){V(Es,Es.current),V($a,t),xl===null&&(xl=t)}function Hx(t){t.tag===22?(V(Es,Es.current),V($a,t),xl===null&&(xl=t)):fl()}function fl(){V(Es,Es.current),V($a,$a.current)}function ga(t){ee($a),xl===t&&(xl=null),ee(Es)}var Es=E(0);function Po(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Cd(a)||wi(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Fa=0,rt=null,Zt=null,ws=null,oc=!1,ri=!1,Cr=!1,Io=0,ii=0,In=null,lh=0;function gs(){throw Error(o(321))}function Go(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!js(t[a],s[a]))return!1;return!0}function Vo(t,s,a,r,u,x){return Fa=x,rt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,H.H=t===null||t.memoizedState===null?Xx:td,Cr=!1,x=a(r,u),Cr=!1,ri&&(x=dc(s,a,r,u)),wu(t),x}function wu(t){H.H=Vn;var s=Zt!==null&&Zt.next!==null;if(Fa=0,ws=Zt=rt=null,oc=!1,ii=0,In=null,s)throw Error(o(300));t===null||ys||(t=t.dependencies,t!==null&&Do(t)&&(ys=!0))}function dc(t,s,a,r){rt=t;var u=0;do{if(ri&&(In=null),ii=0,ri=!1,25<=u)throw Error(o(301));if(u+=1,ws=Zt=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}H.H=bc,x=s(a,r)}while(ri);return x}function nh(){var t=H.H,s=t.useState()[0];return s=typeof s.then=="function"?oi(s):s,t=t.useState()[0],(Zt!==null?Zt.memoizedState:null)!==t&&(rt.flags|=1024),s}function Yo(){var t=Io!==0;return Io=0,t}function Wo(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Su(t){if(oc){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}oc=!1}Fa=0,ws=Zt=rt=null,ri=!1,ii=Io=0,In=null}function aa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ws===null?rt.memoizedState=ws=t:ws=ws.next=t,ws}function Ts(){if(Zt===null){var t=rt.alternate;t=t!==null?t.memoizedState:null}else t=Zt.next;var s=ws===null?rt.memoizedState:ws.next;if(s!==null)ws=s,Zt=t;else{if(t===null)throw rt.alternate===null?Error(o(467)):Error(o(310));Zt=t,t={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},ws===null?rt.memoizedState=ws=t:ws=ws.next=t}return ws}function ci(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oi(t){var s=ii;return ii+=1,In===null&&(In=[]),t=Ho(In,t,s),s=rt,(ws===null?s.memoizedState:ws.next)===null&&(s=s.alternate,H.H=s===null||s.memoizedState===null?Xx:td),t}function di(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return oi(t);if(t.$$typeof===w)return Zs(t)}throw Error(o(438,String(t)))}function Cu(t){var s=null,a=rt.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var r=rt.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(s={data:r.data.map(function(u){return u.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ci(),rt.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),r=0;r<t;r++)a[r]=Q;return s.index++,a}function Rl(t,s){return typeof s=="function"?s(t):s}function it(t){var s=Ts();return Au(s,Zt,t)}function Au(t,s,a){var r=t.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=a;var u=t.baseQueue,x=r.pending;if(x!==null){if(u!==null){var _=u.next;u.next=x.next,x.next=_}s.baseQueue=u=x,r.pending=null}if(x=t.baseState,u===null)t.memoizedState=x;else{s=u.next;var T=_=null,G=null,ce=s,ve=!1;do{var _e=ce.lane&-536870913;if(_e!==ce.lane?(wt&_e)===_e:(Fa&_e)===_e){var oe=ce.revertLane;if(oe===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),_e===ei&&(ve=!0);else if((Fa&oe)===oe){ce=ce.next,oe===ei&&(ve=!0);continue}else _e={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},G===null?(T=G=_e,_=x):G=G.next=_e,rt.lanes|=oe,Xn|=oe;_e=ce.action,Cr&&a(x,_e),x=ce.hasEagerState?ce.eagerState:a(x,_e)}else oe={lane:_e,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},G===null?(T=G=oe,_=x):G=G.next=oe,rt.lanes|=_e,Xn|=_e;ce=ce.next}while(ce!==null&&ce!==s);if(G===null?_=x:G.next=T,!js(x,t.memoizedState)&&(ys=!0,ve&&(a=ti,a!==null)))throw a;t.memoizedState=x,t.baseState=_,t.baseQueue=G,r.lastRenderedState=x}return u===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function ku(t){var s=Ts(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=t;var r=a.dispatch,u=a.pending,x=s.memoizedState;if(u!==null){a.pending=null;var _=u=u.next;do x=t(x,_.action),_=_.next;while(_!==u);js(x,s.memoizedState)||(ys=!0),s.memoizedState=x,s.baseQueue===null&&(s.baseState=x),a.lastRenderedState=x}return[x,r]}function ui(t,s,a){var r=rt,u=Ts(),x=kt;if(x){if(a===void 0)throw Error(o(407));a=a()}else a=s();var _=!js((Zt||u).memoizedState,a);if(_&&(u.memoizedState=a,ys=!0),u=u.queue,fc(Fx.bind(null,r,u,t),[t]),u.getSnapshot!==s||_||ws!==null&&ws.memoizedState.tag&1){if(r.flags|=2048,Pa(9,{destroy:void 0},$x.bind(null,r,u,a,s),null),ls===null)throw Error(o(349));x||(Fa&127)!==0||Eu(r,s,a)}return a}function Eu(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=rt.updateQueue,s===null?(s=ci(),rt.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function $x(t,s,a,r){s.value=a,s.getSnapshot=r,qa(s)&&qx(t)}function Fx(t,s,a){return a(function(){qa(s)&&qx(t)})}function qa(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!js(t,a)}catch{return!0}}function qx(t){var s=Il(t,2);s!==null&&_a(s,t,2)}function mi(t){var s=aa();if(typeof t=="function"){var a=t;if(t=a(),Cr){cs(!0);try{a()}finally{cs(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:t},s}function Qo(t,s,a,r){return t.baseState=a,Au(t,Zt,typeof r=="function"?r:Rl)}function Px(t,s,a,r,u){if(pc(t))throw Error(o(485));if(t=s.action,t!==null){var x={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){x.listeners.push(_)}};H.T!==null?a(!0):x.isTransition=!1,r(x),a=s.pending,a===null?(x.next=s.pending=x,Tu(s,x)):(x.next=a.next,s.pending=a.next=x)}}function Tu(t,s){var a=s.action,r=s.payload,u=t.state;if(s.isTransition){var x=H.T,_={};H.T=_;try{var T=a(u,r),G=H.S;G!==null&&G(_,T),ba(t,s,T)}catch(ce){uc(t,s,ce)}finally{x!==null&&_.types!==null&&(x.types=_.types),H.T=x}}else try{x=a(u,r),ba(t,s,x)}catch(ce){uc(t,s,ce)}}function ba(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(r){fn(t,s,r)},function(r){return uc(t,s,r)}):fn(t,s,a)}function fn(t,s,a){s.status="fulfilled",s.value=a,Ru(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Tu(t,a)))}function uc(t,s,a){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do s.status="rejected",s.reason=a,Ru(s),s=s.next;while(s!==r)}t.action=null}function Ru(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function mc(t,s){return s}function Mu(t,s){if(kt){var a=ls.formState;if(a!==null){e:{var r=rt;if(kt){if(Ft){t:{for(var u=Ft,x=ol;u.nodeType!==8;){if(!x){u=null;break t}if(u=pl(u.nextSibling),u===null){u=null;break t}}x=u.data,u=x==="F!"||x==="F"?u:null}if(u){Ft=pl(u.nextSibling),r=u.data==="F!";break e}}Bn(r)}r=!1}r&&(s=a[0])}}return a=aa(),a.memoizedState=a.baseState=s,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mc,lastRenderedState:s},a.queue=r,a=Pu.bind(null,rt,r),r.dispatch=a,r=mi(!1),x=fi.bind(null,rt,!1,r.queue),r=aa(),u={state:s,dispatch:null,action:t,pending:null},r.queue=u,a=Px.bind(null,rt,u,x,a),u.dispatch=a,r.memoizedState=t,[s,a,!1]}function Xo(t){var s=Ts();return Ou(s,Zt,t)}function Ou(t,s,a){if(s=Au(t,s,mc)[0],t=it(Rl)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var r=oi(s)}catch(_){throw _===si?nc:_}else r=s;s=Ts();var u=s.queue,x=u.dispatch;return a!==s.memoizedState&&(rt.flags|=2048,Pa(9,{destroy:void 0},Lu.bind(null,u,a),null)),[r,x,t]}function Lu(t,s){t.action=s}function Zo(t){var s=Ts(),a=Zt;if(a!==null)return Ou(s,a,t);Ts(),s=s.memoizedState,a=Ts();var r=a.queue.dispatch;return a.memoizedState=t,[s,r,!1]}function Pa(t,s,a,r){return t={tag:t,create:a,deps:r,inst:s,next:null},s=rt.updateQueue,s===null&&(s=ci(),rt.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(r=a.next,a.next=t,t.next=r,s.lastEffect=t),t}function Ix(){return Ts().memoizedState}function Ml(t,s,a,r){var u=aa();rt.flags|=t,u.memoizedState=Pa(1|s,{destroy:void 0},a,r===void 0?null:r)}function xc(t,s,a,r){var u=Ts();r=r===void 0?null:r;var x=u.memoizedState.inst;Zt!==null&&r!==null&&Go(r,Zt.memoizedState.deps)?u.memoizedState=Pa(s,x,a,r):(rt.flags|=t,u.memoizedState=Pa(1|s,x,a,r))}function Du(t,s){Ml(8390656,8,t,s)}function fc(t,s){xc(2048,8,t,s)}function rh(t){rt.flags|=4;var s=rt.updateQueue;if(s===null)s=ci(),rt.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function Gx(t){var s=Ts().memoizedState;return rh({ref:s,nextImpl:t}),function(){if((Ht&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Vx(t,s){return xc(4,2,t,s)}function zu(t,s){return xc(4,4,t,s)}function Bu(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Yx(t,s,a){a=a!=null?a.concat([t]):null,xc(4,4,Bu.bind(null,s,t),a)}function Ko(){}function Uu(t,s){var a=Ts();s=s===void 0?null:s;var r=a.memoizedState;return s!==null&&Go(s,r[1])?r[0]:(a.memoizedState=[t,s],t)}function da(t,s){var a=Ts();s=s===void 0?null:s;var r=a.memoizedState;if(s!==null&&Go(s,r[1]))return r[0];if(r=t(),Cr){cs(!0);try{t()}finally{cs(!1)}}return a.memoizedState=[r,s],r}function hl(t,s,a){return a===void 0||(Fa&1073741824)!==0&&(wt&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=j0(),rt.lanes|=t,Xn|=t,a)}function Wx(t,s,a,r){return js(a,s)?a:xn.current!==null?(t=hl(t,a,r),js(t,s)||(ys=!0),t):(Fa&42)===0||(Fa&1073741824)!==0&&(wt&261930)===0?(ys=!0,t.memoizedState=a):(t=j0(),rt.lanes|=t,Xn|=t,s)}function Qx(t,s,a,r,u){var x=L.p;L.p=x!==0&&8>x?x:8;var _=H.T,T={};H.T=T,fi(t,!1,s,a);try{var G=u(),ce=H.S;if(ce!==null&&ce(T,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var ve=ah(G,r);xi(t,s,ve,Va(t))}else xi(t,s,r,Va(t))}catch(_e){xi(t,s,{then:function(){},status:"rejected",reason:_e},Va())}finally{L.p=x,_!==null&&T.types!==null&&(_.types=T.types),H.T=_}}function Jo(){}function Gn(t,s,a,r){if(t.tag!==5)throw Error(o(476));var u=Hu(t).queue;Qx(t,u,s,Z,a===null?Jo:function(){return $u(t),a(r)})}function Hu(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:Z},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function $u(t){var s=Hu(t);s.next===null&&(s=t.alternate.memoizedState),xi(t,s.next.queue,{},Va())}function Fu(){return Zs(Ti)}function qu(){return Ts().memoizedState}function Ar(){return Ts().memoizedState}function hc(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Va();t=qn(a);var r=El(s,t,a);r!==null&&(_a(r,s,a),rc(r,s,a)),s={cache:Cl()},t.payload=s;return}s=s.return}}function ih(t,s,a){var r=Va();a={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},pc(t)?gc(s,a):(a=Mo(t,s,a,r),a!==null&&(_a(a,t,r),ed(a,s,r)))}function Pu(t,s,a){var r=Va();xi(t,s,a,r)}function xi(t,s,a,r){var u={lane:r,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(pc(t))gc(s,u);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=s.lastRenderedReducer,x!==null))try{var _=s.lastRenderedState,T=x(_,a);if(u.hasEagerState=!0,u.eagerState=T,js(T,_))return br(t,s,u,0),ls===null&&Sl(),!1}catch{}finally{}if(a=Mo(t,s,u,r),a!==null)return _a(a,t,r),ed(a,s,r),!0}return!1}function fi(t,s,a,r){if(r={lane:2,revertLane:Ya(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},pc(t)){if(s)throw Error(o(479))}else s=Mo(t,a,r,2),s!==null&&_a(s,t,2)}function pc(t){var s=t.alternate;return t===rt||s!==null&&s===rt}function gc(t,s){ri=oc=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function ed(t,s,a){if((a&4194048)!==0){var r=s.lanes;r&=t.pendingLanes,a|=r,s.lanes=a,At(t,a)}}var Vn={readContext:Zs,use:di,useCallback:gs,useContext:gs,useEffect:gs,useImperativeHandle:gs,useLayoutEffect:gs,useInsertionEffect:gs,useMemo:gs,useReducer:gs,useRef:gs,useState:gs,useDebugValue:gs,useDeferredValue:gs,useTransition:gs,useSyncExternalStore:gs,useId:gs,useHostTransitionStatus:gs,useFormState:gs,useActionState:gs,useOptimistic:gs,useMemoCache:gs,useCacheRefresh:gs};Vn.useEffectEvent=gs;var Xx={readContext:Zs,use:di,useCallback:function(t,s){return aa().memoizedState=[t,s===void 0?null:s],t},useContext:Zs,useEffect:Du,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Ml(4194308,4,Bu.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Ml(4194308,4,t,s)},useInsertionEffect:function(t,s){Ml(4,2,t,s)},useMemo:function(t,s){var a=aa();s=s===void 0?null:s;var r=t();if(Cr){cs(!0);try{t()}finally{cs(!1)}}return a.memoizedState=[r,s],r},useReducer:function(t,s,a){var r=aa();if(a!==void 0){var u=a(s);if(Cr){cs(!0);try{a(s)}finally{cs(!1)}}}else u=s;return r.memoizedState=r.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},r.queue=t,t=t.dispatch=ih.bind(null,rt,t),[r.memoizedState,t]},useRef:function(t){var s=aa();return t={current:t},s.memoizedState=t},useState:function(t){t=mi(t);var s=t.queue,a=Pu.bind(null,rt,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Ko,useDeferredValue:function(t,s){var a=aa();return hl(a,t,s)},useTransition:function(){var t=mi(!1);return t=Qx.bind(null,rt,t.queue,!0,!1),aa().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var r=rt,u=aa();if(kt){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),ls===null)throw Error(o(349));(wt&127)!==0||Eu(r,s,a)}u.memoizedState=a;var x={value:a,getSnapshot:s};return u.queue=x,Du(Fx.bind(null,r,x,t),[t]),r.flags|=2048,Pa(9,{destroy:void 0},$x.bind(null,r,x,a,s),null),a},useId:function(){var t=aa(),s=ls.identifierPrefix;if(kt){var a=cl,r=Gl;a=(r&~(1<<32-Ct(r)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Io++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=lh++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Fu,useFormState:Mu,useActionState:Mu,useOptimistic:function(t){var s=aa();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=fi.bind(null,rt,!0,a),a.dispatch=s,[t,s]},useMemoCache:Cu,useCacheRefresh:function(){return aa().memoizedState=hc.bind(null,rt)},useEffectEvent:function(t){var s=aa(),a={impl:t};return s.memoizedState=a,function(){if((Ht&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},td={readContext:Zs,use:di,useCallback:Uu,useContext:Zs,useEffect:fc,useImperativeHandle:Yx,useInsertionEffect:Vx,useLayoutEffect:zu,useMemo:da,useReducer:it,useRef:Ix,useState:function(){return it(Rl)},useDebugValue:Ko,useDeferredValue:function(t,s){var a=Ts();return Wx(a,Zt.memoizedState,t,s)},useTransition:function(){var t=it(Rl)[0],s=Ts().memoizedState;return[typeof t=="boolean"?t:oi(t),s]},useSyncExternalStore:ui,useId:qu,useHostTransitionStatus:Fu,useFormState:Xo,useActionState:Xo,useOptimistic:function(t,s){var a=Ts();return Qo(a,Zt,t,s)},useMemoCache:Cu,useCacheRefresh:Ar};td.useEffectEvent=Gx;var bc={readContext:Zs,use:di,useCallback:Uu,useContext:Zs,useEffect:fc,useImperativeHandle:Yx,useInsertionEffect:Vx,useLayoutEffect:zu,useMemo:da,useReducer:ku,useRef:Ix,useState:function(){return ku(Rl)},useDebugValue:Ko,useDeferredValue:function(t,s){var a=Ts();return Zt===null?hl(a,t,s):Wx(a,Zt.memoizedState,t,s)},useTransition:function(){var t=ku(Rl)[0],s=Ts().memoizedState;return[typeof t=="boolean"?t:oi(t),s]},useSyncExternalStore:ui,useId:qu,useHostTransitionStatus:Fu,useFormState:Zo,useActionState:Zo,useOptimistic:function(t,s){var a=Ts();return Zt!==null?Qo(a,Zt,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Cu,useCacheRefresh:Ar};bc.useEffectEvent=Gx;function sd(t,s,a,r){s=t.memoizedState,a=a(r,s),a=a==null?s:S({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var vc={enqueueSetState:function(t,s,a){t=t._reactInternals;var r=Va(),u=qn(r);u.payload=s,a!=null&&(u.callback=a),s=El(t,u,r),s!==null&&(_a(s,t,r),rc(s,t,r))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var r=Va(),u=qn(r);u.tag=1,u.payload=s,a!=null&&(u.callback=a),s=El(t,u,r),s!==null&&(_a(s,t,r),rc(s,t,r))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Va(),r=qn(a);r.tag=2,s!=null&&(r.callback=s),s=El(t,r,a),s!==null&&(_a(s,t,a),rc(s,t,a))}};function Zx(t,s,a,r,u,x,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,x,_):s.prototype&&s.prototype.isPureReactComponent?!Pr(a,r)||!Pr(u,x):!0}function Iu(t,s,a,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,r),s.state!==t&&vc.enqueueReplaceState(s,s.state,null)}function ua(t,s){var a=s;if("ref"in s){a={};for(var r in s)r!=="ref"&&(a[r]=s[r])}if(t=t.defaultProps){a===s&&(a=S({},a));for(var u in t)a[u]===void 0&&(a[u]=t[u])}return a}function Gu(t){Ro(t)}function Vu(t){console.error(t)}function Kx(t){Ro(t)}function jc(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(r){setTimeout(function(){throw r})}}function Jx(t,s,a){try{var r=t.onCaughtError;r(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function Yu(t,s,a){return a=qn(a),a.tag=3,a.payload={element:null},a.callback=function(){jc(t,s)},a}function Ql(t){return t=qn(t),t.tag=3,t}function ad(t,s,a,r){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var x=r.value;t.payload=function(){return u(x)},t.callback=function(){Jx(s,a,r)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Jx(s,a,r),typeof u!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var T=r.stack;this.componentDidCatch(r.value,{componentStack:T!==null?T:""})})}function Wu(t,s,a,r,u){if(a.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(s=a.alternate,s!==null&&Jr(s,a,u,!0),a=$a.current,a!==null){switch(a.tag){case 31:case 13:return xl===null?gd():a.alternate===null&&Ns===0&&(Ns=3),a.flags&=-257,a.flags|=65536,a.lanes=u,r===Uo?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([r]):s.add(r),_m(t,r,u)),!1;case 22:return a.flags|=65536,r===Uo?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([r])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([r]):a.add(r)),_m(t,r,u)),!1}throw Error(o(435,a.tag))}return _m(t,r,u),gd(),!1}if(kt)return s=$a.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=u,r!==gu&&(t=Error(o(422),{cause:r}),Hn(Ba(t,a)))):(r!==gu&&(s=Error(o(423),{cause:r}),Hn(Ba(s,a))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,r=Ba(r,a),u=Yu(t.stateNode,r,u),Fo(t,u),Ns!==4&&(Ns=2)),!1;var x=Error(o(520),{cause:r});if(x=Ba(x,a),Lc===null?Lc=[x]:Lc.push(x),Ns!==4&&(Ns=2),s===null)return!0;r=Ba(r,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=u&-u,a.lanes|=t,t=Yu(a.stateNode,r,t),Fo(a,t),!1;case 1:if(s=a.type,x=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Zn===null||!Zn.has(x))))return a.flags|=65536,u&=-u,a.lanes|=u,u=Ql(u),ad(u,t,a,r),Fo(a,u),!1}a=a.return}while(a!==null);return!1}var yc=Error(o(461)),ys=!1;function Ss(t,s,a,r){s.child=t===null?Nu(s,null,a,r):Fn(s,t.child,a,r)}function We(t,s,a,r,u){a=a.render;var x=s.ref;if("ref"in r){var _={};for(var T in r)T!=="ref"&&(_[T]=r[T])}else _=r;return Nr(s),r=Vo(t,s,a,_,x,u),T=Yo(),t!==null&&!ys?(Wo(t,s,u),Xl(t,s,u)):(kt&&T&&Dn(s),s.flags|=1,Ss(t,s,r,u),s.child)}function Nc(t,s,a,r,u){if(t===null){var x=a.type;return typeof x=="function"&&!cn(x)&&x.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=x,ld(t,s,x,r,u)):(t=Oo(a.type,null,r,s,s.mode,u),t.ref=s.ref,t.return=s,s.child=t)}if(x=t.child,!od(t,u)){var _=x.memoizedProps;if(a=a.compare,a=a!==null?a:Pr,a(_,r)&&t.ref===s.ref)return Xl(t,s,u)}return s.flags|=1,t=nl(x,r),t.ref=s.ref,t.return=s,s.child=t}function ld(t,s,a,r,u){if(t!==null){var x=t.memoizedProps;if(Pr(x,r)&&t.ref===s.ref)if(ys=!1,s.pendingProps=r=x,od(t,u))(t.flags&131072)!==0&&(ys=!0);else return s.lanes=t.lanes,Xl(t,s,u)}return id(t,s,a,r,u)}function Yn(t,s,a,r){var u=r.children,x=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((s.flags&128)!==0){if(x=x!==null?x.baseLanes|a:a,t!==null){for(r=s.child=t.child,u=0;r!==null;)u=u|r.lanes|r.childLanes,r=r.sibling;r=u&~x}else r=0,s.child=null;return nd(t,s,x,a,r)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&zo(s,x!==null?x.cachePool:null),x!==null?_u(s,x):Ks(),Hx(s);else return r=s.lanes=536870912,nd(t,s,x!==null?x.baseLanes|a:a,a,r)}else x!==null?(zo(s,x.cachePool),_u(s,x),fl(),s.memoizedState=null):(t!==null&&zo(s,null),Ks(),fl());return Ss(t,s,u,a),s.child}function _c(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function nd(t,s,a,r,u){var x=ju();return x=x===null?null:{parent:Ls._currentValue,pool:x},s.memoizedState={baseLanes:a,cachePool:x},t!==null&&zo(s,null),Ks(),Hx(s),t!==null&&Jr(t,s,r,!0),s.childLanes=u,null}function wc(t,s){return s=cd({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Js(t,s,a){return Fn(s,t.child,null,a),t=wc(s,s.pendingProps),t.flags|=2,ga(s),s.memoizedState=null,t}function ch(t,s,a){var r=s.pendingProps,u=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(kt){if(r.mode==="hidden")return t=wc(s,r),s.lanes=536870912,_c(null,t);if(cc(s),(t=Ft)?(t=P0(t,ol),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:on!==null?{id:Gl,overflow:cl}:null,retryLane:536870912,hydrationErrors:null},a=ec(t),a.return=s,s.child=a,Os=s,Ft=null)):t=null,t===null)throw Bn(s);return s.lanes=536870912,null}return wc(s,r)}var x=t.memoizedState;if(x!==null){var _=x.dehydrated;if(cc(s),u)if(s.flags&256)s.flags&=-257,s=Js(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(ys||Jr(t,s,a,!1),u=(a&t.childLanes)!==0,ys||u){if(r=ls,r!==null&&(_=zt(r,a),_!==0&&_!==x.retryLane))throw x.retryLane=_,Il(t,_),_a(r,t,_),yc;gd(),s=Js(t,s,a)}else t=x.treeContext,Ft=pl(_.nextSibling),Os=s,kt=!0,zn=null,ol=!1,t!==null&&Zr(s,t),s=wc(s,r),s.flags|=4096;return s}return t=nl(t.child,{mode:r.mode,children:r.children}),t.ref=s.ref,s.child=t,t.return=s,t}function rd(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function id(t,s,a,r,u){return Nr(s),a=Vo(t,s,a,r,void 0,u),r=Yo(),t!==null&&!ys?(Wo(t,s,u),Xl(t,s,u)):(kt&&r&&Dn(s),s.flags|=1,Ss(t,s,a,u),s.child)}function e0(t,s,a,r,u,x){return Nr(s),s.updateQueue=null,a=dc(s,r,a,u),wu(t),r=Yo(),t!==null&&!ys?(Wo(t,s,x),Xl(t,s,x)):(kt&&r&&Dn(s),s.flags|=1,Ss(t,s,a,x),s.child)}function Qu(t,s,a,r,u){if(Nr(s),s.stateNode===null){var x=rn,_=a.contextType;typeof _=="object"&&_!==null&&(x=Zs(_)),x=new a(r,x),s.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=vc,s.stateNode=x,x._reactInternals=s,x=s.stateNode,x.props=r,x.state=s.memoizedState,x.refs={},Yl(s),_=a.contextType,x.context=typeof _=="object"&&_!==null?Zs(_):rn,x.state=s.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(sd(s,a,_,r),x.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(_=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),_!==x.state&&vc.enqueueReplaceState(x,x.state,null),ni(s,r,x,u),Sr(),x.state=s.memoizedState),typeof x.componentDidMount=="function"&&(s.flags|=4194308),r=!0}else if(t===null){x=s.stateNode;var T=s.memoizedProps,G=ua(a,T);x.props=G;var ce=x.context,ve=a.contextType;_=rn,typeof ve=="object"&&ve!==null&&(_=Zs(ve));var _e=a.getDerivedStateFromProps;ve=typeof _e=="function"||typeof x.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,ve||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(T||ce!==_)&&Iu(s,x,r,_),ml=!1;var oe=s.memoizedState;x.state=oe,ni(s,r,x,u),Sr(),ce=s.memoizedState,T||oe!==ce||ml?(typeof _e=="function"&&(sd(s,a,_e,r),ce=s.memoizedState),(G=ml||Zx(s,a,G,r,oe,ce,_))?(ve||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(s.flags|=4194308)):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=ce),x.props=r,x.state=ce,x.context=_,r=G):(typeof x.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{x=s.stateNode,$o(t,s),_=s.memoizedProps,ve=ua(a,_),x.props=ve,_e=s.pendingProps,oe=x.context,ce=a.contextType,G=rn,typeof ce=="object"&&ce!==null&&(G=Zs(ce)),T=a.getDerivedStateFromProps,(ce=typeof T=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(_!==_e||oe!==G)&&Iu(s,x,r,G),ml=!1,oe=s.memoizedState,x.state=oe,ni(s,r,x,u),Sr();var fe=s.memoizedState;_!==_e||oe!==fe||ml||t!==null&&t.dependencies!==null&&Do(t.dependencies)?(typeof T=="function"&&(sd(s,a,T,r),fe=s.memoizedState),(ve=ml||Zx(s,a,ve,r,oe,fe,G)||t!==null&&t.dependencies!==null&&Do(t.dependencies))?(ce||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(r,fe,G),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(r,fe,G)),typeof x.componentDidUpdate=="function"&&(s.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof x.componentDidUpdate!="function"||_===t.memoizedProps&&oe===t.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&oe===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=fe),x.props=r,x.state=fe,x.context=G,r=ve):(typeof x.componentDidUpdate!="function"||_===t.memoizedProps&&oe===t.memoizedState||(s.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&oe===t.memoizedState||(s.flags|=1024),r=!1)}return x=r,rd(t,s),r=(s.flags&128)!==0,x||r?(x=s.stateNode,a=r&&typeof a.getDerivedStateFromError!="function"?null:x.render(),s.flags|=1,t!==null&&r?(s.child=Fn(s,t.child,null,u),s.child=Fn(s,null,a,u)):Ss(t,s,a,u),s.memoizedState=x.state,t=s.child):t=Xl(t,s,u),t}function t0(t,s,a,r){return R(),s.flags|=256,Ss(t,s,a,r),s.child}var Xu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zu(t){return{baseLanes:t,cachePool:Dx()}}function Ol(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=Ga),t}function la(t,s,a){var r=s.pendingProps,u=!1,x=(s.flags&128)!==0,_;if((_=x)||(_=t!==null&&t.memoizedState===null?!1:(Es.current&2)!==0),_&&(u=!0,s.flags&=-129),_=(s.flags&32)!==0,s.flags&=-33,t===null){if(kt){if(u?Pn(s):fl(),(t=Ft)?(t=P0(t,ol),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:on!==null?{id:Gl,overflow:cl}:null,retryLane:536870912,hydrationErrors:null},a=ec(t),a.return=s,s.child=a,Os=s,Ft=null)):t=null,t===null)throw Bn(s);return wi(t)?s.lanes=32:s.lanes=536870912,null}var T=r.children;return r=r.fallback,u?(fl(),u=s.mode,T=cd({mode:"hidden",children:T},u),r=vr(r,u,a,null),T.return=s,r.return=s,T.sibling=r,s.child=T,r=s.child,r.memoizedState=Zu(a),r.childLanes=Ol(t,_,a),s.memoizedState=Xu,_c(null,r)):(Pn(s),Sc(s,T))}var G=t.memoizedState;if(G!==null&&(T=G.dehydrated,T!==null)){if(x)s.flags&256?(Pn(s),s.flags&=-257,s=Cc(t,s,a)):s.memoizedState!==null?(fl(),s.child=t.child,s.flags|=128,s=null):(fl(),T=r.fallback,u=s.mode,r=cd({mode:"visible",children:r.children},u),T=vr(T,u,a,null),T.flags|=2,r.return=s,T.return=s,r.sibling=T,s.child=r,Fn(s,t.child,null,a),r=s.child,r.memoizedState=Zu(a),r.childLanes=Ol(t,_,a),s.memoizedState=Xu,s=_c(null,r));else if(Pn(s),wi(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var ce=_.dgst;_=ce,r=Error(o(419)),r.stack="",r.digest=_,Hn({value:r,source:null,stack:null}),s=Cc(t,s,a)}else if(ys||Jr(t,s,a,!1),_=(a&t.childLanes)!==0,ys||_){if(_=ls,_!==null&&(r=zt(_,a),r!==0&&r!==G.retryLane))throw G.retryLane=r,Il(t,r),_a(_,t,r),yc;Cd(T)||gd(),s=Cc(t,s,a)}else Cd(T)?(s.flags|=192,s.child=t.child,s=null):(t=G.treeContext,Ft=pl(T.nextSibling),Os=s,kt=!0,zn=null,ol=!1,t!==null&&Zr(s,t),s=Sc(s,r.children),s.flags|=4096);return s}return u?(fl(),T=r.fallback,u=s.mode,G=t.child,ce=G.sibling,r=nl(G,{mode:"hidden",children:r.children}),r.subtreeFlags=G.subtreeFlags&65011712,ce!==null?T=nl(ce,T):(T=vr(T,u,a,null),T.flags|=2),T.return=s,r.return=s,r.sibling=T,s.child=r,_c(null,r),r=s.child,T=t.child.memoizedState,T===null?T=Zu(a):(u=T.cachePool,u!==null?(G=Ls._currentValue,u=u.parent!==G?{parent:G,pool:G}:u):u=Dx(),T={baseLanes:T.baseLanes|a,cachePool:u}),r.memoizedState=T,r.childLanes=Ol(t,_,a),s.memoizedState=Xu,_c(t.child,r)):(Pn(s),a=t.child,t=a.sibling,a=nl(a,{mode:"visible",children:r.children}),a.return=s,a.sibling=null,t!==null&&(_=s.deletions,_===null?(s.deletions=[t],s.flags|=16):_.push(t)),s.child=a,s.memoizedState=null,a)}function Sc(t,s){return s=cd({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function cd(t,s){return t=Xs(22,t,null,s),t.lanes=0,t}function Cc(t,s,a){return Fn(s,t.child,null,a),t=Sc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function s0(t,s,a){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),mn(t.return,s,a)}function Ku(t,s,a,r,u,x){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:u,treeForkCount:x}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=r,_.tail=a,_.tailMode=u,_.treeForkCount=x)}function hi(t,s,a){var r=s.pendingProps,u=r.revealOrder,x=r.tail;r=r.children;var _=Es.current,T=(_&2)!==0;if(T?(_=_&1|2,s.flags|=128):_&=1,V(Es,_),Ss(t,s,r,a),r=kt?Ms:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s0(t,a,s);else if(t.tag===19)s0(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(u){case"forwards":for(a=s.child,u=null;a!==null;)t=a.alternate,t!==null&&Po(t)===null&&(u=a),a=a.sibling;a=u,a===null?(u=s.child,s.child=null):(u=a.sibling,a.sibling=null),Ku(s,!1,u,a,x,r);break;case"backwards":case"unstable_legacy-backwards":for(a=null,u=s.child,s.child=null;u!==null;){if(t=u.alternate,t!==null&&Po(t)===null){s.child=u;break}t=u.sibling,u.sibling=a,a=u,u=t}Ku(s,!0,a,null,x,r);break;case"together":Ku(s,!1,null,null,void 0,r);break;default:s.memoizedState=null}return s.child}function Xl(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Xn|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Jr(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,a=nl(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=nl(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function od(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Do(t)))}function oh(t,s,a){switch(s.tag){case 3:ke(s,s.stateNode.containerInfo),$n(s,Ls,t.memoizedState.cache),R();break;case 27:case 5:Rt(s);break;case 4:ke(s,s.stateNode.containerInfo);break;case 10:$n(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,cc(s),null;break;case 13:var r=s.memoizedState;if(r!==null)return r.dehydrated!==null?(Pn(s),s.flags|=128,null):(a&s.child.childLanes)!==0?la(t,s,a):(Pn(s),t=Xl(t,s,a),t!==null?t.sibling:null);Pn(s);break;case 19:var u=(t.flags&128)!==0;if(r=(a&s.childLanes)!==0,r||(Jr(t,s,a,!1),r=(a&s.childLanes)!==0),u){if(r)return hi(t,s,a);s.flags|=128}if(u=s.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),V(Es,Es.current),r)break;return null;case 22:return s.lanes=0,Yn(t,s,a,s.pendingProps);case 24:$n(s,Ls,t.memoizedState.cache)}return Xl(t,s,a)}function a0(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)ys=!0;else{if(!od(t,a)&&(s.flags&128)===0)return ys=!1,oh(t,s,a);ys=(t.flags&131072)!==0}else ys=!1,kt&&(s.flags&1048576)!==0&&Lo(s,Ms,s.index);switch(s.lanes=0,s.tag){case 16:e:{var r=s.pendingProps;if(t=Al(s.elementType),s.type=t,typeof t=="function")cn(t)?(r=ua(t,r),s.tag=1,s=Qu(null,s,t,r,a)):(s.tag=0,s=id(null,s,t,r,a));else{if(t!=null){var u=t.$$typeof;if(u===D){s.tag=11,s=We(null,s,t,r,a);break e}else if(u===F){s.tag=14,s=Nc(null,s,t,r,a);break e}}throw s=q(t)||t,Error(o(306,s,""))}}return s;case 0:return id(t,s,s.type,s.pendingProps,a);case 1:return r=s.type,u=ua(r,s.pendingProps),Qu(t,s,r,u,a);case 3:e:{if(ke(s,s.stateNode.containerInfo),t===null)throw Error(o(387));r=s.pendingProps;var x=s.memoizedState;u=x.element,$o(t,s),ni(s,r,null,a);var _=s.memoizedState;if(r=_.cache,$n(s,Ls,r),r!==x.cache&&bu(s,[Ls],a,!0),Sr(),r=_.element,x.isDehydrated)if(x={element:r,isDehydrated:!1,cache:_.cache},s.updateQueue.baseState=x,s.memoizedState=x,s.flags&256){s=t0(t,s,r,a);break e}else if(r!==u){u=Ba(Error(o(424)),s),Hn(u),s=t0(t,s,r,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Ft=pl(t.firstChild),Os=s,kt=!0,zn=null,ol=!0,a=Nu(s,null,r,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(R(),r===u){s=Xl(t,s,a);break e}Ss(t,s,r,a)}s=s.child}return s;case 26:return rd(t,s),t===null?(a=Q0(s.type,null,s.pendingProps,null))?s.memoizedState=a:kt||(a=s.type,t=s.pendingProps,r=Vc(De.current).createElement(a),r[at]=s,r[Tt]=t,ea(r,a,t),ks(r),s.stateNode=r):s.memoizedState=Q0(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Rt(s),t===null&&kt&&(r=s.stateNode=V0(s.type,s.pendingProps,De.current),Os=s,ol=!0,u=Ft,Ze(s.type)?(Dm=u,Ft=pl(r.firstChild)):Ft=u),Ss(t,s,s.pendingProps.children,a),rd(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&kt&&((u=r=Ft)&&(r=Sh(r,s.type,s.pendingProps,ol),r!==null?(s.stateNode=r,Os=s,Ft=pl(r.firstChild),ol=!1,u=!0):u=!1),u||Bn(s)),Rt(s),u=s.type,x=s.pendingProps,_=t!==null?t.memoizedProps:null,r=x.children,tr(u,x)?r=null:_!==null&&tr(u,_)&&(s.flags|=32),s.memoizedState!==null&&(u=Vo(t,s,nh,null,null,a),Ti._currentValue=u),rd(t,s),Ss(t,s,r,a),s.child;case 6:return t===null&&kt&&((t=a=Ft)&&(a=qt(a,s.pendingProps,ol),a!==null?(s.stateNode=a,Os=s,Ft=null,t=!0):t=!1),t||Bn(s)),null;case 13:return la(t,s,a);case 4:return ke(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=Fn(s,null,r,a):Ss(t,s,r,a),s.child;case 11:return We(t,s,s.type,s.pendingProps,a);case 7:return Ss(t,s,s.pendingProps,a),s.child;case 8:return Ss(t,s,s.pendingProps.children,a),s.child;case 12:return Ss(t,s,s.pendingProps.children,a),s.child;case 10:return r=s.pendingProps,$n(s,s.type,r.value),Ss(t,s,r.children,a),s.child;case 9:return u=s.type._context,r=s.pendingProps.children,Nr(s),u=Zs(u),r=r(u),s.flags|=1,Ss(t,s,r,a),s.child;case 14:return Nc(t,s,s.type,s.pendingProps,a);case 15:return ld(t,s,s.type,s.pendingProps,a);case 19:return hi(t,s,a);case 31:return ch(t,s,a);case 22:return Yn(t,s,a,s.pendingProps);case 24:return Nr(s),r=Zs(Ls),t===null?(u=ju(),u===null&&(u=ls,x=Cl(),u.pooledCache=x,x.refCount++,x!==null&&(u.pooledCacheLanes|=a),u=x),s.memoizedState={parent:r,cache:u},Yl(s),$n(s,Ls,u)):((t.lanes&a)!==0&&($o(t,s),ni(s,null,null,a),Sr()),u=t.memoizedState,x=s.memoizedState,u.parent!==r?(u={parent:r,cache:r},s.memoizedState=u,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=u),$n(s,Ls,r)):(r=x.cache,$n(s,Ls,r),r!==u.cache&&bu(s,[Ls],a,!0))),Ss(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function hn(t){t.flags|=4}function Ju(t,s,a,r,u){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(u&335544128)===u)if(t.stateNode.complete)t.flags|=8192;else if(Bc())t.flags|=8192;else throw Vl=Uo,Bo}else t.flags&=-16777217}function em(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ef(s))if(Bc())t.flags|=8192;else throw Vl=Uo,Bo}function Ac(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?we():536870912,t.lanes|=s,vi|=s)}function kc(t,s){if(!kt)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var r=null;a!==null;)a.alternate!==null&&(r=a),a=a.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function as(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,r=0;if(s)for(var u=t.child;u!==null;)a|=u.lanes|u.childLanes,r|=u.subtreeFlags&65011712,r|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)a|=u.lanes|u.childLanes,r|=u.subtreeFlags,r|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=r,t.childLanes=a,s}function l0(t,s,a){var r=s.pendingProps;switch(jr(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(s),null;case 1:return as(s),null;case 3:return a=s.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),un(Ls),Oe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(yr(s)?hn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Un())),as(s),null;case 26:var u=s.type,x=s.memoizedState;return t===null?(hn(s),x!==null?(as(s),em(s,x)):(as(s),Ju(s,u,null,r,a))):x?x!==t.memoizedState?(hn(s),as(s),em(s,x)):(as(s),s.flags&=-16777217):(t=t.memoizedProps,t!==r&&hn(s),as(s),Ju(s,u,t,r,a)),null;case 27:if(pt(s),a=De.current,u=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==r&&hn(s);else{if(!r){if(s.stateNode===null)throw Error(o(166));return as(s),null}t=re.current,yr(s)?sc(s):(t=V0(u,r,a),s.stateNode=t,hn(s))}return as(s),null;case 5:if(pt(s),u=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==r&&hn(s);else{if(!r){if(s.stateNode===null)throw Error(o(166));return as(s),null}if(x=re.current,yr(s))sc(s);else{var _=Vc(De.current);switch(x){case 1:x=_.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:x=_.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":x=_.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":x=_.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":x=_.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof r.is=="string"?_.createElement("select",{is:r.is}):_.createElement("select"),r.multiple?x.multiple=!0:r.size&&(x.size=r.size);break;default:x=typeof r.is=="string"?_.createElement(u,{is:r.is}):_.createElement(u)}}x[at]=s,x[Tt]=r;e:for(_=s.child;_!==null;){if(_.tag===5||_.tag===6)x.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===s)break e;for(;_.sibling===null;){if(_.return===null||_.return===s)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s.stateNode=x;e:switch(ea(x,u,r),u){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&hn(s)}}return as(s),Ju(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==r&&hn(s);else{if(typeof r!="string"&&s.stateNode===null)throw Error(o(166));if(t=De.current,yr(s)){if(t=s.stateNode,a=s.memoizedProps,r=null,u=Os,u!==null)switch(u.tag){case 27:case 5:r=u.memoizedProps}t[at]=s,t=!!(t.nodeValue===a||r!==null&&r.suppressHydrationWarning===!0||H0(t.nodeValue,a)),t||Bn(s,!0)}else t=Vc(t).createTextNode(r),t[at]=s,s.stateNode=t}return as(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(r=yr(s),a!==null){if(t===null){if(!r)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[at]=s}else R(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;as(s),t=!1}else a=Un(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(ga(s),s):(ga(s),null);if((s.flags&128)!==0)throw Error(o(558))}return as(s),null;case 13:if(r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=yr(s),r!==null&&r.dehydrated!==null){if(t===null){if(!u)throw Error(o(318));if(u=s.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));u[at]=s}else R(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;as(s),u=!1}else u=Un(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return s.flags&256?(ga(s),s):(ga(s),null)}return ga(s),(s.flags&128)!==0?(s.lanes=a,s):(a=r!==null,t=t!==null&&t.memoizedState!==null,a&&(r=s.child,u=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(u=r.alternate.memoizedState.cachePool.pool),x=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(x=r.memoizedState.cachePool.pool),x!==u&&(r.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Ac(s,s.updateQueue),as(s),null);case 4:return Oe(),t===null&&km(s.stateNode.containerInfo),as(s),null;case 10:return un(s.type),as(s),null;case 19:if(ee(Es),r=s.memoizedState,r===null)return as(s),null;if(u=(s.flags&128)!==0,x=r.rendering,x===null)if(u)kc(r,!1);else{if(Ns!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(x=Po(t),x!==null){for(s.flags|=128,kc(r,!1),t=x.updateQueue,s.updateQueue=t,Ac(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Rx(a,t),a=a.sibling;return V(Es,Es.current&1|2),kt&&Ua(s,r.treeForkCount),s.child}t=t.sibling}r.tail!==null&&os()>Tr&&(s.flags|=128,u=!0,kc(r,!1),s.lanes=4194304)}else{if(!u)if(t=Po(x),t!==null){if(s.flags|=128,u=!0,t=t.updateQueue,s.updateQueue=t,Ac(s,t),kc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!x.alternate&&!kt)return as(s),null}else 2*os()-r.renderingStartTime>Tr&&a!==536870912&&(s.flags|=128,u=!0,kc(r,!1),s.lanes=4194304);r.isBackwards?(x.sibling=s.child,s.child=x):(t=r.last,t!==null?t.sibling=x:s.child=x,r.last=x)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=os(),t.sibling=null,a=Es.current,V(Es,u?a&1|2:a&1),kt&&Ua(s,r.treeForkCount),t):(as(s),null);case 22:case 23:return ga(s),ic(),r=s.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(s.flags|=8192):r&&(s.flags|=8192),r?(a&536870912)!==0&&(s.flags&128)===0&&(as(s),s.subtreeFlags&6&&(s.flags|=8192)):as(s),a=s.updateQueue,a!==null&&Ac(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==a&&(s.flags|=2048),t!==null&&ee(wr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),un(Ls),as(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Ec(t,s){switch(jr(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return un(Ls),Oe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return pt(s),null;case 31:if(s.memoizedState!==null){if(ga(s),s.alternate===null)throw Error(o(340));R()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(ga(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));R()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return ee(Es),null;case 4:return Oe(),null;case 10:return un(s.type),null;case 22:case 23:return ga(s),ic(),t!==null&&ee(wr),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return un(Ls),null;case 25:return null;default:return null}}function dd(t,s){switch(jr(s),s.tag){case 3:un(Ls),Oe();break;case 26:case 27:case 5:pt(s);break;case 4:Oe();break;case 31:s.memoizedState!==null&&ga(s);break;case 13:ga(s);break;case 19:ee(Es);break;case 10:un(s.type);break;case 22:case 23:ga(s),ic(),t!==null&&ee(wr);break;case 24:un(Ls)}}function pi(t,s){try{var a=s.updateQueue,r=a!==null?a.lastEffect:null;if(r!==null){var u=r.next;a=u;do{if((a.tag&t)===t){r=void 0;var x=a.create,_=a.inst;r=x(),_.destroy=r}a=a.next}while(a!==u)}}catch(T){Yt(s,s.return,T)}}function pn(t,s,a){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var x=u.next;r=x;do{if((r.tag&t)===t){var _=r.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,u=s;var G=a,ce=T;try{ce()}catch(ve){Yt(u,G,ve)}}}r=r.next}while(r!==x)}}catch(ve){Yt(s,s.return,ve)}}function Tc(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{qo(s,a)}catch(r){Yt(t,t.return,r)}}}function tm(t,s,a){a.props=ua(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(r){Yt(t,s,r)}}function va(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof a=="function"?t.refCleanup=a(r):a.current=r}}catch(u){Yt(t,s,u)}}function na(t,s){var a=t.ref,r=t.refCleanup;if(a!==null)if(typeof r=="function")try{r()}catch(u){Yt(t,s,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){Yt(t,s,u)}else a.current=null}function n0(t){var s=t.type,a=t.memoizedProps,r=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break e;case"img":a.src?r.src=a.src:a.srcSet&&(r.srcset=a.srcSet)}}catch(u){Yt(t,t.return,u)}}function ud(t,s,a){try{var r=t.stateNode;Nh(r,t.type,a,s),r[Tt]=s}catch(u){Yt(t,t.return,u)}}function r0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ze(t.type)||t.tag===4}function sm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ze(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function am(t,s,a){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=an));else if(r!==4&&(r===27&&Ze(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(am(t,s,a),t=t.sibling;t!==null;)am(t,s,a),t=t.sibling}function md(t,s,a){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(r!==4&&(r===27&&Ze(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(md(t,s,a),t=t.sibling;t!==null;)md(t,s,a),t=t.sibling}function i0(t){var s=t.stateNode,a=t.memoizedProps;try{for(var r=t.type,u=s.attributes;u.length;)s.removeAttributeNode(u[0]);ea(s,r,a),s[at]=t,s[Tt]=a}catch(x){Yt(t,t.return,x)}}var gn=!1,Ds=!1,lm=!1,c0=typeof WeakSet=="function"?WeakSet:Set,Ys=null;function dh(t,s){if(t=t.containerInfo,Gc=Od,t=Ax(t),hu(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var r=a.getSelection&&a.getSelection();if(r&&r.rangeCount!==0){a=r.anchorNode;var u=r.anchorOffset,x=r.focusNode;r=r.focusOffset;try{a.nodeType,x.nodeType}catch{a=null;break e}var _=0,T=-1,G=-1,ce=0,ve=0,_e=t,oe=null;t:for(;;){for(var fe;_e!==a||u!==0&&_e.nodeType!==3||(T=_+u),_e!==x||r!==0&&_e.nodeType!==3||(G=_+r),_e.nodeType===3&&(_+=_e.nodeValue.length),(fe=_e.firstChild)!==null;)oe=_e,_e=fe;for(;;){if(_e===t)break t;if(oe===a&&++ce===u&&(T=_),oe===x&&++ve===r&&(G=_),(fe=_e.nextSibling)!==null)break;_e=oe,oe=_e.parentNode}_e=fe}a=T===-1||G===-1?null:{start:T,end:G}}else a=null}a=a||{start:0,end:0}}else a=null;for(Mm={focusedElem:t,selectionRange:a},Od=!1,Ys=s;Ys!==null;)if(s=Ys,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ys=t;else for(;Ys!==null;){switch(s=Ys,x=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)u=t[a],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,a=s,u=x.memoizedProps,x=x.memoizedState,r=a.stateNode;try{var Ue=ua(a.type,u);t=r.getSnapshotBeforeUpdate(Ue,x),r.__reactInternalSnapshotBeforeUpdate=t}catch(Qe){Yt(a,a.return,Qe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Sd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Sd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,Ys=t;break}Ys=s.return}}function nm(t,s,a){var r=a.flags;switch(a.tag){case 0:case 11:case 15:vn(t,a),r&4&&pi(5,a);break;case 1:if(vn(t,a),r&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(_){Yt(a,a.return,_)}else{var u=ua(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(u,s,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Yt(a,a.return,_)}}r&64&&Tc(a),r&512&&va(a,a.return);break;case 3:if(vn(t,a),r&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{qo(t,s)}catch(_){Yt(a,a.return,_)}}break;case 27:s===null&&r&4&&i0(a);case 26:case 5:vn(t,a),s===null&&r&4&&n0(a),r&512&&va(a,a.return);break;case 12:vn(t,a);break;case 31:vn(t,a),r&4&&im(t,a);break;case 13:vn(t,a),r&4&&d0(t,a),r&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=jd.bind(null,a),Ch(t,a))));break;case 22:if(r=a.memoizedState!==null||gn,!r){s=s!==null&&s.memoizedState!==null||Ds,u=gn;var x=Ds;gn=r,(Ds=s)&&!x?Zl(t,a,(a.subtreeFlags&8772)!==0):vn(t,a),gn=u,Ds=x}break;case 30:break;default:vn(t,a)}}function rm(t){var s=t.alternate;s!==null&&(t.alternate=null,rm(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&ca(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var us=null,ja=!1;function bn(t,s,a){for(a=a.child;a!==null;)o0(t,s,a),a=a.sibling}function o0(t,s,a){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:Ds||na(a,s),bn(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ds||na(a,s);var r=us,u=ja;Ze(a.type)&&(us=a.stateNode,ja=!1),bn(t,s,a),Wc(a.stateNode),us=r,ja=u;break;case 5:Ds||na(a,s);case 6:if(r=us,u=ja,us=null,bn(t,s,a),us=r,ja=u,us!==null)if(ja)try{(us.nodeType===9?us.body:us.nodeName==="HTML"?us.ownerDocument.body:us).removeChild(a.stateNode)}catch(x){Yt(a,s,x)}else try{us.removeChild(a.stateNode)}catch(x){Yt(a,s,x)}break;case 18:us!==null&&(ja?(t=us,Lm(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Mi(t)):Lm(us,a.stateNode));break;case 4:r=us,u=ja,us=a.stateNode.containerInfo,ja=!0,bn(t,s,a),us=r,ja=u;break;case 0:case 11:case 14:case 15:pn(2,a,s),Ds||pn(4,a,s),bn(t,s,a);break;case 1:Ds||(na(a,s),r=a.stateNode,typeof r.componentWillUnmount=="function"&&tm(a,s,r)),bn(t,s,a);break;case 21:bn(t,s,a);break;case 22:Ds=(r=Ds)||a.memoizedState!==null,bn(t,s,a),Ds=r;break;default:bn(t,s,a)}}function im(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Mi(t)}catch(a){Yt(s,s.return,a)}}}function d0(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Mi(t)}catch(a){Yt(s,s.return,a)}}function uh(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new c0),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new c0),s;default:throw Error(o(435,t.tag))}}function xd(t,s){var a=uh(t);s.forEach(function(r){if(!a.has(r)){a.add(r);var u=bh.bind(null,t,r);r.then(u,u)}})}function ya(t,s){var a=s.deletions;if(a!==null)for(var r=0;r<a.length;r++){var u=a[r],x=t,_=s,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Ze(T.type)){us=T.stateNode,ja=!1;break e}break;case 5:us=T.stateNode,ja=!1;break e;case 3:case 4:us=T.stateNode.containerInfo,ja=!0;break e}T=T.return}if(us===null)throw Error(o(160));o0(x,_,u),us=null,ja=!1,x=u.alternate,x!==null&&(x.return=null),u.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)u0(s,t),s=s.sibling}var Ll=null;function u0(t,s){var a=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ya(s,t),ms(t),r&4&&(pn(3,t,t.return),pi(3,t),pn(5,t,t.return));break;case 1:ya(s,t),ms(t),r&512&&(Ds||a===null||na(a,a.return)),r&64&&gn&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?r:a.concat(r))));break;case 26:var u=Ll;if(ya(s,t),ms(t),r&512&&(Ds||a===null||na(a,a.return)),r&4){var x=a!==null?a.memoizedState:null;if(r=t.memoizedState,a===null)if(r===null)if(t.stateNode===null){e:{r=t.type,a=t.memoizedProps,u=u.ownerDocument||u;t:switch(r){case"title":x=u.getElementsByTagName("title")[0],(!x||x[el]||x[at]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=u.createElement(r),u.head.insertBefore(x,u.querySelector("head > title"))),ea(x,r,a),x[at]=t,ks(x),r=x;break e;case"link":var _=K0("link","href",u).get(r+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(x=_[T],x.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&x.getAttribute("rel")===(a.rel==null?null:a.rel)&&x.getAttribute("title")===(a.title==null?null:a.title)&&x.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}x=u.createElement(r),ea(x,r,a),u.head.appendChild(x);break;case"meta":if(_=K0("meta","content",u).get(r+(a.content||""))){for(T=0;T<_.length;T++)if(x=_[T],x.getAttribute("content")===(a.content==null?null:""+a.content)&&x.getAttribute("name")===(a.name==null?null:a.name)&&x.getAttribute("property")===(a.property==null?null:a.property)&&x.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&x.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}x=u.createElement(r),ea(x,r,a),u.head.appendChild(x);break;default:throw Error(o(468,r))}x[at]=t,ks(x),r=x}t.stateNode=r}else J0(u,t.type,t.stateNode);else t.stateNode=Z0(u,r,t.memoizedProps);else x!==r?(x===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):x.count--,r===null?J0(u,t.type,t.stateNode):Z0(u,r,t.memoizedProps)):r===null&&t.stateNode!==null&&ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:ya(s,t),ms(t),r&512&&(Ds||a===null||na(a,a.return)),a!==null&&r&4&&ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(ya(s,t),ms(t),r&512&&(Ds||a===null||na(a,a.return)),t.flags&32){u=t.stateNode;try{_l(u,"")}catch(Ue){Yt(t,t.return,Ue)}}r&4&&t.stateNode!=null&&(u=t.memoizedProps,ud(t,u,a!==null?a.memoizedProps:u)),r&1024&&(lm=!0);break;case 6:if(ya(s,t),ms(t),r&4){if(t.stateNode===null)throw Error(o(162));r=t.memoizedProps,a=t.stateNode;try{a.nodeValue=r}catch(Ue){Yt(t,t.return,Ue)}}break;case 3:if(Qc=null,u=Ll,Ll=Ad(s.containerInfo),ya(s,t),Ll=u,ms(t),r&4&&a!==null&&a.memoizedState.isDehydrated)try{Mi(s.containerInfo)}catch(Ue){Yt(t,t.return,Ue)}lm&&(lm=!1,m0(t));break;case 4:r=Ll,Ll=Ad(t.stateNode.containerInfo),ya(s,t),ms(t),Ll=r;break;case 12:ya(s,t),ms(t);break;case 31:ya(s,t),ms(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,xd(t,r)));break;case 13:ya(s,t),ms(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dc=os()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,xd(t,r)));break;case 22:u=t.memoizedState!==null;var G=a!==null&&a.memoizedState!==null,ce=gn,ve=Ds;if(gn=ce||u,Ds=ve||G,ya(s,t),Ds=ve,gn=ce,ms(t),r&8192)e:for(s=t.stateNode,s._visibility=u?s._visibility&-2:s._visibility|1,u&&(a===null||G||gn||Ds||kr(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){G=a=s;try{if(x=G.stateNode,u)_=x.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=G.stateNode;var _e=G.memoizedProps.style,oe=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;T.style.display=oe==null||typeof oe=="boolean"?"":(""+oe).trim()}}catch(Ue){Yt(G,G.return,Ue)}}}else if(s.tag===6){if(a===null){G=s;try{G.stateNode.nodeValue=u?"":G.memoizedProps}catch(Ue){Yt(G,G.return,Ue)}}}else if(s.tag===18){if(a===null){G=s;try{var fe=G.stateNode;u?Qa(fe,!0):Qa(G.stateNode,!1)}catch(Ue){Yt(G,G.return,Ue)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}r&4&&(r=t.updateQueue,r!==null&&(a=r.retryQueue,a!==null&&(r.retryQueue=null,xd(t,a))));break;case 19:ya(s,t),ms(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,xd(t,r)));break;case 30:break;case 21:break;default:ya(s,t),ms(t)}}function ms(t){var s=t.flags;if(s&2){try{for(var a,r=t.return;r!==null;){if(r0(r)){a=r;break}r=r.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var u=a.stateNode,x=sm(t);md(t,x,u);break;case 5:var _=a.stateNode;a.flags&32&&(_l(_,""),a.flags&=-33);var T=sm(t);md(t,T,_);break;case 3:case 4:var G=a.stateNode.containerInfo,ce=sm(t);am(t,ce,G);break;default:throw Error(o(161))}}catch(ve){Yt(t,t.return,ve)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function m0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;m0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function vn(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)nm(t,s.alternate,s),s=s.sibling}function kr(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:pn(4,s,s.return),kr(s);break;case 1:na(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&tm(s,s.return,a),kr(s);break;case 27:Wc(s.stateNode);case 26:case 5:na(s,s.return),kr(s);break;case 22:s.memoizedState===null&&kr(s);break;case 30:kr(s);break;default:kr(s)}t=t.sibling}}function Zl(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var r=s.alternate,u=t,x=s,_=x.flags;switch(x.tag){case 0:case 11:case 15:Zl(u,x,a),pi(4,x);break;case 1:if(Zl(u,x,a),r=x,u=r.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(ce){Yt(r,r.return,ce)}if(r=x,u=r.updateQueue,u!==null){var T=r.stateNode;try{var G=u.shared.hiddenCallbacks;if(G!==null)for(u.shared.hiddenCallbacks=null,u=0;u<G.length;u++)Tl(G[u],T)}catch(ce){Yt(r,r.return,ce)}}a&&_&64&&Tc(x),va(x,x.return);break;case 27:i0(x);case 26:case 5:Zl(u,x,a),a&&r===null&&_&4&&n0(x),va(x,x.return);break;case 12:Zl(u,x,a);break;case 31:Zl(u,x,a),a&&_&4&&im(u,x);break;case 13:Zl(u,x,a),a&&_&4&&d0(u,x);break;case 22:x.memoizedState===null&&Zl(u,x,a),va(x,x.return);break;case 30:break;default:Zl(u,x,a)}s=s.sibling}}function cm(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ac(a))}function om(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ac(t))}function Dl(t,s,a,r){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)x0(t,s,a,r),s=s.sibling}function x0(t,s,a,r){var u=s.flags;switch(s.tag){case 0:case 11:case 15:Dl(t,s,a,r),u&2048&&pi(9,s);break;case 1:Dl(t,s,a,r);break;case 3:Dl(t,s,a,r),u&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&ac(t)));break;case 12:if(u&2048){Dl(t,s,a,r),t=s.stateNode;try{var x=s.memoizedProps,_=x.id,T=x.onPostCommit;typeof T=="function"&&T(_,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(G){Yt(s,s.return,G)}}else Dl(t,s,a,r);break;case 31:Dl(t,s,a,r);break;case 13:Dl(t,s,a,r);break;case 23:break;case 22:x=s.stateNode,_=s.alternate,s.memoizedState!==null?x._visibility&2?Dl(t,s,a,r):Rc(t,s):x._visibility&2?Dl(t,s,a,r):(x._visibility|=2,Wn(t,s,a,r,(s.subtreeFlags&10256)!==0||!1)),u&2048&&cm(_,s);break;case 24:Dl(t,s,a,r),u&2048&&om(s.alternate,s);break;default:Dl(t,s,a,r)}}function Wn(t,s,a,r,u){for(u=u&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var x=t,_=s,T=a,G=r,ce=_.flags;switch(_.tag){case 0:case 11:case 15:Wn(x,_,T,G,u),pi(8,_);break;case 23:break;case 22:var ve=_.stateNode;_.memoizedState!==null?ve._visibility&2?Wn(x,_,T,G,u):Rc(x,_):(ve._visibility|=2,Wn(x,_,T,G,u)),u&&ce&2048&&cm(_.alternate,_);break;case 24:Wn(x,_,T,G,u),u&&ce&2048&&om(_.alternate,_);break;default:Wn(x,_,T,G,u)}s=s.sibling}}function Rc(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,r=s,u=r.flags;switch(r.tag){case 22:Rc(a,r),u&2048&&cm(r.alternate,r);break;case 24:Rc(a,r),u&2048&&om(r.alternate,r);break;default:Rc(a,r)}s=s.sibling}}var Mc=8192;function gi(t,s,a){if(t.subtreeFlags&Mc)for(t=t.child;t!==null;)f0(t,s,a),t=t.sibling}function f0(t,s,a){switch(t.tag){case 26:gi(t,s,a),t.flags&Mc&&t.memoizedState!==null&&Ei(a,Ll,t.memoizedState,t.memoizedProps);break;case 5:gi(t,s,a);break;case 3:case 4:var r=Ll;Ll=Ad(t.stateNode.containerInfo),gi(t,s,a),Ll=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Mc,Mc=16777216,gi(t,s,a),Mc=r):gi(t,s,a));break;default:gi(t,s,a)}}function h0(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Oc(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var r=s[a];Ys=r,g0(r,t)}h0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)p0(t),t=t.sibling}function p0(t){switch(t.tag){case 0:case 11:case 15:Oc(t),t.flags&2048&&pn(9,t,t.return);break;case 3:Oc(t);break;case 12:Oc(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,fd(t)):Oc(t);break;default:Oc(t)}}function fd(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var r=s[a];Ys=r,g0(r,t)}h0(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:pn(8,s,s.return),fd(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,fd(s));break;default:fd(s)}t=t.sibling}}function g0(t,s){for(;Ys!==null;){var a=Ys;switch(a.tag){case 0:case 11:case 15:pn(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var r=a.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ac(a.memoizedState.cache)}if(r=a.child,r!==null)r.return=a,Ys=r;else e:for(a=t;Ys!==null;){r=Ys;var u=r.sibling,x=r.return;if(rm(r),r===a){Ys=null;break e}if(u!==null){u.return=x,Ys=u;break e}Ys=x}}}var mh={getCacheForType:function(t){var s=Zs(Ls),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return Zs(Ls).controller.signal}},xh=typeof WeakMap=="function"?WeakMap:Map,Ht=0,ls=null,jt=null,wt=0,Vt=0,Ia=null,Qn=!1,bi=!1,dm=!1,zl=0,Ns=0,Xn=0,Er=0,um=0,Ga=0,vi=0,Lc=null,Na=null,mm=!1,Dc=0,b0=0,Tr=1/0,hd=null,Zn=null,qs=0,Kn=null,ji=null,jn=0,xm=0,fm=null,v0=null,zc=0,hm=null;function Va(){return(Ht&2)!==0&&wt!==0?wt&-wt:H.T!==null?Ya():Xe()}function j0(){if(Ga===0)if((wt&536870912)===0||kt){var t=Ae;Ae<<=1,(Ae&3932160)===0&&(Ae=262144),Ga=t}else Ga=536870912;return t=$a.current,t!==null&&(t.flags|=32),Ga}function _a(t,s,a){(t===ls&&(Vt===2||Vt===9)||t.cancelPendingCommit!==null)&&(yi(t,0),yn(t,wt,Ga,!1)),$e(t,a),((Ht&2)===0||t!==ls)&&(t===ls&&((Ht&2)===0&&(Er|=a),Ns===4&&yn(t,wt,Ga,!1)),Kl(t))}function y0(t,s,a){if((Ht&6)!==0)throw Error(o(327));var r=!a&&(s&127)===0&&(s&t.expiredLanes)===0||Ye(t,s),u=r?hh(t,s):gm(t,s,!0),x=r;do{if(u===0){bi&&!r&&yn(t,s,0,!1);break}else{if(a=t.current.alternate,x&&!_0(a)){u=gm(t,s,!1),x=!1;continue}if(u===2){if(x=s,t.errorRecoveryDisabledLanes&x)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){s=_;e:{var T=t;u=Lc;var G=T.current.memoizedState.isDehydrated;if(G&&(yi(T,_).flags|=256),_=gm(T,_,!1),_!==2){if(dm&&!G){T.errorRecoveryDisabledLanes|=x,Er|=x,u=4;break e}x=Na,Na=u,x!==null&&(Na===null?Na=x:Na.push.apply(Na,x))}u=_}if(x=!1,u!==2)continue}}if(u===1){yi(t,0),yn(t,s,0,!0);break}e:{switch(r=t,x=u,x){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:yn(r,s,Ga,!Qn);break e;case 2:Na=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(u=Dc+300-os(),10<u)){if(yn(r,s,Ga,!Qn),et(r,0,!0)!==0)break e;jn=s,r.timeoutHandle=$0(N0.bind(null,r,a,Na,hd,mm,s,Ga,Er,vi,Qn,x,"Throttled",-0,0),u);break e}N0(r,a,Na,hd,mm,s,Ga,Er,vi,Qn,x,null,-0,0)}}break}while(!0);Kl(t)}function N0(t,s,a,r,u,x,_,T,G,ce,ve,_e,oe,fe){if(t.timeoutHandle=-1,_e=s.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:an},f0(s,x,_e);var Ue=(x&62914560)===x?Dc-os():(x&4194048)===x?b0-os():0;if(Ue=Dh(_e,Ue),Ue!==null){jn=x,t.cancelPendingCommit=Ue(E0.bind(null,t,s,x,a,r,u,_,T,G,ve,_e,null,oe,fe)),yn(t,x,_,!ce);return}}E0(t,s,x,a,r,u,_,T,G)}function _0(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var r=0;r<a.length;r++){var u=a[r],x=u.getSnapshot;u=u.value;try{if(!js(x(),u))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function yn(t,s,a,r){s&=~um,s&=~Er,t.suspendedLanes|=s,t.pingedLanes&=~s,r&&(t.warmLanes|=s),r=t.expirationTimes;for(var u=s;0<u;){var x=31-Ct(u),_=1<<x;r[x]=-1,u&=~_}a!==0&&Qt(t,a,s)}function pd(){return(Ht&6)===0?(Fc(0),!1):!0}function pm(){if(jt!==null){if(Vt===0)var t=jt.return;else t=jt,dn=nt=null,Su(t),ai=null,Ha=0,t=jt;for(;t!==null;)dd(t.alternate,t),t=t.return;jt=null}}function yi(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,wh(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),jn=0,pm(),ls=t,jt=a=nl(t.current,null),wt=s,Vt=0,Ia=null,Qn=!1,bi=Ye(t,s),dm=!1,vi=Ga=um=Er=Xn=Ns=0,Na=Lc=null,mm=!1,(s&8)!==0&&(s|=s&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=s;0<r;){var u=31-Ct(r),x=1<<u;s|=t[u],r&=~x}return zl=s,Sl(),a}function w0(t,s){rt=null,H.H=Vn,s===si||s===nc?(s=Bx(),Vt=3):s===Bo?(s=Bx(),Vt=4):Vt=s===yc?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Ia=s,jt===null&&(Ns=1,jc(t,Ba(s,t.current)))}function Bc(){var t=$a.current;return t===null?!0:(wt&4194048)===wt?xl===null:(wt&62914560)===wt||(wt&536870912)!==0?t===xl:!1}function S0(){var t=H.H;return H.H=Vn,t===null?Vn:t}function C0(){var t=H.A;return H.A=mh,t}function gd(){Ns=4,Qn||(wt&4194048)!==wt&&$a.current!==null||(bi=!0),(Xn&134217727)===0&&(Er&134217727)===0||ls===null||yn(ls,wt,Ga,!1)}function gm(t,s,a){var r=Ht;Ht|=2;var u=S0(),x=C0();(ls!==t||wt!==s)&&(hd=null,yi(t,s)),s=!1;var _=Ns;e:do try{if(Vt!==0&&jt!==null){var T=jt,G=Ia;switch(Vt){case 8:pm(),_=6;break e;case 3:case 2:case 9:case 6:$a.current===null&&(s=!0);var ce=Vt;if(Vt=0,Ia=null,Ni(t,T,G,ce),a&&bi){_=0;break e}break;default:ce=Vt,Vt=0,Ia=null,Ni(t,T,G,ce)}}fh(),_=Ns;break}catch(ve){w0(t,ve)}while(!0);return s&&t.shellSuspendCounter++,dn=nt=null,Ht=r,H.H=u,H.A=x,jt===null&&(ls=null,wt=0,Sl()),_}function fh(){for(;jt!==null;)A0(jt)}function hh(t,s){var a=Ht;Ht|=2;var r=S0(),u=C0();ls!==t||wt!==s?(hd=null,Tr=os()+500,yi(t,s)):bi=Ye(t,s);e:do try{if(Vt!==0&&jt!==null){s=jt;var x=Ia;t:switch(Vt){case 1:Vt=0,Ia=null,Ni(t,s,x,1);break;case 2:case 9:if(zx(x)){Vt=0,Ia=null,k0(s);break}s=function(){Vt!==2&&Vt!==9||ls!==t||(Vt=7),Kl(t)},x.then(s,s);break e;case 3:Vt=7;break e;case 4:Vt=5;break e;case 7:zx(x)?(Vt=0,Ia=null,k0(s)):(Vt=0,Ia=null,Ni(t,s,x,7));break;case 5:var _=null;switch(jt.tag){case 26:_=jt.memoizedState;case 5:case 27:var T=jt;if(_?ef(_):T.stateNode.complete){Vt=0,Ia=null;var G=T.sibling;if(G!==null)jt=G;else{var ce=T.return;ce!==null?(jt=ce,bd(ce)):jt=null}break t}}Vt=0,Ia=null,Ni(t,s,x,5);break;case 6:Vt=0,Ia=null,Ni(t,s,x,6);break;case 8:pm(),Ns=6;break e;default:throw Error(o(462))}}ph();break}catch(ve){w0(t,ve)}while(!0);return dn=nt=null,H.H=r,H.A=u,Ht=a,jt!==null?0:(ls=null,wt=0,Sl(),Ns)}function ph(){for(;jt!==null&&!fs();)A0(jt)}function A0(t){var s=a0(t.alternate,t,zl);t.memoizedProps=t.pendingProps,s===null?bd(t):jt=s}function k0(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=e0(a,s,s.pendingProps,s.type,void 0,wt);break;case 11:s=e0(a,s,s.pendingProps,s.type.render,s.ref,wt);break;case 5:Su(s);default:dd(a,s),s=jt=Rx(s,zl),s=a0(a,s,zl)}t.memoizedProps=t.pendingProps,s===null?bd(t):jt=s}function Ni(t,s,a,r){dn=nt=null,Su(s),ai=null,Ha=0;var u=s.return;try{if(Wu(t,u,s,a,wt)){Ns=1,jc(t,Ba(a,t.current)),jt=null;return}}catch(x){if(u!==null)throw jt=u,x;Ns=1,jc(t,Ba(a,t.current)),jt=null;return}s.flags&32768?(kt||r===1?t=!0:bi||(wt&536870912)!==0?t=!1:(Qn=t=!0,(r===2||r===9||r===3||r===6)&&(r=$a.current,r!==null&&r.tag===13&&(r.flags|=16384))),Uc(s,t)):bd(s)}function bd(t){var s=t;do{if((s.flags&32768)!==0){Uc(s,Qn);return}t=s.return;var a=l0(s.alternate,s,zl);if(a!==null){jt=a;return}if(s=s.sibling,s!==null){jt=s;return}jt=s=t}while(s!==null);Ns===0&&(Ns=5)}function Uc(t,s){do{var a=Ec(t.alternate,t);if(a!==null){a.flags&=32767,jt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){jt=t;return}jt=t=a}while(t!==null);Ns=6,jt=null}function E0(t,s,a,r,u,x,_,T,G){t.cancelPendingCommit=null;do Hc();while(qs!==0);if((Ht&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(x=s.lanes|s.childLanes,x|=Yr,Dt(t,a,x,_,T,G),t===ls&&(jt=ls=null,wt=0),ji=s,Kn=t,jn=a,xm=x,fm=u,v0=r,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,vh(ds,function(){return ym(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||r){r=H.T,H.T=null,u=L.p,L.p=2,_=Ht,Ht|=4;try{dh(t,s,a)}finally{Ht=_,L.p=u,H.T=r}}qs=1,bm(),vm(),vd()}}function bm(){if(qs===1){qs=0;var t=Kn,s=ji,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var r=L.p;L.p=2;var u=Ht;Ht|=4;try{u0(s,t);var x=Mm,_=Ax(t.containerInfo),T=x.focusedElem,G=x.selectionRange;if(_!==T&&T&&T.ownerDocument&&Cx(T.ownerDocument.documentElement,T)){if(G!==null&&hu(T)){var ce=G.start,ve=G.end;if(ve===void 0&&(ve=ce),"selectionStart"in T)T.selectionStart=ce,T.selectionEnd=Math.min(ve,T.value.length);else{var _e=T.ownerDocument||document,oe=_e&&_e.defaultView||window;if(oe.getSelection){var fe=oe.getSelection(),Ue=T.textContent.length,Qe=Math.min(G.start,Ue),Jt=G.end===void 0?Qe:Math.min(G.end,Ue);!fe.extend&&Qe>Jt&&(_=Jt,Jt=Qe,Qe=_);var le=Sx(T,Qe),K=Sx(T,Jt);if(le&&K&&(fe.rangeCount!==1||fe.anchorNode!==le.node||fe.anchorOffset!==le.offset||fe.focusNode!==K.node||fe.focusOffset!==K.offset)){var ie=_e.createRange();ie.setStart(le.node,le.offset),fe.removeAllRanges(),Qe>Jt?(fe.addRange(ie),fe.extend(K.node,K.offset)):(ie.setEnd(K.node,K.offset),fe.addRange(ie))}}}}for(_e=[],fe=T;fe=fe.parentNode;)fe.nodeType===1&&_e.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<_e.length;T++){var Ne=_e[T];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Od=!!Gc,Mm=Gc=null}finally{Ht=u,L.p=r,H.T=a}}t.current=s,qs=2}}function vm(){if(qs===2){qs=0;var t=Kn,s=ji,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var r=L.p;L.p=2;var u=Ht;Ht|=4;try{nm(t,s.alternate,s)}finally{Ht=u,L.p=r,H.T=a}}qs=3}}function vd(){if(qs===4||qs===3){qs=0,Is();var t=Kn,s=ji,a=jn,r=v0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?qs=5:(qs=0,ji=Kn=null,jm(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Zn=null),Ie(a),s=s.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(ht,s,void 0,(s.current.flags&128)===128)}catch{}if(r!==null){s=H.T,u=L.p,L.p=2,H.T=null;try{for(var x=t.onRecoverableError,_=0;_<r.length;_++){var T=r[_];x(T.value,{componentStack:T.stack})}}finally{H.T=s,L.p=u}}(jn&3)!==0&&Hc(),Kl(t),u=t.pendingLanes,(a&261930)!==0&&(u&42)!==0?t===hm?zc++:(zc=0,hm=t):zc=0,Fc(0)}}function jm(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,ac(s)))}function Hc(){return bm(),vm(),vd(),ym()}function ym(){if(qs!==5)return!1;var t=Kn,s=xm;xm=0;var a=Ie(jn),r=H.T,u=L.p;try{L.p=32>a?32:a,H.T=null,a=fm,fm=null;var x=Kn,_=jn;if(qs=0,ji=Kn=null,jn=0,(Ht&6)!==0)throw Error(o(331));var T=Ht;if(Ht|=4,p0(x.current),x0(x,x.current,_,a),Ht=T,Fc(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(ht,x)}catch{}return!0}finally{L.p=u,H.T=r,jm(t,s)}}function Nm(t,s,a){s=Ba(a,s),s=Yu(t.stateNode,s,2),t=El(t,s,2),t!==null&&($e(t,2),Kl(t))}function Yt(t,s,a){if(t.tag===3)Nm(t,t,a);else for(;s!==null;){if(s.tag===3){Nm(s,t,a);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){t=Ba(a,t),a=Ql(2),r=El(s,a,2),r!==null&&(ad(a,r,s,t),$e(r,2),Kl(r));break}}s=s.return}}function _m(t,s,a){var r=t.pingCache;if(r===null){r=t.pingCache=new xh;var u=new Set;r.set(s,u)}else u=r.get(s),u===void 0&&(u=new Set,r.set(s,u));u.has(a)||(dm=!0,u.add(a),t=gh.bind(null,t,s,a),s.then(t,t))}function gh(t,s,a){var r=t.pingCache;r!==null&&r.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ls===t&&(wt&a)===a&&(Ns===4||Ns===3&&(wt&62914560)===wt&&300>os()-Dc?(Ht&2)===0&&yi(t,0):um|=a,vi===wt&&(vi=0)),Kl(t)}function $c(t,s){s===0&&(s=we()),t=Il(t,s),t!==null&&($e(t,s),Kl(t))}function jd(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),$c(t,a)}function bh(t,s){var a=0;switch(t.tag){case 31:case 13:var r=t.stateNode,u=t.memoizedState;u!==null&&(a=u.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(o(314))}r!==null&&r.delete(s),$c(t,a)}function vh(t,s){return es(t,s)}var _i=null,Rr=null,wm=!1,yd=!1,Sm=!1,Jn=0;function Kl(t){t!==Rr&&t.next===null&&(Rr===null?_i=Rr=t:Rr=Rr.next=t),yd=!0,wm||(wm=!0,yh())}function Fc(t,s){if(!Sm&&yd){Sm=!0;do for(var a=!1,r=_i;r!==null;){if(t!==0){var u=r.pendingLanes;if(u===0)var x=0;else{var _=r.suspendedLanes,T=r.pingedLanes;x=(1<<31-Ct(42|t)+1)-1,x&=u&~(_&~T),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(a=!0,O0(r,x))}else x=wt,x=et(r,r===ls?x:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(x&3)===0||Ye(r,x)||(a=!0,O0(r,x));r=r.next}while(a);Sm=!1}}function jh(){T0()}function T0(){yd=wm=!1;var t=0;Jn!==0&&_h()&&(t=Jn);for(var s=os(),a=null,r=_i;r!==null;){var u=r.next,x=R0(r,s);x===0?(r.next=null,a===null?_i=u:a.next=u,u===null&&(Rr=a)):(a=r,(t!==0||(x&3)!==0)&&(yd=!0)),r=u}qs!==0&&qs!==5||Fc(t),Jn!==0&&(Jn=0)}function R0(t,s){for(var a=t.suspendedLanes,r=t.pingedLanes,u=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var _=31-Ct(x),T=1<<_,G=u[_];G===-1?((T&a)===0||(T&r)!==0)&&(u[_]=ot(T,s)):G<=s&&(t.expiredLanes|=T),x&=~T}if(s=ls,a=wt,a=et(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,a===0||t===s&&(Vt===2||Vt===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&It(r),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Ye(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(r!==null&&It(r),Ie(a)){case 2:case 8:a=ts;break;case 32:a=ds;break;case 268435456:a=Vs;break;default:a=ds}return r=M0.bind(null,t),a=es(a,r),t.callbackPriority=s,t.callbackNode=a,s}return r!==null&&r!==null&&It(r),t.callbackPriority=2,t.callbackNode=null,2}function M0(t,s){if(qs!==0&&qs!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Hc()&&t.callbackNode!==a)return null;var r=wt;return r=et(t,t===ls?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(y0(t,r,s),R0(t,os()),t.callbackNode!=null&&t.callbackNode===a?M0.bind(null,t):null)}function O0(t,s){if(Hc())return null;y0(t,s,!0)}function yh(){q0(function(){(Ht&6)!==0?es(Us,jh):T0()})}function Ya(){if(Jn===0){var t=ei;t===0&&(t=je,je<<=1,(je&261888)===0&&(je=256)),Jn=t}return Jn}function L0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ii(""+t)}function D0(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Mr(t,s,a,r,u){if(s==="submit"&&a&&a.stateNode===u){var x=L0((u[Tt]||null).action),_=r.submitter;_&&(s=(s=_[Tt]||null)?L0(s.formAction):_.getAttribute("formAction"),s!==null&&(x=s,_=null));var T=new po("action","action",null,r,u);t.push({event:T,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(Jn!==0){var G=_?D0(u,_):new FormData(u);Gn(a,{pending:!0,data:G,method:u.method,action:x},null,G)}}else typeof x=="function"&&(T.preventDefault(),G=_?D0(u,_):new FormData(u),Gn(a,{pending:!0,data:G,method:u.method,action:x},x,G))},currentTarget:u}]})}}for(var st=0;st<To.length;st++){var Cm=To[st],wa=Cm.toLowerCase(),Rs=Cm[0].toUpperCase()+Cm.slice(1);ha(wa,"on"+Rs)}ha(za,"onAnimationEnd"),ha(Ki,"onAnimationIteration"),ha(kx,"onAnimationStart"),ha("dblclick","onDoubleClick"),ha("focusin","onFocus"),ha("focusout","onBlur"),ha(Gr,"onTransitionRun"),ha(ko,"onTransitionStart"),ha(Eo,"onTransitionCancel"),ha($t,"onTransitionEnd"),ql("onMouseEnter",["mouseout","mouseover"]),ql("onMouseLeave",["mouseout","mouseover"]),ql("onPointerEnter",["pointerout","pointerover"]),ql("onPointerLeave",["pointerout","pointerover"]),Nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nl("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),er=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qc));function z0(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var r=t[a],u=r.event;r=r.listeners;e:{var x=void 0;if(s)for(var _=r.length-1;0<=_;_--){var T=r[_],G=T.instance,ce=T.currentTarget;if(T=T.listener,G!==x&&u.isPropagationStopped())break e;x=T,u.currentTarget=ce;try{x(u)}catch(ve){Ro(ve)}u.currentTarget=null,x=G}else for(_=0;_<r.length;_++){if(T=r[_],G=T.instance,ce=T.currentTarget,T=T.listener,G!==x&&u.isPropagationStopped())break e;x=T,u.currentTarget=ce;try{x(u)}catch(ve){Ro(ve)}u.currentTarget=null,x=G}}}}function yt(t,s){var a=s[Ea];a===void 0&&(a=s[Ea]=new Set);var r=t+"__bubble";a.has(r)||(_d(s,t,2,!1),a.add(r))}function Am(t,s,a){var r=0;s&&(r|=4),_d(a,t,r,s)}var Nd="_reactListening"+Math.random().toString(36).slice(2);function km(t){if(!t[Nd]){t[Nd]=!0,Ui.forEach(function(a){a!=="selectionchange"&&(er.has(a)||Am(a,!1,t),Am(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Nd]||(s[Nd]=!0,Am("selectionchange",!1,s))}}function _d(t,s,a,r){switch(of(s)){case 2:var u=Bh;break;case 8:u=Uh;break;default:u=$m}a=u.bind(null,s,a,t),u=void 0,!au||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(u=!0),r?u!==void 0?t.addEventListener(s,a,{capture:!0,passive:u}):t.addEventListener(s,a,!0):u!==void 0?t.addEventListener(s,a,{passive:u}):t.addEventListener(s,a,!1)}function Em(t,s,a,r,u){var x=r;if((s&1)===0&&(s&2)===0&&r!==null)e:for(;;){if(r===null)return;var _=r.tag;if(_===3||_===4){var T=r.stateNode.containerInfo;if(T===u)break;if(_===4)for(_=r.return;_!==null;){var G=_.tag;if((G===3||G===4)&&_.stateNode.containerInfo===u)return;_=_.return}for(;T!==null;){if(_=yl(T),_===null)return;if(G=_.tag,G===5||G===6||G===26||G===27){r=x=_;continue e}T=T.parentNode}}r=r.return}dx(function(){var ce=x,ve=tu(a),_e=[];e:{var oe=Ex.get(t);if(oe!==void 0){var fe=po,Ue=t;switch(t){case"keypress":if(fo(a)===0)break e;case"keydown":case"keyup":fe=Ln;break;case"focusin":Ue="focus",fe=bo;break;case"focusout":Ue="blur",fe=bo;break;case"beforeblur":case"afterblur":fe=bo;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=go;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=mx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Vf;break;case za:case Ki:case kx:fe=hx;break;case $t:fe=Wf;break;case"scroll":case"scrollend":fe=Pf;break;case"wheel":fe=jo;break;case"copy":case"cut":case"paste":fe=Oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=bx;break;case"toggle":case"beforetoggle":fe=Qf}var Qe=(s&4)!==0,Jt=!Qe&&(t==="scroll"||t==="scrollend"),le=Qe?oe!==null?oe+"Capture":null:oe;Qe=[];for(var K=ce,ie;K!==null;){var Ne=K;if(ie=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||ie===null||le===null||(Ne=mr(K,le),Ne!=null&&Qe.push(Wa(K,Ne,ie))),Jt)break;K=K.return}0<Qe.length&&(oe=new fe(oe,Ue,null,a,ve),_e.push({event:oe,listeners:Qe}))}}if((s&7)===0){e:{if(oe=t==="mouseover"||t==="pointerover",fe=t==="mouseout"||t==="pointerout",oe&&a!==eu&&(Ue=a.relatedTarget||a.fromElement)&&(yl(Ue)||Ue[vs]))break e;if((fe||oe)&&(oe=ve.window===ve?ve:(oe=ve.ownerDocument)?oe.defaultView||oe.parentWindow:window,fe?(Ue=a.relatedTarget||a.toElement,fe=ce,Ue=Ue?yl(Ue):null,Ue!==null&&(Jt=h(Ue),Qe=Ue.tag,Ue!==Jt||Qe!==5&&Qe!==27&&Qe!==6)&&(Ue=null)):(fe=null,Ue=ce),fe!==Ue)){if(Qe=go,Ne="onMouseLeave",le="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&(Qe=bx,Ne="onPointerLeave",le="onPointerEnter",K="pointer"),Jt=fe==null?oe:Tn(fe),ie=Ue==null?oe:Tn(Ue),oe=new Qe(Ne,K+"leave",fe,a,ve),oe.target=Jt,oe.relatedTarget=ie,Ne=null,yl(ve)===ce&&(Qe=new Qe(le,K+"enter",Ue,a,ve),Qe.target=ie,Qe.relatedTarget=Jt,Ne=Qe),Jt=Ne,fe&&Ue)t:{for(Qe=wd,le=fe,K=Ue,ie=0,Ne=le;Ne;Ne=Qe(Ne))ie++;Ne=0;for(var Ve=K;Ve;Ve=Qe(Ve))Ne++;for(;0<ie-Ne;)le=Qe(le),ie--;for(;0<Ne-ie;)K=Qe(K),Ne--;for(;ie--;){if(le===K||K!==null&&le===K.alternate){Qe=le;break t}le=Qe(le),K=Qe(K)}Qe=null}else Qe=null;fe!==null&&bs(_e,oe,fe,Qe,!1),Ue!==null&&Jt!==null&&bs(_e,Jt,Ue,Qe,!0)}}e:{if(oe=ce?Tn(ce):window,fe=oe.nodeName&&oe.nodeName.toLowerCase(),fe==="select"||fe==="input"&&oe.type==="file")var Bt=_x;else if(du(oe))if(pr)Bt=Jf;else{Bt=Zf;var Fe=Co}else fe=oe.nodeName,!fe||fe.toLowerCase()!=="input"||oe.type!=="checkbox"&&oe.type!=="radio"?ce&&xo(ce.elementType)&&(Bt=_x):Bt=Kf;if(Bt&&(Bt=Bt(t,ce))){uu(_e,Bt,a,ve);break e}Fe&&Fe(t,oe,ce),t==="focusout"&&ce&&oe.type==="number"&&ce.memoizedProps.value!=null&&Kd(oe,"number",oe.value)}switch(Fe=ce?Tn(ce):window,t){case"focusin":(du(Fe)||Fe.contentEditable==="true")&&(se=Fe,be=ce,me=null);break;case"focusout":me=be=se=null;break;case"mousedown":ze=!0;break;case"contextmenu":case"mouseup":case"dragend":ze=!1,tt(_e,a,ve);break;case"selectionchange":if(Ir)break;case"keydown":case"keyup":tt(_e,a,ve)}var ut;if(yo)e:{switch(t){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else hr?_o(t,a)&&(St="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(St="onCompositionStart");St&&(cu&&a.locale!=="ko"&&(hr||St!=="onCompositionStart"?St==="onCompositionEnd"&&hr&&(ut=ss()):(Mn=ve,lu="value"in Mn?Mn.value:Mn.textContent,hr=!0)),Fe=Pc(ce,St),0<Fe.length&&(St=new La(St,t,null,a,ve),_e.push({event:St,listeners:Fe}),ut?St.data=ut:(ut=Nx(a),ut!==null&&(St.data=ut)))),(ut=iu?Da(t,a):ou(t,a))&&(St=Pc(ce,"onBeforeInput"),0<St.length&&(Fe=new La("onBeforeInput","beforeinput",null,a,ve),_e.push({event:Fe,listeners:St}),Fe.data=ut)),Mr(_e,t,ce,a,ve)}z0(_e,s)})}function Wa(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Pc(t,s){for(var a=s+"Capture",r=[];t!==null;){var u=t,x=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||x===null||(u=mr(t,a),u!=null&&r.unshift(Wa(t,u,x)),u=mr(t,s),u!=null&&r.push(Wa(t,u,x))),t.tag===3)return r;t=t.return}return[]}function wd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function bs(t,s,a,r,u){for(var x=s._reactName,_=[];a!==null&&a!==r;){var T=a,G=T.alternate,ce=T.stateNode;if(T=T.tag,G!==null&&G===r)break;T!==5&&T!==26&&T!==27||ce===null||(G=ce,u?(ce=mr(a,x),ce!=null&&_.unshift(Wa(a,ce,G))):u||(ce=mr(a,x),ce!=null&&_.push(Wa(a,ce,G)))),a=a.return}_.length!==0&&t.push({event:s,listeners:_})}var Cs=/\r\n?/g,B0=/\u0000|\uFFFD/g;function U0(t){return(typeof t=="string"?t:""+t).replace(Cs,`
`).replace(B0,"")}function H0(t,s){return s=U0(s),U0(t)===s}function Kt(t,s,a,r,u,x){switch(a){case"children":typeof r=="string"?s==="body"||s==="textarea"&&r===""||_l(t,r):(typeof r=="number"||typeof r=="bigint")&&s!=="body"&&_l(t,""+r);break;case"className":Rn(t,"class",r);break;case"tabIndex":Rn(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(t,a,r);break;case"style":rx(t,r,x);break;case"data":if(s!=="object"){Rn(t,"data",r);break}case"src":case"href":if(r===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(a);break}r=Ii(""+r),t.setAttribute(a,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(a==="formAction"?(s!=="input"&&Kt(t,s,"name",u.name,u,null),Kt(t,s,"formEncType",u.formEncType,u,null),Kt(t,s,"formMethod",u.formMethod,u,null),Kt(t,s,"formTarget",u.formTarget,u,null)):(Kt(t,s,"encType",u.encType,u,null),Kt(t,s,"method",u.method,u,null),Kt(t,s,"target",u.target,u,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(a);break}r=Ii(""+r),t.setAttribute(a,r);break;case"onClick":r!=null&&(t.onclick=an);break;case"onScroll":r!=null&&yt("scroll",t);break;case"onScrollEnd":r!=null&&yt("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(a=r.__html,a!=null){if(u.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}a=Ii(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(a,""+r):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":r===!0?t.setAttribute(a,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(a,r):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(a,r):t.removeAttribute(a);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(a):t.setAttribute(a,r);break;case"popover":yt("beforetoggle",t),yt("toggle",t),sn(t,"popover",r);break;case"xlinkActuate":Ta(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":Ta(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":Ta(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":Ta(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":Ta(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":Ta(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":Ta(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":Ta(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":Ta(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":sn(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ix.get(a)||a,sn(t,a,r))}}function Tm(t,s,a,r,u,x){switch(a){case"style":rx(t,r,x);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(o(61));if(a=r.__html,a!=null){if(u.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"children":typeof r=="string"?_l(t,r):(typeof r=="number"||typeof r=="bigint")&&_l(t,""+r);break;case"onScroll":r!=null&&yt("scroll",t);break;case"onScrollEnd":r!=null&&yt("scrollend",t);break;case"onClick":r!=null&&(t.onclick=an);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),s=a.slice(2,u?a.length-7:void 0),x=t[Tt]||null,x=x!=null?x[a]:null,typeof x=="function"&&t.removeEventListener(s,x,u),typeof r=="function")){typeof x!="function"&&x!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,r,u);break e}a in t?t[a]=r:r===!0?t.setAttribute(a,""):sn(t,a,r)}}}function ea(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",t),yt("load",t);var r=!1,u=!1,x;for(x in a)if(a.hasOwnProperty(x)){var _=a[x];if(_!=null)switch(x){case"src":r=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Kt(t,s,x,_,a,null)}}u&&Kt(t,s,"srcSet",a.srcSet,a,null),r&&Kt(t,s,"src",a.src,a,null);return;case"input":yt("invalid",t);var T=x=_=u=null,G=null,ce=null;for(r in a)if(a.hasOwnProperty(r)){var ve=a[r];if(ve!=null)switch(r){case"name":u=ve;break;case"type":_=ve;break;case"checked":G=ve;break;case"defaultChecked":ce=ve;break;case"value":x=ve;break;case"defaultValue":T=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(137,s));break;default:Kt(t,s,r,ve,a,null)}}oo(t,x,T,G,ce,_,u,!1);return;case"select":yt("invalid",t),r=_=x=null;for(u in a)if(a.hasOwnProperty(u)&&(T=a[u],T!=null))switch(u){case"value":x=T;break;case"defaultValue":_=T;break;case"multiple":r=T;default:Kt(t,s,u,T,a,null)}s=x,a=_,t.multiple=!!r,s!=null?dr(t,!!r,s,!1):a!=null&&dr(t,!!r,a,!0);return;case"textarea":yt("invalid",t),x=u=r=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":r=T;break;case"defaultValue":u=T;break;case"children":x=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(o(91));break;default:Kt(t,s,_,T,a,null)}mo(t,r,u,x);return;case"option":for(G in a)if(a.hasOwnProperty(G)&&(r=a[G],r!=null))switch(G){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:Kt(t,s,G,r,a,null)}return;case"dialog":yt("beforetoggle",t),yt("toggle",t),yt("cancel",t),yt("close",t);break;case"iframe":case"object":yt("load",t);break;case"video":case"audio":for(r=0;r<qc.length;r++)yt(qc[r],t);break;case"image":yt("error",t),yt("load",t);break;case"details":yt("toggle",t);break;case"embed":case"source":case"link":yt("error",t),yt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in a)if(a.hasOwnProperty(ce)&&(r=a[ce],r!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:Kt(t,s,ce,r,a,null)}return;default:if(xo(s)){for(ve in a)a.hasOwnProperty(ve)&&(r=a[ve],r!==void 0&&Tm(t,s,ve,r,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(r=a[T],r!=null&&Kt(t,s,T,r,a,null))}function Nh(t,s,a,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,x=null,_=null,T=null,G=null,ce=null,ve=null;for(fe in a){var _e=a[fe];if(a.hasOwnProperty(fe)&&_e!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":G=_e;default:r.hasOwnProperty(fe)||Kt(t,s,fe,null,r,_e)}}for(var oe in r){var fe=r[oe];if(_e=a[oe],r.hasOwnProperty(oe)&&(fe!=null||_e!=null))switch(oe){case"type":x=fe;break;case"name":u=fe;break;case"checked":ce=fe;break;case"defaultChecked":ve=fe;break;case"value":_=fe;break;case"defaultValue":T=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(o(137,s));break;default:fe!==_e&&Kt(t,s,oe,fe,r,_e)}}co(t,_,T,G,ce,ve,x,u);return;case"select":fe=_=T=oe=null;for(x in a)if(G=a[x],a.hasOwnProperty(x)&&G!=null)switch(x){case"value":break;case"multiple":fe=G;default:r.hasOwnProperty(x)||Kt(t,s,x,null,r,G)}for(u in r)if(x=r[u],G=a[u],r.hasOwnProperty(u)&&(x!=null||G!=null))switch(u){case"value":oe=x;break;case"defaultValue":T=x;break;case"multiple":_=x;default:x!==G&&Kt(t,s,u,x,r,G)}s=T,a=_,r=fe,oe!=null?dr(t,!!a,oe,!1):!!r!=!!a&&(s!=null?dr(t,!!a,s,!0):dr(t,!!a,a?[]:"",!1));return;case"textarea":fe=oe=null;for(T in a)if(u=a[T],a.hasOwnProperty(T)&&u!=null&&!r.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Kt(t,s,T,null,r,u)}for(_ in r)if(u=r[_],x=a[_],r.hasOwnProperty(_)&&(u!=null||x!=null))switch(_){case"value":oe=u;break;case"defaultValue":fe=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(o(91));break;default:u!==x&&Kt(t,s,_,u,r,x)}uo(t,oe,fe);return;case"option":for(var Ue in a)if(oe=a[Ue],a.hasOwnProperty(Ue)&&oe!=null&&!r.hasOwnProperty(Ue))switch(Ue){case"selected":t.selected=!1;break;default:Kt(t,s,Ue,null,r,oe)}for(G in r)if(oe=r[G],fe=a[G],r.hasOwnProperty(G)&&oe!==fe&&(oe!=null||fe!=null))switch(G){case"selected":t.selected=oe&&typeof oe!="function"&&typeof oe!="symbol";break;default:Kt(t,s,G,oe,r,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in a)oe=a[Qe],a.hasOwnProperty(Qe)&&oe!=null&&!r.hasOwnProperty(Qe)&&Kt(t,s,Qe,null,r,oe);for(ce in r)if(oe=r[ce],fe=a[ce],r.hasOwnProperty(ce)&&oe!==fe&&(oe!=null||fe!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(o(137,s));break;default:Kt(t,s,ce,oe,r,fe)}return;default:if(xo(s)){for(var Jt in a)oe=a[Jt],a.hasOwnProperty(Jt)&&oe!==void 0&&!r.hasOwnProperty(Jt)&&Tm(t,s,Jt,void 0,r,oe);for(ve in r)oe=r[ve],fe=a[ve],!r.hasOwnProperty(ve)||oe===fe||oe===void 0&&fe===void 0||Tm(t,s,ve,oe,r,fe);return}}for(var le in a)oe=a[le],a.hasOwnProperty(le)&&oe!=null&&!r.hasOwnProperty(le)&&Kt(t,s,le,null,r,oe);for(_e in r)oe=r[_e],fe=a[_e],!r.hasOwnProperty(_e)||oe===fe||oe==null&&fe==null||Kt(t,s,_e,oe,r,fe)}function Rm(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ic(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),r=0;r<a.length;r++){var u=a[r],x=u.transferSize,_=u.initiatorType,T=u.duration;if(x&&T&&Rm(_)){for(_=0,T=u.responseEnd,r+=1;r<a.length;r++){var G=a[r],ce=G.startTime;if(ce>T)break;var ve=G.transferSize,_e=G.initiatorType;ve&&Rm(_e)&&(G=G.responseEnd,_+=ve*(G<T?1:(T-ce)/(G-ce)))}if(--r,s+=8*(x+_)/(u.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Gc=null,Mm=null;function Vc(t){return t.nodeType===9?t:t.ownerDocument}function Yc(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sa(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function tr(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Om=null;function _h(){var t=window.event;return t&&t.type==="popstate"?t===Om?!1:(Om=t,!0):(Om=null,!1)}var $0=typeof setTimeout=="function"?setTimeout:void 0,wh=typeof clearTimeout=="function"?clearTimeout:void 0,F0=typeof Promise=="function"?Promise:void 0,q0=typeof queueMicrotask=="function"?queueMicrotask:typeof F0<"u"?function(t){return F0.resolve(null).then(t).catch(Nn)}:$0;function Nn(t){setTimeout(function(){throw t})}function Ze(t){return t==="head"}function Lm(t,s){var a=s,r=0;do{var u=a.nextSibling;if(t.removeChild(a),u&&u.nodeType===8)if(a=u.data,a==="/$"||a==="/&"){if(r===0){t.removeChild(u),Mi(s);return}r--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")r++;else if(a==="html")Wc(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Wc(a);for(var x=a.firstChild;x;){var _=x.nextSibling,T=x.nodeName;x[el]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&x.rel.toLowerCase()==="stylesheet"||a.removeChild(x),x=_}}else a==="body"&&Wc(t.ownerDocument.body);a=u}while(a);Mi(s)}function Qa(t,s){var a=t;t=0;do{var r=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),r&&r.nodeType===8)if(a=r.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=r}while(a)}function Sd(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Sd(a),ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Sh(t,s,a,r){for(;t.nodeType===1;){var u=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[el])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var x=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=pl(t.nextSibling),t===null)break}return null}function qt(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=pl(t.nextSibling),t===null))return null;return t}function P0(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=pl(t.nextSibling),t===null))return null;return t}function Cd(t){return t.data==="$?"||t.data==="$~"}function wi(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Ch(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var r=function(){s(),a.removeEventListener("DOMContentLoaded",r)};a.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function pl(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Dm=null;function I0(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return pl(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function G0(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function V0(t,s,a){switch(s=Vc(a),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Wc(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ca(t)}var gl=new Map,Y0=new Set;function Ad(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _n=L.d;L.d={f:Ah,r:kh,D:zm,C:Eh,L:Th,m:Rh,X:Ca,S:Ws,M:Mh};function Ah(){var t=_n.f(),s=pd();return t||s}function kh(t){var s=tl(t);s!==null&&s.tag===5&&s.type==="form"?$u(s):_n.r(t)}var sr=typeof document>"u"?null:document;function W0(t,s,a){var r=sr;if(r&&typeof s=="string"&&s){var u=Ma(s);u='link[rel="'+t+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),Y0.has(u)||(Y0.add(u),t={rel:t,crossOrigin:a,href:s},r.querySelector(u)===null&&(s=r.createElement("link"),ea(s,"link",t),ks(s),r.head.appendChild(s)))}}function zm(t){_n.D(t),W0("dns-prefetch",t,null)}function Eh(t,s){_n.C(t,s),W0("preconnect",t,s)}function Th(t,s,a){_n.L(t,s,a);var r=sr;if(r&&t&&s){var u='link[rel="preload"][as="'+Ma(s)+'"]';s==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+Ma(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+Ma(a.imageSizes)+'"]')):u+='[href="'+Ma(t)+'"]';var x=u;switch(s){case"style":x=Si(t);break;case"script":x=Ai(t)}gl.has(x)||(t=S({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),gl.set(x,t),r.querySelector(u)!==null||s==="style"&&r.querySelector(Ci(x))||s==="script"&&r.querySelector(ki(x))||(s=r.createElement("link"),ea(s,"link",t),ks(s),r.head.appendChild(s)))}}function Rh(t,s){_n.m(t,s);var a=sr;if(a&&t){var r=s&&typeof s.as=="string"?s.as:"script",u='link[rel="modulepreload"][as="'+Ma(r)+'"][href="'+Ma(t)+'"]',x=u;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Ai(t)}if(!gl.has(x)&&(t=S({rel:"modulepreload",href:t},s),gl.set(x,t),a.querySelector(u)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ki(x)))return}r=a.createElement("link"),ea(r,"link",t),ks(r),a.head.appendChild(r)}}}function Ws(t,s,a){_n.S(t,s,a);var r=sr;if(r&&t){var u=sl(r).hoistableStyles,x=Si(t);s=s||"default";var _=u.get(x);if(!_){var T={loading:0,preload:null};if(_=r.querySelector(Ci(x)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":s},a),(a=gl.get(x))&&Bm(t,a);var G=_=r.createElement("link");ks(G),ea(G,"link",t),G._p=new Promise(function(ce,ve){G.onload=ce,G.onerror=ve}),G.addEventListener("load",function(){T.loading|=1}),G.addEventListener("error",function(){T.loading|=2}),T.loading|=4,kd(_,s,r)}_={type:"stylesheet",instance:_,count:1,state:T},u.set(x,_)}}}function Ca(t,s){_n.X(t,s);var a=sr;if(a&&t){var r=sl(a).hoistableScripts,u=Ai(t),x=r.get(u);x||(x=a.querySelector(ki(u)),x||(t=S({src:t,async:!0},s),(s=gl.get(u))&&Ed(t,s),x=a.createElement("script"),ks(x),ea(x,"link",t),a.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},r.set(u,x))}}function Mh(t,s){_n.M(t,s);var a=sr;if(a&&t){var r=sl(a).hoistableScripts,u=Ai(t),x=r.get(u);x||(x=a.querySelector(ki(u)),x||(t=S({src:t,async:!0,type:"module"},s),(s=gl.get(u))&&Ed(t,s),x=a.createElement("script"),ks(x),ea(x,"link",t),a.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},r.set(u,x))}}function Q0(t,s,a,r){var u=(u=De.current)?Ad(u):null;if(!u)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Si(a.href),a=sl(u).hoistableStyles,r=a.get(s),r||(r={type:"style",instance:null,count:0,state:null},a.set(s,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Si(a.href);var x=sl(u).hoistableStyles,_=x.get(t);if(_||(u=u.ownerDocument||u,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,_),(x=u.querySelector(Ci(t)))&&!x._p&&(_.instance=x,_.state.loading=5),gl.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},gl.set(t,a),x||Oh(u,t,a,_.state))),s&&r===null)throw Error(o(528,""));return _}if(s&&r!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ai(a),a=sl(u).hoistableScripts,r=a.get(s),r||(r={type:"script",instance:null,count:0,state:null},a.set(s,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Si(t){return'href="'+Ma(t)+'"'}function Ci(t){return'link[rel="stylesheet"]['+t+"]"}function X0(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Oh(t,s,a,r){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?r.loading=1:(s=t.createElement("link"),r.preload=s,s.addEventListener("load",function(){return r.loading|=1}),s.addEventListener("error",function(){return r.loading|=2}),ea(s,"link",a),ks(s),t.head.appendChild(s))}function Ai(t){return'[src="'+Ma(t)+'"]'}function ki(t){return"script[async]"+t}function Z0(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var r=t.querySelector('style[data-href~="'+Ma(a.href)+'"]');if(r)return s.instance=r,ks(r),r;var u=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),ks(r),ea(r,"style",u),kd(r,a.precedence,t),s.instance=r;case"stylesheet":u=Si(a.href);var x=t.querySelector(Ci(u));if(x)return s.state.loading|=4,s.instance=x,ks(x),x;r=X0(a),(u=gl.get(u))&&Bm(r,u),x=(t.ownerDocument||t).createElement("link"),ks(x);var _=x;return _._p=new Promise(function(T,G){_.onload=T,_.onerror=G}),ea(x,"link",r),s.state.loading|=4,kd(x,a.precedence,t),s.instance=x;case"script":return x=Ai(a.src),(u=t.querySelector(ki(x)))?(s.instance=u,ks(u),u):(r=a,(u=gl.get(x))&&(r=S({},a),Ed(r,u)),t=t.ownerDocument||t,u=t.createElement("script"),ks(u),ea(u,"link",r),t.head.appendChild(u),s.instance=u);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(r=s.instance,s.state.loading|=4,kd(r,a.precedence,t));return s.instance}function kd(t,s,a){for(var r=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=r.length?r[r.length-1]:null,x=u,_=0;_<r.length;_++){var T=r[_];if(T.dataset.precedence===s)x=T;else if(x!==u)break}x?x.parentNode.insertBefore(t,x.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Bm(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Ed(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Qc=null;function K0(t,s,a){if(Qc===null){var r=new Map,u=Qc=new Map;u.set(a,r)}else u=Qc,r=u.get(a),r||(r=new Map,u.set(a,r));if(r.has(t))return r;for(r.set(t,null),a=a.getElementsByTagName(t),u=0;u<a.length;u++){var x=a[u];if(!(x[el]||x[at]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var _=x.getAttribute(s)||"";_=t+_;var T=r.get(_);T?T.push(x):r.set(_,[x])}}return r}function J0(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Lh(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ef(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Ei(t,s,a,r){if(a.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var u=Si(r.href),x=s.querySelector(Ci(u));if(x){s=x._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Td.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=x,ks(x);return}x=s.ownerDocument||s,r=X0(r),(u=gl.get(u))&&Bm(r,u),x=x.createElement("link"),ks(x);var _=x;_._p=new Promise(function(T,G){_.onload=T,_.onerror=G}),ea(x,"link",r),a.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Td.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Um=0;function Dh(t,s){return t.stylesheets&&t.count===0&&Md(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var r=setTimeout(function(){if(t.stylesheets&&Md(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+s);0<t.imgBytes&&Um===0&&(Um=62500*Ic());var u=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Md(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>Um?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(u)}}:null}function Td(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Md(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Rd=null;function Md(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Rd=new Map,s.forEach(tf,t),Rd=null,Td.call(t))}function tf(t,s){if(!(s.state.loading&4)){var a=Rd.get(t);if(a)var r=a.get(null);else{a=new Map,Rd.set(t,a);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<u.length;x++){var _=u[x];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),r=_)}r&&a.set(null,r)}u=s.instance,_=u.getAttribute("data-precedence"),x=a.get(_)||r,x===r&&a.set(null,u),a.set(_,u),this.count++,r=Td.bind(this),u.addEventListener("load",r),u.addEventListener("error",r),x?x.parentNode.insertBefore(u,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),s.state.loading|=4}}var Ti={$$typeof:w,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function zh(t,s,a,r,u,x,_,T,G){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ge(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ge(0),this.hiddenUpdates=Ge(null),this.identifierPrefix=r,this.onUncaughtError=u,this.onCaughtError=x,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function sf(t,s,a,r,u,x,_,T,G,ce,ve,_e){return t=new zh(t,s,a,_,G,ce,ve,_e,T),s=1,x===!0&&(s|=24),x=Xs(3,null,null,s),t.current=x,x.stateNode=t,s=Cl(),s.refCount++,t.pooledCache=s,s.refCount++,x.memoizedState={element:r,isDehydrated:a,cache:s},Yl(x),t}function af(t){return t?(t=rn,t):rn}function lf(t,s,a,r,u,x){u=af(u),r.context===null?r.context=u:r.pendingContext=u,r=qn(s),r.payload={element:a},x=x===void 0?null:x,x!==null&&(r.callback=x),a=El(t,r,s),a!==null&&(_a(a,t,s),rc(a,t,s))}function nf(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Hm(t,s){nf(t,s),(t=t.alternate)&&nf(t,s)}function rf(t){if(t.tag===13||t.tag===31){var s=Il(t,67108864);s!==null&&_a(s,t,67108864),Hm(t,67108864)}}function cf(t){if(t.tag===13||t.tag===31){var s=Va();s=he(s);var a=Il(t,s);a!==null&&_a(a,t,s),Hm(t,s)}}var Od=!0;function Bh(t,s,a,r){var u=H.T;H.T=null;var x=L.p;try{L.p=2,$m(t,s,a,r)}finally{L.p=x,H.T=u}}function Uh(t,s,a,r){var u=H.T;H.T=null;var x=L.p;try{L.p=8,$m(t,s,a,r)}finally{L.p=x,H.T=u}}function $m(t,s,a,r){if(Od){var u=Fm(r);if(u===null)Em(t,s,r,Ld,a),df(t,r);else if(uf(u,t,s,a,r))r.stopPropagation();else if(df(t,r),s&4&&-1<Hh.indexOf(t)){for(;u!==null;){var x=tl(u);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var _=qe(x.pendingLanes);if(_!==0){var T=x;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var G=1<<31-Ct(_);T.entanglements[1]|=G,_&=~G}Kl(x),(Ht&6)===0&&(Tr=os()+500,Fc(0))}}break;case 31:case 13:T=Il(x,2),T!==null&&_a(T,x,2),pd(),Hm(x,2)}if(x=Fm(r),x===null&&Em(t,s,r,Ld,a),x===u)break;u=x}u!==null&&r.stopPropagation()}else Em(t,s,r,null,a)}}function Fm(t){return t=tu(t),qm(t)}var Ld=null;function qm(t){if(Ld=null,t=yl(t),t!==null){var s=h(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=p(s),t!==null)return t;t=null}else if(a===31){if(t=y(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return Ld=t,null}function of(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qs()){case Us:return 2;case ts:return 8;case ds:case Gs:return 32;case Vs:return 268435456;default:return 32}default:return 32}}var Pm=!1,ar=null,lr=null,nr=null,Xc=new Map,Zc=new Map,rr=[],Hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function df(t,s){switch(t){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":nr=null;break;case"pointerover":case"pointerout":Xc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(s.pointerId)}}function Or(t,s,a,r,u,x){return t===null||t.nativeEvent!==x?(t={blockedOn:s,domEventName:a,eventSystemFlags:r,nativeEvent:x,targetContainers:[u]},s!==null&&(s=tl(s),s!==null&&rf(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,u!==null&&s.indexOf(u)===-1&&s.push(u),t)}function uf(t,s,a,r,u){switch(s){case"focusin":return ar=Or(ar,t,s,a,r,u),!0;case"dragenter":return lr=Or(lr,t,s,a,r,u),!0;case"mouseover":return nr=Or(nr,t,s,a,r,u),!0;case"pointerover":var x=u.pointerId;return Xc.set(x,Or(Xc.get(x)||null,t,s,a,r,u)),!0;case"gotpointercapture":return x=u.pointerId,Zc.set(x,Or(Zc.get(x)||null,t,s,a,r,u)),!0}return!1}function Im(t){var s=yl(t.target);if(s!==null){var a=h(s);if(a!==null){if(s=a.tag,s===13){if(s=p(a),s!==null){t.blockedOn=s,dt(t.priority,function(){cf(a)});return}}else if(s===31){if(s=y(a),s!==null){t.blockedOn=s,dt(t.priority,function(){cf(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Dd(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Fm(t.nativeEvent);if(a===null){a=t.nativeEvent;var r=new a.constructor(a.type,a);eu=r,a.target.dispatchEvent(r),eu=null}else return s=tl(a),s!==null&&rf(s),t.blockedOn=a,!1;s.shift()}return!0}function mf(t,s,a){Dd(t)&&a.delete(s)}function $h(){Pm=!1,ar!==null&&Dd(ar)&&(ar=null),lr!==null&&Dd(lr)&&(lr=null),nr!==null&&Dd(nr)&&(nr=null),Xc.forEach(mf),Zc.forEach(mf)}function Ri(t,s){t.blockedOn===s&&(t.blockedOn=null,Pm||(Pm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$h)))}var zd=null;function xf(t){zd!==t&&(zd=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){zd===t&&(zd=null);for(var s=0;s<t.length;s+=3){var a=t[s],r=t[s+1],u=t[s+2];if(typeof r!="function"){if(qm(r||a)===null)continue;break}var x=tl(a);x!==null&&(t.splice(s,3),s-=3,Gn(x,{pending:!0,data:u,method:a.method,action:r},r,u))}}))}function Mi(t){function s(G){return Ri(G,t)}ar!==null&&Ri(ar,t),lr!==null&&Ri(lr,t),nr!==null&&Ri(nr,t),Xc.forEach(s),Zc.forEach(s);for(var a=0;a<rr.length;a++){var r=rr[a];r.blockedOn===t&&(r.blockedOn=null)}for(;0<rr.length&&(a=rr[0],a.blockedOn===null);)Im(a),a.blockedOn===null&&rr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(r=0;r<a.length;r+=3){var u=a[r],x=a[r+1],_=u[Tt]||null;if(typeof x=="function")_||xf(a);else if(_){var T=null;if(x&&x.hasAttribute("formAction")){if(u=x,_=x[Tt]||null)T=_.formAction;else if(qm(u)!==null)continue}else T=_.action;typeof T=="function"?a[r+1]=T:(a.splice(r,3),r-=3),xf(a)}}}function ma(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(_){return u=_})},focusReset:"manual",scroll:"manual"})}function s(){u!==null&&(u(),u=null),r||setTimeout(a,20)}function a(){if(!r&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,u=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),u!==null&&(u(),u=null)}}}function Kc(t){this._internalRoot=t}Bd.prototype.render=Kc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,r=Va();lf(a,r,t,s,null,null)},Bd.prototype.unmount=Kc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;lf(t.current,2,null,t,null,null),pd(),s[vs]=null}};function Bd(t){this._internalRoot=t}Bd.prototype.unstable_scheduleHydration=function(t){if(t){var s=Xe();t={blockedOn:null,target:t,priority:s};for(var a=0;a<rr.length&&s!==0&&s<rr[a].priority;a++);rr.splice(a,0,t),a===0&&Im(t)}};var ff=d.version;if(ff!=="19.2.0")throw Error(o(527,ff,"19.2.0"));L.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=j(s),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var Fh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{ht=Ud.inject(Fh),gt=Ud}catch{}}return Ym.createRoot=function(t,s){if(!f(t))throw Error(o(299));var a=!1,r="",u=Gu,x=Vu,_=Kx;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onUncaughtError!==void 0&&(u=s.onUncaughtError),s.onCaughtError!==void 0&&(x=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError)),s=sf(t,1,!1,null,null,a,r,null,u,x,_,ma),t[vs]=s.current,km(t),new Kc(s)},Ym.hydrateRoot=function(t,s,a){if(!f(t))throw Error(o(299));var r=!1,u="",x=Gu,_=Vu,T=Kx,G=null;return a!=null&&(a.unstable_strictMode===!0&&(r=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(x=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(G=a.formState)),s=sf(t,1,!0,s,a??null,r,u,G,x,_,T,ma),s.context=af(null),a=s.current,r=Va(),r=he(r),u=qn(r),u.callback=null,El(a,u,r),a=r,s.current.lanes=a,$e(s,a),Kl(s),t[vs]=s.current,km(t),new Bd(s)},Ym.version="19.2.0",Ym}var Jp;function gj(){if(Jp)return Wh.exports;Jp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(d){console.error(d)}}return n(),Wh.exports=pj(),Wh.exports}var bj=gj();/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var eg="popstate";function vj(n={}){function d(o,f){let{pathname:h,search:p,hash:y}=o.location;return ip("",{pathname:h,search:p,hash:y},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function c(o,f){return typeof f=="string"?f:Km(f)}return yj(d,c,null,n)}function As(n,d){if(n===!1||n===null||typeof n>"u")throw new Error(d)}function Hl(n,d){if(!n){typeof console<"u"&&console.warn(d);try{throw new Error(d)}catch{}}}function jj(){return Math.random().toString(36).substring(2,10)}function tg(n,d){return{usr:n.state,key:n.key,idx:d}}function ip(n,d,c=null,o){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof d=="string"?Wd(d):d,state:c,key:d&&d.key||o||jj()}}function Km({pathname:n="/",search:d="",hash:c=""}){return d&&d!=="?"&&(n+=d.charAt(0)==="?"?d:"?"+d),c&&c!=="#"&&(n+=c.charAt(0)==="#"?c:"#"+c),n}function Wd(n){let d={};if(n){let c=n.indexOf("#");c>=0&&(d.hash=n.substring(c),n=n.substring(0,c));let o=n.indexOf("?");o>=0&&(d.search=n.substring(o),n=n.substring(0,o)),n&&(d.pathname=n)}return d}function yj(n,d,c,o={}){let{window:f=document.defaultView,v5Compat:h=!1}=o,p=f.history,y="POP",N=null,j=v();j==null&&(j=0,p.replaceState({...p.state,idx:j},""));function v(){return(p.state||{idx:null}).idx}function S(){y="POP";let A=v(),$=A==null?null:A-j;j=A,N&&N({action:y,location:B.location,delta:$})}function M(A,$){y="PUSH";let Y=ip(B.location,A,$);j=v()+1;let w=tg(Y,j),D=B.createHref(Y);try{p.pushState(w,"",D)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;f.location.assign(D)}h&&N&&N({action:y,location:B.location,delta:1})}function U(A,$){y="REPLACE";let Y=ip(B.location,A,$);j=v();let w=tg(Y,j),D=B.createHref(Y);p.replaceState(w,"",D),h&&N&&N({action:y,location:B.location,delta:0})}function k(A){return Nj(A)}let B={get action(){return y},get location(){return n(f,p)},listen(A){if(N)throw new Error("A history only accepts one active listener");return f.addEventListener(eg,S),N=A,()=>{f.removeEventListener(eg,S),N=null}},createHref(A){return d(f,A)},createURL:k,encodeLocation(A){let $=k(A);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:M,replace:U,go(A){return p.go(A)}};return B}function Nj(n,d=!1){let c="http://localhost";typeof window<"u"&&(c=window.location.origin!=="null"?window.location.origin:window.location.href),As(c,"No window.location.(origin|href) available to create URL");let o=typeof n=="string"?n:Km(n);return o=o.replace(/ $/,"%20"),!d&&o.startsWith("//")&&(o=c+o),new URL(o,c)}function Wg(n,d,c="/"){return _j(n,d,c,!1)}function _j(n,d,c,o){let f=typeof d=="string"?Wd(d):d,h=zr(f.pathname||"/",c);if(h==null)return null;let p=Qg(n);wj(p);let y=null;for(let N=0;y==null&&N<p.length;++N){let j=Dj(h);y=Oj(p[N],j,o)}return y}function Qg(n,d=[],c=[],o="",f=!1){let h=(p,y,N=f,j)=>{let v={relativePath:j===void 0?p.path||"":j,caseSensitive:p.caseSensitive===!0,childrenIndex:y,route:p};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(o)&&N)return;As(v.relativePath.startsWith(o),`Absolute route path "${v.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(o.length)}let S=Dr([o,v.relativePath]),M=c.concat(v);p.children&&p.children.length>0&&(As(p.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),Qg(p.children,d,M,S,N)),!(p.path==null&&!p.index)&&d.push({path:S,score:Rj(S,p.index),routesMeta:M})};return n.forEach((p,y)=>{var N;if(p.path===""||!((N=p.path)!=null&&N.includes("?")))h(p,y);else for(let j of Xg(p.path))h(p,y,!0,j)}),d}function Xg(n){let d=n.split("/");if(d.length===0)return[];let[c,...o]=d,f=c.endsWith("?"),h=c.replace(/\?$/,"");if(o.length===0)return f?[h,""]:[h];let p=Xg(o.join("/")),y=[];return y.push(...p.map(N=>N===""?h:[h,N].join("/"))),f&&y.push(...p),y.map(N=>n.startsWith("/")&&N===""?"/":N)}function wj(n){n.sort((d,c)=>d.score!==c.score?c.score-d.score:Mj(d.routesMeta.map(o=>o.childrenIndex),c.routesMeta.map(o=>o.childrenIndex)))}var Sj=/^:[\w-]+$/,Cj=3,Aj=2,kj=1,Ej=10,Tj=-2,sg=n=>n==="*";function Rj(n,d){let c=n.split("/"),o=c.length;return c.some(sg)&&(o+=Tj),d&&(o+=Aj),c.filter(f=>!sg(f)).reduce((f,h)=>f+(Sj.test(h)?Cj:h===""?kj:Ej),o)}function Mj(n,d){return n.length===d.length&&n.slice(0,-1).every((o,f)=>o===d[f])?n[n.length-1]-d[d.length-1]:0}function Oj(n,d,c=!1){let{routesMeta:o}=n,f={},h="/",p=[];for(let y=0;y<o.length;++y){let N=o[y],j=y===o.length-1,v=h==="/"?d:d.slice(h.length)||"/",S=kf({path:N.relativePath,caseSensitive:N.caseSensitive,end:j},v),M=N.route;if(!S&&j&&c&&!o[o.length-1].route.index&&(S=kf({path:N.relativePath,caseSensitive:N.caseSensitive,end:!1},v)),!S)return null;Object.assign(f,S.params),p.push({params:f,pathname:Dr([h,S.pathname]),pathnameBase:$j(Dr([h,S.pathnameBase])),route:M}),S.pathnameBase!=="/"&&(h=Dr([h,S.pathnameBase]))}return p}function kf(n,d){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[c,o]=Lj(n.path,n.caseSensitive,n.end),f=d.match(c);if(!f)return null;let h=f[0],p=h.replace(/(.)\/+$/,"$1"),y=f.slice(1);return{params:o.reduce((j,{paramName:v,isOptional:S},M)=>{if(v==="*"){let k=y[M]||"";p=h.slice(0,h.length-k.length).replace(/(.)\/+$/,"$1")}const U=y[M];return S&&!U?j[v]=void 0:j[v]=(U||"").replace(/%2F/g,"/"),j},{}),pathname:h,pathnameBase:p,pattern:n}}function Lj(n,d=!1,c=!0){Hl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let o=[],f="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,y,N)=>(o.push({paramName:y,isOptional:N!=null}),N?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(o.push({paramName:"*"}),f+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):c?f+="\\/*$":n!==""&&n!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,d?void 0:"i"),o]}function Dj(n){try{return n.split("/").map(d=>decodeURIComponent(d).replace(/\//g,"%2F")).join("/")}catch(d){return Hl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${d}).`),n}}function zr(n,d){if(d==="/")return n;if(!n.toLowerCase().startsWith(d.toLowerCase()))return null;let c=d.endsWith("/")?d.length-1:d.length,o=n.charAt(c);return o&&o!=="/"?null:n.slice(c)||"/"}var zj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bj=n=>zj.test(n);function Uj(n,d="/"){let{pathname:c,search:o="",hash:f=""}=typeof n=="string"?Wd(n):n,h;if(c)if(Bj(c))h=c;else{if(c.includes("//")){let p=c;c=c.replace(/\/\/+/g,"/"),Hl(!1,`Pathnames cannot have embedded double slashes - normalizing ${p} -> ${c}`)}c.startsWith("/")?h=ag(c.substring(1),"/"):h=ag(c,d)}else h=d;return{pathname:h,search:Fj(o),hash:qj(f)}}function ag(n,d){let c=d.replace(/\/+$/,"").split("/");return n.split("/").forEach(f=>{f===".."?c.length>1&&c.pop():f!=="."&&c.push(f)}),c.length>1?c.join("/"):"/"}function Kh(n,d,c,o){return`Cannot include a '${n}' character in a manually specified \`to.${d}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${c}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Hj(n){return n.filter((d,c)=>c===0||d.route.path&&d.route.path.length>0)}function pp(n){let d=Hj(n);return d.map((c,o)=>o===d.length-1?c.pathname:c.pathnameBase)}function gp(n,d,c,o=!1){let f;typeof n=="string"?f=Wd(n):(f={...n},As(!f.pathname||!f.pathname.includes("?"),Kh("?","pathname","search",f)),As(!f.pathname||!f.pathname.includes("#"),Kh("#","pathname","hash",f)),As(!f.search||!f.search.includes("#"),Kh("#","search","hash",f)));let h=n===""||f.pathname==="",p=h?"/":f.pathname,y;if(p==null)y=c;else{let S=d.length-1;if(!o&&p.startsWith("..")){let M=p.split("/");for(;M[0]==="..";)M.shift(),S-=1;f.pathname=M.join("/")}y=S>=0?d[S]:"/"}let N=Uj(f,y),j=p&&p!=="/"&&p.endsWith("/"),v=(h||p===".")&&c.endsWith("/");return!N.pathname.endsWith("/")&&(j||v)&&(N.pathname+="/"),N}var Dr=n=>n.join("/").replace(/\/\/+/g,"/"),$j=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Fj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,qj=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Pj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Zg=["POST","PUT","PATCH","DELETE"];new Set(Zg);var Ij=["GET",...Zg];new Set(Ij);var Qd=g.createContext(null);Qd.displayName="DataRouter";var zf=g.createContext(null);zf.displayName="DataRouterState";g.createContext(!1);var Kg=g.createContext({isTransitioning:!1});Kg.displayName="ViewTransition";var Gj=g.createContext(new Map);Gj.displayName="Fetchers";var Vj=g.createContext(null);Vj.displayName="Await";var kn=g.createContext(null);kn.displayName="Navigation";var ax=g.createContext(null);ax.displayName="Location";var en=g.createContext({outlet:null,matches:[],isDataRoute:!1});en.displayName="Route";var bp=g.createContext(null);bp.displayName="RouteError";function Yj(n,{relative:d}={}){As(Xd(),"useHref() may be used only in the context of a <Router> component.");let{basename:c,navigator:o}=g.useContext(kn),{hash:f,pathname:h,search:p}=lx(n,{relative:d}),y=h;return c!=="/"&&(y=h==="/"?c:Dr([c,h])),o.createHref({pathname:y,search:p,hash:f})}function Xd(){return g.useContext(ax)!=null}function En(){return As(Xd(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(ax).location}var Jg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eb(n){g.useContext(kn).static||g.useLayoutEffect(n)}function xs(){let{isDataRoute:n}=g.useContext(en);return n?cy():Wj()}function Wj(){As(Xd(),"useNavigate() may be used only in the context of a <Router> component.");let n=g.useContext(Qd),{basename:d,navigator:c}=g.useContext(kn),{matches:o}=g.useContext(en),{pathname:f}=En(),h=JSON.stringify(pp(o)),p=g.useRef(!1);return eb(()=>{p.current=!0}),g.useCallback((N,j={})=>{if(Hl(p.current,Jg),!p.current)return;if(typeof N=="number"){c.go(N);return}let v=gp(N,JSON.parse(h),f,j.relative==="path");n==null&&d!=="/"&&(v.pathname=v.pathname==="/"?d:Dr([d,v.pathname])),(j.replace?c.replace:c.push)(v,j.state,j)},[d,c,h,f,n])}var Qj=g.createContext(null);function Xj(n){let d=g.useContext(en).outlet;return g.useMemo(()=>d&&g.createElement(Qj.Provider,{value:n},d),[d,n])}function Bi(){let{matches:n}=g.useContext(en),d=n[n.length-1];return d?d.params:{}}function lx(n,{relative:d}={}){let{matches:c}=g.useContext(en),{pathname:o}=En(),f=JSON.stringify(pp(c));return g.useMemo(()=>gp(n,JSON.parse(f),o,d==="path"),[n,f,o,d])}function Zj(n,d){return tb(n,d)}function tb(n,d,c,o,f){var Y;As(Xd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=g.useContext(kn),{matches:p}=g.useContext(en),y=p[p.length-1],N=y?y.params:{},j=y?y.pathname:"/",v=y?y.pathnameBase:"/",S=y&&y.route;{let w=S&&S.path||"";sb(j,!S||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${j}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let M=En(),U;if(d){let w=typeof d=="string"?Wd(d):d;As(v==="/"||((Y=w.pathname)==null?void 0:Y.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${w.pathname}" was given in the \`location\` prop.`),U=w}else U=M;let k=U.pathname||"/",B=k;if(v!=="/"){let w=v.replace(/^\//,"").split("/");B="/"+k.replace(/^\//,"").split("/").slice(w.length).join("/")}let A=Wg(n,{pathname:B});Hl(S||A!=null,`No routes matched location "${U.pathname}${U.search}${U.hash}" `),Hl(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${U.pathname}${U.search}${U.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=sy(A&&A.map(w=>Object.assign({},w,{params:Object.assign({},N,w.params),pathname:Dr([v,h.encodeLocation?h.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?v:Dr([v,h.encodeLocation?h.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),p,c,o,f);return d&&$?g.createElement(ax.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...U},navigationType:"POP"}},$):$}function Kj(){let n=iy(),d=Pj(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),c=n instanceof Error?n.stack:null,o="rgba(200,200,200, 0.5)",f={padding:"0.5rem",backgroundColor:o},h={padding:"2px 4px",backgroundColor:o},p=null;return console.error("Error handled by React Router default ErrorBoundary:",n),p=g.createElement(g.Fragment,null,g.createElement("p",null,"💿 Hey developer 👋"),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:h},"ErrorBoundary")," or"," ",g.createElement("code",{style:h},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},d),c?g.createElement("pre",{style:f},c):null,p)}var Jj=g.createElement(Kj,null),ey=class extends g.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,d){return d.location!==n.location||d.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:d.error,location:d.location,revalidation:n.revalidation||d.revalidation}}componentDidCatch(n,d){this.props.onError?this.props.onError(n,d):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?g.createElement(en.Provider,{value:this.props.routeContext},g.createElement(bp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ty({routeContext:n,match:d,children:c}){let o=g.useContext(Qd);return o&&o.static&&o.staticContext&&(d.route.errorElement||d.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=d.route.id),g.createElement(en.Provider,{value:n},c)}function sy(n,d=[],c=null,o=null,f=null){if(n==null){if(!c)return null;if(c.errors)n=c.matches;else if(d.length===0&&!c.initialized&&c.matches.length>0)n=c.matches;else return null}let h=n,p=c==null?void 0:c.errors;if(p!=null){let v=h.findIndex(S=>S.route.id&&(p==null?void 0:p[S.route.id])!==void 0);As(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(p).join(",")}`),h=h.slice(0,Math.min(h.length,v+1))}let y=!1,N=-1;if(c)for(let v=0;v<h.length;v++){let S=h[v];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(N=v),S.route.id){let{loaderData:M,errors:U}=c,k=S.route.loader&&!M.hasOwnProperty(S.route.id)&&(!U||U[S.route.id]===void 0);if(S.route.lazy||k){y=!0,N>=0?h=h.slice(0,N+1):h=[h[0]];break}}}let j=c&&o?(v,S)=>{var M,U;o(v,{location:c.location,params:((U=(M=c.matches)==null?void 0:M[0])==null?void 0:U.params)??{},errorInfo:S})}:void 0;return h.reduceRight((v,S,M)=>{let U,k=!1,B=null,A=null;c&&(U=p&&S.route.id?p[S.route.id]:void 0,B=S.route.errorElement||Jj,y&&(N<0&&M===0?(sb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,A=null):N===M&&(k=!0,A=S.route.hydrateFallbackElement||null)));let $=d.concat(h.slice(0,M+1)),Y=()=>{let w;return U?w=B:k?w=A:S.route.Component?w=g.createElement(S.route.Component,null):S.route.element?w=S.route.element:w=v,g.createElement(ty,{match:S,routeContext:{outlet:v,matches:$,isDataRoute:c!=null},children:w})};return c&&(S.route.ErrorBoundary||S.route.errorElement||M===0)?g.createElement(ey,{location:c.location,revalidation:c.revalidation,component:B,error:U,children:Y(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:j}):Y()},null)}function vp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ay(n){let d=g.useContext(Qd);return As(d,vp(n)),d}function ly(n){let d=g.useContext(zf);return As(d,vp(n)),d}function ny(n){let d=g.useContext(en);return As(d,vp(n)),d}function jp(n){let d=ny(n),c=d.matches[d.matches.length-1];return As(c.route.id,`${n} can only be used on routes that contain a unique "id"`),c.route.id}function ry(){return jp("useRouteId")}function iy(){var o;let n=g.useContext(bp),d=ly("useRouteError"),c=jp("useRouteError");return n!==void 0?n:(o=d.errors)==null?void 0:o[c]}function cy(){let{router:n}=ay("useNavigate"),d=jp("useNavigate"),c=g.useRef(!1);return eb(()=>{c.current=!0}),g.useCallback(async(f,h={})=>{Hl(c.current,Jg),c.current&&(typeof f=="number"?n.navigate(f):await n.navigate(f,{fromRouteId:d,...h}))},[n,d])}var lg={};function sb(n,d,c){!d&&!lg[n]&&(lg[n]=!0,Hl(!1,c))}g.memo(oy);function oy({routes:n,future:d,state:c,unstable_onError:o}){return tb(n,void 0,c,o,d)}function Li({to:n,replace:d,state:c,relative:o}){As(Xd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:f}=g.useContext(kn);Hl(!f,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=g.useContext(en),{pathname:p}=En(),y=xs(),N=gp(n,pp(h),p,o==="path"),j=JSON.stringify(N);return g.useEffect(()=>{y(JSON.parse(j),{replace:d,state:c,relative:o})},[y,j,o,d,c]),null}function yp(n){return Xj(n.context)}function lt(n){As(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function dy({basename:n="/",children:d=null,location:c,navigationType:o="POP",navigator:f,static:h=!1}){As(!Xd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=n.replace(/^\/*/,"/"),y=g.useMemo(()=>({basename:p,navigator:f,static:h,future:{}}),[p,f,h]);typeof c=="string"&&(c=Wd(c));let{pathname:N="/",search:j="",hash:v="",state:S=null,key:M="default"}=c,U=g.useMemo(()=>{let k=zr(N,p);return k==null?null:{location:{pathname:k,search:j,hash:v,state:S,key:M},navigationType:o}},[p,N,j,v,S,M,o]);return Hl(U!=null,`<Router basename="${p}"> is not able to match the URL "${N}${j}${v}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:g.createElement(kn.Provider,{value:y},g.createElement(ax.Provider,{children:d,value:U}))}function uy({children:n,location:d}){return Zj(cp(n),d)}function cp(n,d=[]){let c=[];return g.Children.forEach(n,(o,f)=>{if(!g.isValidElement(o))return;let h=[...d,f];if(o.type===g.Fragment){c.push.apply(c,cp(o.props.children,h));return}As(o.type===lt,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),As(!o.props.index||!o.props.children,"An index route cannot have child routes.");let p={id:o.props.id||h.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(p.children=cp(o.props.children,h)),c.push(p)}),c}var _f="get",wf="application/x-www-form-urlencoded";function Bf(n){return n!=null&&typeof n.tagName=="string"}function my(n){return Bf(n)&&n.tagName.toLowerCase()==="button"}function xy(n){return Bf(n)&&n.tagName.toLowerCase()==="form"}function fy(n){return Bf(n)&&n.tagName.toLowerCase()==="input"}function hy(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function py(n,d){return n.button===0&&(!d||d==="_self")&&!hy(n)}function op(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((d,c)=>{let o=n[c];return d.concat(Array.isArray(o)?o.map(f=>[c,f]):[[c,o]])},[]))}function gy(n,d){let c=op(n);return d&&d.forEach((o,f)=>{c.has(f)||d.getAll(f).forEach(h=>{c.append(f,h)})}),c}var bf=null;function by(){if(bf===null)try{new FormData(document.createElement("form"),0),bf=!1}catch{bf=!0}return bf}var vy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jh(n){return n!=null&&!vy.has(n)?(Hl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wf}"`),null):n}function jy(n,d){let c,o,f,h,p;if(xy(n)){let y=n.getAttribute("action");o=y?zr(y,d):null,c=n.getAttribute("method")||_f,f=Jh(n.getAttribute("enctype"))||wf,h=new FormData(n)}else if(my(n)||fy(n)&&(n.type==="submit"||n.type==="image")){let y=n.form;if(y==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let N=n.getAttribute("formaction")||y.getAttribute("action");if(o=N?zr(N,d):null,c=n.getAttribute("formmethod")||y.getAttribute("method")||_f,f=Jh(n.getAttribute("formenctype"))||Jh(y.getAttribute("enctype"))||wf,h=new FormData(y,n),!by()){let{name:j,type:v,value:S}=n;if(v==="image"){let M=j?`${j}.`:"";h.append(`${M}x`,"0"),h.append(`${M}y`,"0")}else j&&h.append(j,S)}}else{if(Bf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');c=_f,o=null,f=wf,p=n}return h&&f==="text/plain"&&(p=h,h=void 0),{action:o,method:c.toLowerCase(),encType:f,formData:h,body:p}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Np(n,d){if(n===!1||n===null||typeof n>"u")throw new Error(d)}function yy(n,d,c){let o=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return o.pathname==="/"?o.pathname=`_root.${c}`:d&&zr(o.pathname,d)==="/"?o.pathname=`${d.replace(/\/$/,"")}/_root.${c}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${c}`,o}async function Ny(n,d){if(n.id in d)return d[n.id];try{let c=await import(n.module);return d[n.id]=c,c}catch(c){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(c),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function _y(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function wy(n,d,c){let o=await Promise.all(n.map(async f=>{let h=d.routes[f.route.id];if(h){let p=await Ny(h,c);return p.links?p.links():[]}return[]}));return ky(o.flat(1).filter(_y).filter(f=>f.rel==="stylesheet"||f.rel==="preload").map(f=>f.rel==="stylesheet"?{...f,rel:"prefetch",as:"style"}:{...f,rel:"prefetch"}))}function ng(n,d,c,o,f,h){let p=(N,j)=>c[j]?N.route.id!==c[j].route.id:!0,y=(N,j)=>{var v;return c[j].pathname!==N.pathname||((v=c[j].route.path)==null?void 0:v.endsWith("*"))&&c[j].params["*"]!==N.params["*"]};return h==="assets"?d.filter((N,j)=>p(N,j)||y(N,j)):h==="data"?d.filter((N,j)=>{var S;let v=o.routes[N.route.id];if(!v||!v.hasLoader)return!1;if(p(N,j)||y(N,j))return!0;if(N.route.shouldRevalidate){let M=N.route.shouldRevalidate({currentUrl:new URL(f.pathname+f.search+f.hash,window.origin),currentParams:((S=c[0])==null?void 0:S.params)||{},nextUrl:new URL(n,window.origin),nextParams:N.params,defaultShouldRevalidate:!0});if(typeof M=="boolean")return M}return!0}):[]}function Sy(n,d,{includeHydrateFallback:c}={}){return Cy(n.map(o=>{let f=d.routes[o.route.id];if(!f)return[];let h=[f.module];return f.clientActionModule&&(h=h.concat(f.clientActionModule)),f.clientLoaderModule&&(h=h.concat(f.clientLoaderModule)),c&&f.hydrateFallbackModule&&(h=h.concat(f.hydrateFallbackModule)),f.imports&&(h=h.concat(f.imports)),h}).flat(1))}function Cy(n){return[...new Set(n)]}function Ay(n){let d={},c=Object.keys(n).sort();for(let o of c)d[o]=n[o];return d}function ky(n,d){let c=new Set;return new Set(d),n.reduce((o,f)=>{let h=JSON.stringify(Ay(f));return c.has(h)||(c.add(h),o.push({key:h,link:f})),o},[])}function ab(){let n=g.useContext(Qd);return Np(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Ey(){let n=g.useContext(zf);return Np(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var _p=g.createContext(void 0);_p.displayName="FrameworkContext";function lb(){let n=g.useContext(_p);return Np(n,"You must render this element inside a <HydratedRouter> element"),n}function Ty(n,d){let c=g.useContext(_p),[o,f]=g.useState(!1),[h,p]=g.useState(!1),{onFocus:y,onBlur:N,onMouseEnter:j,onMouseLeave:v,onTouchStart:S}=d,M=g.useRef(null);g.useEffect(()=>{if(n==="render"&&p(!0),n==="viewport"){let B=$=>{$.forEach(Y=>{p(Y.isIntersecting)})},A=new IntersectionObserver(B,{threshold:.5});return M.current&&A.observe(M.current),()=>{A.disconnect()}}},[n]),g.useEffect(()=>{if(o){let B=setTimeout(()=>{p(!0)},100);return()=>{clearTimeout(B)}}},[o]);let U=()=>{f(!0)},k=()=>{f(!1),p(!1)};return c?n!=="intent"?[h,M,{}]:[h,M,{onFocus:Wm(y,U),onBlur:Wm(N,k),onMouseEnter:Wm(j,U),onMouseLeave:Wm(v,k),onTouchStart:Wm(S,U)}]:[!1,M,{}]}function Wm(n,d){return c=>{n&&n(c),c.defaultPrevented||d(c)}}function Ry({page:n,...d}){let{router:c}=ab(),o=g.useMemo(()=>Wg(c.routes,n,c.basename),[c.routes,n,c.basename]);return o?g.createElement(Oy,{page:n,matches:o,...d}):null}function My(n){let{manifest:d,routeModules:c}=lb(),[o,f]=g.useState([]);return g.useEffect(()=>{let h=!1;return wy(n,d,c).then(p=>{h||f(p)}),()=>{h=!0}},[n,d,c]),o}function Oy({page:n,matches:d,...c}){let o=En(),{manifest:f,routeModules:h}=lb(),{basename:p}=ab(),{loaderData:y,matches:N}=Ey(),j=g.useMemo(()=>ng(n,d,N,f,o,"data"),[n,d,N,f,o]),v=g.useMemo(()=>ng(n,d,N,f,o,"assets"),[n,d,N,f,o]),S=g.useMemo(()=>{if(n===o.pathname+o.search+o.hash)return[];let k=new Set,B=!1;if(d.forEach($=>{var w;let Y=f.routes[$.route.id];!Y||!Y.hasLoader||(!j.some(D=>D.route.id===$.route.id)&&$.route.id in y&&((w=h[$.route.id])!=null&&w.shouldRevalidate)||Y.hasClientLoader?B=!0:k.add($.route.id))}),k.size===0)return[];let A=yy(n,p,"data");return B&&k.size>0&&A.searchParams.set("_routes",d.filter($=>k.has($.route.id)).map($=>$.route.id).join(",")),[A.pathname+A.search]},[p,y,o,f,j,d,n,h]),M=g.useMemo(()=>Sy(v,f),[v,f]),U=My(v);return g.createElement(g.Fragment,null,S.map(k=>g.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...c})),M.map(k=>g.createElement("link",{key:k,rel:"modulepreload",href:k,...c})),U.map(({key:k,link:B})=>g.createElement("link",{key:k,nonce:c.nonce,...B})))}function Ly(...n){return d=>{n.forEach(c=>{typeof c=="function"?c(d):c!=null&&(c.current=d)})}}var nb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nb&&(window.__reactRouterVersion="7.9.6")}catch{}function Dy({basename:n,children:d,window:c}){let o=g.useRef();o.current==null&&(o.current=vj({window:c,v5Compat:!0}));let f=o.current,[h,p]=g.useState({action:f.action,location:f.location}),y=g.useCallback(N=>{g.startTransition(()=>p(N))},[p]);return g.useLayoutEffect(()=>f.listen(y),[f,y]),g.createElement(dy,{basename:n,children:d,location:h.location,navigationType:h.action,navigator:f})}var rb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zd=g.forwardRef(function({onClick:d,discover:c="render",prefetch:o="none",relative:f,reloadDocument:h,replace:p,state:y,target:N,to:j,preventScrollReset:v,viewTransition:S,...M},U){let{basename:k}=g.useContext(kn),B=typeof j=="string"&&rb.test(j),A,$=!1;if(typeof j=="string"&&B&&(A=j,nb))try{let I=new URL(window.location.href),Q=j.startsWith("//")?new URL(I.protocol+j):new URL(j),de=zr(Q.pathname,k);Q.origin===I.origin&&de!=null?j=de+Q.search+Q.hash:$=!0}catch{Hl(!1,`<Link to="${j}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=Yj(j,{relative:f}),[w,D,z]=Ty(o,M),W=Uy(j,{replace:p,state:y,target:N,preventScrollReset:v,relative:f,viewTransition:S});function F(I){d&&d(I),I.defaultPrevented||W(I)}let J=g.createElement("a",{...M,...z,href:A||Y,onClick:$||h?d:F,ref:Ly(U,D),target:N,"data-discover":!B&&c==="render"?"true":void 0});return w&&!B?g.createElement(g.Fragment,null,J,g.createElement(Ry,{page:Y})):J});Zd.displayName="Link";var Za=g.forwardRef(function({"aria-current":d="page",caseSensitive:c=!1,className:o="",end:f=!1,style:h,to:p,viewTransition:y,children:N,...j},v){let S=lx(p,{relative:j.relative}),M=En(),U=g.useContext(zf),{navigator:k,basename:B}=g.useContext(kn),A=U!=null&&Py(S)&&y===!0,$=k.encodeLocation?k.encodeLocation(S).pathname:S.pathname,Y=M.pathname,w=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;c||(Y=Y.toLowerCase(),w=w?w.toLowerCase():null,$=$.toLowerCase()),w&&B&&(w=zr(w,B)||w);const D=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let z=Y===$||!f&&Y.startsWith($)&&Y.charAt(D)==="/",W=w!=null&&(w===$||!f&&w.startsWith($)&&w.charAt($.length)==="/"),F={isActive:z,isPending:W,isTransitioning:A},J=z?d:void 0,I;typeof o=="function"?I=o(F):I=[o,z?"active":null,W?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let Q=typeof h=="function"?h(F):h;return g.createElement(Zd,{...j,"aria-current":J,className:I,ref:v,style:Q,to:p,viewTransition:y},typeof N=="function"?N(F):N)});Za.displayName="NavLink";var zy=g.forwardRef(({discover:n="render",fetcherKey:d,navigate:c,reloadDocument:o,replace:f,state:h,method:p=_f,action:y,onSubmit:N,relative:j,preventScrollReset:v,viewTransition:S,...M},U)=>{let k=Fy(),B=qy(y,{relative:j}),A=p.toLowerCase()==="get"?"get":"post",$=typeof y=="string"&&rb.test(y),Y=w=>{if(N&&N(w),w.defaultPrevented)return;w.preventDefault();let D=w.nativeEvent.submitter,z=(D==null?void 0:D.getAttribute("formmethod"))||p;k(D||w.currentTarget,{fetcherKey:d,method:z,navigate:c,replace:f,state:h,relative:j,preventScrollReset:v,viewTransition:S})};return g.createElement("form",{ref:U,method:A,action:B,onSubmit:o?N:Y,...M,"data-discover":!$&&n==="render"?"true":void 0})});zy.displayName="Form";function By(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ib(n){let d=g.useContext(Qd);return As(d,By(n)),d}function Uy(n,{target:d,replace:c,state:o,preventScrollReset:f,relative:h,viewTransition:p}={}){let y=xs(),N=En(),j=lx(n,{relative:h});return g.useCallback(v=>{if(py(v,d)){v.preventDefault();let S=c!==void 0?c:Km(N)===Km(j);y(n,{replace:S,state:o,preventScrollReset:f,relative:h,viewTransition:p})}},[N,y,j,c,o,d,n,f,h,p])}function wp(n){Hl(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let d=g.useRef(op(n)),c=g.useRef(!1),o=En(),f=g.useMemo(()=>gy(o.search,c.current?null:d.current),[o.search]),h=xs(),p=g.useCallback((y,N)=>{const j=op(typeof y=="function"?y(new URLSearchParams(f)):y);c.current=!0,h("?"+j,N)},[h,f]);return[f,p]}var Hy=0,$y=()=>`__${String(++Hy)}__`;function Fy(){let{router:n}=ib("useSubmit"),{basename:d}=g.useContext(kn),c=ry();return g.useCallback(async(o,f={})=>{let{action:h,method:p,encType:y,formData:N,body:j}=jy(o,d);if(f.navigate===!1){let v=f.fetcherKey||$y();await n.fetch(v,c,f.action||h,{preventScrollReset:f.preventScrollReset,formData:N,body:j,formMethod:f.method||p,formEncType:f.encType||y,flushSync:f.flushSync})}else await n.navigate(f.action||h,{preventScrollReset:f.preventScrollReset,formData:N,body:j,formMethod:f.method||p,formEncType:f.encType||y,replace:f.replace,state:f.state,fromRouteId:c,flushSync:f.flushSync,viewTransition:f.viewTransition})},[n,d,c])}function qy(n,{relative:d}={}){let{basename:c}=g.useContext(kn),o=g.useContext(en);As(o,"useFormAction must be used inside a RouteContext");let[f]=o.matches.slice(-1),h={...lx(n||".",{relative:d})},p=En();if(n==null){h.search=p.search;let y=new URLSearchParams(h.search),N=y.getAll("index");if(N.some(v=>v==="")){y.delete("index"),N.filter(S=>S).forEach(S=>y.append("index",S));let v=y.toString();h.search=v?`?${v}`:""}}return(!n||n===".")&&f.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),c!=="/"&&(h.pathname=h.pathname==="/"?c:Dr([c,h.pathname])),Km(h)}function Py(n,{relative:d}={}){let c=g.useContext(Kg);As(c!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=ib("useViewTransitionState"),f=lx(n,{relative:d});if(!c.isTransitioning)return!1;let h=zr(c.currentLocation.pathname,o)||c.currentLocation.pathname,p=zr(c.nextLocation.pathname,o)||c.nextLocation.pathname;return kf(f.pathname,p)!=null||kf(f.pathname,h)!=null}var Iy=Yg();const ue=Pt.create({baseURL:"/api",withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json"}});let Fd=!1,Hd=null;const cb=async()=>Fd?!0:Hd||(Hd=(async()=>{try{return await Pt.get("/sanctum/csrf-cookie",{withCredentials:!0}),Fd=!0,console.log("CSRF cookie initialized successfully"),!0}catch(n){return console.error("Failed to initialize CSRF cookie:",n),Fd=!1,Hd=null,!1}})(),Hd),rg=document.head.querySelector('meta[name="csrf-token"]');rg&&(ue.defaults.headers.common["X-CSRF-TOKEN"]=rg.content);ue.interceptors.request.use(async n=>{var f,h;["post","put","patch","delete"].includes((f=n.method)==null?void 0:f.toLowerCase())&&(Fd||await cb());const c=(h=document.cookie.split("; ").find(p=>p.startsWith("XSRF-TOKEN=")))==null?void 0:h.split("=")[1];c&&(n.headers["X-XSRF-TOKEN"]=decodeURIComponent(c));const o=document.head.querySelector('meta[name="csrf-token"]');return o&&o.content&&(n.headers["X-CSRF-TOKEN"]=o.content),n},n=>Promise.reject(n));ue.interceptors.response.use(n=>n,async n=>{var c,o;const d=n.config;if(((c=n.response)==null?void 0:c.status)===419&&!d._retry){d._retry=!0;try{Fd=!1,Hd=null,await Pt.get("/sanctum/csrf-cookie",{withCredentials:!0}),Fd=!0;const f=(o=document.cookie.split("; ").find(p=>p.startsWith("XSRF-TOKEN=")))==null?void 0:o.split("=")[1];f&&(d.headers["X-XSRF-TOKEN"]=decodeURIComponent(f));const h=document.head.querySelector('meta[name="csrf-token"]');return h&&h.content&&(d.headers["X-CSRF-TOKEN"]=h.content),console.log("CSRF token refreshed, retrying request..."),ue(d)}catch(f){return console.error("Failed to refresh CSRF token:",f),Promise.reject(n)}}return Promise.reject(n)});const ob=g.createContext(null),ep=Pt.create({baseURL:"/",withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}),Gy=({children:n})=>{const[d,c]=g.useState(null),[o,f]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const N=await ue.get("/user");c(N.data)}catch(N){N.response&&N.response.status===401?c(null):console.error("Failed to fetch user:",N)}finally{f(!1)}})()},[]);const h=async y=>{await ep.get("/sanctum/csrf-cookie"),await ep.post("/login",y);const N=await ue.get("/user");c(N.data)},p=async()=>{await ep.post("/logout"),c(null)};return e.jsx(ob.Provider,{value:{user:d,loading:o,login:h,logout:p},children:n})},Br=()=>g.useContext(ob),Vy=({isOpen:n,setIsOpen:d})=>{const{user:c,logout:o}=Br(),f=xs(),h=async()=>{try{await o(),f("/")}catch(v){console.error("Logout failed",v)}},p=({isActive:v})=>`flex items-center space-x-3 px-3 py-2.5 rounded-lg transition-all group ${v?"bg-teal-50 text-teal-900 font-semibold":"text-slate-600 hover:bg-slate-50 hover:text-teal-900"}`,y=({isActive:v})=>`w-5 h-5 transition-colors ${v?"text-teal-600":"text-slate-400 group-hover:text-teal-600"}`,N=["SPO_ADMIN","SSPO_ADMIN","ORG_ADMIN","SPO_COORDINATOR","MASTER","admin"].includes(c==null?void 0:c.role),j=["FIELD_STAFF","SPO_ADMIN"].includes(c==null?void 0:c.role);return e.jsxs("aside",{className:`
            fixed top-0 left-0 z-50 w-64 h-full transition-transform duration-300 bg-white border-r border-slate-200 flex flex-col
            ${n?"translate-x-0":"-translate-x-full"} 
            
        `,children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-slate-100",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex flex-col items-center leading-none",children:[e.jsx("span",{className:"text-[#1a5a5a] font-semibold text-sm tracking-[0.2em]",children:"CONNECTED"}),e.jsx("div",{className:"w-full h-[1px] bg-[#1a5a5a] my-0.5"}),e.jsx("span",{className:"text-[#1a5a5a] font-semibold text-sm tracking-[0.15em]",children:"CAPACITY"})]})}),e.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 p-1 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"flex-1 px-4 py-6 overflow-y-auto space-y-8",children:[N&&e.jsxs("div",{children:[e.jsx("div",{className:"px-2 mb-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Care Operations"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Za,{to:"/care-dashboard",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx("div",{className:"pt-2 pb-1 px-2 text-[10px] font-bold text-slate-400 uppercase",children:"Intake & Planning"}),e.jsx(Za,{to:"/patients",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("span",{children:"Patient Hub"})]})}),e.jsx(Za,{to:"/spo/scheduling",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Scheduler"})]})}),e.jsx("div",{className:"pt-2 pb-1 px-2 text-[10px] font-bold text-slate-400 uppercase",children:"Workforce"}),e.jsx(Za,{to:"/workforce",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),e.jsx("span",{children:"Staff Management"})]})}),e.jsx(Za,{to:"/workforce/capacity",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),e.jsx("span",{children:"Capacity Dashboard"})]})}),e.jsx(Za,{to:"/sspo-marketplace",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"SSPO Marketplace"})]})}),e.jsx(Za,{to:"/weekly-huddle",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),e.jsx("span",{children:"Weekly Huddle"})]})})]})]}),N&&e.jsxs("div",{children:[e.jsx("div",{className:"px-2 mb-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Reporting & Compliance"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(Za,{to:"/qin",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("span",{children:"QIN Manager"})]})}),e.jsx(Za,{to:"/qip",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"QIP Manager"})]})}),e.jsx(Za,{to:"/interrai/dashboard",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"InterRAI Assessments"})]})}),e.jsx(Za,{to:"/billing",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Shadow Billing"})]})}),["SPO_ADMIN","SSPO_ADMIN","MASTER","admin"].includes(c==null?void 0:c.role)&&e.jsx(Za,{to:"/admin/service-rates",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),e.jsx("span",{children:"Service Rates"})]})}),e.jsx(Za,{to:"/supplies",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("span",{children:"Supplies & Eq."})]})})]})]}),j&&e.jsxs("div",{children:[e.jsx("div",{className:"px-2 mb-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Field Operations"}),e.jsx("div",{className:"space-y-1",children:e.jsx(Za,{to:"/worklist",className:p,children:({isActive:v})=>e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:y({isActive:v}),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("span",{children:"My Worklist"})]})})})]})]}),e.jsx("div",{className:"p-4 border-t border-slate-100 bg-slate-50/50",children:e.jsxs("button",{onClick:h,className:"w-full flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-500 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})},Yy=()=>{const[n,d]=g.useState(!1),c=En(),o=xs(),{user:f,logout:h}=Br();g.useEffect(()=>{d(!1)},[c.pathname]),g.useEffect(()=>{const y=N=>{N.key==="Escape"&&d(!1)};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[]);const p=async()=>{await h()};return e.jsxs("div",{className:"antialiased bg-slate-50 min-h-screen",children:[e.jsx("nav",{className:"bg-white shadow-sm border-b border-slate-200 px-4 py-3 sticky top-0 z-30",children:e.jsxs("div",{className:"flex justify-between items-center max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>d(!n),className:"p-2 rounded-lg text-slate-500 hover:text-teal-600 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-teal-500 transition-colors","aria-label":n?"Close menu":"Open menu",children:n?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsxs("button",{onClick:()=>o("/care-dashboard"),className:"px-3 py-1.5 text-sm font-medium text-teal-700 hover:text-teal-900 hover:bg-teal-50 rounded-lg transition-colors flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Dashboard"]}),e.jsxs("div",{className:"relative hidden lg:block ml-4",children:[e.jsx("input",{type:"text",placeholder:"Search patients...",className:"pl-9 pr-4 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-teal-500 focus:border-transparent w-64 transition-all"}),e.jsx("svg",{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center leading-none cursor-pointer mr-4",onClick:()=>o("/care-dashboard"),children:[e.jsx("span",{className:"text-[#1a5a5a] font-semibold text-sm tracking-[0.2em]",children:"CONNECTED"}),e.jsx("div",{className:"w-full h-[1px] bg-[#1a5a5a] my-0.5"}),e.jsx("span",{className:"text-[#1a5a5a] font-semibold text-sm tracking-[0.15em]",children:"CAPACITY"})]}),e.jsxs("button",{className:"relative p-2 text-slate-400 hover:text-teal-600 hover:bg-slate-100 rounded-lg transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-rose-500 rounded-full"})]}),e.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-slate-200",children:[e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-sm font-bold text-slate-700",children:(f==null?void 0:f.name)||"User"}),e.jsx("p",{className:"text-xs text-slate-500",children:f==null?void 0:f.email})]}),e.jsx("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-teal-500 to-teal-700 text-white flex items-center justify-center font-bold text-sm shadow-sm ring-2 ring-white",children:f!=null&&f.name?f.name.charAt(0).toUpperCase():"U"})]}),f&&e.jsx("button",{onClick:p,className:"text-slate-500 hover:text-rose-600 hover:bg-rose-50 font-medium rounded-lg text-sm px-3 py-2 transition-colors",children:"Logout"})]})]})}),e.jsx(Vy,{isOpen:n,setIsOpen:d}),e.jsx("div",{className:`fixed inset-0 bg-slate-900/50 z-40 backdrop-blur-sm transition-opacity duration-300 ${n?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:()=>d(!1),"aria-hidden":"true"}),e.jsx("main",{className:"p-4 md:p-8 h-auto pt-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(yp,{})})})]})},Wy=()=>{const{user:n,loading:d}=Br();return d?e.jsx("div",{className:"p-4 text-center text-gray-500",children:"Redirecting..."}):n?n.role==="FIELD_STAFF"?e.jsx(Li,{to:"/worklist",replace:!0}):n.role==="SSPO_ADMIN"||n.role==="SSPO_COORDINATOR"?e.jsx(Li,{to:"/sspo/dashboard",replace:!0}):["admin","MASTER","SPO_ADMIN","ORG_ADMIN","SPO_COORDINATOR"].includes(n.role)?e.jsx(Li,{to:"/care-dashboard",replace:!0}):e.jsx(Li,{to:"/care-dashboard",replace:!0}):e.jsx(Li,{to:"/",replace:!0})},Qy=()=>{const{user:n,loading:d}=Br();return d?e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsx("div",{className:"text-xl text-gray-600",children:"Loading..."})}):n?e.jsx(yp,{}):e.jsx(Li,{to:"/",replace:!0})},ig=()=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[e.jsx("h1",{className:"text-6xl font-bold text-gray-800",children:"404"}),e.jsx("p",{className:"text-xl text-gray-600 mt-4",children:"Page Not Found"}),e.jsx(Zd,{to:"/",className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go Home"})]});class Xy extends g.Component{constructor(c){super(c);hf(this,"reportError",async(c,o,f)=>{var h;try{await fetch("/api/client-errors",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.content)||""},body:JSON.stringify({event_id:f,message:c.message,stack:c.stack,component_stack:o==null?void 0:o.componentStack,url:window.location.href,user_agent:navigator.userAgent,timestamp:new Date().toISOString()})})}catch(p){console.error("Failed to report error:",p)}});hf(this,"handleReload",()=>{window.location.reload()});hf(this,"handleGoHome",()=>{window.location.href="/"});this.state={hasError:!1,error:null,errorInfo:null,eventId:null}}static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,o){this.setState({errorInfo:o});const f=`ERR-${Date.now().toString(36).toUpperCase()}`;this.setState({eventId:f}),this.reportError(c,o,f)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-rose-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-8 h-8 text-rose-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"We're sorry, but something unexpected happened. Our team has been notified and is working to fix the issue."}),this.state.eventId&&e.jsxs("div",{className:"bg-slate-100 rounded-lg p-3 mb-6",children:[e.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Reference ID"}),e.jsx("code",{className:"text-sm font-mono text-slate-700",children:this.state.eventId})]}),!1,e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:this.handleReload,className:"flex-1 px-4 py-2 bg-teal-600 text-white rounded-lg font-medium hover:bg-teal-700 transition-colors",children:"Try Again"}),e.jsx("button",{onClick:this.handleGoHome,className:"flex-1 px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300 transition-colors",children:"Go Home"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-6",children:"If this problem persists, please contact support with the reference ID above."})]})}):this.props.children}}const Zy=({errorCode:n=500,message:d=null})=>{var S;const c=xs(),f=((S=En().state)==null?void 0:S.error)||{},h=f.code||n,p=f.message||d,y={500:{title:"Server Error",description:"Something went wrong on our end. Please try again in a few minutes.",icon:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})},502:{title:"Bad Gateway",description:"The server received an invalid response. Please try again shortly.",icon:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})},503:{title:"Service Unavailable",description:"The service is temporarily unavailable. We're working to restore it.",icon:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})},504:{title:"Gateway Timeout",description:"The request took too long to process. Please try again.",icon:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}},N=y[h]||y[500],j=()=>{window.history.length>2?c(-1):c("/dashboard")},v=()=>{c("/")};return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-8 h-8 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.icon})}),e.jsx("div",{className:"text-6xl font-bold text-slate-300 mb-2",children:h}),e.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:N.title}),e.jsx("p",{className:"text-slate-600 mb-6",children:p||N.description}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-teal-600 text-white rounded-lg font-medium hover:bg-teal-700 transition-colors",children:"Try Again"}),e.jsx("button",{onClick:v,className:"flex-1 px-4 py-2 bg-slate-200 text-slate-700 rounded-lg font-medium hover:bg-slate-300 transition-colors",children:"Go Home"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-3",children:"Need help?"}),e.jsxs("div",{className:"flex justify-center gap-4 text-sm",children:[e.jsx("a",{href:"/status",className:"text-teal-600 hover:text-teal-700 font-medium",children:"System Status"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsx("a",{href:"mailto:support@connectedcapacity.ca",className:"text-teal-600 hover:text-teal-700 font-medium",children:"Contact Support"})]})]})]})})};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jy=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(d,c,o)=>o?o.toUpperCase():c.toLowerCase()),cg=n=>{const d=Jy(n);return d.charAt(0).toUpperCase()+d.slice(1)},db=(...n)=>n.filter((d,c,o)=>!!d&&d.trim()!==""&&o.indexOf(d)===c).join(" ").trim(),e1=n=>{for(const d in n)if(d.startsWith("aria-")||d==="role"||d==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=g.forwardRef(({color:n="currentColor",size:d=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:f="",children:h,iconNode:p,...y},N)=>g.createElement("svg",{ref:N,...t1,width:d,height:d,stroke:n,strokeWidth:o?Number(c)*24/Number(d):c,className:db("lucide",f),...!h&&!e1(y)&&{"aria-hidden":"true"},...y},[...p.map(([j,v])=>g.createElement(j,v)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(n,d)=>{const c=g.forwardRef(({className:o,...f},h)=>g.createElement(s1,{ref:h,iconNode:d,className:db(`lucide-${Ky(cg(n))}`,`lucide-${n}`,o),...f}));return c.displayName=cg(n),c};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Zm=mt("activity",a1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Cn=mt("arrow-left",l1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Xm=mt("arrow-right",n1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],i1=mt("arrow-up-down",r1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],o1=mt("award",c1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],ub=mt("bot",d1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],tp=mt("brain",u1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m1=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],x1=mt("briefcase",m1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Id=mt("calendar",f1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h1=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],p1=mt("chart-no-axes-column-increasing",h1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g1=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],eo=mt("check",g1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Uf=mt("chevron-down",b1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],j1=mt("chevron-right",v1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ef=mt("chevron-up",y1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],so=mt("circle-alert",N1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Tf=mt("circle-check-big",_1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],mb=mt("circle-check",w1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],C1=mt("circle-question-mark",S1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Di=mt("clock",A1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],og=mt("file-text",k1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E1=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],T1=mt("flask-conical",E1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],M1=mt("hand",R1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],L1=mt("heart",O1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],z1=mt("info",D1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Sf=mt("loader-circle",B1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],H1=mt("lock-open",U1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],F1=mt("lock",$1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],P1=mt("mail",q1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Sp=mt("map-pin",I1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],V1=mt("message-square",G1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M5 12h14",key:"1ays0h"}]],W1=mt("minus",Y1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],X1=mt("phone",Q1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],K1=mt("play",Z1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],xb=mt("plus",J1);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],t2=mt("send",e2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],dg=mt("sparkles",s2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],fb=mt("stethoscope",a2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ug=mt("timer",l2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zi=mt("triangle-alert",n2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hb=mt("user-plus",r2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hf=mt("user",i2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],dp=mt("users",c2);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$f=mt("x",o2),or=({columns:n,data:d,onRowClick:c,loading:o=!1,emptyMessage:f="No data available.",pagination:h=!1,pageSize:p=10,searchable:y=!1,searchPlaceholder:N="Search...",className:j="",compact:v=!1})=>{const[S,M]=g.useState({key:null,direction:"asc"}),[U,k]=g.useState(1),[B,A]=g.useState(""),$=W=>{const F=n.find(J=>J.accessor===W);F!=null&&F.sortable&&M(J=>({key:W,direction:J.key===W&&J.direction==="asc"?"desc":"asc"}))},Y=g.useMemo(()=>{let W=[...d||[]];if(B&&y){const F=B.toLowerCase();W=W.filter(J=>n.some(I=>{const Q=J[I.accessor];return Q&&String(Q).toLowerCase().includes(F)}))}return S.key&&W.sort((F,J)=>{const I=F[S.key],Q=J[S.key];if(I===Q)return 0;if(I==null)return 1;if(Q==null)return-1;const de=I<Q?-1:1;return S.direction==="asc"?de:-de}),W},[d,S,B,y,n]),w=Math.ceil(Y.length/p),D=h?Y.slice((U-1)*p,U*p):Y;Vg.useEffect(()=>{k(1)},[d,B]);const z=({accessor:W})=>S.key!==W?e.jsx("svg",{className:"w-4 h-4 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):S.direction==="asc"?e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):e.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})});return o?e.jsxs("div",{className:"p-8 border border-slate-200 rounded-xl bg-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),e.jsx("p",{className:"text-slate-500 mt-3",children:"Loading..."})]}):!d||d.length===0?e.jsxs("div",{className:"p-8 border border-dashed border-slate-300 rounded-xl bg-slate-50 text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-slate-300 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:f})]}):e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden ${j}`,children:[y&&e.jsx("div",{className:"p-4 border-b border-slate-100",children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),e.jsx("input",{type:"text",placeholder:N,value:B,onChange:W=>A(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),B&&e.jsx("button",{onClick:()=>A(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[e.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50/50 border-b border-slate-200",children:e.jsx("tr",{children:n.map((W,F)=>e.jsx("th",{scope:"col",className:`${v?"py-2 px-3":"py-4 px-6"} font-semibold tracking-wider ${W.sortable?"cursor-pointer select-none hover:bg-slate-100":""}`,onClick:()=>W.sortable&&$(W.accessor),children:e.jsxs("div",{className:"flex items-center gap-2",children:[W.header,W.sortable&&e.jsx(z,{accessor:W.accessor})]})},F))})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:D.map((W,F)=>e.jsx("tr",{className:`bg-white hover:bg-slate-50 transition-colors ${c?"cursor-pointer":""}`,onClick:()=>c&&c(W),children:n.map((J,I)=>e.jsx("td",{className:`${v?"py-2 px-3":"py-4 px-6"} whitespace-nowrap`,children:J.render?J.render(W):W[J.accessor]},I))},W.id||F))})]})}),h&&w>1&&e.jsxs("div",{className:"px-6 py-4 border-t border-slate-100 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-500",children:["Showing ",(U-1)*p+1," to ",Math.min(U*p,Y.length)," of ",Y.length," results"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(W=>Math.max(1,W-1)),disabled:U===1,className:"px-3 py-1.5 text-sm border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,w)},(W,F)=>{let J;return w<=5||U<=3?J=F+1:U>=w-2?J=w-4+F:J=U-2+F,e.jsx("button",{onClick:()=>k(J),className:`w-8 h-8 text-sm rounded-lg ${U===J?"bg-blue-500 text-white":"hover:bg-slate-100 text-slate-600"}`,children:J},J)})}),e.jsx("button",{onClick:()=>k(W=>Math.min(w,W+1)),disabled:U===w,className:"px-3 py-1.5 text-sm border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})},Ja=({title:n,description:d,children:c,className:o="",actions:f,action:h,...p})=>e.jsxs("section",{className:`mb-8 ${o}`,...p,children:[(n||d||f)&&e.jsxs("div",{className:"mb-4 flex justify-between items-start",children:[e.jsxs("div",{children:[n&&e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:n}),d&&e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:d})]}),f&&e.jsx("div",{children:f})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:c})]}),ta=()=>e.jsxs("div",{role:"status",className:"flex justify-center items-center",children:[e.jsxs("svg",{"aria-hidden":"true",className:"w-8 h-8 text-gray-200 animate-spin fill-blue-600",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),e.jsx("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})]}),e.jsx("span",{className:"sr-only",children:"Loading..."})]}),d2=({receivedAt:n})=>{const[d,c]=g.useState(null),[o,f]=g.useState(!1);if(g.useEffect(()=>{const N=()=>{const v=new Date(n).getTime(),S=new Date().getTime(),U=v+900*1e3-S;U<0?(f(!0),c(Math.abs(U))):(f(!1),c(U))};N();const j=setInterval(N,1e3);return()=>clearInterval(j)},[n]),d===null)return e.jsx("span",{className:"text-slate-400",children:"Calculating..."});const h=Math.floor(d/1e3/60),p=Math.floor(d/1e3%60),y=`${h}:${p<10?"0":""}${p}`;return o?e.jsxs("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx("svg",{className:"mr-1.5 h-2 w-2 text-red-400",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),"Breached (+",y,")"]}):e.jsxs("div",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800 animate-pulse",children:[e.jsx("svg",{className:"mr-1.5 h-2 w-2 text-emerald-400",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),y," Remaining"]})},xt=({title:n,subtitle:d,children:c,className:o="",variant:f="standard",action:h,actions:p,kpiColor:y,...N})=>{const j="bg-white border rounded-xl transition-all duration-200",v={standard:"border-slate-200 shadow-sm",kpi:"border-slate-200 shadow-sm border-l-4",interactive:"border-slate-200 shadow-sm hover:shadow-md cursor-pointer hover:border-teal-200",flat:"border-transparent bg-slate-50"},S=y?`border-l-${y}-500`:"border-l-teal-500",M=`
        ${j}
        ${v[f]||v.standard}
        ${f==="kpi"?S:""}
        ${o}
    `;return e.jsxs("div",{className:M,...N,children:[(n||d||h)&&e.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex justify-between items-start",children:[e.jsxs("div",{children:[n&&e.jsx("h5",{className:"text-lg font-bold text-slate-800 tracking-tight",children:n}),d&&e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:d})]}),h&&e.jsx("div",{children:h})]}),e.jsx("div",{className:"p-6",children:c})]})},Me=({children:n,onClick:d,type:c="button",variant:o="primary",className:f="",action:h,actions:p,...y})=>{const N="inline-flex items-center font-medium rounded-lg text-sm px-5 py-2.5 focus:outline-none transition-colors duration-200",j={primary:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:ring-blue-300",secondary:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 focus:ring-4 focus:ring-gray-200",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:ring-red-300",link:"text-blue-600 hover:underline bg-transparent px-0 py-0"};return e.jsx("button",{type:c,onClick:d,className:`${N} ${j[o]||j.primary} ${f}`,...y,children:n})},u2=({partners:n,compact:d=!1})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:`border-b border-slate-100 bg-slate-50/50 flex justify-between items-center ${d?"px-3 py-2":"px-6 py-4"}`,children:[e.jsx("h3",{className:`font-bold text-slate-700 ${d?"text-xs":"text-sm"}`,children:"Partner (SSPO) Performance"}),e.jsx("button",{className:"text-xs text-teal-700 font-medium hover:underline",children:"View Marketplace"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:`text-xs text-slate-400 uppercase bg-slate-50 border-b border-slate-100 ${d?"text-[10px]":""}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`${d?"px-2 py-2":"px-6 py-3"}`,children:"Organization"}),e.jsx("th",{className:`${d?"px-2 py-2":"px-6 py-3"}`,children:"Specialty"}),!d&&e.jsx("th",{className:"px-6 py-3",children:"Active Assignments"}),!d&&e.jsx("th",{className:"px-6 py-3",children:"Acceptance Rate"}),e.jsx("th",{className:`${d?"px-2 py-2 text-right":"px-6 py-3"}`,children:"Status"})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-50",children:[n.map(c=>e.jsxs("tr",{className:`hover:bg-slate-50 ${c.status==="warning"?"hover:bg-amber-50/30":""}`,children:[e.jsx("td",{className:`${d?"px-2 py-2 text-xs":"px-6 py-4"} font-medium text-slate-800`,children:e.jsx("div",{className:d?"truncate max-w-[100px]":"",children:c.name})}),e.jsx("td",{className:`${d?"px-2 py-2 text-xs":"px-6 py-4"} text-slate-500`,children:e.jsx("div",{className:d?"truncate max-w-[80px]":"",children:c.specialty})}),!d&&e.jsx("td",{className:"px-6 py-4",children:c.active_assignments}),!d&&e.jsxs("td",{className:`px-6 py-4 font-bold ${c.acceptance_rate>=95?"text-emerald-600":"text-amber-600"}`,children:[c.acceptance_rate,"%"]}),e.jsx("td",{className:`${d?"px-2 py-2 text-right":"px-6 py-4"}`,children:e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${c.status==="good"?"bg-emerald-500":c.status==="warning"?"bg-amber-500 animate-pulse":"bg-slate-300"}`,title:c.status})})]},c.id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:d?"3":"5",className:`${d?"px-3 py-4":"px-6 py-8"} text-center text-slate-400`,children:"No active partners found."})})]})]})})]}),m2=()=>{var A,$,Y,w,D,z,W,F,J,I,Q,de,te,pe,q,ae,H,L,Z,Te,ye,E,ee,V,re,Re,De,ge,ke,Oe,Rt,pt,ns,Wt,Nt,rs,Mt,is,zs,Bs,es,It,fs,Is,os,Qs,Us,ts,ds,Gs,Vs,sa,He,ht,gt,cs,Ct,Hs,xa,ia,je,Ae,Be,qe,et,Ye,ot,we,Ge,$e,Dt,Qt,At,zt,he,Ie,Xe,dt,_t,at,Tt,vs,Ea,tn,$l,Fl,el,ca,yl,tl,Tn,sl,ks,Ui,Hi,Nl,ql,$i,Fi;const n=xs(),[d,c]=g.useState(!0),[o,f]=g.useState(null),[h,p]=g.useState(null),[y,N]=g.useState(!1),[j,v]=g.useState(!1),[S,M]=g.useState("operations");g.useEffect(()=>{U();const Ot=setInterval(()=>U(!0),6e4);return()=>clearInterval(Ot)},[]);const U=async(Ot=!1)=>{Ot||c(!0);try{const[Pl,sn]=await Promise.all([ue.get("/v2/dashboards/spo"),ue.get("/v2/staffing/fte")]);f(Pl.data),p(sn.data)}catch(Pl){console.error("Failed to fetch dashboard data",Pl)}finally{Ot||c(!1)}},k=async()=>{N(!0),setTimeout(()=>N(!1),2e3)},B=async Ot=>{try{await ue.post(`/v2/jeopardy/alerts/${Ot}/resolve`),U(!0)}catch(Pl){console.error("Failed to resolve alert",Pl)}};return d?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"w-8 h-8 border-4 border-teal-200 border-t-teal-600 rounded-full animate-spin"})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"SPO Command Center"}),e.jsxs("p",{className:"text-slate-500 text-sm",children:["High Intensity Bundled Care • Contract Status: ",e.jsx("span",{className:"text-emerald-600 font-bold",children:"Active"})]})]}),e.jsxs("button",{onClick:k,disabled:y,className:"bg-white border border-indigo-200 hover:border-indigo-400 text-indigo-600 px-4 py-2 rounded-lg shadow-sm flex items-center gap-2 transition-all text-sm font-medium group disabled:opacity-50",children:[e.jsx("svg",{className:`w-4 h-4 ${y?"animate-spin":"group-hover:animate-pulse"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),y?"Forecasting...":"Gemini: Run Capacity Forecast"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-slate-400 uppercase tracking-wider mb-3",children:"Appendix 1 Compliance Scorecard"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-3",children:[e.jsxs("div",{className:`bg-white p-3 rounded-lg shadow-sm ${((($=(A=o==null?void 0:o.kpi)==null?void 0:A.referral_acceptance)==null?void 0:$.band)??"B")==="C"?"border-l-4 border-l-rose-500 border-y border-r border-slate-200":(((w=(Y=o==null?void 0:o.kpi)==null?void 0:Y.referral_acceptance)==null?void 0:w.band)??"B")==="B"?"border-l-4 border-l-amber-500 border-y border-r border-slate-200":"border border-slate-200"} relative overflow-hidden cursor-pointer hover:bg-slate-50 transition-colors`,onClick:()=>n("/patients"),children:[e.jsx("div",{className:`absolute top-0 right-0 w-8 h-8 ${(((z=(D=o==null?void 0:o.kpi)==null?void 0:D.referral_acceptance)==null?void 0:z.band)??"B")==="A"?"bg-emerald-50":(((F=(W=o==null?void 0:o.kpi)==null?void 0:W.referral_acceptance)==null?void 0:F.band)??"B")==="B"?"bg-amber-50":"bg-rose-50"} rounded-bl-full -mr-4 -mt-4`}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[e.jsx("div",{className:"text-slate-500 text-xs font-medium uppercase h-7 flex items-center",children:"Referral Acceptance"}),e.jsx("div",{className:"text-2xl font-bold ${(data?.kpi?.referral_acceptance?.band ?? 'B') === 'A' ? 'text-emerald-600' : (data?.kpi?.referral_acceptance?.band ?? 'B') === 'B' ? 'text-amber-500' : 'text-rose-600'} h-7 flex items-center",children:`${((Q=(I=(J=o==null?void 0:o.kpi)==null?void 0:J.referral_acceptance)==null?void 0:I.rate_percent)==null?void 0:Q.toFixed(1))??0}%`}),e.jsx("div",{className:"h-7 flex items-center justify-center",children:e.jsx("span",{className:`shrink-0 whitespace-nowrap px-2 py-0.5 rounded text-xs font-medium ${(((te=(de=o==null?void 0:o.kpi)==null?void 0:de.referral_acceptance)==null?void 0:te.band)??"B")==="A"?"bg-emerald-100 text-emerald-700":(((q=(pe=o==null?void 0:o.kpi)==null?void 0:pe.referral_acceptance)==null?void 0:q.band)??"B")==="B"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:(((H=(ae=o==null?void 0:o.kpi)==null?void 0:ae.referral_acceptance)==null?void 0:H.band)??"B")==="A"?"Meets Target":(((Z=(L=o==null?void 0:o.kpi)==null?void 0:L.referral_acceptance)==null?void 0:Z.band)??"B")==="B"?"Below Standard":"Action Required"})}),e.jsx("div",{className:"text-xs text-slate-400 h-7 flex items-center justify-center",children:(((ye=(Te=o==null?void 0:o.kpi)==null?void 0:Te.referral_acceptance)==null?void 0:ye.band)??"B")==="A"?"Target: 100% (Meets Target)":(((ee=(E=o==null?void 0:o.kpi)==null?void 0:E.referral_acceptance)==null?void 0:ee.band)??"B")==="B"?`${((re=(V=o==null?void 0:o.kpi)==null?void 0:V.referral_acceptance)==null?void 0:re.accepted)??0}/${((De=(Re=o==null?void 0:o.kpi)==null?void 0:Re.referral_acceptance)==null?void 0:De.total)??0} accepted (Target: 100%)`:`${((ke=(ge=o==null?void 0:o.kpi)==null?void 0:ge.referral_acceptance)==null?void 0:ke.accepted)??0}/${((Rt=(Oe=o==null?void 0:o.kpi)==null?void 0:Oe.referral_acceptance)==null?void 0:Rt.total)??0} accepted (Action Required)`})]})]}),e.jsxs("div",{className:`bg-white p-3 rounded-lg shadow-sm ${((ns=(pt=o==null?void 0:o.kpi)==null?void 0:pt.time_to_first_service)==null?void 0:ns.band)==="C"?"border-l-4 border-l-rose-500 border-y border-r border-slate-200":((Nt=(Wt=o==null?void 0:o.kpi)==null?void 0:Wt.time_to_first_service)==null?void 0:Nt.band)==="B"?"border-l-4 border-l-amber-500 border-y border-r border-slate-200":"border border-slate-200"} relative overflow-hidden cursor-pointer hover:bg-slate-50 transition-colors`,onClick:()=>n("/metrics/tfs"),children:[e.jsx("div",{className:`absolute top-0 right-0 w-8 h-8 ${((Mt=(rs=o==null?void 0:o.kpi)==null?void 0:rs.time_to_first_service)==null?void 0:Mt.band)==="A"?"bg-emerald-50":((zs=(is=o==null?void 0:o.kpi)==null?void 0:is.time_to_first_service)==null?void 0:zs.band)==="B"?"bg-amber-50":"bg-rose-50"} rounded-bl-full -mr-4 -mt-4`}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[e.jsx("div",{className:"text-slate-500 text-xs font-medium uppercase h-7 flex items-center",children:"Time-to-First-Service"}),e.jsx("div",{className:`text-2xl font-bold h-7 flex items-center ${((es=(Bs=o==null?void 0:o.kpi)==null?void 0:Bs.time_to_first_service)==null?void 0:es.band)==="A"?"text-emerald-600":((fs=(It=o==null?void 0:o.kpi)==null?void 0:It.time_to_first_service)==null?void 0:fs.band)==="B"?"text-amber-500":"text-rose-600"}`,children:((os=(Is=o==null?void 0:o.kpi)==null?void 0:Is.time_to_first_service)==null?void 0:os.formatted_average)??"0h"}),e.jsx("div",{className:"h-7 flex items-center justify-center",children:e.jsx("span",{className:`shrink-0 whitespace-nowrap px-2 py-0.5 rounded text-xs font-medium ${((Us=(Qs=o==null?void 0:o.kpi)==null?void 0:Qs.time_to_first_service)==null?void 0:Us.band)==="A"?"bg-emerald-100 text-emerald-700":((ds=(ts=o==null?void 0:o.kpi)==null?void 0:ts.time_to_first_service)==null?void 0:ds.band)==="B"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:((Vs=(Gs=o==null?void 0:o.kpi)==null?void 0:Gs.time_to_first_service)==null?void 0:Vs.band)==="A"?"Meets Target":((He=(sa=o==null?void 0:o.kpi)==null?void 0:sa.time_to_first_service)==null?void 0:He.band)==="B"?"Below Standard":"Action Required"})}),e.jsx("div",{className:"text-xs text-slate-400 h-7 flex items-center justify-center",children:"Target: < 24 Hours"})]})]}),e.jsxs("div",{className:`bg-white p-3 rounded-lg shadow-sm ${((gt=(ht=o==null?void 0:o.kpi)==null?void 0:ht.missed_care)==null?void 0:gt.band)==="A"?"border border-slate-200":((Ct=(cs=o==null?void 0:o.kpi)==null?void 0:cs.missed_care)==null?void 0:Ct.band)==="B"?"border-l-4 border-l-amber-500 border-y border-r border-slate-200":"border-l-4 border-l-rose-500 border-y border-r border-slate-200"} relative overflow-hidden cursor-pointer hover:bg-slate-50 transition-colors`,onClick:()=>v(!0),children:[e.jsx("div",{className:`absolute top-0 right-0 w-8 h-8 rounded-bl-full -mr-4 -mt-4 ${((xa=(Hs=o==null?void 0:o.kpi)==null?void 0:Hs.missed_care)==null?void 0:xa.band)==="A"?"bg-emerald-50":((je=(ia=o==null?void 0:o.kpi)==null?void 0:ia.missed_care)==null?void 0:je.band)==="B"?"bg-amber-50":"bg-rose-50"}`}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[e.jsx("div",{className:"text-slate-500 text-xs font-medium uppercase h-7 flex items-center",children:"Missed Care Rate"}),e.jsxs("div",{className:`text-2xl font-bold h-7 flex items-center ${((Be=(Ae=o==null?void 0:o.kpi)==null?void 0:Ae.missed_care)==null?void 0:Be.band)==="A"?"text-emerald-600":((et=(qe=o==null?void 0:o.kpi)==null?void 0:qe.missed_care)==null?void 0:et.band)==="B"?"text-amber-500":"text-rose-600"}`,children:[((we=(ot=(Ye=o==null?void 0:o.kpi)==null?void 0:Ye.missed_care)==null?void 0:ot.rate_percent)==null?void 0:we.toFixed(2))??"0.00","%"]}),e.jsx("div",{className:"h-7 flex items-center justify-center",children:e.jsx("span",{className:`shrink-0 whitespace-nowrap px-2 py-0.5 rounded text-xs font-medium ${(($e=(Ge=o==null?void 0:o.kpi)==null?void 0:Ge.missed_care)==null?void 0:$e.band)==="A"?"bg-emerald-100 text-emerald-700":((Qt=(Dt=o==null?void 0:o.kpi)==null?void 0:Dt.missed_care)==null?void 0:Qt.band)==="B"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:"Action Required"})}),e.jsxs("div",{className:"text-xs text-slate-400 h-7 flex items-center justify-center",children:["Target: 0% ",((zt=(At=o==null?void 0:o.kpi)==null?void 0:At.missed_care)==null?void 0:zt.missed_events)>0&&`• ${(Ie=(he=o==null?void 0:o.kpi)==null?void 0:he.missed_care)==null?void 0:Ie.missed_events} missed`]})]})]}),e.jsxs("div",{className:`bg-white p-3 rounded-lg shadow-sm ${(h==null?void 0:h.band)==="RED"?"border-l-4 border-l-rose-500 border-y border-r border-slate-200":(h==null?void 0:h.band)==="YELLOW"?"border-l-4 border-l-amber-500 border-y border-r border-slate-200":"border border-slate-200"} relative overflow-hidden cursor-pointer hover:bg-slate-50 transition-colors`,onClick:()=>n("/staff"),children:[e.jsx("div",{className:`absolute top-0 right-0 w-8 h-8 rounded-bl-full -mr-4 -mt-4 ${(h==null?void 0:h.band)==="GREEN"?"bg-emerald-50":(h==null?void 0:h.band)==="YELLOW"?"bg-amber-50":"bg-rose-50"}`}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[e.jsx("div",{className:"text-slate-500 text-xs font-medium uppercase h-7 flex items-center",children:"Direct Care FTE"}),e.jsxs("div",{className:`text-2xl font-bold h-7 flex items-center ${(h==null?void 0:h.band)==="GREEN"?"text-emerald-600":(h==null?void 0:h.band)==="YELLOW"?"text-amber-500":"text-rose-600"}`,children:[(h==null?void 0:h.fte_ratio)||0,"%"]}),e.jsx("div",{className:"h-7 flex items-center justify-center",children:e.jsx("span",{className:`shrink-0 whitespace-nowrap px-2 py-0.5 rounded text-xs font-medium ${(h==null?void 0:h.band)==="GREEN"?"bg-emerald-100 text-emerald-700":(h==null?void 0:h.band)==="YELLOW"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:(h==null?void 0:h.band)==="GREEN"?"Meets Target":(h==null?void 0:h.band)==="YELLOW"?"Below Standard":"Action Required"})}),e.jsx("div",{className:"text-xs text-slate-400 h-7 flex items-center justify-center",children:"Target: ≥ 80% Full-Time"})]})]}),e.jsxs("div",{className:`bg-white p-3 rounded-lg shadow-sm ${(((dt=(Xe=o==null?void 0:o.kpi)==null?void 0:Xe.active_qins)==null?void 0:dt.count)??0)===0?"border border-slate-200":"border-l-4 border-l-rose-500 border-y border-r border-slate-200"} relative overflow-hidden cursor-pointer hover:bg-slate-50 transition-colors`,onClick:()=>n("/qin"),children:[e.jsx("div",{className:`absolute top-0 right-0 w-8 h-8 rounded-bl-full -mr-4 -mt-4 ${(((at=(_t=o==null?void 0:o.kpi)==null?void 0:_t.active_qins)==null?void 0:at.count)??0)===0?"bg-emerald-50":"bg-rose-50"}`}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[e.jsx("div",{className:"text-slate-500 text-xs font-medium uppercase h-7 flex items-center",children:"Active QINs"}),e.jsx("div",{className:`text-2xl font-bold h-7 flex items-center ${(((vs=(Tt=o==null?void 0:o.kpi)==null?void 0:Tt.active_qins)==null?void 0:vs.count)??0)===0?"text-emerald-600":"text-rose-600"}`,children:((tn=(Ea=o==null?void 0:o.kpi)==null?void 0:Ea.active_qins)==null?void 0:tn.count)??0}),e.jsx("div",{className:"h-7 flex items-center justify-center",children:e.jsx("span",{className:`shrink-0 whitespace-nowrap px-2 py-0.5 rounded text-xs font-medium ${(((Fl=($l=o==null?void 0:o.kpi)==null?void 0:$l.active_qins)==null?void 0:Fl.count)??0)===0?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:(((ca=(el=o==null?void 0:o.kpi)==null?void 0:el.active_qins)==null?void 0:ca.count)??0)===0?"Meets Target":"Action Required"})}),e.jsx("div",{className:`text-xs h-7 flex items-center justify-center ${(((tl=(yl=o==null?void 0:o.kpi)==null?void 0:yl.active_qins)==null?void 0:tl.count)??0)===0?"text-slate-400":"text-rose-600 font-medium"}`,children:(((sl=(Tn=o==null?void 0:o.kpi)==null?void 0:Tn.active_qins)==null?void 0:sl.count)??0)===0?"Target: 0 Active":"Submit QIP"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"Intake Queue (HPG Gateway)"}),e.jsxs("span",{className:"bg-amber-100 text-amber-800 text-xs font-medium px-2 py-1 rounded-full",children:[((ks=o==null?void 0:o.intake_queue)==null?void 0:ks.length)||0," Pending"]})]}),e.jsx("div",{className:"divide-y divide-slate-100",children:((Ui=o==null?void 0:o.intake_queue)==null?void 0:Ui.length)>0?o.intake_queue.map(Ot=>e.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center font-bold text-slate-500",children:Ot.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:Ot.name}),e.jsxs("div",{className:"text-xs text-slate-500",children:["OHIP: ",Ot.ohip," • ",Ot.source]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(d2,{receivedAt:Ot.received_at}),e.jsx("button",{onClick:()=>n("/patients"),className:"text-teal-600 hover:text-teal-800 text-sm font-medium",children:"Review"})]})]},Ot.id)):e.jsx("div",{className:"p-4 text-center text-slate-500 text-sm",children:"No new referrals."})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"Jeopardy Board (Missed Care Risk)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[((Hi=o==null?void 0:o.jeopardy_summary)==null?void 0:Hi.critical_count)>0&&e.jsxs("span",{className:"bg-rose-100 text-rose-800 text-xs font-medium px-2 py-1 rounded-full",children:[o.jeopardy_summary.critical_count," Critical"]}),((Nl=o==null?void 0:o.jeopardy_summary)==null?void 0:Nl.warning_count)>0&&e.jsxs("span",{className:"bg-amber-100 text-amber-800 text-xs font-medium px-2 py-1 rounded-full",children:[o.jeopardy_summary.warning_count," Warning"]}),(((ql=o==null?void 0:o.jeopardy_summary)==null?void 0:ql.total_active)||0)===0&&e.jsx("span",{className:"bg-slate-100 text-slate-600 text-xs font-medium px-2 py-1 rounded-full",children:"0 Active"})]})]}),e.jsxs("div",{className:"p-4 space-y-3 max-h-96 overflow-y-auto",children:[(($i=o==null?void 0:o.jeopardy_board)==null?void 0:$i.length)>0?o.jeopardy_board.slice(0,10).map(Ot=>{var Pl,sn,Rn,Ta;return e.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${Ot.risk_level==="CRITICAL"?"bg-rose-50 border-rose-100":"bg-amber-50 border-amber-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${Ot.risk_level==="CRITICAL"?"bg-rose-500 animate-pulse":"bg-amber-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-900",children:Ot.reason||"Visit Verification Overdue"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[((sn=(Pl=Ot.care_assignment)==null?void 0:Pl.assigned_user)==null?void 0:sn.name)||"Unassigned"," • ",((Ta=(Rn=Ot.patient)==null?void 0:Rn.user)==null?void 0:Ta.name)||"Unknown",Ot.risk_level==="CRITICAL"?` • Breached ${Ot.breach_duration||Ot.breached_days_ago+"d ago"}`:` • ${Ot.time_remaining} remaining`]}),Ot.service_type&&e.jsx("div",{className:"text-xs text-slate-400 mt-0.5",children:Ot.service_type})]})]}),e.jsx("button",{onClick:()=>B(Ot.assignment_id||Ot.id),className:`text-xs bg-white border px-3 py-1 rounded transition-colors ${Ot.risk_level==="CRITICAL"?"border-rose-200 text-rose-700 hover:bg-rose-50":"border-amber-200 text-amber-700 hover:bg-amber-50"}`,children:"Resolve"})]},Ot.id||Ot.assignment_id)}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-slate-400",children:[e.jsx("svg",{className:"w-8 h-8 mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm",children:"No visits at risk. Great job!"})]}),((Fi=o==null?void 0:o.jeopardy_board)==null?void 0:Fi.length)>10&&e.jsx("div",{className:"text-center pt-2",children:e.jsxs("span",{className:"text-xs text-slate-500",children:["Showing 10 of ",o.jeopardy_board.length," alerts"]})})]})]})]}),e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-100",children:e.jsx("h3",{className:"font-bold text-slate-800",children:"SSPO Performance"})}),e.jsx("div",{className:"p-4",children:e.jsx(u2,{partners:(o==null?void 0:o.partners)||[],compact:!0})}),e.jsx("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-100 text-center",children:e.jsx("button",{onClick:()=>n("/sspo-marketplace"),className:"text-xs font-medium text-teal-600 hover:text-teal-800 uppercase tracking-wide",children:"View Marketplace"})})]})})]})]})},x2=()=>{const n=xs(),[d,c]=g.useState(!0),[o,f]=g.useState(null),[h,p]=g.useState(null),[y,N]=g.useState("all"),[j,v]=g.useState({key:"hours_to_first_service",direction:"desc"});g.useEffect(()=>{S()},[]);const S=async()=>{try{c(!0);const z=await ue.get("/v2/metrics/tfs/details");p(z.data.data),f(null)}catch(z){console.error("Error fetching TFS details:",z),f("Failed to load Time-to-First-Service data")}finally{c(!1)}},M=z=>{switch(z){case"within_target":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700",children:[e.jsx(Tf,{className:"w-3 h-3"}),"Within Target"]});case"below_standard":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700",children:[e.jsx(zi,{className:"w-3 h-3"}),"Below Standard"]});case"exceeded_target":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-rose-100 text-rose-700",children:[e.jsx(ug,{className:"w-3 h-3"}),"Exceeded Target"]});case"awaiting_first_service":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-600",children:[e.jsx(Di,{className:"w-3 h-3"}),"Awaiting Service"]});default:return null}},U=z=>{switch(z){case"A":return"text-emerald-600";case"B":return"text-amber-500";case"C":return"text-rose-600";default:return"text-slate-600"}},k=z=>{switch(z){case"A":return e.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-emerald-100 text-emerald-700",children:"Meets Target"});case"B":return e.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-amber-100 text-amber-700",children:"Below Standard"});case"C":return e.jsx("span",{className:"px-2 py-1 rounded text-xs font-bold bg-rose-100 text-rose-700",children:"Exceeded Target"});default:return null}},B=z=>{let W="asc";j.key===z&&j.direction==="asc"&&(W="desc"),v({key:z,direction:W})},A=z=>j.key!==z?e.jsx(Ef,{className:"w-3 h-3 text-slate-300"}):j.direction==="asc"?e.jsx(Ef,{className:"w-3 h-3 text-sky-600"}):e.jsx(Uf,{className:"w-3 h-3 text-sky-600"}),$=g.useMemo(()=>{let z=(h==null?void 0:h.patients)||[];return y!=="all"&&(y==="awaiting"?z=z.filter(W=>W.status==="awaiting_first_service"):z=z.filter(W=>W.status===y)),[...z].sort((W,F)=>{let J=W[j.key],I=F[j.key];return J==null?j.direction==="asc"?1:-1:I==null||(typeof J=="string"&&(J=J.toLowerCase(),I=I.toLowerCase()),J<I)?j.direction==="asc"?-1:1:J>I?j.direction==="asc"?1:-1:0})},[h==null?void 0:h.patients,y,j]);if(d)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-sky-600"})});if(o)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-rose-50 border border-rose-200 text-rose-700 px-4 py-3 rounded",children:o})});const Y=h==null?void 0:h.summary,w=h==null?void 0:h.counts,D=({label:z,sortKey:W,className:F=""})=>e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider cursor-pointer hover:bg-slate-100 select-none ${F}`,onClick:()=>B(W),children:e.jsxs("div",{className:"flex items-center gap-1",children:[z,A(W)]})});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between mt-4",children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("button",{onClick:()=>n("/care-dashboard"),className:"flex items-center gap-2 pl-0 pr-3 py-2 text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:[e.jsx(Cn,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Back to Dashboard"})]})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Time-to-First-Service Details"}),e.jsx("p",{className:"text-slate-500",children:"Patient breakdown for TFS metric calculation"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-slate-500 text-xs font-bold uppercase mb-2",children:"Average TFS"}),e.jsx("div",{className:`text-3xl font-bold ${U(Y==null?void 0:Y.band)}`,children:(Y==null?void 0:Y.formatted_average)||"0h"}),e.jsx("div",{className:"mt-2",children:k(Y==null?void 0:Y.band)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-slate-500 text-xs font-bold uppercase mb-2",children:"Median TFS"}),e.jsx("div",{className:"text-3xl font-bold text-slate-700",children:Y!=null&&Y.median_hours?`${Y.median_hours}h`:"N/A"}),e.jsx("div",{className:"text-xs text-slate-400 mt-2",children:"50th percentile"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-slate-500 text-xs font-bold uppercase mb-2",children:"First Service Delivered"}),e.jsx("div",{className:"text-3xl font-bold text-sky-600",children:(w==null?void 0:w.with_first_service)||0}),e.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:["of ",(w==null?void 0:w.total)||0," patients"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-slate-500 text-xs font-bold uppercase mb-2",children:"Awaiting Service"}),e.jsx("div",{className:"text-3xl font-bold text-slate-600",children:(w==null?void 0:w.awaiting_first_service)||0}),e.jsx("div",{className:"text-xs text-slate-400 mt-2",children:"pending first visit"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200",children:[e.jsx("h3",{className:"font-semibold text-slate-800 mb-3",children:"Status Breakdown"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>N("all"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${y==="all"?"bg-sky-100 text-sky-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:["All (",(w==null?void 0:w.total)||0,")"]}),e.jsxs("button",{onClick:()=>N("within_target"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${y==="within_target"?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[e.jsx(Tf,{className:"w-4 h-4 inline mr-1"}),"Within Target (",(w==null?void 0:w.within_target)||0,")"]}),e.jsxs("button",{onClick:()=>N("below_standard"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${y==="below_standard"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[e.jsx(zi,{className:"w-4 h-4 inline mr-1"}),"Below Standard (",(w==null?void 0:w.below_standard)||0,")"]}),e.jsxs("button",{onClick:()=>N("exceeded_target"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${y==="exceeded_target"?"bg-rose-100 text-rose-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[e.jsx(ug,{className:"w-4 h-4 inline mr-1"}),"Exceeded Target (",(w==null?void 0:w.exceeded_target)||0,")"]}),e.jsxs("button",{onClick:()=>N("awaiting"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${y==="awaiting"?"bg-slate-200 text-slate-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[e.jsx(Di,{className:"w-4 h-4 inline mr-1"}),"Awaiting Service (",(w==null?void 0:w.awaiting_first_service)||0,")"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 bg-slate-50 flex justify-between items-center",children:[e.jsxs("h3",{className:"font-semibold text-slate-800",children:["Patient Details (",$.length,")"]}),e.jsx("span",{className:"text-xs text-slate-500",children:"Click column headers to sort"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx(D,{label:"Patient",sortKey:"name"}),e.jsx(D,{label:"OHIP",sortKey:"ohip"}),e.jsx(D,{label:"Accepted At",sortKey:"accepted_at"}),e.jsx(D,{label:"First Service / Scheduled",sortKey:"first_service_at"}),e.jsx(D,{label:"Service Type",sortKey:"first_service_type"}),e.jsx(D,{label:"Time to Service",sortKey:"hours_to_first_service"}),e.jsx(D,{label:"Status",sortKey:"status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200",children:$.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-8 text-center text-slate-500",children:"No patients match the selected filter"})}):$.map((z,W)=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-sky-100 flex items-center justify-center",children:e.jsx(Hf,{className:"w-4 h-4 text-sky-600"})}),e.jsx("span",{className:"font-medium text-slate-800",children:z.name})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:z.ohip||"N/A"}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:z.accepted_at_formatted}),e.jsx("td",{className:"px-4 py-3 text-sm",children:z.has_first_service?e.jsx("span",{className:"text-slate-600",children:z.first_service_at_formatted}):z.has_scheduled_service?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Id,{className:"w-4 h-4 text-sky-500"}),e.jsx("span",{className:"text-sky-600 font-medium",children:z.scheduled_first_service_at_formatted}),e.jsxs("span",{className:"text-xs text-slate-400 ml-1",children:["(in ",z.hours_until_scheduled,"h)"]})]}):e.jsx("span",{className:"text-slate-400 italic",children:"Not scheduled"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-slate-600",children:z.has_first_service?z.first_service_type:z.has_scheduled_service?e.jsx("span",{className:"text-sky-600",children:z.scheduled_first_service_type}):e.jsx("span",{className:"text-slate-400",children:"—"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`font-semibold ${z.hours_to_first_service===null?"text-slate-400":z.hours_to_first_service<24?"text-emerald-600":z.hours_to_first_service<=48?"text-amber-500":"text-rose-600"}`,children:z.hours_formatted})}),e.jsx("td",{className:"px-4 py-3",children:M(z.status)})]},z.id||W))})]})})]}),e.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-sky-800 mb-2",children:"OHaH RFP Target"}),e.jsxs("p",{className:"text-sm text-sky-700",children:["Time-to-First-Service measures the time from referral acceptance to the first completed visit. Target is ",e.jsx("strong",{children:"< 24 hours"}),"."]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:[e.jsx("span",{className:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded",children:"Within Target: <24h"}),e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded",children:"Below Standard: 24-48h"}),e.jsx("span",{className:"px-2 py-1 bg-rose-100 text-rose-700 rounded",children:"Exceeded Target: >48h"})]})]})]})},f2=()=>{const[n,d]=g.useState([]),[c,o]=g.useState(!0);if(g.useEffect(()=>{(async()=>{try{const y=await ue.get("/care-assignments");d(y.data||[])}catch(y){console.error("Failed to fetch assignments:",y)}finally{o(!1)}})()},[]),c)return e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(ta,{})});const f=n.map(p=>{var y,N;return{id:p.id,patient_name:((N=(y=p.patient)==null?void 0:y.user)==null?void 0:N.name)||"Unknown",status:p.status,start_date:p.start_date}}),h=[{header:"Patient",accessor:"patient_name"},{header:"Status",accessor:"status",render:p=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${p.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.status})},{header:"Start Date",accessor:"start_date"},{header:"Actions",accessor:p=>e.jsx(Zd,{to:`/assignments/${p.id}`,children:e.jsx(Me,{size:"sm",variant:"secondary",children:"View"})})}];return e.jsx(Ja,{title:"My Worklist",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Today's Assignments"}),f.length>0?e.jsx(or,{columns:h,data:f,keyField:"id"}):e.jsx("div",{className:"text-center py-12 bg-gray-50 rounded-xl border border-gray-200 border-dashed",children:e.jsx("p",{className:"text-gray-500",children:"No assignments found for today."})})]})})},mg=({roles:n})=>{const{user:d,loading:c}=Br();return console.log("RoleRoute Check: "+JSON.stringify({user:d,roles:n,allowed:d&&n.includes(d.role)})),c?e.jsx("div",{children:"Loading..."}):d?n.includes(d.role)?e.jsx(yp,{}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600",children:"403 Unauthorized"}),e.jsx("p",{className:"mt-2",children:"You do not have permission to access this page."}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Current Role: ",d?d.role:"None"]})]}):null},h2=()=>{const n=xs(),[d,c]=g.useState([]),[o,f]=g.useState(!0),[h,p]=g.useState(null),[y,N]=g.useState("all"),[j,v]=g.useState({total:0,active:0,in_queue:0}),[S,M]=g.useState("name");g.useEffect(()=>{U()},[]);const U=async()=>{try{const w=await ue.get("/patients");c(w.data.data||[]),v(w.data.summary||{total:0,active:0,in_queue:0}),f(!1)}catch(w){p("Failed to load patients."),f(!1),console.error(w)}},k=w=>{n(`/care-bundles/create/${w.id}`)},B=d.filter(w=>y==="active"?!w.is_in_queue:y==="queue"?w.is_in_queue:!0),A=w=>{if(!w)return"";const D=w.trim().split(/\s+/);return D[D.length-1]},$=g.useMemo(()=>[...B].sort((w,D)=>{switch(S){case"name":const z=A(w.name),W=A(D.name),F=z.localeCompare(W);return F!==0?F:(w.name||"").localeCompare(D.name||"");case"rug":const J=w.rug_numeric_rank??999,I=D.rug_numeric_rank??999;if(J!==I)return J-I;const Q=A(w.name),de=A(D.name);return Q.localeCompare(de);case"queue":const te=L=>L.is_in_queue?L.queue_status==="assessment_complete"?1:2:0,pe=te(w),q=te(D);if(pe!==q)return pe-q;const ae=A(w.name),H=A(D.name);return ae.localeCompare(H);default:return 0}}),[B,S]),Y=w=>{if(w.is_in_queue){const z=w.interrai_status||"InterRAI HC Required",W=w.interrai_badge_color||"yellow",F={yellow:"bg-amber-100 text-amber-700",green:"bg-emerald-100 text-emerald-700",gray:"bg-gray-100 text-gray-700"};return e.jsx("span",{className:`inline-flex items-center whitespace-nowrap text-xs px-2 py-0.5 rounded-full ${F[W]||"bg-gray-100 text-gray-700"}`,children:z})}const D={Active:"bg-green-100 text-green-800",Available:"bg-green-100 text-green-800",Inactive:"bg-gray-100 text-gray-800",Pending:"bg-yellow-100 text-yellow-800"};return e.jsx("span",{className:`inline-flex items-center whitespace-nowrap text-xs px-2 py-0.5 rounded-full ${D[w.status]||"bg-gray-100 text-gray-800"}`,children:w.status})};return o?e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(ta,{})}):h?e.jsx("div",{className:"text-red-600 p-6",children:h}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs(Ja,{title:"Patients",description:"Manage your organization's patients",actions:e.jsxs(Me,{onClick:()=>n("/patients/add"),children:[e.jsx(hb,{className:"w-4 h-4 mr-2"}),"Add Patient"]}),children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{onClick:()=>N("all"),className:`bg-white border rounded-lg p-4 cursor-pointer transition-all ${y==="all"?"border-blue-500 ring-2 ring-blue-100 shadow-md":"border-gray-200 hover:border-blue-300 hover:shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-1",children:[e.jsx(dp,{className:"w-4 h-4"}),"Total Patients"]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:j.total})]}),e.jsxs("div",{onClick:()=>N("active"),className:`bg-white border rounded-lg p-4 cursor-pointer transition-all ${y==="active"?"border-green-500 ring-2 ring-green-100 shadow-md":"border-green-200 hover:border-green-400 hover:shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm mb-1",children:[e.jsx(Tf,{className:"w-4 h-4"}),"Active"]}),e.jsx("div",{className:"text-2xl font-bold text-green-700",children:j.active})]}),e.jsxs("div",{onClick:()=>N("queue"),className:`bg-white border rounded-lg p-4 cursor-pointer transition-all ${y==="queue"?"border-yellow-500 ring-2 ring-yellow-100 shadow-md":"border-yellow-200 hover:border-yellow-400 hover:shadow-sm"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-600 text-sm mb-1",children:[e.jsx(Di,{className:"w-4 h-4"}),"In Queue"]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-700",children:j.in_queue})]})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",$.length," ",$.length===1?"patient":"patients"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i1,{className:"w-4 h-4 text-gray-400"}),e.jsx("label",{htmlFor:"sort-select",className:"text-sm text-gray-600",children:"Sort by:"}),e.jsxs("select",{id:"sort-select",value:S,onChange:w=>M(w.target.value),className:"text-sm border border-gray-300 rounded-md px-2 py-1 bg-white focus:ring-2 focus:ring-blue-200 focus:border-blue-400",children:[e.jsx("option",{value:"name",children:"Name (A–Z)"}),e.jsx("option",{value:"rug",children:"RUG Group"}),e.jsx("option",{value:"queue",children:"Queue Status"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(w=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-200 flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-lg font-bold flex-shrink-0",children:w.name?w.name.charAt(0):"?"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:w.name||"Unknown"}),Y(w)]})]}),w.is_in_queue&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400 animate-pulse flex-shrink-0",title:"In Queue"})]}),e.jsxs("div",{className:"mt-3 space-y-1.5 flex-grow",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Gender"}),e.jsx("span",{className:"text-gray-900 font-medium",children:w.gender||"-"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Hospital"}),e.jsx("span",{className:"text-gray-900 font-medium truncate ml-2",children:w.hospital||"-"})]}),w.rug_group?e.jsxs("div",{className:"flex justify-between text-xs items-start",children:[e.jsx("span",{className:"text-gray-500",children:"RUG"}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-900 font-medium",children:w.rug_group}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["(",w.rug_category,")"]})]})]}):e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"RUG"}),e.jsx("span",{className:"text-gray-400 italic",children:"Not classified"})]}),w.top_clinical_flags&&w.top_clinical_flags.length>0&&e.jsx("div",{className:"pt-1.5",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:w.top_clinical_flags.map((D,z)=>e.jsx("span",{className:`inline-flex items-center text-[10px] px-1.5 py-0.5 rounded-full font-medium ${D.severity==="danger"?"bg-rose-100 text-rose-700":D.severity==="warning"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,children:D.label},z))})})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-between items-center",children:[w.is_in_queue&&w.queue_status==="assessment_complete"?e.jsxs("button",{onClick:()=>k(w),className:"text-sm text-green-600 hover:text-green-800 font-medium flex items-center gap-1",children:[e.jsx(K1,{className:"w-4 h-4"}),"Build Bundle"]}):w.is_in_queue?e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(so,{className:"w-3 h-3"}),"InterRAI HC Required"]}):e.jsx("span",{}),e.jsx(Zd,{to:`/patients/${w.id}`,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View Details →"})]})]},w.id))}),$.length===0&&e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200 border-dashed",children:[e.jsx(dp,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-gray-500 text-sm",children:y==="queue"?"No patients in queue.":y==="active"?"No active patients.":"No patients found."}),y==="queue"&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Add patients to the queue to begin the intake process."})]})]})})},pb=({services:n=[],totalCost:d=0,isGeneratingAi:c=!1,aiRecommendation:o=null,onGenerateAi:f=()=>{},bundleName:h=""})=>{const p=v=>{if(!v||typeof v!="string")return e.jsx(Zm,{className:"w-5 h-5 text-slate-400"});const S=v.toLowerCase();return S.includes("nursing")?e.jsx(fb,{className:"w-5 h-5 text-slate-400"}):S.includes("personal")||S.includes("psw")?e.jsx(Hf,{className:"w-5 h-5 text-slate-400"}):S.includes("physio")||S.includes("pt")?e.jsx(Zm,{className:"w-5 h-5 text-slate-400"}):S.includes("occupational")||S.includes("ot")?e.jsx(M1,{className:"w-5 h-5 text-slate-400"}):S.includes("social")||S.includes("sw")?e.jsx(V1,{className:"w-5 h-5 text-slate-400"}):S.includes("monitoring")||S.includes("rpm")?e.jsx(p1,{className:"w-5 h-5 text-slate-400"}):S.includes("lab")?e.jsx(T1,{className:"w-5 h-5 text-slate-400"}):e.jsx(Zm,{className:"w-5 h-5 text-slate-400"})},y=n.filter(v=>v.currentFrequency>0&&v.defaultFrequency>0),N=n.filter(v=>v.currentFrequency>0&&v.defaultFrequency===0),j=({service:v})=>e.jsxs("div",{className:"border border-slate-200 rounded-lg p-2.5 overflow-hidden min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2 min-w-0",children:[e.jsx("div",{className:"shrink-0 mt-0.5",children:p(v.name)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-bold text-slate-900 text-[11px] leading-snug break-words",children:v.name}),e.jsx("div",{className:"text-[9px] text-slate-500",children:v.code})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between pt-2 border-t border-slate-100 gap-x-2 gap-y-1 min-w-0",children:[e.jsxs("div",{className:"font-medium text-slate-900 text-[10px] whitespace-nowrap",children:[v.currentFrequency," ",v.code==="PSW"?"hrs/wk":"visits/wk"]}),e.jsxs("div",{className:"text-[9px] text-slate-500 whitespace-nowrap",children:[v.currentDuration," wks"]})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-6",children:"Bundle Summary"}),e.jsxs("div",{className:"space-y-6 mb-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3",children:h||"Selected Bundle"}),e.jsx("div",{className:"space-y-3",children:y.length>0?y.map(v=>e.jsx(j,{service:v},v.id)):e.jsx("p",{className:"text-sm text-slate-400 italic",children:"No bundle services selected."})})]}),N.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3",children:"Added Services"}),e.jsx("div",{className:"space-y-3",children:N.map(v=>e.jsx(j,{service:v},v.id))})]}),y.length===0&&N.length===0&&e.jsx("p",{className:"text-sm text-slate-400 italic text-center py-4",children:"No services selected."})]}),e.jsxs("div",{className:"pt-6 border-t border-slate-200 flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-slate-900 text-lg",children:"Total Est. Weekly Cost:"}),e.jsxs("span",{className:"font-bold text-slate-900 text-lg",children:["$",d.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-emerald-800 rounded-lg shadow-sm p-6 text-white relative overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-md font-bold",children:"Clinical Recommendation"}),e.jsx(ub,{className:"w-5 h-5 opacity-80"})]}),e.jsx("div",{className:"text-sm opacity-90 leading-relaxed mb-4 min-h-[80px]",children:c?e.jsx("span",{className:"animate-pulse",children:"Generating clinical insights..."}):o||"Recommendation: Based on the RUG classification and ADL hierarchy, consider adjusting Personal Support hours."}),e.jsx("button",{onClick:f,disabled:c,className:"w-full text-center py-2 bg-emerald-700 bg-opacity-50 hover:bg-opacity-70 rounded text-xs font-medium transition-colors border border-emerald-600",children:"Refresh AI Analysis"})]})]})},p2=({assessment:n,className:d=""})=>{var p,y,N,j,v;const[c,o]=g.useState({identification:!0,cognition:!0,adl:!0,iadl:!1,health_conditions:!0,continence:!1,mood:!1,communication:!1,diseases:!1,treatments:!1,social_supports:!1}),f=n==null?void 0:n.sections;if(!f||Object.keys(f).length===0)return e.jsxs("div",{className:`bg-slate-50 border border-slate-200 rounded-lg p-6 text-center ${d}`,children:[e.jsx(zi,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"No detailed assessment data available"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"This assessment may have been completed externally without raw item data."})]});const h=S=>{o(M=>({...M,[S]:!M[S]}))};return e.jsxs("div",{className:`space-y-4 ${d}`,children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:["Full InterRAI HC Assessment",e.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["(",Object.keys(f).length," sections)"]})]}),e.jsx(Sn,{title:"Identification",sectionId:"identification",isExpanded:c.identification,onToggle:h,children:e.jsx(b2,{data:f.identification})}),e.jsx(Sn,{title:"Cognition",sectionId:"cognition",isExpanded:c.cognition,onToggle:h,badge:((p=f.cognition)==null?void 0:p.cps_score)!==void 0?`CPS ${f.cognition.cps_score}`:null,children:e.jsx(v2,{data:f.cognition})}),e.jsx(Sn,{title:"Activities of Daily Living (ADL)",sectionId:"adl",isExpanded:c.adl,onToggle:h,badge:((y=f.adl)==null?void 0:y.adl_hierarchy_score)!==void 0?`ADL ${f.adl.adl_hierarchy_score}`:null,children:e.jsx(j2,{data:f.adl})}),e.jsx(Sn,{title:"Instrumental Activities of Daily Living (IADL)",sectionId:"iadl",isExpanded:c.iadl,onToggle:h,badge:((N=f.iadl)==null?void 0:N.iadl_difficulty_score)!==void 0?`IADL ${f.iadl.iadl_difficulty_score}`:null,children:e.jsx(y2,{data:f.iadl})}),e.jsx(Sn,{title:"Health Conditions",sectionId:"health_conditions",isExpanded:c.health_conditions,onToggle:h,badge:((j=f.health_conditions)==null?void 0:j.chess_score)!==void 0?`CHESS ${f.health_conditions.chess_score}`:null,children:e.jsx(N2,{data:f.health_conditions})}),e.jsx(Sn,{title:"Continence",sectionId:"continence",isExpanded:c.continence,onToggle:h,children:e.jsx(_2,{data:f.continence})}),e.jsx(Sn,{title:"Mood & Behaviour",sectionId:"mood",isExpanded:c.mood,onToggle:h,badge:((v=f.mood)==null?void 0:v.depression_rating_scale)!==void 0?`DRS ${f.mood.depression_rating_scale}`:null,children:e.jsx(w2,{data:f.mood})}),e.jsx(Sn,{title:"Communication",sectionId:"communication",isExpanded:c.communication,onToggle:h,children:e.jsx(S2,{data:f.communication})}),e.jsx(Sn,{title:"Diagnoses & Conditions",sectionId:"diseases",isExpanded:c.diseases,onToggle:h,children:e.jsx(C2,{data:f.diseases})}),e.jsx(Sn,{title:"Treatments & Procedures",sectionId:"treatments",isExpanded:c.treatments,onToggle:h,children:e.jsx(A2,{data:f.treatments})}),e.jsx(Sn,{title:"Social Supports",sectionId:"social_supports",isExpanded:c.social_supports,onToggle:h,children:e.jsx(k2,{data:f.social_supports})})]})},Sn=({title:n,sectionId:d,isExpanded:c,onToggle:o,badge:f,children:h})=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>o(d),className:"w-full flex items-center justify-between p-4 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[c?e.jsx(Uf,{className:"w-5 h-5 text-slate-400"}):e.jsx(j1,{className:"w-5 h-5 text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-900",children:n})]}),f&&e.jsx("span",{className:"px-2 py-0.5 bg-teal-100 text-teal-700 text-xs font-medium rounded",children:f})]}),c&&e.jsx("div",{className:"p-4 pt-0 border-t border-slate-100",children:h})]}),Ka=({label:n,value:d,valueClass:c=""})=>d==null?null:e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-50 last:border-0",children:[e.jsx("span",{className:"text-sm text-slate-600",children:n}),e.jsx("span",{className:`text-sm font-medium text-slate-900 ${c}`,children:d})]}),qd=({value:n,trueLabel:d="Yes",falseLabel:c="No"})=>n?e.jsxs("span",{className:"inline-flex items-center gap-1 text-emerald-600",children:[e.jsx(eo,{className:"w-4 h-4"}),d]}):e.jsxs("span",{className:"inline-flex items-center gap-1 text-slate-400",children:[e.jsx($f,{className:"w-4 h-4"}),c]}),gb=({activities:n,title:d})=>e.jsxs("div",{className:"mt-3",children:[e.jsx("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:d}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:Object.entries(n).map(([c,o])=>{if(!o||o.value===null)return null;const f=Gd(c);return e.jsxs("div",{className:"flex justify-between p-2 bg-slate-50 rounded text-sm",children:[e.jsx("span",{className:"text-slate-600",children:f}),e.jsx("span",{className:`font-medium ${g2(o.value)}`,children:o.label||o.value})]},c)})})]}),Gd=n=>n.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" "),g2=n=>n===0?"text-emerald-600":n<=2?"text-amber-600":n<=4?"text-orange-600":"text-rose-600",b2=({data:n})=>n?e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ka,{label:"Assessment Type",value:n.assessment_type}),e.jsx(Ka,{label:"Assessment Date",value:n.assessment_date}),e.jsx(Ka,{label:"Source",value:n.source}),e.jsx(Ka,{label:"Assessor Role",value:n.assessor_role}),e.jsx(Ka,{label:"Primary Diagnosis (ICD-10)",value:n.primary_diagnosis})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"No identification data"}),v2=({data:n})=>{var d,c,o;return n?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-teal-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-teal-800",children:"CPS Score"}),e.jsx("span",{className:"text-lg font-bold text-teal-700",children:n.cps_score??"-"})]}),e.jsx("p",{className:"text-sm text-teal-600",children:n.cps_description})]}),e.jsx(Ka,{label:"Decision Making",value:(d=n.decision_making)==null?void 0:d.label}),e.jsx(Ka,{label:"Short-term Memory",value:(c=n.short_term_memory)==null?void 0:c.label}),e.jsx(Ka,{label:"Making Self Understood",value:(o=n.making_self_understood)==null?void 0:o.label})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"No cognition data"})},j2=({data:n})=>n?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-teal-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-teal-800",children:"ADL Hierarchy Score"}),e.jsx("span",{className:"text-lg font-bold text-teal-700",children:n.adl_hierarchy_score??"-"})]}),e.jsx("p",{className:"text-sm text-teal-600",children:n.adl_hierarchy_description})]}),n.activities&&e.jsx(gb,{activities:n.activities,title:"Individual ADL Activities"})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"No ADL data"}),y2=({data:n})=>n?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-slate-100 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"IADL Difficulty Score"}),e.jsx("span",{className:"text-lg font-bold text-slate-800",children:n.iadl_difficulty_score??"-"})]})}),n.activities&&e.jsx(gb,{activities:n.activities,title:"Individual IADL Activities"})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"No IADL data"}),N2=({data:n})=>{var o,f,h;if(!n)return e.jsx("p",{className:"text-sm text-slate-400",children:"No health conditions data"});const d=n.symptoms||{},c=Object.entries(d).filter(([,p])=>p);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800",children:"CHESS Score (Health Instability)"}),e.jsx("span",{className:"text-lg font-bold text-amber-700",children:n.chess_score??"-"})]})}),n.pain&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Pain"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"p-2 bg-slate-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Scale"}),e.jsx("div",{className:"font-bold",children:n.pain.pain_scale??"-"})]}),e.jsxs("div",{className:"p-2 bg-slate-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Frequency"}),e.jsx("div",{className:"text-sm font-medium",children:((o=n.pain.frequency)==null?void 0:o.label)||"-"})]}),e.jsxs("div",{className:"p-2 bg-slate-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Intensity"}),e.jsx("div",{className:"text-sm font-medium",children:((f=n.pain.intensity)==null?void 0:f.label)||"-"})]})]})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Active Symptoms"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map(([p])=>e.jsx("span",{className:"px-2 py-1 bg-rose-100 text-rose-700 text-xs rounded-full",children:Gd(p)},p))})]}),e.jsx(Ka,{label:"Fall History (Last 90 Days)",value:(h=n.falls)!=null&&h.in_last_90_days?"Yes - "+(n.falls.label||""):"No falls"}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:"Weight Loss:"}),e.jsx(qd,{value:n.weight_loss})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:"Dehydration:"}),e.jsx(qd,{value:n.dehydration})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:"Vomiting:"}),e.jsx(qd,{value:n.vomiting})]})]})]})},_2=({data:n})=>{var d,c;return n?e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ka,{label:"Bladder Continence",value:(d=n.bladder_continence)==null?void 0:d.label}),e.jsx(Ka,{label:"Bowel Continence",value:(c=n.bowel_continence)==null?void 0:c.label})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"No continence data"})},w2=({data:n})=>{if(!n)return e.jsx("p",{className:"text-sm text-slate-400",children:"No mood data"});const d=n.indicators||{},c=Object.entries(d).filter(([,o])=>o&&o.value&&o.value>0);return e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-purple-800",children:"Depression Rating Scale"}),e.jsx("span",{className:"text-lg font-bold text-purple-700",children:n.depression_rating_scale??"-"})]})}),c.length>0?e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Mood Indicators Present"}),e.jsx("div",{className:"space-y-1",children:c.map(([o,f])=>e.jsx(Ka,{label:Gd(o),value:f.label},o))})]}):e.jsx("p",{className:"text-sm text-slate-500",children:"No significant mood indicators present"})]})},S2=({data:n})=>{var d,c;return n?e.jsxs("div",{className:"space-y-1",children:[e.jsx(Ka,{label:"Hearing",value:(d=n.hearing)==null?void 0:d.label}),e.jsx(Ka,{label:"Vision",value:(c=n.vision)==null?void 0:c.label})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"No communication data"})},C2=({data:n})=>{var c;if(!n)return e.jsx("p",{className:"text-sm text-slate-400",children:"No diagnoses data"});const d=n.categories||{};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ka,{label:"Primary Diagnosis (ICD-10)",value:n.primary_diagnosis_icd10}),((c=n.secondary_diagnoses)==null?void 0:c.length)>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Secondary Diagnoses"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.secondary_diagnoses.map((o,f)=>e.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 text-xs rounded",children:o},f))})]}),Object.entries(d).map(([o,f])=>(f==null?void 0:f.length)>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:Gd(o)}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((h,p)=>e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 text-xs rounded",children:h},p))})]},o))]})},A2=({data:n})=>{if(!n)return e.jsx("p",{className:"text-sm text-slate-400",children:"No treatments data"});const d=n.extensive_services||{},c=n.clinical_treatments||{},o=n.therapy_services||{},f=Object.entries(d).filter(([,p])=>p),h=Object.entries(c).filter(([,p])=>p);return e.jsxs("div",{className:"space-y-4",children:[f.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-rose-600 uppercase mb-2",children:"Extensive Services"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map(([p])=>e.jsx("span",{className:"px-2 py-1 bg-rose-100 text-rose-700 text-xs rounded font-medium",children:Gd(p)},p))})]}),h.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Clinical Treatments"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(([p])=>e.jsx("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 text-xs rounded",children:Gd(p)},p))})]}),(o.physical_therapy_minutes>0||o.occupational_therapy_minutes>0||o.speech_language_therapy_minutes>0)&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-semibold text-slate-500 uppercase mb-2",children:"Therapy Services (Minutes/Week)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"p-2 bg-slate-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Physical Therapy"}),e.jsx("div",{className:"font-bold",children:o.physical_therapy_minutes||0})]}),e.jsxs("div",{className:"p-2 bg-slate-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Occupational Therapy"}),e.jsx("div",{className:"font-bold",children:o.occupational_therapy_minutes||0})]}),e.jsxs("div",{className:"p-2 bg-slate-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Speech-Language"}),e.jsx("div",{className:"font-bold",children:o.speech_language_therapy_minutes||0})]})]})]}),f.length===0&&h.length===0&&!o.physical_therapy_minutes&&!o.occupational_therapy_minutes&&!o.speech_language_therapy_minutes&&e.jsx("p",{className:"text-sm text-slate-500",children:"No active treatments or services"})]})},k2=({data:n})=>n?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Primary Caregiver Lives With Client"}),e.jsx(qd,{value:n.primary_caregiver_lives_with_client})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Caregiver Unable to Continue"}),e.jsx(qd,{value:n.caregiver_unable_to_continue})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Wandering Behaviour"}),e.jsx(qd,{value:n.wandering_behaviour})]})]}):e.jsx("p",{className:"text-sm text-slate-400",children:"No social supports data"}),E2=()=>{var Z,Te,ye,E,ee;const{id:n}=Bi(),d=xs(),[c,o]=g.useState(null),[f,h]=g.useState([]),[p,y]=g.useState({summary_note:null,notes:[]}),[N,j]=g.useState(null),[v,S]=g.useState({upcoming:[],history:[]}),[M,U]=g.useState(!0),[k,B]=g.useState("overview"),[A,$]=g.useState(!1),[Y,w]=g.useState(""),[D,z]=g.useState(!1),W=g.useCallback(async()=>{var V,re,Re,De,ge,ke,Oe,Rt,pt,ns;try{U(!0);const Wt=new Date,Nt=Wt.toISOString().split("T")[0],rs=new Date(Wt.getTime()+720*60*60*1e3).toISOString().split("T")[0],Mt=new Date(Wt.getTime()-2160*60*60*1e3).toISOString().split("T")[0],[is,zs,Bs,es,It,fs,Is]=await Promise.all([ue.get(`/patients/${n}`),ue.get(`/v2/patients/${n}/overview`).catch(()=>({data:{data:null}})),ue.get(`/v2/care-plans?patient_id=${n}`).catch(()=>({data:{data:[]}})),ue.get(`/v2/patients/${n}/notes`).catch(()=>({data:{data:{summary_note:null,notes:[]}}})),ue.get(`/v2/interrai/patients/${n}/status`).catch(()=>({data:{data:null}})),ue.get(`/v2/scheduling/grid?patient_id=${n}&start_date=${Nt}&end_date=${rs}`).catch(()=>({data:{data:{assignments:[]}}})),ue.get(`/v2/scheduling/grid?patient_id=${n}&start_date=${Mt}&end_date=${Nt}`).catch(()=>({data:{data:{assignments:[]}}}))]);o({...is.data.data,active_flags:((re=(V=zs.data)==null?void 0:V.data)==null?void 0:re.active_flags)||[],narrative_summary:((De=(Re=zs.data)==null?void 0:Re.data)==null?void 0:De.narrative_summary)||null}),h(Bs.data.data||Bs.data||[]),y(((ge=es.data)==null?void 0:ge.data)||{summary_note:null,notes:[]}),j(((ke=It.data)==null?void 0:ke.data)||null),S({upcoming:((Rt=(Oe=fs.data)==null?void 0:Oe.data)==null?void 0:Rt.assignments)||[],history:((ns=(pt=Is.data)==null?void 0:pt.data)==null?void 0:ns.assignments)||[]})}catch(Wt){console.error("Failed to fetch patient data:",Wt)}finally{U(!1)}},[n]),F=async()=>{if(Y.trim())try{z(!0);const V=await ue.post(`/v2/patients/${n}/notes`,{content:Y,note_type:"update"});y(re=>({...re,notes:[V.data.data,...re.notes]})),w("")}catch(V){console.error("Failed to add note:",V),alert("Failed to add note. Please try again.")}finally{z(!1)}};g.useEffect(()=>{W()},[W]);const J=V=>({1:"text-emerald-600",2:"text-emerald-500",3:"text-amber-500",4:"text-orange-500",5:"text-rose-600"})[V]||"text-slate-400",I=(V,re)=>{if(V==null)return"text-slate-400";const Re=V/re;return Re>=.7?"text-rose-600":Re>=.4?"text-amber-600":"text-emerald-600"},Q=V=>({active:"bg-emerald-100 text-emerald-800",draft:"bg-slate-100 text-slate-800",pending_approval:"bg-amber-100 text-amber-800",approved:"bg-blue-100 text-blue-800",completed:"bg-slate-100 text-slate-600",cancelled:"bg-rose-100 text-rose-800"})[V]||"bg-slate-100 text-slate-800";if(M)return e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(ta,{})});if(!c)return e.jsx("div",{className:"p-12 text-center",children:"Patient not found."});const de=[...f].sort((V,re)=>re.id-V.id),te=de.find(V=>V.status==="active"||V.status==="approved"),pe=de.filter(V=>V.id!==(te==null?void 0:te.id)),q=N==null?void 0:N.latest_assessment,ae=!!te,H=((Z=te==null?void 0:te.services)==null?void 0:Z.map(V=>({...V,currentFrequency:V.frequency||1,defaultFrequency:1,currentDuration:V.duration||12,costPerVisit:V.cost_per_visit||0})))||[],L=H.reduce((V,re)=>V+(re.costPerVisit||0)*(re.currentFrequency||0),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 pb-2 border-b border-slate-200",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:c.name}),e.jsxs("p",{className:"text-slate-500 text-sm",children:["Patient ID: ",c.id]})]}),e.jsxs(Me,{className:"bg-slate-100 hover:bg-slate-200 text-slate-700 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-100 self-start sm:self-auto flex items-center gap-2",onClick:()=>d("/patients"),children:[e.jsx(Cn,{className:"w-4 h-4"}),"Back to Patient Hub"]})]}),e.jsx("div",{className:"border-b border-slate-200",children:e.jsx("nav",{className:"-mb-px flex gap-6",children:[{id:"overview",label:"Overview"},{id:"schedule",label:"Schedule & History",badge:v.upcoming.length>0?`${v.upcoming.length} upcoming`:null},{id:"interrai",label:"InterRAI HC",badge:N!=null&&N.requires_assessment?"Action Needed":null},{id:"notes",label:"Notes / Narrative"}].map(V=>e.jsxs("button",{onClick:()=>B(V.id),className:`py-3 px-1 border-b-2 font-medium text-sm transition-colors ${k===V.id?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[V.label,V.badge&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-amber-100 text-amber-800 text-xs rounded-full",children:V.badge})]},V.id))})}),k==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(xt,{title:"Demographics",className:"lg:col-span-1",children:[e.jsxs("div",{className:"flex flex-col items-center mb-4",children:[c.photo&&c.photo!=="/assets/images/patients/default.png"?e.jsx("img",{src:c.photo,alt:c.name,className:"w-24 h-24 rounded-full mb-2 bg-gray-200 object-cover",onError:V=>{V.target.style.display="none",V.target.nextSibling.style.display="flex"}}):e.jsx("div",{className:"w-24 h-24 rounded-full mb-2 bg-gray-200 flex items-center justify-center p-2 text-center",children:e.jsx("span",{className:"text-xs font-bold text-slate-600 leading-tight",children:c.name})}),e.jsx("div",{className:"w-24 h-24 rounded-full mb-2 bg-gray-200 items-center justify-center p-2 text-center hidden",children:e.jsx("span",{className:"text-xs font-bold text-slate-600 leading-tight",children:c.name})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${c.status==="active"||c.status==="Available"?"bg-emerald-100 text-emerald-800":"bg-slate-100 text-slate-800"}`,children:c.status})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase",children:"Gender"}),e.jsx("p",{className:"font-medium",children:c.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase",children:"Date of Birth"}),e.jsx("p",{className:"font-medium",children:c.date_of_birth||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase",children:"Phone"}),e.jsx("p",{className:"font-medium",children:c.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:c.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-slate-500 uppercase",children:"Address"}),e.jsxs("p",{className:"font-medium text-sm",children:[c.address_line_1||c.address||"N/A",c.city&&`, ${c.city}`,c.postal_code&&` ${c.postal_code}`]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(xt,{title:"Current Care Plan",action:ae?e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Me,{variant:"outline",onClick:()=>$(!0),children:"View Details"}),e.jsx(Me,{variant:"link",onClick:()=>d(`/care-bundles/create/${n}`),children:"Modify Plan"})]}):null,children:ae?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 text-lg",children:te.scenario_title||te.bundle||"Care Plan"}),e.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Started: ",((Te=te.start_date)==null?void 0:Te.split("T")[0])||"N/A"]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Q(te.status)}`,children:(ye=te.status)==null?void 0:ye.replace("_"," ")})]}),te.services&&te.services.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase mb-2",children:"Active Services"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:te.services.map((V,re)=>{var Re;return e.jsx("span",{className:"px-2 py-1 bg-white border border-slate-200 rounded text-xs text-slate-700",children:V.name||((Re=V.service_type)==null?void 0:Re.name)},re)})})]})]})}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("svg",{className:"w-12 h-12 text-slate-300 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:"No active Care Plan"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Create a care bundle to activate services for this patient"}),e.jsx(Me,{className:"mt-4",onClick:()=>d(`/care-bundles/create/${n}`),children:"Create Care Bundle"})]})}),pe.length>0&&e.jsx(xt,{title:"Plan History",children:e.jsx("div",{className:"space-y-3",children:pe.map(V=>{var re,Re;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 text-sm",children:((re=V.bundle)==null?void 0:re.name)||V.bundle_name||"Care Plan"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[(Re=V.start_date)==null?void 0:Re.split("T")[0]," — ",V.status==="active"?"Present":"Ended"]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V.status==="active"?"bg-slate-200 text-slate-600":"bg-slate-100 text-slate-500"}`,children:V.status==="active"?"Revised":V.status})})]},V.id)})})}),q&&e.jsxs(xt,{title:"Clinical Snapshot",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"MAPLe"}),e.jsx("div",{className:`text-2xl font-bold ${J(q.maple_score)}`,children:q.maple_score||"-"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"CPS"}),e.jsx("div",{className:`text-2xl font-bold ${I(q.cps,6)}`,children:q.cps??"-"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"ADL"}),e.jsx("div",{className:`text-2xl font-bold ${I(q.adl_hierarchy,6)}`,children:q.adl_hierarchy??"-"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"CHESS"}),e.jsx("div",{className:`text-2xl font-bold ${I(q.chess_score,5)}`,children:q.chess_score??"-"})]})]}),e.jsx("button",{onClick:()=>B("interrai"),className:"mt-3 text-sm text-teal-600 hover:text-teal-700 font-medium",children:"View full InterRAI assessment →"})]}),e.jsx(xt,{title:"Clinical Flags",children:c.active_flags&&c.active_flags.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:c.active_flags.map((V,re)=>e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${V.severity==="danger"?"bg-rose-100 text-rose-800":V.severity==="warning"?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"}`,children:V.label},re))}):e.jsx("p",{className:"text-slate-500 text-sm",children:"No major risk flags identified."})})]})]}),k==="schedule"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(xt,{title:"Upcoming Appointments",children:v.upcoming.length>0?e.jsxs("div",{className:"space-y-3",children:[v.upcoming.slice(0,10).map((V,re)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-teal-100 rounded-lg",children:e.jsx(Id,{className:"w-5 h-5 text-teal-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:V.service_type_name||"Service Visit"}),e.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2 mt-1",children:[e.jsx(Di,{className:"w-4 h-4"}),V.date," at ",V.start_time||"TBD",V.duration_minutes&&` (${V.duration_minutes} min)`]}),V.staff_name&&e.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:["Provider: ",V.staff_name]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${V.status==="completed"?"bg-emerald-100 text-emerald-700":V.status==="planned"?"bg-blue-100 text-blue-700":V.status==="cancelled"?"bg-slate-100 text-slate-600":"bg-amber-100 text-amber-700"}`,children:V.status||"scheduled"})})]},V.id||re)),v.upcoming.length>10&&e.jsxs("div",{className:"text-center text-sm text-slate-500 pt-2",children:["+",v.upcoming.length-10," more appointments"]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Id,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"No upcoming appointments"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Appointments will appear here once scheduled"}),e.jsx(Me,{variant:"outline",className:"mt-4",onClick:()=>d(`/spo/scheduling?patient_id=${n}`),children:"View Schedule"})]})}),e.jsx(xt,{title:"Service History (Last 90 Days)",children:v.history.length>0?e.jsxs("div",{className:"space-y-3",children:[v.history.slice(0,20).map((V,re)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-1.5 rounded ${V.status==="completed"?"bg-emerald-100":V.status==="missed"?"bg-rose-100":"bg-slate-100"}`,children:V.status==="completed"?e.jsx(Tf,{className:"w-4 h-4 text-emerald-600"}):e.jsx(Di,{className:"w-4 h-4 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-800 text-sm",children:V.service_type_name||"Service Visit"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[V.date," • ",V.staff_name||"Unassigned"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[V.verification_status&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded font-medium ${V.verification_status==="VERIFIED"?"bg-emerald-100 text-emerald-700":V.verification_status==="MISSED"?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"}`,children:V.verification_status.toLowerCase()}),e.jsx("span",{className:`px-2 py-0.5 text-xs rounded font-medium ${V.status==="completed"?"bg-emerald-100 text-emerald-700":V.status==="cancelled"?"bg-slate-100 text-slate-600":V.status==="missed"?"bg-rose-100 text-rose-700":"bg-blue-100 text-blue-700"}`,children:V.status})]})]},V.id||re)),v.history.length>20&&e.jsxs("div",{className:"text-center text-sm text-slate-500 pt-2",children:["Showing 20 of ",v.history.length," visits"]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(Di,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"No service history available"})]})})]}),k==="notes"&&e.jsxs("div",{className:"space-y-6",children:[p.summary_note&&e.jsx(xt,{title:"Narrative Summary",children:e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx(og,{className:"w-5 h-5 text-teal-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-slate-500 uppercase",children:"Summary at Intake"}),e.jsx("span",{className:"text-xs text-slate-400",children:p.summary_note.created_at_formatted})]}),e.jsx("p",{className:"text-slate-700 whitespace-pre-wrap leading-relaxed",children:p.summary_note.content}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400",children:["Source: ",p.summary_note.source]})]})]})}),e.jsx(xt,{title:"Add Note",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:Y,onChange:V=>w(V.target.value),placeholder:"Enter a new note or update...",rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400 resize-none"}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(Me,{onClick:F,disabled:D||!Y.trim(),className:"flex items-center gap-2",children:[e.jsx(t2,{className:"w-4 h-4"}),D?"Saving...":"Add Note"]})})]})}),e.jsx(xt,{title:"Notes & Updates",children:p.notes&&p.notes.length>0?e.jsx("div",{className:"space-y-4",children:p.notes.map((V,re)=>e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:V.source}),V.author_name&&e.jsxs("span",{className:"text-xs text-slate-500",children:["by ",V.author_name]})]}),e.jsx("span",{className:"text-xs text-slate-400",children:V.created_at_formatted})]}),e.jsx("p",{className:"text-slate-600 text-sm whitespace-pre-wrap",children:V.content})]},V.id||re))}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(og,{className:"w-10 h-10 text-slate-300 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"No notes or updates yet."}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add a note above to track updates for this patient."})]})})]}),k==="interrai"&&e.jsxs("div",{className:"space-y-6",children:[(N==null?void 0:N.requires_assessment)&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-amber-800",children:"InterRAI Assessment Required"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:N==null?void 0:N.message}),e.jsx(Me,{className:"mt-3",onClick:()=>d(`/interrai/assess/${n}`),children:"Complete InterRAI HC Assessment"})]})]})}),q?e.jsxs(e.Fragment,{children:[e.jsxs(xt,{title:"Current InterRAI HC Assessment",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{children:["Assessment Date: ",e.jsx("span",{className:"font-medium text-slate-700",children:(E=q.assessment_date)==null?void 0:E.split("T")[0]})]}),q.workflow_status==="completed"?e.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 text-emerald-800 text-xs rounded-full font-medium",children:"Complete"}):q.workflow_status==="in_progress"?e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 text-xs rounded-full font-medium",children:"In Progress"}):q.workflow_status==="draft"?e.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-xs rounded-full font-medium",children:"Draft"}):null,q.is_stale&&e.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 text-xs rounded-full font-medium",children:["Stale (",">","90 days)"]})]}),e.jsxs("div",{className:"text-sm",children:["Type: ",e.jsx("span",{className:"font-medium capitalize",children:q.assessment_type==="hc"?"Home Care":q.assessment_type})]})]}),q.rug_classification&&e.jsx("div",{className:"mb-4 p-3 bg-teal-50 border border-teal-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-semibold text-teal-600 uppercase",children:"RUG Classification"}),e.jsx("div",{className:"text-lg font-bold text-teal-800",children:q.rug_classification.rug_group}),e.jsx("div",{className:"text-sm text-teal-600",children:q.rug_classification.rug_category})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-xs text-teal-500",children:q.rug_classification.category_description})})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"MAPLe"}),e.jsx("div",{className:`text-3xl font-bold ${J(q.maple_score)}`,children:q.maple_score||"-"}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Priority Level"})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"CPS"}),e.jsx("div",{className:`text-3xl font-bold ${I(q.cps,6)}`,children:q.cps??"-"}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Cognitive Performance"})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"ADL"}),e.jsx("div",{className:`text-3xl font-bold ${I(q.adl_hierarchy,6)}`,children:q.adl_hierarchy??"-"}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Daily Living"})]}),e.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase mb-1",children:"CHESS"}),e.jsx("div",{className:`text-3xl font-bold ${I(q.chess_score,5)}`,children:q.chess_score??"-"}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Health Instability"})]})]})]}),q.high_risk_flags&&q.high_risk_flags.length>0&&e.jsx(xt,{title:"Risk Flags",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:q.high_risk_flags.map((V,re)=>e.jsx("span",{className:"px-3 py-1 bg-rose-100 text-rose-800 text-sm rounded-full font-medium",children:V},re))})}),q.sections&&Object.keys(q.sections).length>0&&e.jsx(xt,{children:e.jsx(p2,{assessment:q})}),e.jsx(xt,{title:"Integration Status",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"IAR Upload"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${q.iar_status==="uploaded"?"bg-emerald-100 text-emerald-800":q.iar_status==="failed"?"bg-rose-100 text-rose-800":"bg-amber-100 text-amber-800"}`,children:q.iar_status||"pending"})]})}),e.jsx("div",{className:"p-4 bg-slate-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"CHRIS Sync"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${q.chris_status==="synced"?"bg-emerald-100 text-emerald-800":q.chris_status==="failed"?"bg-rose-100 text-rose-800":"bg-amber-100 text-amber-800"}`,children:q.chris_status||"pending"})]})})]})})]}):e.jsx(xt,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("svg",{className:"w-12 h-12 text-slate-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-slate-500 font-medium",children:"No InterRAI HC Assessment"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Complete an assessment to view clinical scores"}),e.jsx(Me,{className:"mt-4",onClick:()=>d(`/interrai/assess/${n}`),children:"Start InterRAI HC Assessment"})]})})]}),A&&Iy.createPortal(e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9999] p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-100",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Care Plan Details"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[(te==null?void 0:te.scenario_title)||(te==null?void 0:te.bundle)||"Custom Bundle"," • Started ",(ee=te==null?void 0:te.start_date)==null?void 0:ee.split("T")[0]]})]}),e.jsx("button",{onClick:()=>$(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx($f,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsx(pb,{services:H,bundleName:(te==null?void 0:te.scenario_title)||(te==null?void 0:te.bundle)||(te==null?void 0:te.bundle_name),totalCost:L||(te==null?void 0:te.total_cost)||0})})]})}),document.body)]})},T2=({onPlaceSelect:n,value:d="",onChange:c,placeholder:o="Start typing an address...",disabled:f=!1,error:h=null,className:p=""})=>{const y=g.useRef(null),N=g.useRef(null),[j,v]=g.useState(!1),[S,M]=g.useState(null);g.useEffect(()=>{{console.warn("VITE_GOOGLE_MAPS_API_KEY not set. Address autocomplete disabled."),M("Google Maps API key not configured. Please enter address manually.");return}},[]),g.useEffect(()=>{if(!(!j||!y.current||N.current))try{N.current=new window.google.maps.places.Autocomplete(y.current,{componentRestrictions:{country:"ca"},fields:["formatted_address","geometry","address_components","name"],types:["address"]}),N.current.addListener("place_changed",U)}catch(Y){console.error("Error initializing Places Autocomplete:",Y),M("Error initializing address autocomplete.")}},[j]);const U=g.useCallback(()=>{if(!N.current)return;const Y=N.current.getPlace();if(!Y||!Y.geometry){console.warn("No geometry data for selected place");return}const w={formatted_address:Y.formatted_address||"",lat:Y.geometry.location.lat(),lng:Y.geometry.location.lng(),city:"",postal_code:"",street_number:"",street_name:"",province:""};if(Y.address_components)for(const D of Y.address_components){const z=D.types;z.includes("street_number")&&(w.street_number=D.long_name),z.includes("route")&&(w.street_name=D.long_name),z.includes("locality")&&(w.city=D.long_name),z.includes("administrative_area_level_1")&&(w.province=D.short_name),z.includes("postal_code")&&(w.postal_code=D.long_name)}w.address=[w.street_number,w.street_name].filter(Boolean).join(" "),n&&n(w),c&&c({target:{value:Y.formatted_address||""}})},[n,c]),k=Y=>{c&&c(Y)},B=()=>{y.current&&(y.current.value=""),c&&c({target:{value:""}}),n&&n(null)},A=h||S,$=d&&!f;return e.jsxs("div",{className:`relative ${p}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(Sp,{className:`w-5 h-5 ${A?"text-rose-400":"text-slate-400"}`})}),e.jsx("input",{ref:y,type:"text",value:d,onChange:k,placeholder:o,disabled:f,className:`
                        w-full pl-10 pr-10 py-2 border rounded-lg
                        focus:ring-2 focus:ring-teal-200 focus:border-teal-400
                        disabled:bg-slate-100 disabled:cursor-not-allowed
                        ${A?"border-rose-300":"border-slate-300"}
                    `,autoComplete:"off"}),$&&e.jsx("button",{type:"button",onClick:B,className:"absolute inset-y-0 right-0 flex items-center pr-3 text-slate-400 hover:text-slate-600",children:e.jsx($f,{className:"w-4 h-4"})})]}),A&&e.jsxs("div",{className:"mt-1 flex items-center gap-1 text-sm text-rose-600",children:[e.jsx(so,{className:"w-4 h-4"}),e.jsx("span",{children:h||S})]}),j&&!A&&!d&&e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Start typing to see address suggestions"})]})},R2=()=>{const n=xs(),[d,c]=g.useState({first_name:"",last_name:"",email:"",gender:"",date_of_birth:"",ohip:"",address:"",city:"",postal_code:"",lat:null,lng:null,add_to_queue:!0}),[o,f]=g.useState({}),[h,p]=g.useState(!1),[y,N]=g.useState(null),[j,v]=g.useState(""),S=B=>{const{name:A,value:$,type:Y,checked:w}=B.target;c(D=>({...D,[A]:Y==="checkbox"?w:$})),o[A]&&f(D=>({...D,[A]:null}))},M=B=>{if(!B){c(A=>({...A,address:"",city:"",postal_code:"",lat:null,lng:null})),v("");return}c(A=>({...A,address:B.address||B.formatted_address||"",city:B.city||"",postal_code:B.postal_code||"",lat:B.lat||null,lng:B.lng||null})),v(B.formatted_address||""),o.address&&f(A=>({...A,address:null}))},U=()=>{const B={};return d.first_name.trim()||(B.first_name="First name is required"),d.last_name.trim()||(B.last_name="Last name is required"),d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(B.email="Please enter a valid email address"):B.email="Email is required",d.gender||(B.gender="Gender is required"),f(B),Object.keys(B).length===0},k=async B=>{var A,$,Y,w;if(B.preventDefault(),N(null),!!U())try{p(!0);const D=await ue.post("/patients",{name:`${d.first_name} ${d.last_name}`,email:d.email,gender:d.gender,date_of_birth:d.date_of_birth||null,ohip:d.ohip||null,address:d.address||null,city:d.city||null,postal_code:d.postal_code||null,lat:d.lat,lng:d.lng,add_to_queue:d.add_to_queue});n(`/patients/${D.data.data.id}`)}catch(D){console.error("Failed to create patient:",D);const z=(($=(A=D.response)==null?void 0:A.data)==null?void 0:$.error)||((w=(Y=D.response)==null?void 0:Y.data)==null?void 0:w.message)||"Failed to create patient. Please try again.";N(z)}finally{p(!1)}};return e.jsx(Ja,{title:"Add New Patient",description:"Enter patient information to create a new record",actions:e.jsxs(Me,{variant:"outline",onClick:()=>n("/patients"),children:[e.jsx(Cn,{className:"w-4 h-4 mr-2"}),"Back to Patients"]}),children:e.jsx("div",{className:"max-w-2xl",children:e.jsx(xt,{children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[y&&e.jsxs("div",{className:"p-4 bg-rose-50 border border-rose-200 rounded-lg flex items-start gap-3",children:[e.jsx(so,{className:"w-5 h-5 text-rose-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-rose-800",children:"Error creating patient"}),e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:y})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"first_name",className:"block text-sm font-medium text-slate-700 mb-1",children:["First Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",id:"first_name",name:"first_name",value:d.first_name,onChange:S,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400 ${o.first_name?"border-rose-300":"border-slate-300"}`,placeholder:"Enter first name"}),o.first_name&&e.jsx("p",{className:"mt-1 text-sm text-rose-600",children:o.first_name})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"last_name",className:"block text-sm font-medium text-slate-700 mb-1",children:["Last Name ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",id:"last_name",name:"last_name",value:d.last_name,onChange:S,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400 ${o.last_name?"border-rose-300":"border-slate-300"}`,placeholder:"Enter last name"}),o.last_name&&e.jsx("p",{className:"mt-1 text-sm text-rose-600",children:o.last_name})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-1",children:["Email ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"email",id:"email",name:"email",value:d.email,onChange:S,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400 ${o.email?"border-rose-300":"border-slate-300"}`,placeholder:"patient@example.com"}),o.email&&e.jsx("p",{className:"mt-1 text-sm text-rose-600",children:o.email})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("h3",{className:"text-sm font-medium text-slate-700 mb-4 flex items-center gap-2",children:[e.jsx(Sp,{className:"w-4 h-4"}),"Home Address",e.jsx("span",{className:"text-xs font-normal text-slate-500",children:"(for care scheduling)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Search Address"}),e.jsx(T2,{value:j,onChange:B=>v(B.target.value),onPlaceSelect:M,placeholder:"Start typing address...",error:o.address})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-slate-700 mb-1",children:"Street Address"}),e.jsx("input",{type:"text",id:"address",name:"address",value:d.address,onChange:S,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400",placeholder:"Enter street address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-slate-700 mb-1",children:"City"}),e.jsx("input",{type:"text",id:"city",name:"city",value:d.city,onChange:S,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400",placeholder:"City"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postal_code",className:"block text-sm font-medium text-slate-700 mb-1",children:"Postal Code"}),e.jsx("input",{type:"text",id:"postal_code",name:"postal_code",value:d.postal_code,onChange:S,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400",placeholder:"M5G 1X8"})]})]}),d.lat&&d.lng&&e.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Coordinates: ",d.lat.toFixed(4),", ",d.lng.toFixed(4)]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"gender",className:"block text-sm font-medium text-slate-700 mb-1",children:["Gender ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{id:"gender",name:"gender",value:d.gender,onChange:S,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400 bg-white ${o.gender?"border-rose-300":"border-slate-300"}`,children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),o.gender&&e.jsx("p",{className:"mt-1 text-sm text-rose-600",children:o.gender})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date_of_birth",className:"block text-sm font-medium text-slate-700 mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",id:"date_of_birth",name:"date_of_birth",value:d.date_of_birth,onChange:S,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ohip",className:"block text-sm font-medium text-slate-700 mb-1",children:"OHIP Number"}),e.jsx("input",{type:"text",id:"ohip",name:"ohip",value:d.ohip,onChange:S,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-200 focus:border-teal-400",placeholder:"Enter OHIP number (optional)"})]}),e.jsx("div",{className:"pt-2",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"add_to_queue",checked:d.add_to_queue,onChange:S,className:"mt-1 w-4 h-4 text-teal-600 border-slate-300 rounded focus:ring-teal-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Add to Intake Queue"}),e.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"When enabled, the patient will be added to the intake queue for InterRAI HC assessment. If disabled, the patient will be created as an active patient."})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[e.jsx(Me,{type:"button",variant:"outline",onClick:()=>n("/patients"),children:"Cancel"}),e.jsxs(Me,{type:"submit",disabled:h,className:"flex items-center gap-2",children:[e.jsx(hb,{className:"w-4 h-4"}),h?"Creating...":"Create Patient"]})]})]})})})})},ao=({label:n,type:d="text",id:c,value:o,onChange:f,placeholder:h="",className:p="",...y})=>e.jsxs("div",{className:`mb-4 ${p}`,children:[n&&e.jsx("label",{htmlFor:c,className:"block mb-2 text-sm font-medium text-gray-900",children:n}),e.jsx("input",{type:d,id:c,value:o,onChange:f,placeholder:h,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",...y})]}),Jl=({label:n,id:d,value:c,onChange:o,options:f=[],placeholder:h="Select an option",className:p="",...y})=>e.jsxs("div",{className:`mb-4 ${p}`,children:[n&&e.jsx("label",{htmlFor:d,className:"block mb-2 text-sm font-medium text-gray-900",children:n}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{id:d,value:c,onChange:o,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 pr-10",...y,children:[e.jsx("option",{value:"",disabled:!0,children:h}),f.map(N=>e.jsx("option",{value:N.value,children:N.label},N.value))]}),e.jsx("div",{className:"pointer-events-none absolute top-1/2 -translate-y-1/2 right-3",children:e.jsx("svg",{className:"h-4 w-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),M2=()=>{const[n,d]=g.useState(!0),[c,o]=g.useState(!1),[f,h]=g.useState({name:"",type:"se_health",contact_name:"",contact_email:"",contact_phone:"",regions:"",capabilities:[]}),[p,y]=g.useState({}),[N,j]=g.useState(null),[v,S]=g.useState({});g.useEffect(()=>{M()},[]);const M=async()=>{try{const A=await ue.get("/organization"),$=A.data.organization,Y=A.data.capabilityOptions;y(Y),h({name:$.name||"",type:$.type||"se_health",contact_name:$.contact_name||"",contact_email:$.contact_email||"",contact_phone:$.contact_phone||"",regions:Array.isArray($.regions)?$.regions.join(`
`):$.regions||"",capabilities:$.capabilities||[]})}catch(A){console.error("Failed to fetch organization:",A)}finally{d(!1)}},U=A=>{const{name:$,value:Y}=A.target;h(w=>({...w,[$]:Y}))},k=A=>{h($=>{const Y=$.capabilities.includes(A)?$.capabilities.filter(w=>w!==A):[...$.capabilities,A];return{...$,capabilities:Y}})},B=async A=>{A.preventDefault(),o(!0),j(null),S({});try{await ue.put("/organization",f),j({type:"success",text:"Profile updated successfully."})}catch($){$.response&&$.response.status===422?S($.response.data.errors):j({type:"error",text:"Failed to update profile."})}finally{o(!1)}};return n?e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(ta,{})}):e.jsx(Ja,{title:"Organization Profile",children:e.jsxs(xt,{children:[N&&e.jsx("div",{className:`p-4 mb-4 rounded ${N.type==="success"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:N.text}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(ao,{label:"Organization Name",name:"name",value:f.name,onChange:U,error:v.name,required:!0}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"mb-1 text-sm font-medium text-gray-700",children:"Type"}),e.jsxs("select",{name:"type",value:f.type,onChange:U,className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"se_health",children:"SE Health"}),e.jsx("option",{value:"partner",children:"Partner"}),e.jsx("option",{value:"external",children:"External"})]}),v.type&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:v.type[0]})]}),e.jsx(ao,{label:"Contact Name",name:"contact_name",value:f.contact_name,onChange:U,error:v.contact_name}),e.jsx(ao,{label:"Contact Email",name:"contact_email",type:"email",value:f.contact_email,onChange:U,error:v.contact_email}),e.jsx(ao,{label:"Contact Phone",name:"contact_phone",value:f.contact_phone,onChange:U,error:v.contact_phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-sm font-medium text-gray-700",children:"Regions (One per line)"}),e.jsx("textarea",{name:"regions",rows:"4",value:f.regions,onChange:U,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}),v.regions&&e.jsx("span",{className:"text-red-500 text-sm mt-1",children:v.regions[0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:"Capabilities"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Object.entries(p).map(([A,$])=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:`cap-${A}`,checked:f.capabilities.includes(A),onChange:()=>k(A),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:`cap-${A}`,className:"ml-2 block text-sm text-gray-900",children:$})]},A))})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Me,{type:"submit",disabled:c,children:c?"Saving...":"Save Profile"})})]})]})})},xg=()=>{var S,M,U;const{id:n}=Bi(),[d,c]=g.useState(null),[o,f]=g.useState(!0),[h,p]=g.useState(!1);g.useEffect(()=>{y()},[n]);const y=async()=>{try{const k=await ue.get(`/care-assignments/${n}`);c(k.data)}catch(k){console.error("Failed to fetch assignment:",k)}finally{f(!1)}},N=async k=>{p(!0);try{const B=await ue.put(`/care-assignments/${n}`,{status:k});c(A=>({...A,status:B.data.status}))}catch(B){console.error("Failed to update status:",B),alert("Failed to update status")}finally{p(!1)}};if(o)return e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(ta,{})});if(!d)return e.jsx("div",{className:"p-12 text-center",children:"Assignment not found."});const j=((M=(S=d.patient)==null?void 0:S.user)==null?void 0:M.name)||"Unknown Patient",v=((U=d.assigned_user)==null?void 0:U.name)||"Unassigned";return e.jsx(Ja,{title:`Assignment #${d.id}`,description:`For ${j}`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 space-y-6",children:[e.jsx(xt,{title:"Details",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase",children:"Status"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${d.status==="completed"?"bg-green-100 text-green-800":d.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:d.status})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase",children:"Start Date"}),e.jsx("p",{className:"font-medium",children:d.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 uppercase",children:"Assigned Staff"}),e.jsx("p",{className:"font-medium",children:v})]})]})}),e.jsx(xt,{title:"Actions",children:e.jsxs("div",{className:"flex space-x-4",children:[d.status!=="in_progress"&&d.status!=="completed"&&e.jsx(Me,{onClick:()=>N("in_progress"),disabled:h,children:"Start Visit"}),d.status==="in_progress"&&e.jsx(Me,{onClick:()=>N("completed"),disabled:h,className:"bg-green-600 hover:bg-green-700 text-white",children:"Complete Visit"}),d.status!=="cancelled"&&d.status!=="completed"&&e.jsx(Me,{variant:"danger",onClick:()=>N("cancelled"),disabled:h,className:"bg-red-50 text-red-600 hover:bg-red-100",children:"Cancel"})]})})]}),e.jsx("div",{className:"md:col-span-1",children:e.jsx(xt,{title:"Patient Context",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"To view full clinical history and transition needs, visit the patient profile."}),d.patient_id&&e.jsx(Me,{variant:"secondary",className:"w-full justify-center",onClick:()=>window.location.href=`/patients/${d.patient_id}`,children:"View Patient Profile"})]})})})]})})},bb=({steps:n,currentStep:d,children:c,onNext:o,onBack:f,isNextDisabled:h,isSubmitting:p})=>e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between relative",children:[e.jsx("div",{className:"absolute left-0 top-1/2 transform -translate-y-1/2 w-full h-1 bg-slate-200 -z-10"}),n.map((y,N)=>{const j=N<d,v=N===d;return e.jsxs("div",{className:"flex flex-col items-center bg-slate-50 px-2",children:[e.jsx("div",{className:`
                                        w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm transition-all duration-300 border-2
                                        ${j?"bg-teal-600 border-teal-600 text-white":""}
                                        ${v?"bg-white border-teal-600 text-teal-600 shadow-md scale-110":""}
                                        ${!j&&!v?"bg-white border-slate-300 text-slate-400":""}
                                    `,children:j?e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}):N+1}),e.jsx("span",{className:`mt-2 text-xs font-semibold uppercase tracking-wide ${v?"text-teal-900":"text-slate-400"}`,children:y})]},N)})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8 min-h-[400px] relative animate-fade-in",children:c}),e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsx("button",{onClick:f,disabled:d===0,className:`
                        px-6 py-2.5 rounded-lg font-medium text-sm transition-colors
                        ${d===0?"text-slate-300 cursor-not-allowed":"text-slate-600 hover:bg-slate-100 hover:text-slate-900 bg-white border border-slate-200"}
                    `,children:"Back"}),e.jsx("button",{onClick:o,disabled:h||p,className:`
                        px-8 py-2.5 rounded-lg font-bold text-sm text-white shadow-md transition-all
                        ${h||p?"bg-slate-300 cursor-not-allowed":"bg-teal-600 hover:bg-teal-700 hover:shadow-lg transform hover:-translate-y-0.5"}
                    `,children:p?"Processing...":d===n.length-1?"Complete":"Next Step"})]})]}),O2=()=>{const[n,d]=g.useState(0),[c,o]=g.useState({patientName:"",hospital:"",urgency:"Routine",notes:""}),f=["Patient & Source","Clinical Context","Review & Submit"],h=()=>{n<f.length-1?d(y=>y+1):console.log("Submitting:",c)},p=()=>{n>0&&d(y=>y-1)};return e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"New Patient Referral"}),e.jsx("p",{className:"text-slate-500",children:"Create a new transition request for a patient."})]}),e.jsxs(bb,{steps:f,currentStep:n,onNext:h,onBack:p,children:[n===0&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg text-indigo-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-indigo-900",children:"Gemini Smart Paste"}),e.jsx("p",{className:"text-xs text-indigo-700",children:"Paste raw patient notes here to auto-fill this form."})]})]}),e.jsx("button",{className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-bold rounded shadow-sm hover:bg-indigo-700",children:"Try It"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Patient Name"}),e.jsx("input",{type:"text",className:"w-full rounded-lg border-slate-300 focus:border-teal-500 focus:ring-teal-500",placeholder:"e.g. John Doe",value:c.patientName,onChange:y=>o({...c,patientName:y.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hospital / Origin"}),e.jsxs("select",{className:"w-full rounded-lg border-slate-300 focus:border-teal-500 focus:ring-teal-500",value:c.hospital,onChange:y=>o({...c,hospital:y.target.value}),children:[e.jsx("option",{value:"",children:"Select Hospital..."}),e.jsx("option",{value:"City General",children:"City General"}),e.jsx("option",{value:"Westside Clinic",children:"Westside Clinic"})]})]})]})]}),n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Urgency Level"}),e.jsx("div",{className:"flex gap-4",children:["Routine","Urgent","Critical"].map(y=>e.jsx("button",{onClick:()=>o({...c,urgency:y}),className:`flex-1 py-3 rounded-lg border text-sm font-bold transition-all ${c.urgency===y?"border-teal-500 bg-teal-50 text-teal-700 ring-1 ring-teal-500":"border-slate-200 hover:border-slate-300 text-slate-600"}`,children:y},y))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Clinical Notes"}),e.jsx("textarea",{className:"w-full rounded-lg border-slate-300 focus:border-teal-500 focus:ring-teal-500 h-32",placeholder:"Enter relevant clinical context...",value:c.notes,onChange:y=>o({...c,notes:y.target.value})})]})]}),n===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-slate-50 p-6 rounded-lg border border-slate-200",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Summary"}),e.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-slate-500",children:"Patient"}),e.jsx("dd",{className:"mt-1 text-sm text-slate-900 font-semibold",children:c.patientName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-slate-500",children:"Origin"}),e.jsx("dd",{className:"mt-1 text-sm text-slate-900",children:c.hospital||"N/A"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-slate-500",children:"Urgency"}),e.jsx("dd",{className:"mt-1 text-sm text-slate-900",children:e.jsx("span",{className:"px-2 py-1 rounded-full bg-slate-200 text-xs font-bold",children:c.urgency})})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-50 text-yellow-800 rounded-lg text-sm",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{children:"Please verify all patient information is HIPAA compliant before submitting."})]})]})]})]})},L2=({onLoginClick:n})=>{const d=xs(),[c,o]=g.useState(!1);return e.jsxs("nav",{className:"fixed w-full z-50 glass-nav border-b border-slate-100 transition-all duration-300",id:"navbar",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-20",children:[e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>d("/"),children:[e.jsx("div",{className:"h-9 w-9 bg-teal-900 rounded-lg flex items-center justify-center text-teal-50 shadow-lg",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("span",{className:"font-bold text-xl text-teal-900 tracking-tight",children:"Connected Capacity"})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[e.jsx("a",{href:"#how-it-works",className:"text-sm font-medium text-slate-500 hover:text-teal-900 transition-colors",children:"How it Works"}),e.jsx("a",{href:"#features",className:"text-sm font-medium text-slate-500 hover:text-teal-900 transition-colors",children:"For SPOs"}),e.jsx("a",{href:"#",className:"text-sm font-medium text-slate-500 hover:text-teal-900 transition-colors",children:"Partners"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"#",className:"hidden md:block text-sm font-medium text-teal-900 hover:text-teal-700",children:"Apply to Join"}),e.jsx("button",{onClick:n,className:"bg-teal-900 hover:bg-teal-800 text-white px-6 py-2.5 rounded-full text-sm font-bold shadow-lg shadow-teal-900/20 transition-all transform hover:-translate-y-0.5",children:"Partner Login"}),e.jsx("button",{className:"md:hidden text-slate-500 hover:text-slate-700",onClick:()=>o(!c),children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})})]})]})}),c&&e.jsx("div",{className:"md:hidden bg-white border-t border-slate-100 px-4 py-4 shadow-xl",children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("a",{href:"#how-it-works",className:"text-sm font-medium text-slate-600 hover:text-teal-900",onClick:()=>o(!1),children:"How it Works"}),e.jsx("a",{href:"#features",className:"text-sm font-medium text-slate-600 hover:text-teal-900",onClick:()=>o(!1),children:"For SPOs"}),e.jsx("a",{href:"#",className:"text-sm font-medium text-slate-600 hover:text-teal-900",onClick:()=>o(!1),children:"Partners"}),e.jsx("a",{href:"#",className:"text-sm font-medium text-teal-900 font-bold",onClick:()=>o(!1),children:"Apply to Join"})]})})]})},fg=({children:n,className:d="",delay:c="0s"})=>e.jsx("div",{className:`absolute bg-white p-4 rounded-2xl shadow-xl border border-slate-100 animate-float ${d}`,style:{animationDelay:c},children:n}),D2=({onLoginClick:n})=>e.jsxs("section",{className:"relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden",children:[e.jsx("div",{className:"hero-blob bg-teal-200 w-96 h-96 rounded-full top-0 left-0 -translate-x-1/2 -translate-y-1/2"}),e.jsx("div",{className:"hero-blob bg-indigo-200 w-[500px] h-[500px] rounded-full bottom-0 right-0 translate-x-1/3 translate-y-1/3"}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{className:"max-w-2xl animate-fade-in-up",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-teal-50 border border-teal-100 text-teal-800 text-xs font-bold uppercase tracking-wider mb-6",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-teal-500 animate-pulse"}),"Now Live in Ontario West"]}),e.jsxs("h1",{className:"text-4xl lg:text-6xl font-extrabold text-slate-900 leading-tight mb-6",children:["Orchestrating ",e.jsx("br",{}),e.jsxs("span",{className:"text-teal-900 relative",children:["High-Intensity Care",e.jsx("svg",{className:"absolute w-full h-3 -bottom-1 left-0 text-teal-200 -z-10",viewBox:"0 0 200 9",fill:"currentColor",children:e.jsx("path",{d:"M2.00023 6.75C2.00023 6.75 113.001 1.75 200 6.75",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round"})})]}),"at Home."]}),e.jsx("p",{className:"text-lg text-slate-600 mb-8 leading-relaxed",children:"Seamlessly connect Hospitals, SPOs, and specialized partners to deliver hospital-level care in the community. Zero missed care. 24/7 visibility."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{onClick:n,className:"px-8 py-4 bg-teal-900 text-white rounded-xl font-bold text-lg shadow-xl shadow-teal-900/20 hover:bg-teal-800 transition-all transform hover:-translate-y-1",children:"Get Started"}),e.jsxs("button",{className:"px-8 py-4 bg-white text-slate-700 border border-slate-200 rounded-xl font-bold text-lg hover:bg-slate-50 hover:border-slate-300 transition-all flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"w-6 h-6 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Watch Demo"]})]}),e.jsxs("div",{className:"mt-10 flex items-center gap-4 text-sm text-slate-500",children:[e.jsx("span",{children:"Trusted by:"}),e.jsxs("div",{className:"flex items-center gap-4 grayscale opacity-60",children:[e.jsx("span",{className:"font-bold text-slate-800 text-lg",children:"Ontario Health"}),e.jsx("span",{className:"font-bold text-slate-800 text-lg",children:"UHN"}),e.jsx("span",{className:"font-bold text-slate-800 text-lg",children:"SE Health"})]})]})]}),e.jsxs("div",{className:"relative hidden lg:block h-[600px]",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-gradient-to-br from-teal-50 to-indigo-50 rounded-full border border-white shadow-2xl"}),e.jsxs(fg,{className:"top-20 left-10 w-64",delay:"0s",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-rose-100 flex items-center justify-center text-rose-600 font-bold",children:"JD"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-2 w-24 bg-slate-200 rounded full mb-1"}),e.jsx("div",{className:"h-2 w-16 bg-slate-100 rounded full"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs font-bold text-rose-500 bg-rose-50 px-2 py-1 rounded",children:"High Priority"}),e.jsx("span",{className:"text-xs text-slate-400",children:"Just now"})]})]}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-2xl shadow-2xl border border-slate-100 w-80 z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"Weekly Capacity"}),e.jsx("span",{className:"text-teal-600 text-xs font-bold bg-teal-50 px-2 py-1 rounded",children:"+12%"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Nursing (RN)"}),e.jsx("span",{className:"text-slate-800 font-bold",children:"85%"})]}),e.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-teal-500 h-full w-[85%]"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Personal Support"}),e.jsx("span",{className:"text-slate-800 font-bold",children:"62%"})]}),e.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-indigo-500 h-full w-[62%]"})})]})]}),e.jsx("button",{className:"w-full mt-6 bg-slate-900 text-white text-sm font-bold py-3 rounded-lg hover:bg-slate-800 transition-colors",children:"Assign Resources"})]}),e.jsx(fg,{className:"bottom-20 right-10 w-64",delay:"1.5s",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center text-emerald-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-800",children:"Referral Accepted"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Reconnect Health"})]})]})})]})]})})]}),hg=[{number:"01",title:"Referral Intake",description:"Receive HPG referrals instantly. AI extracts patient data to start the 24h service clock."},{number:"02",title:"Transition Review",description:"Assess risk factors (Dementia, Falls). Build a comprehensive Transition Needs Profile."},{number:"03",title:"Bundle Creation",description:'Select the "High Intensity" care bundle. Customize frequency and modalities.'},{number:"04",title:"Partner Assignment",description:"Dispatch work to internal staff or SSPO partners based on real-time capacity."}],z2=()=>e.jsx("section",{id:"how-it-works",className:"py-20 bg-slate-50 border-t border-slate-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center max-w-2xl mx-auto mb-16",children:[e.jsx("h2",{className:"text-sm font-bold text-teal-600 uppercase tracking-wider mb-2",children:"The Workflow"}),e.jsx("h3",{className:"text-3xl font-bold text-slate-900",children:"From Intake to Stable Care"}),e.jsx("p",{className:"text-slate-500 mt-4",children:"Our platform automates the complex coordination between Hospitals, SPOs, and Community Providers."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:hg.map((n,d)=>e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"text-6xl font-bold text-slate-200 mb-4 group-hover:text-teal-100 transition-colors",children:n.number}),e.jsx("h4",{className:"text-lg font-bold text-slate-800 mb-2",children:n.title}),e.jsx("p",{className:"text-sm text-slate-500 leading-relaxed",children:n.description}),d<hg.length-1&&e.jsx("div",{className:"hidden lg:block absolute top-8 right-0 w-full h-0.5 bg-slate-200 -z-10 translate-x-1/2"})]},n.number))})]})}),B2=[{title:"Zero Missed Care",description:"Real-time alerts ensure every patient visit is completed or triaged immediately.",icon:e.jsx("svg",{className:"w-6 h-6 text-teal-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})},{title:"Dynamic Marketplace",description:"Access a vetted network of SSPOs (Mental Health, RPM, Dementia) to fill gaps.",icon:e.jsx("svg",{className:"w-6 h-6 text-teal-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})},{title:"PHIPA Compliant",description:"Secure, role-based access control designed for Ontario's health privacy standards.",icon:e.jsx("svg",{className:"w-6 h-6 text-teal-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}],U2=()=>e.jsx("section",{id:"features",className:"py-20 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-16",children:[e.jsx("div",{className:"w-full lg:w-1/2",children:e.jsxs("div",{className:"bg-teal-50 rounded-3xl p-8 border border-teal-100 relative",children:[e.jsx("div",{className:"absolute -right-4 -top-4 bg-white p-4 rounded-xl shadow-lg border border-slate-100 max-w-xs z-10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"OH Compliance: 100%"})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 space-y-4",children:[e.jsx("div",{className:"h-4 bg-slate-100 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-slate-100 rounded w-1/2"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4",children:[e.jsx("div",{className:"h-20 bg-slate-50 rounded border border-slate-200"}),e.jsx("div",{className:"h-20 bg-slate-50 rounded border border-slate-200"}),e.jsx("div",{className:"h-20 bg-indigo-50 rounded border border-indigo-200"})]})]})]})}),e.jsxs("div",{className:"w-full lg:w-1/2",children:[e.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-6",children:"Total Visibility for SPOs."}),e.jsx("ul",{className:"space-y-4",children:B2.map((n,d)=>e.jsxs("li",{className:"flex items-start gap-3",children:[n.icon,e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800",children:n.title}),e.jsx("p",{className:"text-sm text-slate-500",children:n.description})]})]},d))})]})]})})}),H2=()=>e.jsx("footer",{className:"bg-slate-900 text-slate-400 py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"h-8 w-8 bg-teal-800 rounded-lg flex items-center justify-center text-teal-50",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("span",{className:"font-bold text-xl text-white tracking-tight",children:"Connected Capacity"})]}),e.jsx("p",{className:"text-sm max-w-xs",children:"Empowering Service Provider Organizations to deliver high-intensity care with zero friction."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-bold mb-4",children:"Platform"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"For SPOs"})}),e.jsx("li",{children:e.jsx("a",{href:"#",class:"hover:text-white transition-colors",children:"For SSPO Partners"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Security"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-bold mb-4",children:"Company"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})}),e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"})})]})]})]}),e.jsx("div",{className:"border-t border-slate-800 pt-8 text-xs text-center",children:"© 2025 Connected Capacity. All rights reserved."})]})}),$2=({isOpen:n,onClose:d})=>{const{login:c}=Br(),o=xs(),[f,h]=g.useState(""),[p,y]=g.useState(""),[N,j]=g.useState(!1),[v,S]=g.useState(""),[M,U]=g.useState(!1);if(g.useEffect(()=>{if(n)U(!0);else{const B=setTimeout(()=>U(!1),200);return()=>clearTimeout(B)}},[n]),!n&&!M)return null;const k=async B=>{var A,$,Y,w,D,z;B.preventDefault(),j(!0),S("");try{await c({email:f,password:p}),d(),o("/dashboard")}catch(W){console.error(W);const F=(($=(A=W.response)==null?void 0:A.data)==null?void 0:$.message)||((z=(D=(w=(Y=W.response)==null?void 0:Y.data)==null?void 0:w.errors)==null?void 0:D.email)==null?void 0:z[0])||W.message||"Invalid credentials. Please try again.";S(F)}finally{j(!1)}};return e.jsxs("div",{className:`fixed inset-0 z-[100] flex items-center justify-center ${n?"":"pointer-events-none"}`,children:[e.jsx("div",{className:`absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,onClick:d}),e.jsxs("div",{className:`bg-white w-full max-w-md p-8 rounded-3xl shadow-2xl relative z-10 transform transition-all duration-300 ${n?"scale-100 opacity-100":"scale-95 opacity-0"}`,children:[e.jsx("button",{onClick:d,className:"absolute top-4 right-4 text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"h-12 w-12 bg-teal-900 rounded-xl flex items-center justify-center text-teal-50 shadow-lg mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Welcome Back"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Log in to manage your care network."})]}),e.jsxs("form",{className:"space-y-4",onSubmit:k,children:[v&&e.jsx("div",{className:"p-3 rounded-lg bg-red-50 text-red-600 text-sm font-medium text-center",children:v}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Work Email"}),e.jsx("input",{type:"email",value:f,onChange:B=>h(B.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all",placeholder:"name@organization.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Password"}),e.jsx("input",{type:"password",value:p,onChange:B=>y(B.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 focus:border-teal-500 focus:ring-2 focus:ring-teal-200 outline-none transition-all",placeholder:"••••••••",required:!0})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"rounded text-teal-600 focus:ring-teal-500 border-gray-300"}),e.jsx("span",{className:"text-slate-500",children:"Remember me"})]}),e.jsx("a",{href:"#",className:"text-teal-600 font-medium hover:underline",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:N,className:"w-full bg-teal-900 hover:bg-teal-800 text-white font-bold py-3 rounded-xl shadow-lg shadow-teal-900/20 transition-transform active:scale-95 flex justify-center items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{children:"Signing in..."})]}):"Sign In"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-100 text-center",children:e.jsxs("p",{className:"text-sm text-slate-500",children:["Not a partner yet? ",e.jsx("a",{href:"#",className:"text-teal-600 font-bold hover:underline",children:"Apply for access"})]})})]})]})},F2=()=>{xs();const{user:n}=Br(),[d,c]=g.useState(!1);if(n)return e.jsx(Li,{to:"/dashboard",replace:!0});const o=()=>{c(!0)};return e.jsxs("div",{className:"bg-white text-slate-600 antialiased overflow-x-hidden",children:[e.jsx(L2,{onLoginClick:o}),e.jsx(D2,{onLoginClick:o}),e.jsx(z2,{}),e.jsx(U2,{}),e.jsx(H2,{}),e.jsx($2,{isOpen:d,onClose:()=>c(!1)})]})},q2=({title:n="Feature Under Construction"})=>e.jsxs("div",{className:"flex flex-col items-center justify-center h-[60vh] text-center p-8",children:[e.jsx("div",{className:"bg-yellow-50 rounded-full p-6 mb-4",children:e.jsx("svg",{className:"w-12 h-12 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:n}),e.jsx("p",{className:"text-slate-500 max-w-md",children:"This module is part of the Connected Capacity V2.1 Contract Build. Engineering is currently implementing this workflow."})]}),P2=({patient:n})=>{var p,y;if(!n)return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-5 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2 mb-4"}),e.jsxs("div",{className:"flex gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-200 rounded-md"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-3 bg-slate-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),e.jsx("div",{className:"h-20 bg-slate-100 rounded"})]});const d=n.rug_group,c=n.rug_category,o=n.rug_description,f=n.maple_score,h=()=>d?d.startsWith("SE")||d.startsWith("SS")?"text-rose-700 bg-rose-50 border-rose-100":d.startsWith("R")||d.startsWith("C")?"text-amber-700 bg-amber-50 border-amber-100":d.startsWith("I")||d.startsWith("B")?"text-purple-700 bg-purple-50 border-purple-100":"text-teal-700 bg-teal-50 border-teal-100":"text-slate-600 bg-slate-50 border-slate-200";return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100",children:[e.jsx("h2",{className:"text-lg font-bold mb-4 text-slate-800",children:"Patient Summary"}),e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-md bg-slate-200 flex items-center justify-center text-slate-400 text-2xl font-bold",children:(p=n.user)!=null&&p.name?n.user.name.charAt(0):"P"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Patient"}),e.jsx("p",{className:"font-semibold text-slate-900",children:((y=n.user)==null?void 0:y.name)||"Unknown"}),e.jsxs("p",{className:"text-sm text-slate-600",children:["DOB: ",n.date_of_birth||"N/A"]})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"OHIP: "}),e.jsx("span",{className:"text-slate-600",children:n.ohip||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"Condition: "}),e.jsx("span",{className:"text-slate-600 block mt-1",children:n.diagnosis||"Post-Acute Assessment pending"})]}),f&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900",children:"MAPLe Score: "}),e.jsx("span",{className:"text-slate-600",children:f})]})]})]}),e.jsxs("div",{className:`p-4 border-t ${h()}`,children:[e.jsx("p",{className:"font-semibold text-slate-900 mb-1 text-xs uppercase",children:"InterRAI HC / RUG Classification"}),d?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-baseline gap-1 flex-wrap",children:[e.jsx("span",{className:"text-2xl font-bold",children:d}),c&&e.jsxs("span",{className:"text-sm font-medium opacity-80",children:["– ",c]})]}),o&&e.jsx("p",{className:"text-sm mt-1 opacity-75",children:o})]}):e.jsx("div",{className:"text-sm italic",children:"InterRAI HC Assessment Pending"})]})]})},vf=({service:n,onUpdate:d})=>{const c=f=>{const h=Math.max(0,n.currentFrequency+f);d(n.id,"currentFrequency",h)},o=f=>{d(n.id,"currentDuration",parseInt(f.target.value,10))};return e.jsxs("div",{className:`border rounded-lg p-5 mb-4 ${n.isAutoFilled?"bg-teal-50 border-teal-200":"bg-white border-gray-200"}`,children:[n.isAutoFilled&&e.jsx("div",{className:"flex justify-end mb-2",children:e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-teal-100 text-teal-800",children:[e.jsx(z1,{className:"w-3 h-3 mr-1"}),"Auto-filled based on clinical rules"]})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`flex-shrink-0 h-10 w-auto px-2 min-w-[2.5rem] rounded flex items-center justify-center mr-4 ${n.category==="CLINICAL"?"bg-teal-100 text-teal-700":"bg-gray-100 text-gray-600"}`,children:e.jsx("span",{className:"font-bold text-sm",children:n.code})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-900",children:n.name}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:n.description})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-2 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-semibold text-slate-700 block mb-2",children:["Frequency (",n.code==="PSW"?"hours/week":"visits/week",")"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>c(-1),className:"p-2 rounded-l-md border border-slate-300 bg-slate-50 hover:bg-slate-100 text-slate-600",children:e.jsx(W1,{className:"w-4 h-4"})}),e.jsx("div",{className:"w-14 text-center border-t border-b border-slate-300 py-2 text-sm bg-white font-bold text-slate-900",children:n.currentFrequency}),e.jsx("button",{onClick:()=>c(1),className:"p-2 rounded-r-md border border-slate-300 bg-slate-50 hover:bg-slate-100 text-slate-600",children:e.jsx(xb,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-700 block mb-2",children:"Duration (weeks)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"1",max:"24",value:n.currentDuration,onChange:o,className:"flex-1 h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #2563eb 0%, #2563eb ${n.currentDuration/24*100}%, #bfdbfe ${n.currentDuration/24*100}%, #bfdbfe 100%)`}}),e.jsx("span",{className:"text-sm font-bold text-slate-900 w-8 text-center",children:n.currentDuration})]})]})]})]})]})},I2=({algorithmScores:n,triggeredCAPs:d,profileSummary:c})=>{const[o,f]=g.useState(!1),[h,p]=g.useState(null),y=Array.isArray(d)?d:[];if(!n&&y.length===0)return null;const N={personalSupport:{name:"Personal Support",abbrev:"PSA",range:[1,6],icon:L1,color:"rose",description:"Personal care support need level",interpret:k=>k<=2?{label:"Low",color:"emerald"}:k<=4?{label:"Moderate",color:"amber"}:{label:"High",color:"rose"}},rehabilitation:{name:"Rehabilitation",abbrev:"RHA",range:[1,5],icon:Zm,color:"blue",description:"Rehabilitation potential and therapy need",interpret:k=>k<=2?{label:"Maintenance",color:"slate"}:k<=3?{label:"Moderate",color:"blue"}:{label:"High",color:"emerald"}},chessCA:{name:"Health Instability",abbrev:"CHESS",range:[0,5],icon:fb,color:"purple",description:"Changes in health, end-stage disease, signs and symptoms",interpret:k=>k<=1?{label:"Stable",color:"emerald"}:k<=3?{label:"Moderate",color:"amber"}:{label:"Unstable",color:"rose"}},pain:{name:"Pain Scale",abbrev:"PAIN",range:[0,4],icon:zi,color:"amber",description:"Pain frequency and intensity",interpret:k=>k===0?{label:"None",color:"emerald"}:k<=2?{label:"Mild",color:"amber"}:{label:"Severe",color:"rose"}},distressedMood:{name:"Distressed Mood",abbrev:"DMS",range:[0,12],icon:tp,color:"indigo",description:"Depression and mood disturbance indicators",interpret:k=>k<=3?{label:"Low",color:"emerald"}:k<=7?{label:"Moderate",color:"amber"}:{label:"High",color:"rose"}},serviceUrgency:{name:"Service Urgency",abbrev:"SUA",range:[1,6],icon:zi,color:"red",description:"Urgency of service initiation",interpret:k=>k<=2?{label:"Routine",color:"slate"}:k<=4?{label:"Elevated",color:"amber"}:{label:"Urgent",color:"rose"}}},j={IMPROVE:"rose",PREVENT:"amber",FACILITATE:"blue",MAINTAIN:"slate",NOT_TRIGGERED:"slate"},v=(k,B)=>{if(B==null)return null;const A=N[k];if(!A)return null;const $=A.icon,Y=A.interpret(B);return e.jsxs("div",{className:"relative flex items-center gap-1.5 p-2 bg-white rounded-lg border border-slate-200 hover:border-slate-300 transition-colors min-w-0",onMouseEnter:()=>p(k),onMouseLeave:()=>p(null),children:[e.jsx("div",{className:`p-1.5 rounded bg-${A.color}-50 shrink-0`,children:e.jsx($,{className:`w-3.5 h-3.5 text-${A.color}-600`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-baseline gap-1 min-w-0",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-700 shrink-0",children:A.abbrev}),e.jsxs("span",{className:"text-[10px] text-slate-400 shrink-0",children:["(",B,"/",A.range[1],")"]})]}),e.jsxs("div",{className:"flex items-center gap-1 min-w-0",children:[e.jsx("div",{className:"flex-1 min-w-[20px] h-1 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-${Y.color}-500 rounded-full transition-all`,style:{width:`${B/A.range[1]*100}%`}})}),e.jsx("span",{className:`text-[8px] font-medium text-${Y.color}-600 shrink-0 whitespace-nowrap`,children:Y.label})]})]}),h===k&&e.jsxs("div",{className:"absolute z-[100] bottom-full left-0 mb-2 w-48 p-2 bg-slate-900 text-white text-xs rounded-lg shadow-lg pointer-events-none",children:[e.jsx("div",{className:"font-semibold mb-1",children:A.name}),e.jsx("div",{className:"text-slate-300",children:A.description}),e.jsxs("div",{className:"mt-1 pt-1 border-t border-slate-700",children:["Score: ",B," of ",A.range[1]," (",Y.label,")"]}),e.jsx("div",{className:"absolute left-4 bottom-0 transform translate-y-1/2 rotate-45 w-2 h-2 bg-slate-900"})]})]},k)},S=k=>{const B=k.level||"NOT_TRIGGERED",A=j[B]||"slate";return e.jsxs("div",{className:`p-2 rounded-lg border bg-${A}-50 border-${A}-200 overflow-hidden min-w-0`,children:[e.jsxs("div",{className:"flex items-center justify-between gap-1 min-w-0",children:[e.jsx("span",{className:`text-xs font-semibold text-${A}-700 truncate min-w-0 flex-1`,children:k.name}),e.jsx("span",{className:`px-1.5 py-0.5 text-[9px] font-bold rounded bg-${A}-100 text-${A}-700 shrink-0`,children:B})]}),k.description&&e.jsx("p",{className:`mt-1 text-[10px] text-${A}-600 leading-tight line-clamp-2`,children:k.description})]},k.name)},M=n?Object.entries(n).filter(([k,B])=>B!=null&&N[k]).length:0,U=y.filter(k=>k.level!=="NOT_TRIGGERED").length;return e.jsxs("div",{className:"mt-4 bg-gradient-to-br from-slate-50 to-white rounded-xl border border-slate-200",children:[e.jsxs("button",{onClick:()=>f(!o),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:e.jsx(tp,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-800",children:"Clinical Insights"}),e.jsxs("p",{className:"text-[10px] text-slate-500",children:[M," algorithm scores • ",U," active CAPs"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[U>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-rose-100 text-rose-700 text-[10px] font-semibold rounded-full",children:[U," Intervention",U>1?"s":""]}),o?e.jsx(Ef,{className:"w-4 h-4 text-slate-400"}):e.jsx(Uf,{className:"w-4 h-4 text-slate-400"})]})]}),o&&e.jsxs("div",{className:"px-4 pb-4 space-y-4",children:[n&&Object.keys(n).some(k=>n[k]!==null)&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Zm,{className:"w-3.5 h-3.5 text-slate-400"}),e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Algorithm Scores"}),e.jsx(C1,{className:"w-3 h-3 text-slate-300 cursor-help",title:"Derived from InterRAI Contact Assessment algorithms"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-1.5 min-w-0",style:{gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))"},children:Object.entries(n).map(([k,B])=>v(k,B))})]}),y.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(zi,{className:"w-3.5 h-3.5 text-slate-400"}),e.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Clinical Assessment Protocols"})]}),e.jsx("div",{className:"space-y-2",children:y.map(k=>S(k))})]}),(c==null?void 0:c.has_bmhs)&&e.jsxs("div",{className:"p-2 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tp,{className:"w-3.5 h-3.5 text-indigo-600"}),e.jsx("span",{className:"text-xs font-semibold text-indigo-700",children:"Mental Health Screen Available"})]}),c.self_harm_risk_level>0&&e.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] text-indigo-600",children:"Self-Harm Risk:"}),e.jsxs("span",{className:`px-1.5 py-0.5 text-[9px] font-bold rounded ${c.self_harm_risk_level>=2?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"}`,children:["Level ",c.self_harm_risk_level]})]}),c.violence_risk_level>0&&e.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[e.jsx("span",{className:"text-[10px] text-indigo-600",children:"Violence Risk:"}),e.jsxs("span",{className:`px-1.5 py-0.5 text-[9px] font-bold rounded ${c.violence_risk_level>=2?"bg-rose-100 text-rose-700":"bg-amber-100 text-amber-700"}`,children:["Level ",c.violence_risk_level]})]})]})]})]})},G2=({isOpen:n,onClose:d,explanation:c,loading:o,scenarioTitle:f,error:h})=>{if(!n)return null;const p={"High Confidence":"emerald","High Confidence - Full HC Assessment":"emerald","Medium Confidence":"amber","Medium Confidence - CA Assessment":"amber","Low Confidence":"rose","Low Confidence - Limited Data":"rose"},y=M=>{for(const[U,k]of Object.entries(p))if(M!=null&&M.includes(U.split(" - ")[0]))return k;return"slate"},N={vertex_ai:{label:"AI Generated",icon:dg,color:"purple"},rules_based:{label:"Rules-Based",icon:ub,color:"blue"}},j=N[c==null?void 0:c.source]||N.rules_based,v=j.icon,S=y(c==null?void 0:c.confidence_label);return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:d}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative w-full max-w-lg transform overflow-hidden rounded-2xl bg-white shadow-2xl transition-all",children:[e.jsxs("div",{className:"relative px-6 py-4 bg-gradient-to-r from-teal-600 to-teal-700",children:[e.jsx("button",{onClick:d,className:"absolute right-4 top-4 p-1.5 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx($f,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(dg,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Bundle Explanation"}),e.jsx("p",{className:"text-sm text-teal-100",children:f||"Selected Scenario"})]})]})]}),e.jsxs("div",{className:"px-6 py-5",children:[o&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Sf,{className:"w-8 h-8 text-teal-600 animate-spin mb-3"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Generating explanation..."})]}),h&&!o&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-rose-50 rounded-lg border border-rose-200",children:[e.jsx(zi,{className:"w-5 h-5 text-rose-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-rose-800",children:"Unable to generate explanation"}),e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:h})]})]}),c&&!o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-${j.color}-100 text-${j.color}-700`,children:[e.jsx(v,{className:"w-3.5 h-3.5"}),j.label]}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-${S}-100 text-${S}-700`,children:[e.jsx(mb,{className:"w-3.5 h-3.5"}),c.confidence_label]})]}),e.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:c.short_explanation})}),c.detailed_points&&c.detailed_points.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2",children:"Key Factors"}),e.jsx("ul",{className:"space-y-2",children:c.detailed_points.map((M,U)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Xm,{className:"w-4 h-4 text-teal-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-slate-600",children:M})]},U))})]}),c.response_time_ms>0&&e.jsxs("p",{className:"text-[10px] text-slate-400 text-right",children:["Generated in ",c.response_time_ms,"ms"]})]})]}),e.jsx("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex justify-end",children:e.jsx("button",{onClick:d,className:"px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-700 text-sm font-medium rounded-lg transition-colors",children:"Close"})})]})})]})},V2=(n={})=>{const{activeOnly:d=!0,category:c=null}=n,[o,f]=g.useState([]),[h,p]=g.useState({}),[y,N]=g.useState([]),[j,v]=g.useState(!0),[S,M]=g.useState(null),U=g.useCallback(async()=>{var k,B;try{v(!0),M(null);const A=new URLSearchParams;d&&A.append("active","true"),c&&A.append("category",c);const[$,Y]=await Promise.all([ue.get(`/v2/service-types?${A}`),ue.get("/v2/service-types/categories")]);console.log("API Params:",A.toString()),console.log("Raw API Response:",$.data),console.log("Raw API Data Length:",(B=(k=$.data)==null?void 0:k.data)==null?void 0:B.length);const w=($.data.data||[]).map(z=>(z.id<5&&console.log("Mapping service type:",z),{id:String(z.id),category:Y2(z.category||z.category_code),name:z.name,code:z.code,description:z.description||"",defaultFrequency:z.default_frequency||1,defaultDuration:z.default_duration_weeks||12,currentFrequency:0,currentDuration:z.default_duration_weeks||12,provider:"",costPerVisit:z.cost_per_visit||0,costCode:z.cost_code||`COST-${z.code}`,costDriver:z.cost_driver||"Per Visit Rate",_api:z}));console.log("Transformed Service Types:",w),f(w);const D=w.reduce((z,W)=>{const F=W.category;return z[F]||(z[F]=[]),z[F].push(W),z},{});p(D),N(Y.data.data||[])}catch(A){console.error("Failed to fetch service types:",A),A.response&&(console.error("Response data:",A.response.data),console.error("Response status:",A.response.status)),M(A.message||"Failed to load service types"),f([]),p({}),N([])}finally{v(!1)}},[d,c]);return g.useEffect(()=>{U()},[U]),{serviceTypes:o,byCategory:h,categories:y,loading:j,error:S,refetch:U}};function Y2(n){if(!n)return"CLINICAL";const d=String(n).trim();return{"Clinical Services":"CLINICAL","Personal Support & Daily Living":"PERSONAL_SUPPORT","Safety, Monitoring & Technology":"SAFETY_TECH","Logistics & Access Services":"LOGISTICS",CLINICAL:"CLINICAL",PERSONAL:"PERSONAL_SUPPORT",SAFETY:"SAFETY_TECH",LOGISTICS:"LOGISTICS",PERSONAL_SUPPORT:"PERSONAL_SUPPORT",SAFETY_TECH:"SAFETY_TECH"}[d]||"CLINICAL"}const Oi={async getBundles(n){return(await ue.get(`/v2/care-builder/${n}/rug-bundles`)).data},async getLegacyBundles(n){return(await ue.get(`/v2/care-builder/${n}/bundles`)).data},async getBundle(n,d){return(await ue.get(`/v2/care-builder/${n}/bundles/${d}`)).data},async previewBundle(n,d,c=null){return(await ue.post(`/v2/care-builder/${n}/bundles/preview`,{bundle_id:d,services:c})).data},async buildPlan(n,d,c,o=null,f=null){return(await ue.post(`/v2/care-builder/${n}/rug-plans`,{template_id:d,services:c,notes:o,scenario:f||void 0})).data},async buildLegacyPlan(n,d,c,o=null){return(await ue.post(`/v2/care-builder/${n}/plans`,{bundle_id:d,services:c,notes:o})).data},async publishPlan(n,d){return(await ue.post(`/v2/care-builder/${n}/plans/${d}/publish`)).data},async getPlanHistory(n){return(await ue.get(`/v2/care-builder/${n}/plans`)).data},formatServicesForApi(n){return n.filter(d=>(d.currentFrequency||0)>0).map(d=>({service_type_id:parseInt(d.service_type_id||d.id),currentFrequency:d.currentFrequency,currentDuration:d.currentDuration,provider_id:d.provider_id||null,notes:d.notes||null}))},calculateTotalCost(n){return n.reduce((d,c)=>{const o=c.currentFrequency||0,f=c.currentDuration||0,h=c.costPerVisit||0;return d+o*f*h},0)},calculateMonthlyCost(n){return n.reduce((d,c)=>{const o=c.currentFrequency||0,f=c.costPerVisit||0;return d+o*4*f},0)}};function W2(){const[n,d]=g.useState(null),[c,o]=g.useState([]),[f,h]=g.useState([]),[p,y]=g.useState(null),[N,j]=g.useState(!1),[v,S]=g.useState(null),[M,U]=g.useState(null),[k,B]=g.useState(null),[A,$]=g.useState([]),[Y,w]=g.useState(null),[D,z]=g.useState(!1),W=g.useCallback(async(H,L={})=>{var Z,Te;j(!0),S(null);try{const ye=new URLSearchParams;L.forceRefresh&&ye.append("force_refresh","true"),L.includeReferral!==void 0&&ye.append("include_referral",L.includeReferral?"true":"false");const E=await Pt.get(`/api/v2/bundle-engine/profile/${H}?${ye.toString()}`);if(E.data.success)return d(E.data.data.profile),E.data.data;throw new Error(E.data.error||"Failed to build profile")}catch(ye){const E=((Te=(Z=ye.response)==null?void 0:Z.data)==null?void 0:Te.error)||ye.message||"Failed to build profile";throw S(E),ye}finally{j(!1)}},[]),F=g.useCallback(async(H,L={})=>{var Z,Te;j(!0),S(null);try{const ye=new URLSearchParams;L.maxAxes&&ye.append("max_axes",L.maxAxes),L.detailed&&ye.append("detailed","true");const E=await Pt.get(`/api/v2/bundle-engine/axes/${H}?${ye.toString()}`);if(E.data.success){const ee=E.data.data.applicable_axes||E.data.data.evaluation||[];return o(ee),ee}else throw new Error(E.data.error||"Failed to get axes")}catch(ye){const E=((Te=(Z=ye.response)==null?void 0:Z.data)==null?void 0:Te.error)||ye.message||"Failed to get axes";throw S(E),ye}finally{j(!1)}},[]),J=g.useCallback(async(H,L={})=>{var Z,Te;j(!0),S(null);try{const ye=new URLSearchParams;L.minScenarios&&ye.append("min_scenarios",L.minScenarios),L.maxScenarios&&ye.append("max_scenarios",L.maxScenarios),L.includeBalanced!==void 0&&ye.append("include_balanced",L.includeBalanced?"true":"false"),L.referenceCap&&ye.append("reference_cap",L.referenceCap);const E=await Pt.get(`/api/v2/bundle-engine/scenarios/${H}?${ye.toString()}`);if(E.data.success){if(h(E.data.data.scenarios),U(E.data.data.profile_summary),E.data.data.profile_summary){const V=E.data.data.profile_summary;B({personalSupport:V.personal_support_score,rehabilitation:V.rehabilitation_score,chessCA:V.chess_ca_score,pain:V.pain_score,distressedMood:V.distressed_mood_score,serviceUrgency:V.service_urgency_score}),$(V.triggered_caps||[])}const ee=E.data.data.scenarios.find(V=>{var re;return(re=V.meta)==null?void 0:re.is_recommended});return ee&&y(ee),E.data.data}else throw new Error(E.data.error||"Failed to generate scenarios")}catch(ye){const E=((Te=(Z=ye.response)==null?void 0:Z.data)==null?void 0:Te.error)||ye.message||"Failed to generate scenarios";throw S(E),ye}finally{j(!1)}},[]),I=g.useCallback(async(H,L,Z=!0)=>{var Te,ye;z(!0),w(null);try{const E=await Pt.post("/api/v2/bundle-engine/explain",{patient_id:H,scenario_index:L,with_alternatives:Z});if(E.data.success)return w(E.data.data.explanation),E.data.data;throw new Error(E.data.error||"Failed to get explanation")}catch(E){const ee=((ye=(Te=E.response)==null?void 0:Te.data)==null?void 0:ye.error)||E.message||"Failed to get explanation";throw console.error("Explanation error:",ee),E}finally{z(!1)}},[]),Q=g.useCallback(async H=>{try{return(await Pt.get(`/api/v2/bundle-engine/data-sources/${H}`)).data.data}catch(L){return console.error("Failed to get data sources:",L),null}},[]),de=g.useCallback(async(H,L,Z)=>{var Te,ye;try{const E=await Pt.post("/api/v2/bundle-engine/compare",{patient_id:H,scenario_id_1:L,scenario_id_2:Z});if(E.data.success)return E.data.data.comparison;throw new Error(E.data.error||"Failed to compare scenarios")}catch(E){const ee=((ye=(Te=E.response)==null?void 0:Te.data)==null?void 0:ye.error)||E.message||"Failed to compare scenarios";throw S(ee),E}},[]),te=g.useCallback(async H=>{try{await Pt.post(`/api/v2/bundle-engine/invalidate-cache/${H}`),d(null),h([]),y(null)}catch(L){console.error("Failed to invalidate cache:",L)}},[]),pe=g.useCallback(H=>{y(H)},[]),q=g.useCallback(()=>{w(null)},[]),ae=g.useCallback(()=>{d(null),o([]),h([]),y(null),S(null),U(null),B(null),$([]),w(null)},[]);return{profile:n,axes:c,scenarios:f,selectedScenario:p,loading:N,error:v,profileSummary:M,algorithmScores:k,triggeredCAPs:A,explanation:Y,explanationLoading:D,buildProfile:W,getAxes:F,generateScenarios:J,getDataSources:Q,compareScenarios:de,invalidateCache:te,selectScenario:pe,reset:ae,getExplanation:I,clearExplanation:q}}const Q2=()=>{var Gs,Vs,sa,He,ht,gt,cs,Ct,Hs,xa,ia;const{patientId:n}=Bi(),d=xs(),[c,o]=g.useState(1),[f,h]=g.useState(null),[p,y]=g.useState(!0),[N,j]=g.useState(!1),[v,S]=g.useState(null),[M,U]=g.useState(null),[k,B]=g.useState(!1),{serviceTypes:A,loading:$,error:Y}=V2(),w=W2(),[D,z]=g.useState([]),[W,F]=g.useState(null),[J,I]=g.useState(null),[Q,de]=g.useState(null),[te,pe]=g.useState(!1),[q,ae]=g.useState([]),[H,L]=g.useState("CLINICAL"),[Z,Te]=g.useState(null),[ye,E]=g.useState(!1),[ee,V]=g.useState(12),[re,Re]=g.useState(!1),[De,ge]=g.useState(!1),[ke,Oe]=g.useState(null),[Rt,pt]=g.useState(null);g.useEffect(()=>{var je;if(!p&&A.length>0&&q.length===0)if(console.log("Initializing services with selected bundle:",W==null?void 0:W.name,"isModifying:",k),k&&((je=M==null?void 0:M.services)==null?void 0:je.length)>0){console.log("Loading existing care plan services for modification:",M.services);const Ae=A.map(Be=>{const qe=M.services.find(we=>String(we.service_type_id)===String(Be.id)||we.code&&Be.code&&we.code===Be.code||we.name&&Be.name&&we.name.toLowerCase()===Be.name.toLowerCase()),et=!!qe,Ye=et?qe.frequency||1:0,ot=et&&qe.duration||12;return{...Be,is_core:et,currentFrequency:Ye,currentDuration:ot,defaultFrequency:et?Math.max(Ye,1):0,originalFrequency:Ye,originalDuration:ot,originalCost:et&&(qe.cost_per_visit||Be.costPerVisit)||0}});ae(Ae)}else if(W){const Ae=A.map(Be=>{var Ye,ot,we,Ge;const qe=(Ye=W.services)==null?void 0:Ye.find($e=>$e.id==Be.id||$e.code&&Be.code&&$e.code===Be.code||$e.name&&Be.name&&$e.name===Be.name),et=!!qe;return{...Be,is_core:et,currentFrequency:et?((ot=qe.pivot)==null?void 0:ot.frequency)||qe.frequency||qe.currentFrequency||1:0,currentDuration:et&&(((we=qe.pivot)==null?void 0:we.duration)||qe.duration||qe.currentDuration)||12,defaultFrequency:et?((Ge=qe.pivot)==null?void 0:Ge.frequency)||qe.frequency||qe.currentFrequency||1:0,originalFrequency:0,originalDuration:0,originalCost:0}});ae(Ae)}else ae(A.map(Ae=>({...Ae,is_core:!1,currentFrequency:0,currentDuration:12,defaultFrequency:0,originalFrequency:0,originalDuration:0,originalCost:0})))},[p,A,W,q.length,k,M]);const[ns,Wt]=g.useState(!1),[Nt,rs]=g.useState(null);g.useEffect(()=>{Mt()},[n]),g.useEffect(()=>{n&&!te&&!w.loading&&w.generateScenarios(n).then(()=>{pe(!0)}).catch(je=>{console.error("Failed to load AI scenarios:",je),pe(!0)})},[n,te,w.loading]),g.useEffect(()=>{if(te&&A.length>0&&w.scenarios.length>0&&!Q){const je=w.scenarios.find(Ae=>{var Be;return(Be=Ae.meta)==null?void 0:Be.is_recommended})||w.scenarios[0];is(je,!1)}},[te,A,w.scenarios,Q]);const Mt=async()=>{var je;try{y(!0);const[Ae,Be]=await Promise.all([ue.get(`/patients/${n}`).catch(Ye=>(console.error("Patient fetch failed",Ye),{data:{data:null}})),ue.get(`/v2/care-plans?patient_id=${n}`).catch(Ye=>(console.warn("Care plans fetch failed",Ye),{data:{data:[]}}))]);Ae.data.data?h(Ae.data.data):console.error("Critical: Patient data missing");const et=(((je=Be.data)==null?void 0:je.data)||Be.data||[]).find(Ye=>Ye.status==="active"||Ye.status==="approved");et&&(U(et),B(!0),console.log("Found existing care plan to modify:",et));try{const Ye=await Oi.getBundles(n),ot=Ye.data||[];if(z(ot),Ye.recommended_bundle){I(Ye.recommended_bundle);const we=ot.find(Ge=>Ge.id===Ye.recommended_bundle.id);we&&(F(we),we.services)}else ot.length>0&&F(ot[0])}catch(Ye){console.error("Bundle builder API failed, falling back to template API",Ye);const ot=await ue.get("/v2/bundle-templates").catch(()=>({data:[]})),we=Ae.data.data,Ge=(ot.data||[]).map($e=>({...$e,colorTheme:$e.rug_category==="Special Rehabilitation"?"amber":$e.rug_category==="Impaired Cognition"||$e.rug_category==="Behaviour Problems"?"purple":$e.rug_category==="Extensive Services"||$e.rug_category==="Special Care"?"rose":$e.rug_category==="Clinically Complex"?"green":"teal",band:$e.rug_category||$e.category||"RUG-Based",price:$e.price||$e.estimatedMonthlyCost||1200,services:A.length>0?A:q}));if(z(Ge),we!=null&&we.rug_group){const $e=we.rug_group,Dt=Ge.find(Qt=>{var At,zt;return((At=Qt.code)==null?void 0:At.includes($e))||((zt=Qt.rug_groups)==null?void 0:zt.includes($e))});F(Dt||Ge[0])}else F(Ge[0])}}catch(Ae){console.error("Failed to fetch wizard data",Ae)}finally{y(!1)}},is=(je,Ae=!0)=>{var Ye,ot,we,Ge,$e,Dt,Qt;de(je);const Be=je.services||[],qe=A.map(At=>{var _t,at,Tt;const zt=Be.find(vs=>vs.service_module_id==At.id||vs.service_code&&At.code&&vs.service_code===At.code||vs.service_name&&At.name&&vs.service_name.toLowerCase().includes(At.name.toLowerCase().split(" ")[0])),he=!!zt,Ie=he?((_t=zt.frequency)==null?void 0:_t.count)||zt.frequencyCount||1:0,Xe=he?((at=zt.duration)==null?void 0:at.minutes)||zt.durationMinutes||60:0,dt=he&&(((Tt=zt.cost)==null?void 0:Tt.per_visit)||zt.costPerVisit||At.costPerVisit)||0;return{...At,is_core:he,currentFrequency:Ie,currentDuration:12,defaultFrequency:Ie,originalFrequency:0,originalDuration:0,originalCost:dt,durationMinutes:Xe,costPerVisit:dt}});ae(qe);const et=((Ye=je.label)==null?void 0:Ye.title)||((we=(ot=je.axis)==null?void 0:ot.primary)==null?void 0:we.label)||"AI Scenario";F({id:je.scenario_id,name:et,description:((Ge=je.label)==null?void 0:Ge.description)||"",colorTheme:"teal",band:((Dt=($e=je.axis)==null?void 0:$e.primary)==null?void 0:Dt.label)||"AI-Generated",price:((Qt=je.cost)==null?void 0:Qt.weekly_estimate)||0,services:je.services||[],isAiGenerated:!0}),Ae&&o(2)},zs=je=>{F(je),de(null);const Ae=A.map(Be=>{var Ye,ot,we,Ge;const qe=(Ye=je.services)==null?void 0:Ye.find($e=>$e.id==Be.id||$e.code&&Be.code&&$e.code===Be.code||$e.name&&Be.name&&$e.name===Be.name),et=!!qe;return{...Be,is_core:et,currentFrequency:et?((ot=qe.pivot)==null?void 0:ot.frequency)||qe.frequency||qe.currentFrequency||1:0,currentDuration:et&&(((we=qe.pivot)==null?void 0:we.duration)||qe.duration||qe.currentDuration)||12,defaultFrequency:et?((Ge=qe.pivot)==null?void 0:Ge.frequency)||qe.frequency||qe.currentFrequency||1:0}});ae(Ae),V(12),Re(!1),c===1&&o(2)},Bs=async(je,Ae)=>{Oe(je),ge(!0),pt(null);try{await w.getExplanation(n,Ae,!0)}catch(Be){pt(Be.message||"Failed to generate explanation")}},es=(je,Ae,Be)=>{ae(qe=>qe.map(et=>et.id===je?{...et,[Ae]:Be}:et))},It=je=>{const Ae=parseInt(je.target.value);V(Ae),ae(Be=>Be.map(qe=>({...qe,currentDuration:Ae})))};q.reduce((je,Ae)=>je+Ae.costPerVisit*Ae.currentFrequency*Ae.currentDuration,0);const fs=q.reduce((je,Ae)=>je+Ae.costPerVisit*Ae.currentFrequency,0),Is=Oi.calculateMonthlyCost(q),os=async()=>{E(!0),setTimeout(()=>{Te("Recommendation: Based on the patient's InterRAI HC assessment and RUG classification, the bundle engine has auto-configured services. Consider reviewing Personal Support hours based on ADL hierarchy score."),E(!1)},1500)},Qs=async()=>{var je,Ae,Be,qe,et,Ye;if(W){if(W.id==="custom"){alert("Custom bundles are not yet supported. Please select a pre-configured bundle.");return}try{j(!0);const ot=Oi.formatServicesForApi(q);console.log("Building plan with:",{patientId:n,bundleId:W.id,services:ot});const we=await Oi.buildPlan(n,W.id,ot);S(we.data.id),S(we.data.id),o(4)}catch(ot){console.error("Failed to build care plan",ot);const we=((Ae=(je=ot.response)==null?void 0:je.data)==null?void 0:Ae.error)||((qe=(Be=ot.response)==null?void 0:Be.data)==null?void 0:qe.message)||"Unknown error",Ge=(Ye=(et=ot.response)==null?void 0:et.data)==null?void 0:Ye.errors;alert(Ge?`Failed to create care plan:
${JSON.stringify(Ge,null,2)}`:`Failed to create care plan: ${we}`)}finally{j(!1)}}},Us=async()=>{var je,Ae,Be,qe,et;if(v)try{j(!0);const Ye=await Oi.publishPlan(n,v);Wt(!0),rs(Ye.message),setTimeout(()=>{d(`/patients/${n}`)},2e3)}catch(Ye){console.error("Failed to publish plan",Ye),alert("Failed to publish plan. Please try again.")}finally{j(!1)}else try{j(!0);const Ye=Oi.formatServicesForApi(q),ot=Q?{scenario_id:Q.scenario_id,title:((je=Q.label)==null?void 0:je.title)||((Be=(Ae=Q.axis)==null?void 0:Ae.primary)==null?void 0:Be.label)||"AI Bundle",axis:((et=(qe=Q.axis)==null?void 0:qe.primary)==null?void 0:et.value)||Q.primary_axis,source:Q.source||"bundle_engine_v2.3"}:null,we=await Oi.buildPlan(n,W.id,Ye,null,ot),Ge=await Oi.publishPlan(n,we.data.id);Wt(!0),rs(Ge.message),setTimeout(()=>{d(`/patients/${n}`)},2e3)}catch(Ye){console.error("Failed to publish plan",Ye),alert("Failed to publish plan. Please try again.")}finally{j(!1)}},ts=({title:je,sectionKey:Ae})=>e.jsxs("button",{onClick:()=>L(H===Ae?"":Ae),className:"w-full flex justify-between items-center p-4 bg-slate-50 hover:bg-slate-100 border-b border-slate-200 transition-colors first:rounded-t-lg",children:[e.jsx("span",{className:"font-bold text-slate-700 uppercase text-sm tracking-wide",children:je}),H===Ae?e.jsx(Ef,{className:"w-4 h-4 text-slate-500"}):e.jsx(Uf,{className:"w-4 h-4 text-slate-500"})]}),ds=({filterFn:je})=>e.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx(ts,{title:"CLINICAL SERVICES",sectionKey:"CLINICAL"}),H==="CLINICAL"&&e.jsx("div",{className:"p-4 bg-white space-y-4 border-b border-slate-200",children:q.filter(Ae=>Ae.category&&Ae.category.toUpperCase().includes("CLINICAL")&&je(Ae)).length>0?q.filter(Ae=>Ae.category&&Ae.category.toUpperCase().includes("CLINICAL")&&je(Ae)).map(Ae=>e.jsx(vf,{service:Ae,onUpdate:es},Ae.id)):e.jsx("div",{className:"text-slate-500 text-sm",children:"No clinical services available in this section."})}),e.jsx(ts,{title:"PERSONAL SUPPORT & DAILY LIVING",sectionKey:"PERSONAL_SUPPORT"}),H==="PERSONAL_SUPPORT"&&e.jsx("div",{className:"p-4 bg-white space-y-4 border-b border-slate-200",children:q.filter(Ae=>Ae.category&&Ae.category.toUpperCase().includes("PERSONAL")&&je(Ae)).length>0?q.filter(Ae=>Ae.category&&Ae.category.toUpperCase().includes("PERSONAL")&&je(Ae)).map(Ae=>e.jsx(vf,{service:Ae,onUpdate:es},Ae.id)):e.jsx("div",{className:"text-slate-500 text-sm",children:"No personal support services available in this section."})}),e.jsx(ts,{title:"SAFETY, MONITORING & TECHNOLOGY",sectionKey:"SAFETY_TECH"}),H==="SAFETY_TECH"&&e.jsx("div",{className:"p-4 bg-white space-y-4 border-b border-slate-200",children:q.filter(Ae=>Ae.category&&(Ae.category.toUpperCase().includes("SAFETY")||Ae.category.toUpperCase().includes("TECH"))&&je(Ae)).length>0?q.filter(Ae=>Ae.category&&(Ae.category.toUpperCase().includes("SAFETY")||Ae.category.toUpperCase().includes("TECH"))&&je(Ae)).map(Ae=>e.jsx(vf,{service:Ae,onUpdate:es},Ae.id)):e.jsx("div",{className:"text-slate-500 text-sm",children:"No safety/monitoring services available in this section."})}),e.jsx(ts,{title:"LOGISTICS & ACCESS SERVICES",sectionKey:"LOGISTICS"}),H==="LOGISTICS"&&e.jsx("div",{className:"p-4 bg-white space-y-4 border-b border-slate-200",children:q.filter(Ae=>Ae.category&&Ae.category.toUpperCase().includes("LOGISTICS")&&je(Ae)).length>0?q.filter(Ae=>Ae.category&&Ae.category.toUpperCase().includes("LOGISTICS")&&je(Ae)).map(Ae=>e.jsx(vf,{service:Ae,onUpdate:es},Ae.id)):e.jsx("div",{className:"text-slate-500 text-sm",children:"No logistics services available in this section."})})]});return p||$?e.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading Care Delivery Plan..."}):Y?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("strong",{className:"font-bold",children:"Error loading services: "}),e.jsx("span",{className:"block sm:inline",children:Y}),e.jsx("pre",{className:"mt-2 text-xs bg-red-100 p-2 rounded overflow-auto",children:JSON.stringify(Y,null,2)})]})}):e.jsxs("div",{className:"flex flex-col h-screen bg-slate-50",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-3 shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-lg font-bold text-slate-900",children:k?"Modify Care Plan":"Care Delivery Plan"}),e.jsx("span",{className:"text-slate-300",children:"|"}),e.jsxs("span",{className:"text-sm text-slate-500",children:["Patient ID: ",(f==null?void 0:f.id)||"---"]}),(f==null?void 0:f.is_in_queue)&&e.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded text-xs font-medium",children:"In Queue"}),k&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs font-medium",children:"Modifying"})]}),e.jsxs("div",{className:"flex gap-2",children:[c===1&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>d(`/patients/${f==null?void 0:f.id}`),className:"px-3 py-1.5 border border-slate-300 rounded-md text-sm text-slate-700 font-medium hover:bg-slate-50 bg-white shadow-sm flex items-center gap-1.5 transition-colors",children:[e.jsx(Cn,{className:"w-3.5 h-3.5"}),"Back to Patient"]}),k&&e.jsxs("button",{onClick:()=>o(2),className:"px-3 py-1.5 border border-slate-300 rounded-md text-sm text-slate-700 font-medium hover:bg-slate-50 bg-white shadow-sm flex items-center gap-1.5",children:["Skip to Customize Current ",e.jsx(Xm,{className:"w-3.5 h-3.5"})]}),e.jsxs("button",{onClick:()=>o(2),disabled:!W&&!k,className:"px-3 py-1.5 bg-blue-700 text-white rounded-md text-sm font-medium hover:bg-blue-800 shadow-sm flex items-center gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[k?"Switch Bundle & Customize":"Next: Customize Bundle"," ",e.jsx(Xm,{className:"w-3.5 h-3.5"})]})]}),c===2&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>d(`/patients/${f==null?void 0:f.id}`),className:"px-3 py-1.5 border border-slate-300 rounded-md text-sm text-slate-700 font-medium hover:bg-slate-50 bg-white shadow-sm flex items-center gap-1.5 transition-colors",children:[e.jsx(Cn,{className:"w-3.5 h-3.5"})," Back to Patient"]}),e.jsxs("button",{onClick:()=>o(1),className:"px-3 py-1.5 border border-slate-300 rounded-md text-sm text-slate-700 font-medium hover:bg-slate-50 bg-white shadow-sm flex items-center gap-1.5 transition-colors",children:[e.jsx(Cn,{className:"w-3.5 h-3.5"})," Back to Bundles"]}),e.jsxs("button",{onClick:()=>o(3),className:"px-3 py-1.5 bg-blue-700 text-white rounded-md text-sm font-medium hover:bg-blue-800 shadow-sm flex items-center gap-1.5 transition-colors",children:["Next: Add Services ",e.jsx(Xm,{className:"w-3.5 h-3.5"})]})]}),c===3&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>d(`/patients/${f==null?void 0:f.id}`),className:"px-3 py-1.5 border border-slate-300 rounded-md text-sm text-slate-700 font-medium hover:bg-slate-50 bg-white shadow-sm flex items-center gap-1.5 transition-colors",children:[e.jsx(Cn,{className:"w-3.5 h-3.5"})," Back to Patient"]}),e.jsxs("button",{onClick:()=>o(2),className:"px-3 py-1.5 border border-slate-300 rounded-md text-sm text-slate-700 font-medium hover:bg-slate-50 bg-white shadow-sm flex items-center gap-1.5 transition-colors",children:[e.jsx(Cn,{className:"w-3.5 h-3.5"})," Back to Customize"]}),e.jsx("button",{onClick:Qs,disabled:N,className:"px-3 py-1.5 bg-blue-700 text-white rounded-md text-sm font-medium hover:bg-blue-800 shadow-sm flex items-center gap-1.5 disabled:opacity-50 transition-colors",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Sf,{className:"w-3.5 h-3.5 animate-spin"})," Processing..."]}):e.jsxs(e.Fragment,{children:["Next: Review & Publish ",e.jsx(Xm,{className:"w-3.5 h-3.5"})]})})]}),c===4&&!ns&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>d(`/patients/${f==null?void 0:f.id}`),className:"px-3 py-1.5 border border-slate-300 rounded-md text-sm text-slate-700 font-medium hover:bg-slate-50 bg-white shadow-sm flex items-center gap-1.5 transition-colors",children:[e.jsx(Cn,{className:"w-3.5 h-3.5"})," Back to Patient"]}),e.jsxs("button",{onClick:()=>o(3),className:"px-3 py-1.5 border border-slate-300 rounded-md text-sm text-slate-700 font-medium hover:bg-slate-50 bg-white shadow-sm flex items-center gap-1.5 transition-colors",children:[e.jsx(Cn,{className:"w-3.5 h-3.5"})," Back to Services"]}),e.jsx("button",{onClick:Us,disabled:N,className:"px-3 py-1.5 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700 shadow-sm flex items-center gap-1.5 disabled:opacity-50 transition-colors",children:N?e.jsxs(e.Fragment,{children:[e.jsx(Sf,{className:"w-3.5 h-3.5 animate-spin"})," Publishing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"w-3.5 h-3.5"})," Publish & Activate"]})})]})]})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-[3] min-w-0 overflow-y-auto border-r border-slate-200 bg-slate-50 p-4",children:[e.jsx(P2,{patient:f}),(w.algorithmScores||Array.isArray(w.triggeredCAPs)&&w.triggeredCAPs.length>0)&&e.jsx(I2,{algorithmScores:w.algorithmScores,triggeredCAPs:w.triggeredCAPs,profileSummary:w.profileSummary}),(f==null?void 0:f.is_in_queue)&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 font-medium mb-2",children:[e.jsx(dp,{className:"w-4 h-4"}),"Patient In Queue"]}),e.jsx("p",{className:"text-sm text-yellow-600",children:"This patient is currently in the intake queue. Publishing this care bundle will transition them to an active patient profile."})]})]}),e.jsx("div",{className:"flex-[6.2] min-w-0 overflow-y-auto p-4 bg-slate-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 overflow-hidden",children:[e.jsx("div",{className:"mb-8 w-full overflow-hidden",children:e.jsxs("div",{className:"flex justify-between items-start w-full",children:[e.jsxs("div",{className:`flex flex-col items-center flex-1 min-w-0 ${c>=1?"text-blue-600":"text-slate-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-2 transition-colors shrink-0 ${c>=1?"bg-blue-600 text-white":"bg-slate-100 text-slate-500"}`,children:c>1?e.jsx(eo,{className:"w-5 h-5"}):"1"}),e.jsx("span",{className:"text-sm font-medium text-center",children:"Select Bundle"})]}),e.jsxs("div",{className:`flex flex-col items-center flex-1 min-w-0 ${c>=2?"text-blue-600":"text-slate-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-2 transition-colors shrink-0 ${c>=2?"bg-blue-600 text-white":"bg-slate-100 text-slate-500"}`,children:c>2?e.jsx(eo,{className:"w-5 h-5"}):"2"}),e.jsx("span",{className:"text-sm font-medium text-center",children:"Customize"})]}),e.jsxs("div",{className:`flex flex-col items-center flex-1 min-w-0 ${c>=3?"text-blue-600":"text-slate-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-2 transition-colors shrink-0 ${c>=3?"bg-blue-600 text-white":"bg-slate-100 text-slate-500"}`,children:c>3?e.jsx(eo,{className:"w-5 h-5"}):"3"}),e.jsx("span",{className:"text-sm font-medium text-center",children:"Add Services"})]}),e.jsxs("div",{className:`flex flex-col items-center flex-1 min-w-0 ${c>=4?"text-blue-600":"text-slate-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center mb-2 transition-colors shrink-0 ${c>=4?"bg-blue-600 text-white":"bg-slate-100 text-slate-500"}`,children:"4"}),e.jsx("span",{className:"text-sm font-medium text-center",children:"Review"})]})]})}),c===1&&e.jsxs("div",{className:"space-y-6",children:[k&&M&&e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(so,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-blue-800",children:"Modifying Existing Care Plan"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Current bundle: ",e.jsx("strong",{children:M.bundle||"Current Plan"})," with ",((Gs=M.services)==null?void 0:Gs.length)||0," services ($",((Vs=M.total_cost)==null?void 0:Vs.toLocaleString())||0,"/week)"]}),e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Select a new bundle below or proceed to customize the current services."})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:k?"Step 1: Change Bundle (Optional)":"Step 1: Select Care Bundle"}),e.jsx("p",{className:"text-sm text-slate-600",children:k?"You can switch to a different bundle or skip to customize the existing services.":"Based on the patient's assessment, AI-generated care scenarios have been tailored to their needs."})]}),w.loading&&e.jsx("div",{className:"p-8 text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-3",children:[e.jsx(Sf,{className:"w-6 h-6 text-teal-600 animate-spin"}),e.jsx("span",{className:"text-slate-600",children:"Generating care scenarios..."})]})}),w.error&&e.jsx("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(so,{className:"w-5 h-5 text-amber-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-amber-800",children:"Unable to Generate AI Scenarios"}),e.jsx("p",{className:"text-sm text-amber-600 mt-1",children:w.error}),e.jsx("p",{className:"text-sm text-amber-600 mt-2",children:"You can still select a bundle below or build a custom plan."})]})]})}),w.profileSummary&&e.jsx("div",{className:"p-4 bg-slate-100 rounded-xl mb-6",children:e.jsxs("div",{className:"flex items-center gap-6 flex-wrap text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500",children:"Classification:"}),e.jsx("span",{className:"font-semibold text-slate-700",children:w.profileSummary.primary_classification||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500",children:"Episode Type:"}),e.jsx("span",{className:"font-semibold text-slate-700 capitalize",children:((sa=w.profileSummary.episode_type)==null?void 0:sa.replace("_"," "))||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-500",children:"Rehab Potential:"}),e.jsx("span",{className:`font-semibold ${w.profileSummary.rehab_potential?"text-emerald-600":"text-slate-700"}`,children:w.profileSummary.rehab_potential?"Yes":"No"})]})]})}),!w.loading&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[w.scenarios.map((je,Ae)=>{var Dt,Qt,At,zt,he,Ie,Xe,dt,_t,at,Tt,vs,Ea,tn,$l;const Be=Ae===0||((Dt=je.meta)==null?void 0:Dt.is_recommended),qe=((Qt=je.cost)==null?void 0:Qt.weekly_estimate)||0,et=((At=je.operations)==null?void 0:At.weekly_hours)||0,Ye=((zt=je.services)==null?void 0:zt.length)||0,ot=((he=je.operations)==null?void 0:he.discipline_count)||0,we=((Ie=je.label)==null?void 0:Ie.description)||((dt=(Xe=je.axis)==null?void 0:Xe.primary)==null?void 0:dt.description)||"",Ge=((_t=je.label)==null?void 0:_t.icon)||((Tt=(at=je.axis)==null?void 0:at.primary)==null?void 0:Tt.emoji)||"📋",$e=((Ea=(vs=je.axis)==null?void 0:vs.primary)==null?void 0:Ea.label)||"AI Scenario";return e.jsxs("div",{onClick:()=>is(je,!1),className:`cursor-pointer rounded-xl border-2 p-3 transition-all hover:shadow-md relative flex flex-col ${(Q==null?void 0:Q.scenario_id)===je.scenario_id?"border-teal-600 bg-teal-50 shadow-md ring-2 ring-teal-200":"border-slate-200 bg-white hover:border-teal-300"}`,children:[Be&&e.jsx("div",{className:"absolute -top-2 left-3 px-2 py-0.5 bg-teal-600 text-white text-[10px] font-semibold rounded-full",children:"Recommended"}),e.jsxs("div",{className:"flex items-start justify-between mb-2 mt-1 gap-2",children:[e.jsxs("div",{className:"flex items-start gap-1.5 min-w-0 flex-1",children:[e.jsx("span",{className:"text-xl shrink-0 leading-none",children:Ge}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[11px] font-bold bg-teal-100 text-teal-700 leading-relaxed",style:{boxDecorationBreak:"clone",WebkitBoxDecorationBreak:"clone"},children:$e})]}),(Q==null?void 0:Q.scenario_id)===je.scenario_id&&e.jsx(eo,{className:"w-4 h-4 text-teal-600 shrink-0 mt-0.5 ml-1"})]}),e.jsx("p",{className:"text-xs text-slate-600 mb-3 flex-grow leading-relaxed",children:we}),e.jsxs("div",{className:"flex flex-col items-center gap-1 mb-2",children:[e.jsxs("span",{className:`inline-flex items-center justify-center px-2 py-1 rounded-md text-xs font-semibold ${((tn=je.cost)==null?void 0:tn.status)==="within_cap"?"bg-emerald-100 text-emerald-700":(($l=je.cost)==null?void 0:$l.status)==="near_cap"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-700"}`,children:["$",Math.round(qe).toLocaleString(),"/wk"]}),e.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-md bg-slate-100 text-slate-600 text-xs font-semibold",children:[et.toFixed(1),"h/wk"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between mt-auto pt-2 border-t border-slate-100 gap-1",children:[e.jsxs("div",{className:"flex flex-col text-[10px] text-slate-400 min-w-0",children:[e.jsxs("span",{children:[Ye," services"]}),e.jsxs("span",{children:[ot," disciplines"]})]}),e.jsx("button",{onClick:Fl=>{Fl.stopPropagation(),Bs(je,Ae)},className:"px-2 py-1 text-[10px] font-medium text-teal-600 hover:text-teal-700 hover:bg-teal-50 rounded transition-colors",children:"Explain"})]})]},je.scenario_id||Ae)}),e.jsxs("div",{onClick:()=>zs({id:"custom",name:"Custom Bundle",code:"CUSTOM",colorTheme:"slate",band:"Flexible",price:0,description:"Build a fully customized care plan from scratch with all available services.",services:A.length>0?A:q}),className:`cursor-pointer rounded-xl border-2 border-dashed p-3 transition-all hover:shadow-md flex flex-col ${(W==null?void 0:W.id)==="custom"?"border-slate-600 bg-slate-100 shadow-md":"border-slate-300 bg-slate-50 hover:border-slate-400 hover:bg-white"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 gap-1",children:[e.jsxs("div",{className:"flex items-start gap-1.5 min-w-0 flex-1",children:[e.jsx("span",{className:"text-xl shrink-0 leading-none",children:"🛠️"}),e.jsx("span",{className:"px-2 py-0.5 rounded text-[11px] font-bold bg-slate-200 text-slate-600 leading-relaxed",style:{boxDecorationBreak:"clone",WebkitBoxDecorationBreak:"clone"},children:"Custom"})]}),(W==null?void 0:W.id)==="custom"&&e.jsx(eo,{className:"w-4 h-4 text-slate-600 shrink-0 mt-0.5"})]}),e.jsx("p",{className:"text-xs text-slate-600 mb-3 flex-grow leading-relaxed",children:"Build a fully customized care plan from scratch with complete control over all services and frequencies."}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-slate-400 mt-auto pt-2 border-t border-slate-100",children:[e.jsx("span",{children:"Variable Cost"}),e.jsx("span",{children:"Full Flexibility"})]})]})]})]}),c===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:["Step 2: ",k?"Modify Services":`Customize ${W==null?void 0:W.name}`]}),e.jsx("p",{className:"text-sm text-slate-600",children:k?"Adjust the frequency and duration of services. Changes from the current plan are tracked and will be shown in the review step.":"Services have been auto-configured based on the patient's InterRAI HC assessment and RUG classification. Adjust frequency and duration as needed."})]}),e.jsxs("div",{className:"p-6 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-full text-blue-600",children:e.jsx(so,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900 text-sm",children:"Plan Duration"}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:"Set the default duration for the entire care plan. You can still adjust individual services below if they require a different timeline."})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 w-20",children:"Global Duration:"}),e.jsx("input",{type:"range",min:"1",max:"52",value:ee,onChange:It,className:"flex-1 h-2 bg-blue-200 rounded-lg appearance-none cursor-pointer accent-blue-600"}),e.jsxs("span",{className:"text-sm font-bold text-blue-700 w-16 text-right",children:[ee," weeks"]})]})]}),e.jsx(ds,{filterFn:je=>je.defaultFrequency>0})]}),c===3&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Step 3: Add Additional Services"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Add any other services that were not included in the pre-built bundle."})]}),re?e.jsx(ds,{filterFn:je=>je.defaultFrequency===0}):e.jsx("div",{className:"flex justify-center py-12 border-2 border-dashed border-slate-200 rounded-lg bg-slate-50",children:e.jsxs("button",{onClick:()=>Re(!0),className:"px-6 py-3 bg-white border border-blue-200 text-blue-700 font-bold rounded-lg shadow-sm hover:bg-blue-50 hover:border-blue-300 transition-all flex items-center gap-2",children:[e.jsx(xb,{className:"w-5 h-5"}),"Add Services To Bundle"]})})]}),c===4&&e.jsx("div",{className:"space-y-6",children:ns?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mb,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Care Plan Published!"}),e.jsx("p",{className:"text-slate-600 mb-4",children:Nt}),e.jsx("p",{className:"text-sm text-slate-500",children:"Redirecting to patient profile..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 mb-2",children:"Step 4: Review & Publish"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Review the care plan summary below. Publishing will activate services and transition the patient from the queue to their active profile."})]}),(f==null?void 0:f.is_in_queue)&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-start gap-3",children:[e.jsx(so,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800",children:"Queue Transition"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Publishing this care plan will transition the patient from the intake queue to their active patient profile. All configured services will be activated."})]})]}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-6",children:[e.jsx("h3",{className:"font-bold text-slate-900 mb-4",children:k?"Care Plan Changes":"Care Plan Summary"}),k&&M&&e.jsxs("div",{className:"mb-6 p-4 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-slate-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-slate-400 rounded-full"}),"Current Plan: ",M.bundle||"Current Bundle"]}),e.jsxs("div",{className:"space-y-1 text-sm text-slate-600",children:[(He=M.services)==null?void 0:He.map((je,Ae)=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:je.name}),e.jsxs("span",{children:[je.frequency,"x/week • $",(je.cost_per_visit*je.frequency*4).toLocaleString(),"/mo"]})]},Ae)),e.jsxs("div",{className:"pt-2 mt-2 border-t border-slate-300 font-medium flex justify-between",children:[e.jsx("span",{children:"Current Weekly Cost"}),e.jsxs("span",{children:["$",((ht=M.total_cost)==null?void 0:ht.toLocaleString())||0]})]})]})]}),e.jsxs("div",{className:k?"p-4 bg-blue-50 border border-blue-200 rounded-lg":"",children:[k&&e.jsxs("h4",{className:"font-medium text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 bg-blue-500 rounded-full"}),"Modified Plan: ",(W==null?void 0:W.name)||"Custom"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Selected Bundle"}),e.jsxs("div",{className:"font-medium text-slate-900",children:[(W==null?void 0:W.name)||"Custom",e.jsxs("span",{className:"text-slate-500 font-normal text-xs ml-1",children:["(",q.some(je=>je.defaultFrequency===0&&je.currentFrequency>0)?"Customized":"Base",")"]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Est. Weekly Cost"}),e.jsxs("div",{className:"font-medium text-slate-900",children:["$",fs.toLocaleString(),k&&(M==null?void 0:M.total_cost)&&fs!==M.total_cost&&e.jsxs("span",{className:`ml-2 text-xs ${fs>M.total_cost?"text-rose-600":"text-emerald-600"}`,children:["(",fs>M.total_cost?"+":"",(fs-M.total_cost).toLocaleString(),")"]})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Est. Monthly Cost"}),e.jsxs("div",{className:"font-medium text-slate-900",children:["$",Is.toLocaleString()]})]})]}),e.jsx("h4",{className:"font-medium text-slate-900 mb-3",children:k?"Modified Services":"Active Services"}),e.jsx("div",{className:"space-y-2",children:q.filter(je=>(je.currentFrequency||0)>0).map(je=>{const Ae=k&&(je.currentFrequency!==je.originalFrequency||je.currentDuration!==je.originalDuration),Be=k&&je.originalFrequency===0&&je.currentFrequency>0;return e.jsxs("div",{className:`flex items-center justify-between py-2 border-b border-slate-100 last:border-0 ${Ae?"bg-blue-50 -mx-2 px-2 rounded":""}`,children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-800",children:je.name}),Be&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs rounded-full",children:"New"}),Ae&&!Be&&e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Changed"}),e.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:[je.currentFrequency,"x/week for ",je.currentDuration," weeks",Ae&&!Be&&e.jsxs("span",{className:"text-slate-400 ml-1",children:["(was: ",je.originalFrequency,"x/week)"]})]})]}),e.jsxs("span",{className:"text-slate-600",children:["$",(je.costPerVisit*je.currentFrequency*4).toLocaleString(),"/mo"]})]},je.id)})}),k&&q.filter(je=>je.originalFrequency>0&&je.currentFrequency===0).length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-medium text-rose-700 mb-3 mt-4",children:"Removed Services"}),e.jsx("div",{className:"space-y-2",children:q.filter(je=>je.originalFrequency>0&&je.currentFrequency===0).map(je=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0 bg-rose-50 -mx-2 px-2 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-800 line-through",children:je.name}),e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-rose-100 text-rose-700 text-xs rounded-full",children:"Removed"}),e.jsxs("span",{className:"text-slate-400 text-sm ml-2",children:["(was: ",je.originalFrequency,"x/week)"]})]}),e.jsxs("span",{className:"text-slate-400 line-through",children:["$",(je.costPerVisit*je.originalFrequency*4).toLocaleString(),"/mo"]})]},je.id))})]}),q.filter(je=>(je.currentFrequency||0)>0).length===0&&e.jsx("p",{className:"text-slate-500 text-sm italic",children:"No services selected. Please go back and configure services."})]})]})]})})]})}),c!==4&&e.jsx("div",{className:"flex-[3] min-w-0 overflow-y-auto border-l border-slate-200 bg-slate-50 p-4",children:e.jsx(pb,{services:q,totalCost:fs,isGeneratingAi:ye,aiRecommendation:Z,onGenerateAi:os,bundleName:Q?`${((gt=Q.label)==null?void 0:gt.title)||((Ct=(cs=Q.axis)==null?void 0:cs.primary)==null?void 0:Ct.label)||"AI Scenario"}`:W!=null&&W.name?`${W.name} ${q.some(je=>je.defaultFrequency===0&&je.currentFrequency>0)?"(Customized)":"(Base)"}`:"Select a Bundle"})})]}),e.jsx(G2,{isOpen:De,onClose:()=>{ge(!1),w.clearExplanation()},explanation:w.explanation,loading:w.explanationLoading,scenarioTitle:((Hs=ke==null?void 0:ke.label)==null?void 0:Hs.title)||((ia=(xa=ke==null?void 0:ke.axis)==null?void 0:xa.primary)==null?void 0:ia.label)||"Scenario",error:Rt})]})},X2=()=>{const n=xs(),[d,c]=g.useState([]),[o,f]=g.useState({active_count:0,open_count:0,pending_review_count:0,closed_ytd:0}),[h,p]=g.useState(!0),[y,N]=g.useState(null);g.useEffect(()=>{j()},[]);const j=async()=>{try{p(!0),N(null);const M=await ue.get("/v2/qin/all");c(M.data.data||[]),f(M.data.summary||{active_count:0,open_count:0,pending_review_count:0,closed_ytd:0})}catch(M){console.error("Failed to fetch QIN data:",M),N("Failed to load QIN data. Please try again.")}finally{p(!1)}},v=async()=>{alert("Checking OHaH for new notices... (Integration pending)"),await j()},S=[{header:"QIN ID",accessor:"qin_number"},{header:"Date Issued",accessor:"issued_date"},{header:"Indicator / Breach",accessor:M=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:M.indicator}),e.jsx("div",{className:"text-xs text-rose-600 font-bold",children:M.band_breach})]})},{header:"Status",accessor:M=>{const U={open:"bg-rose-100 text-rose-800",submitted:"bg-amber-100 text-amber-800",under_review:"bg-blue-100 text-blue-800",closed:"bg-slate-100 text-slate-600"};return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${U[M.status]||"bg-gray-100 text-gray-800"}`,children:M.status_label}),M.is_overdue&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-red-600 text-white",children:"OVERDUE"})]})}},{header:"QIP Due Date",accessor:M=>e.jsxs("div",{children:[e.jsx("div",{children:M.qip_due_date||"—"}),M.days_until_due!==null&&M.status==="open"&&e.jsx("div",{className:`text-xs ${M.days_until_due<0?"text-red-600 font-bold":M.days_until_due<=2?"text-amber-600":"text-slate-500"}`,children:M.days_until_due<0?`${Math.abs(M.days_until_due)} days overdue`:M.days_until_due===0?"Due today":`${M.days_until_due} days remaining`})]})},{header:"Action",accessor:M=>M.status==="open"?e.jsx("div",{className:"flex gap-2",children:e.jsx(Me,{size:"sm",onClick:()=>n(`/qip/create/${M.id}`),children:"Draft QIP"})}):e.jsx(Zd,{to:`/qip/view/${M.id}`,className:"text-teal-600 hover:text-teal-800 text-sm font-medium",children:"View Plan"})}];return h?e.jsx("div",{className:"p-12 flex justify-center",children:e.jsx(ta,{})}):y?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[y,e.jsx("button",{onClick:j,className:"ml-4 text-red-800 underline hover:no-underline",children:"Retry"})]})}):e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Quality Improvement Notices (QIN)"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Manage compliance breaches and remediation plans (Schedule 4)."})]}),e.jsx(Me,{variant:"secondary",onClick:v,children:"Check for New Notices"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`bg-white p-4 rounded-xl border shadow-sm ${o.open_count>0?"border-rose-200":"border-slate-200"}`,children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Active Notices"}),e.jsx("div",{className:`text-3xl font-bold ${o.active_count>0?"text-rose-600":"text-emerald-600"}`,children:o.active_count}),e.jsx("div",{className:`text-xs mt-1 ${o.active_count>0?"text-rose-500":"text-emerald-500"}`,children:o.active_count>0?"Action Required":"Compliant"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Open (Require QIP)"}),e.jsx("div",{className:`text-3xl font-bold ${o.open_count>0?"text-rose-600":"text-slate-600"}`,children:o.open_count})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Pending OHaH Review"}),e.jsx("div",{className:"text-3xl font-bold text-amber-500",children:o.pending_review_count})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Closed (YTD)"}),e.jsx("div",{className:"text-3xl font-bold text-slate-600",children:o.closed_ytd})]})]}),e.jsx(Ja,{title:"Notice History",children:d.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"✓"}),e.jsx("div",{className:"font-medium",children:"No QINs on record"}),e.jsx("div",{className:"text-sm",children:"Your organization is currently in compliance with all Schedule 4 indicators."})]}):e.jsx(or,{columns:S,data:d,keyField:"id"})})]})},Z2=()=>{const{qinId:n}=Bi(),d=xs(),[c,o]=g.useState({rootCause:"",actionPlan:"",targetDate:"",responsible:""}),f=h=>{h.preventDefault(),alert("QIP Submitted to OHaH for Approval (Mock)"),d("/qin")};return e.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Quality Improvement Plan (QIP)"}),e.jsxs("p",{className:"text-slate-500 text-sm",children:["Remediation for Notice: ",e.jsx("span",{className:"font-mono font-bold text-slate-700",children:n})]})]})}),e.jsxs("div",{className:"bg-rose-50 border border-rose-200 p-4 rounded-lg flex items-start gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-rose-500 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-rose-800",children:"Breach Details"}),e.jsx("p",{className:"text-sm text-rose-700",children:"Referral Acceptance Rate dropped to 94% (Band C) for the period of Oct 1 - Oct 15."})]})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs(xt,{title:"1. Root Cause Analysis",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Describe the underlying factors contributing to the performance failure."}),e.jsx("textarea",{required:!0,rows:4,className:"w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",placeholder:"e.g., Staff shortage on weekends caused intake delays...",value:c.rootCause,onChange:h=>o({...c,rootCause:h.target.value})})]}),e.jsxs(xt,{title:"2. Corrective Action Plan",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"List specific steps to remediate the issue and prevent recurrence."}),e.jsx("textarea",{required:!0,rows:4,className:"w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",placeholder:"e.g., 1. Hire 2 additional weekend coordinators. 2. Implement auto-accept logic for standard bundles...",value:c.actionPlan,onChange:h=>o({...c,actionPlan:h.target.value})})]}),e.jsx(xt,{title:"3. Governance & Timeline",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Target Resolution Date"}),e.jsx("input",{type:"date",required:!0,className:"w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",value:c.targetDate,onChange:h=>o({...c,targetDate:h.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Person Responsible"}),e.jsx("input",{type:"text",required:!0,className:"w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring-teal-500",placeholder:"Name / Role",value:c.responsible,onChange:h=>o({...c,responsible:h.target.value})})]})]})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(Me,{variant:"secondary",type:"button",onClick:()=>d("/qin"),children:"Cancel"}),e.jsx(Me,{type:"submit",children:"Submit QIP for Approval"})]})]})]})},K2=()=>{const n={period:"Oct 15 - Oct 22",missed_visits:2,tfs_breaches:1,new_qins:1,complaints:0},d=[{id:1,type:"Missed Care",patient:"John Doe",date:"Oct 18",reason:"Staff Illness",status:"Investigating"},{id:2,type:"TFS Breach",patient:"Jane Smith",date:"Oct 20",reason:"No SSPO Capacity",status:"Resolved"}],c=[{id:"QIN-2025-001",indicator:"Referral Acceptance",status:"Draft",due:"Oct 25"}];return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center border-b border-slate-200 pb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Weekly Huddle Board"}),e.jsxs("p",{className:"text-slate-500 text-sm",children:["OHaH Joint Review • Period: ",e.jsx("span",{className:"font-bold text-slate-700",children:n.period})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Me,{variant:"secondary",onClick:()=>window.print(),children:"Print Agenda"}),e.jsx(Me,{children:"Start Meeting Mode"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border bg-rose-50 border-rose-200",children:[e.jsx("div",{className:"text-xs font-bold uppercase text-slate-500",children:"Missed Visits"}),e.jsx("div",{className:"text-2xl font-bold text-rose-600",children:n.missed_visits})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-amber-50 border-amber-200",children:[e.jsx("div",{className:"text-xs font-bold uppercase text-slate-500",children:"TFS Breaches"}),e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:n.tfs_breaches})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-slate-50 border-slate-300",children:[e.jsx("div",{className:"text-xs font-bold uppercase text-slate-500",children:"New QINs"}),e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:n.new_qins})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-white border-slate-200",children:[e.jsx("div",{className:"text-xs font-bold uppercase text-slate-500",children:"Complaints"}),e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:n.complaints})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-4",children:[e.jsxs("h3",{className:"font-bold text-slate-700 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),"Incident Review"]}),e.jsx("div",{className:"space-y-3",children:d.map(o=>e.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border border-slate-200",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("span",{className:"text-xs font-bold bg-rose-100 text-rose-800 px-2 py-0.5 rounded",children:o.type}),e.jsx("span",{className:"text-xs text-slate-400",children:o.date})]}),e.jsx("div",{className:"font-bold text-sm text-slate-800 mt-2",children:o.patient}),e.jsxs("div",{className:"text-sm text-slate-600",children:["Reason: ",o.reason]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100 flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-slate-500",children:["Status: ",o.status]}),e.jsx("button",{className:"text-xs text-blue-600 hover:underline",children:"View RCA"})]})]},o.id))})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-4",children:[e.jsxs("h3",{className:"font-bold text-slate-700 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"QIP Status"]}),e.jsxs("div",{className:"space-y-3",children:[c.map(o=>e.jsxs("div",{className:"bg-white p-3 rounded shadow-sm border border-slate-200",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400",children:o.id}),e.jsx("div",{className:"font-bold text-sm text-slate-800",children:o.indicator}),e.jsxs("div",{className:"text-xs text-amber-600 font-medium mt-1",children:["Status: ",o.status]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-2",children:["Due Date: ",o.due]}),e.jsx("button",{className:"w-full mt-2 text-xs bg-slate-50 border border-slate-200 py-1 rounded hover:bg-slate-100",children:"Review Plan"})]},o.id)),e.jsx("div",{className:"text-center py-4 text-slate-400 text-sm italic",children:"No other active QIPs."})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-4",children:[e.jsxs("h3",{className:"font-bold text-slate-700 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Action Items"]}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"bg-white p-2 rounded border border-slate-200 flex gap-2 items-start",children:[e.jsx("input",{type:"checkbox",className:"mt-1 rounded text-teal-600"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Submit RCA for Missed Visit #1 by Friday."})]}),e.jsxs("li",{className:"bg-white p-2 rounded border border-slate-200 flex gap-2 items-start",children:[e.jsx("input",{type:"checkbox",className:"mt-1 rounded text-teal-600"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Update SSPO capacity for next week."})]}),e.jsxs("li",{className:"bg-white p-2 rounded border border-slate-200 flex gap-2 items-start",children:[e.jsx("input",{type:"checkbox",className:"mt-1 rounded text-teal-600"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Confirm holiday staffing schedule."})]})]}),e.jsx("button",{className:"w-full mt-3 text-sm text-slate-500 hover:text-teal-600 font-medium border border-dashed border-slate-300 rounded py-2 hover:bg-white hover:border-teal-300 transition-all",children:"+ Add Action Item"})]})]})]})},J2=({isOpen:n,onClose:d,children:c})=>n?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700",children:"×"})}),e.jsx("div",{className:"mt-2",children:c||"Modal Placeholder"})]})}):null,eN=()=>{const{id:n}=Bi(),d=xs(),[c,o]=g.useState(!0),[f,h]=g.useState(null),[p,y]=g.useState(null),[N,j]=g.useState([]),[v,S]=g.useState([]),[M,U]=g.useState([]),[k,B]=g.useState(null),[A,$]=g.useState(null),[Y,w]=g.useState("overview"),[D,z]=g.useState(null),[W,F]=g.useState(!1),[J,I]=g.useState(!1),[Q,de]=g.useState(!1),[te,pe]=g.useState(!1),q=g.useCallback(async()=>{try{const re=await ue.get(`/v2/staff/${n}/profile`);h(re.data.data)}catch(re){console.error("Failed to fetch profile:",re),z("Failed to load staff profile")}},[n]),ae=g.useCallback(async()=>{try{const re=await ue.get(`/v2/staff/${n}/schedule`);y(re.data.data)}catch(re){console.error("Failed to fetch schedule:",re)}},[n]),H=g.useCallback(async()=>{try{const re=await ue.get(`/v2/staff/${n}/availability`);j(re.data.data||[])}catch(re){console.error("Failed to fetch availability:",re)}},[n]),L=g.useCallback(async()=>{try{const re=await ue.get(`/v2/staff/${n}/unavailabilities`);S(re.data.data||[])}catch(re){console.error("Failed to fetch unavailabilities:",re)}},[n]),Z=g.useCallback(async()=>{try{const re=await ue.get(`/v2/staff/${n}/skills`);U(re.data.data||[])}catch(re){console.error("Failed to fetch skills:",re)}},[n]),Te=g.useCallback(async()=>{try{const re=await ue.get(`/v2/staff/${n}/satisfaction`);B(re.data.data)}catch(re){console.error("Failed to fetch satisfaction:",re)}},[n]),ye=g.useCallback(async()=>{try{const re=await ue.get(`/v2/staff/${n}/travel`);$(re.data.data)}catch(re){console.error("Failed to fetch travel:",re)}},[n]);g.useEffect(()=>{(async()=>{o(!0),await q(),o(!1)})()},[q]),g.useEffect(()=>{Y==="schedule"&&ae(),Y==="availability"&&H(),Y==="timeoff"&&L(),Y==="skills"&&Z(),Y==="satisfaction"&&Te(),Y==="travel"&&ye()},[Y,ae,H,L,Z,Te,ye]);const E=re=>{const Re={green:"bg-emerald-100 text-emerald-800",amber:"bg-amber-100 text-amber-800",red:"bg-red-100 text-red-800",gray:"bg-slate-100 text-slate-600"};return Re[re]||Re.gray},ee=async()=>{try{f!=null&&f.is_scheduling_locked?await ue.delete(`/v2/staff/${n}/scheduling-lock`):await ue.post(`/v2/staff/${n}/scheduling-lock`,{reason:"Manual lock"}),q()}catch(re){console.error("Failed to toggle lock:",re)}};if(c)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(ta,{className:"w-8 h-8 text-teal-600"})});if(D||!f)return e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("p",{className:"text-red-600",children:D||"Staff member not found"}),e.jsx(Me,{variant:"secondary",onClick:()=>d("/workforce"),className:"mt-4",children:"Back to Workforce"})]})});const V=[{id:"overview",label:"Overview",icon:Hf},{id:"schedule",label:"Schedule",icon:Id},{id:"availability",label:"Availability",icon:Di},{id:"timeoff",label:"Time Off",icon:Id},{id:"skills",label:"Skills",icon:o1},{id:"travel",label:"Travel",icon:Sp}];return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("button",{onClick:()=>d("/workforce"),className:"flex items-center gap-2 text-slate-600 hover:text-slate-800 mb-6",children:[e.jsx(Cn,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Back to Workforce"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-br from-teal-500 to-teal-700 text-white flex items-center justify-center font-bold text-xl shadow-md",children:f.avatar_initials}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:f.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[f.staff_role&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium bg-${f.staff_role.badge_color||"blue"}-100 text-${f.staff_role.badge_color||"blue"}-800`,children:f.staff_role.name}),f.employment_type&&e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium bg-${f.employment_type.badge_color||"green"}-100 text-${f.employment_type.badge_color||"green"}-800`,children:f.employment_type.name}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${E(f.staff_status_color)}`,children:f.staff_status_label})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[f.is_scheduling_locked?e.jsxs(Me,{variant:"secondary",onClick:ee,className:"flex items-center gap-2",children:[e.jsx(H1,{className:"w-4 h-4"})," Unlock Scheduling"]}):e.jsxs(Me,{variant:"secondary",onClick:ee,className:"flex items-center gap-2",children:[e.jsx(F1,{className:"w-4 h-4"})," Lock Scheduling"]}),e.jsx(Me,{variant:"secondary",onClick:()=>F(!0),children:"Change Status"})]})]}),f.is_scheduling_locked&&e.jsxs("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-center gap-2",children:[e.jsx(zi,{className:"w-5 h-5 text-amber-600"}),e.jsxs("span",{className:"text-sm text-amber-800",children:["Scheduling is locked: ",f.scheduling_locked_reason||"No reason provided"]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(P1,{className:"w-4 h-4"}),e.jsx("span",{children:f.email})]}),f.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(X1,{className:"w-4 h-4"}),e.jsx("span",{children:f.phone})]}),f.organization&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(x1,{className:"w-4 h-4"}),e.jsx("span",{children:f.organization.name})]})]})]}),f.stats&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"This Week"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[f.stats.weekly_scheduled_hours,"h"]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["of ",f.max_weekly_hours,"h capacity"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Utilization"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[f.stats.utilization_percent,"%"]}),e.jsx("p",{className:"text-xs text-slate-400",children:"of weekly capacity"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Satisfaction"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:f.stats.satisfaction_score!==null?`${f.stats.satisfaction_score}%`:"N/A"}),e.jsx("p",{className:"text-xs text-slate-400",children:f.stats.satisfaction_label})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:f.stats.upcoming_appointments_count}),e.jsx("p",{className:"text-xs text-slate-400",children:"appointments"})]})]}),e.jsx("div",{className:"border-b border-slate-200 mb-6",children:e.jsx("nav",{className:"flex gap-4 overflow-x-auto",children:V.map(re=>e.jsxs("button",{onClick:()=>w(re.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${Y===re.id?"border-teal-600 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[e.jsx(re.icon,{className:"w-4 h-4"}),re.label]},re.id))})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[Y==="overview"&&e.jsx(tN,{profile:f}),Y==="schedule"&&e.jsx(sN,{schedule:p,navigate:d}),Y==="availability"&&e.jsx(aN,{availability:N,onAdd:()=>I(!0)}),Y==="timeoff"&&e.jsx(lN,{unavailabilities:v,onAdd:()=>de(!0)}),Y==="skills"&&e.jsx(nN,{skills:M,onAdd:()=>pe(!0),staffId:n,onRefresh:Z}),Y==="travel"&&e.jsx(rN,{travel:A})]})]})},tN=({profile:n})=>{var d,c;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Employment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Hire Date"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:n.hire_date||"Not set"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Tenure"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:((d=n.tenure)==null?void 0:d.display)||"N/A"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Max Weekly Hours"}),e.jsxs("span",{className:"text-sm font-medium text-slate-800",children:[n.max_weekly_hours,"h"]})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"FTE Value"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:n.fte_value})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"FTE Eligible"}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:n.fte_eligible?"Yes":"No"})]}),e.jsxs("div",{className:"flex justify-between py-2 border-b border-slate-100",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Skills"}),e.jsxs("span",{className:"text-sm font-medium text-slate-800",children:[n.skills_count," total, ",n.expiring_skills_count," expiring soon"]})]})]})]}),((c=n.stats)==null?void 0:c.this_week)&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"This Week"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:n.stats.this_week.total_assignments}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Visits"})]}),e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-emerald-700",children:n.stats.this_week.completed}),e.jsx("p",{className:"text-xs text-slate-500",children:"Completed"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.stats.this_week.scheduled}),e.jsx("p",{className:"text-xs text-slate-500",children:"Scheduled"})]}),e.jsxs("div",{className:"bg-red-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-700",children:n.stats.this_week.missed}),e.jsx("p",{className:"text-xs text-slate-500",children:"Missed"})]})]})]})]})},sN=({schedule:n,navigate:d})=>{var c,o,f;return n?e.jsxs("div",{className:"space-y-6",children:[((c=n.summary)==null?void 0:c.next_appointment)&&e.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-teal-800 mb-2",children:"Next Appointment"}),e.jsx("p",{className:"text-lg font-semibold text-teal-900",children:n.summary.next_appointment.patient_name}),e.jsxs("p",{className:"text-sm text-teal-700",children:[n.summary.next_appointment.scheduled_time," - ",n.summary.next_appointment.service_type_name]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Weekly Schedule"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:(o=n.weekly_schedule)==null?void 0:o.map(h=>e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-medium text-slate-600 text-center",children:h.day_short}),e.jsx("p",{className:"text-lg font-bold text-slate-800 text-center",children:h.count}),e.jsxs("p",{className:"text-xs text-slate-400 text-center",children:[h.total_hours,"h"]})]},h.date))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Upcoming Appointments"}),((f=n.upcoming)==null?void 0:f.length)>0?e.jsx("div",{className:"space-y-2",children:n.upcoming.slice(0,10).map(h=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:h.patient_name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[h.scheduled_date," at ",h.scheduled_time," • ",h.service_type_name]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium bg-${h.status_color}-100 text-${h.status_color}-800`,children:h.status_label})]},h.id))}):e.jsx("p",{className:"text-slate-500 text-center py-4",children:"No upcoming appointments"})]})]}):e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ta,{className:"w-6 h-6 text-teal-600"})})},aN=({availability:n,onAdd:d})=>{const c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Weekly Availability"}),e.jsx(Me,{onClick:d,children:"Add Availability"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-2",children:c.map((o,f)=>{const h=n.filter(p=>p.day_of_week===f);return e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm font-medium text-slate-600 mb-2",children:o}),h.length>0?h.map(p=>e.jsxs("div",{className:"bg-teal-100 text-teal-800 rounded px-2 py-1 text-xs mb-1",children:[p.start_time," - ",p.end_time]},p.id)):e.jsx("p",{className:"text-xs text-slate-400",children:"No availability"})]},o)})})]})},lN=({unavailabilities:n,onAdd:d})=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Time Off Requests"}),e.jsx(Me,{onClick:d,children:"Request Time Off"})]}),n.length>0?e.jsx("div",{className:"space-y-3",children:n.map(c=>e.jsx("div",{className:`p-4 rounded-lg border ${c.is_current?"bg-amber-50 border-amber-200":"bg-slate-50 border-slate-200"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:c.type_label}),e.jsxs("p",{className:"text-sm text-slate-500",children:[c.start_date," to ",c.end_date]}),c.reason&&e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:c.reason})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${c.approval_status==="approved"?"bg-emerald-100 text-emerald-800":c.approval_status==="denied"?"bg-red-100 text-red-800":"bg-amber-100 text-amber-800"}`,children:c.approval_status_label})]})},c.id))}):e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No time off requests"})]}),nN=({skills:n,onAdd:d,staffId:c,onRefresh:o})=>{const f=async h=>{try{await ue.delete(`/v2/staff/${c}/skills/${h}`),o()}catch(p){console.error("Failed to remove skill:",p)}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Skills & Certifications"}),e.jsx(Me,{onClick:d,children:"Add Skill"})]}),n.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(h=>e.jsx("div",{className:`p-4 rounded-lg border ${h.is_expired?"bg-red-50 border-red-200":h.is_expiring_soon?"bg-amber-50 border-amber-200":"bg-slate-50 border-slate-200"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:h.name}),e.jsx("p",{className:"text-xs text-slate-500",children:h.category}),h.expires_at&&e.jsx("p",{className:`text-xs mt-1 ${h.is_expired?"text-red-600":h.is_expiring_soon?"text-amber-600":"text-slate-500"}`,children:h.is_expired?"Expired":h.is_expiring_soon?"Expiring soon":`Expires: ${h.expires_at}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium bg-${h.status_color}-100 text-${h.status_color}-800`,children:h.proficiency_level}),e.jsx("button",{onClick:()=>f(h.id),className:"text-slate-400 hover:text-red-600",children:"×"})]})]})},h.id))}):e.jsx("p",{className:"text-slate-500 text-center py-8",children:"No skills assigned"})]})},rN=({travel:n})=>{var d,c,o,f,h,p;return n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"This Week's Travel"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[((d=n.weekly_metrics)==null?void 0:d.total_travel_hours)||0,"h"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Total Travel"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:((c=n.weekly_metrics)==null?void 0:c.total_assignments)||0}),e.jsx("p",{className:"text-xs text-slate-500",children:"Appointments"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:((o=n.weekly_metrics)==null?void 0:o.average_travel_per_assignment)||0}),e.jsx("p",{className:"text-xs text-slate-500",children:"Avg mins/visit"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[n.estimated_weekly_overhead||0,"h"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Estimated Weekly"})]})]})]}),((h=(f=n.weekly_metrics)==null?void 0:f.by_day)==null?void 0:h.length)>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Travel by Day"}),e.jsx("div",{className:"grid grid-cols-7 gap-2",children:n.weekly_metrics.by_day.map(y=>e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs font-medium text-slate-600",children:y.day_name.substring(0,3)}),e.jsxs("p",{className:"text-lg font-bold text-slate-800",children:[y.total_travel_minutes,"m"]}),e.jsxs("p",{className:"text-xs text-slate-400",children:[y.assignment_count," visits"]})]},y.date))})]}),((p=n.assignment_details)==null?void 0:p.length)>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-3",children:"Recent Travel"}),e.jsx("div",{className:"space-y-2",children:n.assignment_details.slice(0,10).map((y,N)=>y.travel_minutes>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-800",children:y.patient_name}),e.jsx("p",{className:"text-sm text-slate-500",children:y.scheduled_date})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-slate-800",children:[y.travel_minutes," mins"]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["from ",y.travel_from]})]})]},N))})]})]}):e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ta,{className:"w-6 h-6 text-teal-600"})})},iN=()=>{var pe,q,ae,H,L,Z,Te,ye;const n=xs(),[d,c]=g.useState(!0),[o,f]=g.useState(null),[h,p]=g.useState([]),[y,N]=g.useState(null),[j,v]=g.useState(null),[S,M]=g.useState([]),[U,k]=g.useState([]),[B,A]=g.useState([]),[$,Y]=g.useState({staff_role_code:"",employment_type_code:""}),[w,D]=g.useState("overview"),z=g.useCallback(async()=>{c(!0);try{const[E,ee,V,re,Re,De]=await Promise.all([ue.get("/v2/workforce/summary"),ue.get("/v2/workforce/fte-trend?weeks=8"),ue.get("/v2/workforce/hhr-complement"),ue.get("/v2/workforce/satisfaction"),ue.get("/v2/workforce/metadata/roles"),ue.get("/v2/workforce/metadata/employment-types")]);f(E.data.data),p(ee.data.data||[]),N(V.data.data),v(re.data.data),k(Re.data.data||[]),A(De.data.data||[])}catch(E){console.error("Failed to fetch workforce data:",E)}finally{c(!1)}},[]),W=g.useCallback(async()=>{try{const E=new URLSearchParams({...$.staff_role_code&&{staff_role_code:$.staff_role_code},...$.employment_type_code&&{employment_type_code:$.employment_type_code}}),ee=await ue.get(`/v2/workforce/staff?${E}`);M(ee.data.data||[])}catch(E){console.error("Failed to fetch staff:",E)}},[$]);g.useEffect(()=>{z()},[z]),g.useEffect(()=>{w==="staff"&&W()},[w,$,W]);const F=E=>{switch(E){case"GREEN":return"bg-emerald-100 text-emerald-800 border-emerald-300";case"YELLOW":return"bg-amber-100 text-amber-800 border-amber-300";case"RED":return"bg-red-100 text-red-800 border-red-300";default:return"bg-slate-100 text-slate-600 border-slate-300"}},J=E=>({green:"bg-emerald-100 text-emerald-800",blue:"bg-blue-100 text-blue-800",orange:"bg-amber-100 text-amber-800",purple:"bg-purple-100 text-purple-800"})[E]||"bg-slate-100 text-slate-600",I=E=>({blue:"bg-blue-100 text-blue-800",indigo:"bg-indigo-100 text-indigo-800",green:"bg-emerald-100 text-emerald-800",purple:"bg-purple-100 text-purple-800",teal:"bg-teal-100 text-teal-800",gray:"bg-slate-100 text-slate-600"})[E]||"bg-slate-100 text-slate-600";if(d)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(ta,{size:"lg"})});const Q=(o==null?void 0:o.fte_compliance)||{},de=(o==null?void 0:o.headcount)||{},te=(o==null?void 0:o.capacity)||{};return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Workforce Management"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"HHR complement, FTE compliance, and staff satisfaction metrics"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Me,{variant:"primary",onClick:()=>n("/spo/scheduling"),children:"Open Scheduler"}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Last updated: ",new Date(o==null?void 0:o.calculated_at).toLocaleString()]})]})]}),e.jsx("div",{className:"flex gap-1 bg-slate-100 p-1 rounded-lg w-fit",children:["overview","staff","hhr","satisfaction"].map(E=>e.jsx("button",{onClick:()=>D(E),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${w===E?"bg-white shadow text-slate-900":"text-slate-600 hover:text-slate-900"}`,children:E==="hhr"?"HHR Complement":E.charAt(0).toUpperCase()+E.slice(1)},E))}),w==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:`p-5 rounded-xl border-2 shadow-sm ${F(Q.band)}`,children:[e.jsx("div",{className:"text-xs font-bold uppercase opacity-70",children:"FTE Ratio"}),e.jsxs("div",{className:"text-4xl font-bold mt-1",children:[Q.ratio||0,"%"]}),e.jsxs("div",{className:"text-sm mt-2 opacity-80",children:[Q.full_time_count||0," FT / ",Q.direct_staff_count||0," Direct"]}),e.jsxs("div",{className:"text-xs mt-1 opacity-60",children:["Target: ",Q.target||80,"%"]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Total Headcount"}),e.jsx("div",{className:"text-4xl font-bold text-slate-700 mt-1",children:de.total||0}),e.jsxs("div",{className:"grid grid-cols-4 gap-1 mt-3 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-emerald-600",children:de.full_time||0}),e.jsx("div",{className:"text-slate-400",children:"FT"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-blue-600",children:de.part_time||0}),e.jsx("div",{className:"text-slate-400",children:"PT"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-amber-600",children:de.casual||0}),e.jsx("div",{className:"text-slate-400",children:"Cas"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-purple-600",children:de.sspo||0}),e.jsx("div",{className:"text-slate-400",children:"SSPO"})]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Weekly Capacity"}),e.jsxs("div",{className:"text-4xl font-bold text-slate-700 mt-1",children:[te.total_capacity_hours||0,"h"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-emerald-500 rounded-full",style:{width:`${Math.min(100,te.utilization_rate||0)}%`}})}),e.jsxs("span",{className:"text-sm font-medium",children:[te.utilization_rate||0,"%"]})]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:[te.internal_hours||0,"h internal | ",te.sspo_hours||0,"h SSPO"]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Staff Satisfaction"}),e.jsxs("div",{className:`text-4xl font-bold mt-1 ${(((pe=o==null?void 0:o.satisfaction)==null?void 0:pe.rate)||0)>=95?"text-emerald-600":"text-amber-600"}`,children:[((q=o==null?void 0:o.satisfaction)==null?void 0:q.rate)||"N/A","%"]}),e.jsxs("div",{className:"text-sm text-slate-500 mt-2",children:["Target: ",((ae=o==null?void 0:o.satisfaction)==null?void 0:ae.target)||95,"%"]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[((H=o==null?void 0:o.satisfaction)==null?void 0:H.responses)||0," responses"]})]})]}),h.length>0&&e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-600 mb-4",children:"FTE Compliance Trend (8 Weeks)"}),e.jsx("div",{className:"flex items-end gap-3 h-40",children:h.map((E,ee)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:`w-full rounded-t transition-all ${F(E.band).split(" ")[0]}`,style:{height:`${Math.max(10,E.fte_ratio||0)}%`},title:`${E.fte_ratio}%`}),e.jsx("div",{className:"text-xs text-slate-400 mt-2",children:E.week_label}),e.jsxs("div",{className:"text-xs font-bold",children:[E.fte_ratio||0,"%"]})]},ee))}),e.jsxs("div",{className:"relative h-0 -mt-40 mb-40 pointer-events-none",children:[e.jsx("div",{className:"absolute w-full border-t-2 border-dashed border-emerald-500",style:{top:"20%"}}),e.jsx("div",{className:"absolute right-0 -mt-3 text-xs text-emerald-600 font-medium",children:"80% Target"})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-emerald-100 border border-emerald-300"})," Compliant (80%+)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-amber-100 border border-amber-300"})," At Risk (75-79%)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-red-100 border border-red-300"})," Non-Compliant (<75%)"]})]})]})]}),w==="hhr"&&y&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"HHR Complement by Role & Employment Type"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Breakdown of Human Health Resources by worker type and employment category. SSPO staff are tracked separately and excluded from FTE ratio calculation."}),e.jsx("div",{className:"flex gap-4 mb-6 flex-wrap",children:B.map(E=>e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${J(E.badge_color)}`,children:[E.code,": ",E.name,!E.is_direct_staff&&" (Not in FTE)"]},E.code))}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-bold text-slate-600",children:"Role"}),e.jsx("th",{className:"text-left py-3 px-4 font-bold text-slate-600",children:"Category"}),B.map(E=>e.jsx("th",{className:"text-center py-3 px-4 font-bold text-slate-600",children:E.code},E.code)),e.jsx("th",{className:"text-center py-3 px-4 font-bold text-slate-600",children:"Total"}),e.jsx("th",{className:"text-center py-3 px-4 font-bold text-slate-600",children:"FTE Eligible"})]})}),e.jsx("tbody",{children:(y.complement||[]).filter(E=>E.total>0).map(E=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${I(E.badge_color)}`,children:E.role_code}),e.jsx("span",{className:"ml-2 text-slate-700",children:E.role_name})]}),e.jsx("td",{className:"py-3 px-4 text-slate-500",children:E.category}),B.map(ee=>{const V=E.by_employment_type[ee.code]||{};return e.jsx("td",{className:"text-center py-3 px-4",children:V.count>0?e.jsx("span",{className:"font-bold",children:V.count}):e.jsx("span",{className:"text-slate-300",children:"-"})},ee.code)}),e.jsx("td",{className:"text-center py-3 px-4 font-bold",children:E.total}),e.jsx("td",{className:"text-center py-3 px-4",children:e.jsx("span",{className:E.fte_eligible>0?"text-emerald-600 font-bold":"text-slate-300",children:E.fte_eligible})})]},E.role_code))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-50 font-bold",children:[e.jsx("td",{className:"py-3 px-4",colSpan:2,children:"Total"}),B.map(E=>{var ee,V;return e.jsx("td",{className:"text-center py-3 px-4",children:((V=(ee=y.totals)==null?void 0:ee.by_employment_type)==null?void 0:V[E.code])||0},E.code)}),e.jsx("td",{className:"text-center py-3 px-4",children:((L=y.totals)==null?void 0:L.grand_total)||0}),e.jsx("td",{className:"text-center py-3 px-4 text-emerald-600",children:((Z=y.totals)==null?void 0:Z.direct_staff_total)||0})]})})]})}),e.jsx("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-600",children:"FTE Ratio Calculation"}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Full-Time Direct Staff (",((Te=y.totals)==null?void 0:Te.full_time_total)||0,") / Total Direct Staff (",((ye=y.totals)==null?void 0:ye.direct_staff_total)||0,") x 100%"]})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg ${F(y.band)}`,children:e.jsxs("div",{className:"text-2xl font-bold",children:[y.fte_ratio||0,"%"]})})]})})]})}),w==="satisfaction"&&j&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Satisfaction Rate"}),e.jsx("div",{className:`text-4xl font-bold mt-1 ${j.meets_target?"text-emerald-600":"text-amber-600"}`,children:j.satisfaction_rate!==null?`${j.satisfaction_rate}%`:"N/A"}),e.jsxs("div",{className:"text-sm text-slate-500 mt-2",children:["Target: ",j.target_rate,"%"]}),j.gap_to_target>0&&e.jsxs("div",{className:"text-xs text-amber-600 mt-1",children:["Gap: ",j.gap_to_target.toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Average Satisfaction"}),e.jsx("div",{className:"text-4xl font-bold text-slate-700 mt-1",children:j.average_satisfaction!==null?j.average_satisfaction.toFixed(1):"N/A"}),e.jsx("div",{className:"text-sm text-slate-500 mt-2",children:"Out of 100"})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Survey Responses"}),e.jsx("div",{className:"text-4xl font-bold text-slate-700 mt-1",children:j.total_responses}),j.latest_survey_date&&e.jsxs("div",{className:"text-sm text-slate-500 mt-2",children:["Last: ",j.latest_survey_date]})]})]}),j.distribution&&e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Satisfaction Distribution"}),e.jsx("div",{className:"space-y-3",children:[{key:"very_satisfied",label:"Very Satisfied (90-100)",color:"bg-emerald-500"},{key:"satisfied",label:"Satisfied (70-89)",color:"bg-emerald-300"},{key:"neutral",label:"Neutral (50-69)",color:"bg-amber-400"},{key:"dissatisfied",label:"Dissatisfied (30-49)",color:"bg-orange-400"},{key:"very_dissatisfied",label:"Very Dissatisfied (<30)",color:"bg-red-500"}].map(({key:E,label:ee,color:V})=>{const re=j.distribution[E]||0,Re=j.total_responses>0?re/j.total_responses*100:0;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-40 text-sm text-slate-600",children:ee}),e.jsx("div",{className:"flex-1 h-6 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${V} transition-all`,style:{width:`${Re}%`}})}),e.jsxs("div",{className:"w-16 text-right text-sm font-medium",children:[re," (",Re.toFixed(0),"%)"]})]},E)})})]})]}),w==="staff"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(Jl,{value:$.staff_role_code,onChange:E=>Y(ee=>({...ee,staff_role_code:E.target.value})),options:[{value:"",label:"All Roles"},...U.map(E=>({value:E.code,label:`${E.code} - ${E.name}`}))],placeholder:"Filter by role"}),e.jsx(Jl,{value:$.employment_type_code,onChange:E=>Y(ee=>({...ee,employment_type_code:E.target.value})),options:[{value:"",label:"All Employment Types"},...B.map(E=>({value:E.code,label:E.name}))],placeholder:"Filter by type"}),e.jsx(Me,{variant:"secondary",onClick:()=>Y({staff_role_code:"",employment_type_code:""}),children:"Clear"})]}),e.jsx(Ja,{title:"Staff Directory",children:e.jsx(or,{compact:!0,columns:[{header:"Name",accessor:"name",render:E=>e.jsx("button",{onClick:()=>n(`/staff/${E.id}`),className:"text-teal-600 hover:text-teal-800 font-medium hover:underline text-left",children:E.name})},{header:"Role",accessor:"staff_role_code",render:E=>e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${I(E.staff_role_badge_color||"blue")}`,children:E.staff_role_code||E.organization_role||"-"})},{header:"Employment",accessor:"employment_type_code",render:E=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${J(E.employment_type_badge_color||"green")}`,children:E.employment_type_name||E.employment_type_code||"-"})},{header:"FTE Eligible",accessor:"is_direct_staff",render:E=>e.jsx("span",{className:E.is_direct_staff?"text-emerald-600 font-bold":"text-slate-400",children:E.is_direct_staff?"Yes":"No"})},{header:"Hours/Week",accessor:"max_weekly_hours",render:E=>`${E.max_weekly_hours||40}h`},{header:"Utilization",accessor:"utilization_rate",render:E=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-slate-200 rounded-full",children:e.jsx("div",{className:`h-2 rounded-full ${E.utilization_rate>90?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,E.utilization_rate||0)}%`}})}),e.jsxs("span",{className:"text-sm",children:[E.utilization_rate||0,"%"]})]})},{header:"Schedule",accessor:"id",render:E=>e.jsx("button",{onClick:()=>n(`/staff/${E.id}`),className:"px-3 py-1 text-xs font-medium bg-teal-600 text-white rounded hover:bg-teal-700 transition-colors",children:"Schedule"})}],data:S,keyField:"id"})})]})]})},cN=()=>{var Q,de,te,pe,q,ae,H,L,Z,Te,ye,E,ee,V,re,Re,De,ge,ke,Oe,Rt,pt,ns,Wt,Nt,rs,Mt,is,zs,Bs,es,It,fs,Is,os,Qs,Us,ts,ds,Gs,Vs,sa;const n=xs(),[d,c]=wp(),[o,f]=g.useState(!0),[h,p]=g.useState(null),[y,N]=g.useState(null),[j,v]=g.useState(d.get("period_type")||"week"),[S,M]=g.useState(d.get("provider_type")||""),[U,k]=g.useState(parseInt(d.get("forecast_weeks")||"4")),B=g.useCallback(async()=>{f(!0);try{const He=new URLSearchParams({period_type:j,forecast_weeks:U.toString()});S&&He.append("provider_type",S);const ht=await ue.get(`/v2/workforce/capacity?${He}`);console.log("Workforce Capacity API Response:",ht.data),p(ht.data.data),N(ht.data.meta)}catch(He){console.error("Failed to fetch capacity data:",He)}finally{f(!1)}},[j,S,U]);g.useEffect(()=>{B()},[B]),g.useEffect(()=>{const He=new URLSearchParams;j!=="week"&&He.set("period_type",j),S&&He.set("provider_type",S),U!==4&&He.set("forecast_weeks",U.toString()),c(He,{replace:!0})},[j,S,U,c]);const A=He=>{switch(He){case"surplus":return"bg-emerald-100 text-emerald-800 border-emerald-300";case"balanced":return"bg-blue-100 text-blue-800 border-blue-300";case"shortage":return"bg-amber-100 text-amber-800 border-amber-300";case"critical":return"bg-red-100 text-red-800 border-red-300";default:return"bg-slate-100 text-slate-600 border-slate-300"}},$=He=>He>=20?"bg-emerald-500":He>=0?"bg-blue-500":He>=-20?"bg-amber-500":"bg-red-500",Y=He=>({RN:"bg-blue-100 text-blue-800",RPN:"bg-indigo-100 text-indigo-800",PSW:"bg-emerald-100 text-emerald-800",OT:"bg-purple-100 text-purple-800",PT:"bg-teal-100 text-teal-800",SW:"bg-pink-100 text-pink-800",DIET:"bg-orange-100 text-orange-800"})[He]||"bg-slate-100 text-slate-600";if(o)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(ta,{size:"lg"})});const w=(h==null?void 0:h.snapshot)||{},D=w.summary||{},z=w.available_by_role||[],W=w.required_by_service||[],F=w.scheduled_by_service||[],J=(h==null?void 0:h.forecast)||[],I=(h==null?void 0:h.provider_comparison)||null;return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Workforce Capacity"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Available capacity vs required care hours by role, service type, and provider"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx(Me,{variant:"primary",onClick:()=>n("/spo/scheduling"),children:"Open Scheduler"})})]}),e.jsxs("div",{className:"flex gap-4 items-center bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx(Jl,{value:j,onChange:He=>v(He.target.value),options:[{value:"week",label:"Weekly View"},{value:"month",label:"Monthly View"}],className:"w-40"}),e.jsx(Jl,{value:S,onChange:He=>M(He.target.value),options:[{value:"",label:"All Providers"},{value:"spo",label:"SPO Internal Only"},{value:"sspo",label:"SSPO Only"}],className:"w-48"}),e.jsx(Jl,{value:U.toString(),onChange:He=>k(parseInt(He.target.value)),options:[{value:"0",label:"No Forecast"},{value:"2",label:"2 Week Forecast"},{value:"4",label:"4 Week Forecast"},{value:"8",label:"8 Week Forecast"}],className:"w-44"}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Period: ",y==null?void 0:y.start_date," to ",y==null?void 0:y.end_date]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Available Hours"}),e.jsxs("div",{className:"text-3xl font-bold text-emerald-600 mt-1",children:[((Q=D.available_hours)==null?void 0:Q.toFixed(1))||0,"h"]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:[((de=w.staff_count)==null?void 0:de.total)||0," staff members"]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Required Hours"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mt-1",children:[((te=D.required_hours)==null?void 0:te.toFixed(1))||0,"h"]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:[w.patient_count||0," patients"]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Scheduled Hours"}),e.jsxs("div",{className:"text-3xl font-bold text-purple-600 mt-1",children:[((pe=D.scheduled_hours)==null?void 0:pe.toFixed(1))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400 mt-2",children:D.required_hours>0?`${(D.scheduled_hours/D.required_hours*100).toFixed(0)}% of required`:"No requirements"})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Travel Overhead"}),e.jsxs("div",{className:"text-3xl font-bold text-amber-600 mt-1",children:[((q=D.travel_overhead)==null?void 0:q.toFixed(1))||0,"h"]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:[(y==null?void 0:y.default_travel_minutes)||30," min/visit"]})]}),e.jsxs("div",{className:`p-5 rounded-xl border-2 shadow-sm ${A(D.status)}`,children:[e.jsx("div",{className:"text-xs font-bold uppercase opacity-70",children:"Net Capacity"}),e.jsxs("div",{className:"text-3xl font-bold mt-1",children:[((ae=D.net_capacity)==null?void 0:ae.toFixed(1))||0,"h"]}),e.jsxs("div",{className:"text-xs mt-2 opacity-80 capitalize",children:["Status: ",D.status||"unknown"]})]})]}),I&&e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-600 mb-4",children:"Provider Type Comparison"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"SPO Internal Staff"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${A((L=(H=I.spo)==null?void 0:H.summary)==null?void 0:L.status)}`,children:((Te=(Z=I.spo)==null?void 0:Z.summary)==null?void 0:Te.status)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-emerald-600",children:[((ee=(E=(ye=I.spo)==null?void 0:ye.summary)==null?void 0:E.available_hours)==null?void 0:ee.toFixed(0))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Available"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[((Re=(re=(V=I.spo)==null?void 0:V.summary)==null?void 0:re.required_hours)==null?void 0:Re.toFixed(0))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Required"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[((ke=(ge=(De=I.spo)==null?void 0:De.summary)==null?void 0:ge.scheduled_hours)==null?void 0:ke.toFixed(0))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Scheduled"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:`text-lg font-bold ${((Rt=(Oe=I.spo)==null?void 0:Oe.summary)==null?void 0:Rt.net_capacity)>=0?"text-emerald-600":"text-red-600"}`,children:[((Wt=(ns=(pt=I.spo)==null?void 0:pt.summary)==null?void 0:ns.net_capacity)==null?void 0:Wt.toFixed(0))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Net"})]})]})]}),e.jsxs("div",{className:"space-y-3 border-l pl-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700",children:"SSPO Contracted Staff"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${A((rs=(Nt=I.sspo)==null?void 0:Nt.summary)==null?void 0:rs.status)}`,children:((is=(Mt=I.sspo)==null?void 0:Mt.summary)==null?void 0:is.status)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-emerald-600",children:[((es=(Bs=(zs=I.sspo)==null?void 0:zs.summary)==null?void 0:Bs.available_hours)==null?void 0:es.toFixed(0))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Available"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[((Is=(fs=(It=I.sspo)==null?void 0:It.summary)==null?void 0:fs.required_hours)==null?void 0:Is.toFixed(0))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Required"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[((Us=(Qs=(os=I.sspo)==null?void 0:os.summary)==null?void 0:Qs.scheduled_hours)==null?void 0:Us.toFixed(0))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Scheduled"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:`text-lg font-bold ${((ds=(ts=I.sspo)==null?void 0:ts.summary)==null?void 0:ds.net_capacity)>=0?"text-emerald-600":"text-red-600"}`,children:[((sa=(Vs=(Gs=I.sspo)==null?void 0:Gs.summary)==null?void 0:Vs.net_capacity)==null?void 0:sa.toFixed(0))||0,"h"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Net"})]})]})]})]})]}),J.length>0&&e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-600 mb-4",children:["Capacity Forecast (",J.length," Weeks)"]}),e.jsx("div",{className:"flex items-end gap-3 h-40",children:J.map((He,ht)=>{var Hs;const gt=((Hs=He.summary)==null?void 0:Hs.net_capacity)||0,cs=Math.max(...J.map(xa=>{var ia;return Math.abs(((ia=xa.summary)==null?void 0:ia.net_capacity)||0)}),50),Ct=Math.min(100,Math.abs(gt)/cs*100);return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"relative w-full h-32 flex items-end justify-center",children:e.jsx("div",{className:`w-full rounded-t transition-all ${$(gt)}`,style:{height:`${Math.max(10,Ct)}%`},title:`${gt.toFixed(1)}h`})}),e.jsx("div",{className:"text-xs text-slate-400 mt-2",children:He.week_label}),e.jsxs("div",{className:`text-xs font-bold ${gt>=0?"text-emerald-600":"text-red-600"}`,children:[gt>=0?"+":"",gt.toFixed(0),"h"]})]},ht)})}),e.jsxs("div",{className:"flex items-center gap-6 mt-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-emerald-500"})," Surplus (20h+)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-blue-500"})," Balanced (0-20h)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-amber-500"})," Shortage (0 to -20h)"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded bg-red-500"})," Critical (-20h+)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(Ja,{title:"Available Capacity by Role",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-bold text-slate-600",children:"Role"}),e.jsx("th",{className:"text-right py-3 px-4 font-bold text-slate-600",children:"Staff"}),e.jsx("th",{className:"text-right py-3 px-4 font-bold text-slate-600",children:"Available Hours"})]})}),e.jsx("tbody",{children:z.length>0?z.map(He=>{var ht;return e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${Y(He.role_code)}`,children:He.role_code}),e.jsx("span",{className:"ml-2 text-slate-700",children:He.role_name})]}),e.jsx("td",{className:"text-right py-3 px-4 text-slate-600",children:He.staff_count}),e.jsxs("td",{className:"text-right py-3 px-4 font-bold text-emerald-600",children:[(ht=He.total_hours)==null?void 0:ht.toFixed(1),"h"]})]},He.role_code)}):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"py-6 text-center text-slate-400",children:"No staff availability data"})})}),z.length>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-50 font-bold",children:[e.jsx("td",{className:"py-3 px-4",children:"Total"}),e.jsx("td",{className:"text-right py-3 px-4",children:z.reduce((He,ht)=>He+(ht.staff_count||0),0)}),e.jsxs("td",{className:"text-right py-3 px-4 text-emerald-600",children:[z.reduce((He,ht)=>He+(ht.total_hours||0),0).toFixed(1),"h"]})]})})]})})}),e.jsx(Ja,{title:"Required Care by Service Type",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-bold text-slate-600",children:"Service Type"}),e.jsx("th",{className:"text-right py-3 px-4 font-bold text-slate-600",children:"Required"}),e.jsx("th",{className:"text-right py-3 px-4 font-bold text-slate-600",children:"Scheduled"}),e.jsx("th",{className:"text-right py-3 px-4 font-bold text-slate-600",children:"Gap"})]})}),e.jsx("tbody",{children:W.length>0?W.map(He=>{var Ct;const ht=F.find(Hs=>Hs.service_type_id===He.service_type_id),gt=(ht==null?void 0:ht.total_hours)||0,cs=He.total_hours-gt;return e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[e.jsx("td",{className:"py-3 px-4 text-slate-700",children:He.service_type_name}),e.jsxs("td",{className:"text-right py-3 px-4 text-blue-600",children:[(Ct=He.total_hours)==null?void 0:Ct.toFixed(1),"h"]}),e.jsxs("td",{className:"text-right py-3 px-4 text-purple-600",children:[gt.toFixed(1),"h"]}),e.jsx("td",{className:`text-right py-3 px-4 font-bold ${cs>0?"text-amber-600":"text-emerald-600"}`,children:cs>0?`-${cs.toFixed(1)}h`:"OK"})]},He.service_type_id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-6 text-center text-slate-400",children:"No care requirements"})})}),W.length>0&&e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-50 font-bold",children:[e.jsx("td",{className:"py-3 px-4",children:"Total"}),e.jsxs("td",{className:"text-right py-3 px-4 text-blue-600",children:[W.reduce((He,ht)=>He+(ht.total_hours||0),0).toFixed(1),"h"]}),e.jsxs("td",{className:"text-right py-3 px-4 text-purple-600",children:[F.reduce((He,ht)=>He+(ht.total_hours||0),0).toFixed(1),"h"]}),e.jsx("td",{className:"text-right py-3 px-4",children:"-"})]})})]})})})]}),e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg text-sm text-slate-600",children:[e.jsx("div",{className:"font-bold mb-2",children:"Capacity Calculation"}),e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Net Capacity"})," = Available Hours - Required Hours - Travel Overhead"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Travel Overhead"})," = Number of Scheduled Visits x ",(y==null?void 0:y.default_travel_minutes)||30," minutes"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status"}),": Surplus (20h+), Balanced (0-20h), Shortage (0 to -20h), Critical (-20h deficit)"]})]})]})]})},oN=({partner:n,onViewProfile:d,onAssign:c})=>{var y;const o={high:"bg-emerald-100 text-emerald-800",moderate:"bg-amber-100 text-amber-800",low:"bg-rose-100 text-rose-800"},f={active:"bg-green-100 text-green-800",draft:"bg-slate-100 text-slate-600",inactive:"bg-red-100 text-red-800"},p=(()=>{var N;if((N=n.capacity_metadata)!=null&&N.current_capacity){const j=n.capacity_metadata.current_capacity;return j>=70?"high":j>=40?"moderate":"low"}return"moderate"})();return e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-slate-100",children:e.jsxs("div",{className:"flex items-start gap-4",children:[n.logo_url?e.jsx("img",{src:n.logo_url,alt:n.name,className:"w-14 h-14 rounded-lg object-cover"}):e.jsx("div",{className:"w-14 h-14 rounded-lg bg-gradient-to-br from-teal-500 to-teal-600 flex items-center justify-center text-white font-bold text-lg",children:n.initials}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 truncate",children:n.name}),n.tagline&&e.jsx("p",{className:"text-sm text-slate-500 mt-0.5 line-clamp-1",children:n.tagline}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${f[n.status]||f.active}`,children:n.status||"Active"}),e.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${o[p]}`,children:[p.charAt(0).toUpperCase()+p.slice(1)," Capacity"]})]})]})]})}),e.jsxs("div",{className:"p-6 border-b border-slate-100",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-2",children:"Services Offered"}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(n.service_types||[]).slice(0,5).map((N,j)=>e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700 border border-blue-100",children:N.name},N.id||j)),n.service_types&&n.service_types.length>5&&e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 text-slate-600",children:["+",n.service_types.length-5," more"]})]})]}),e.jsx("div",{className:"p-6 border-b border-slate-100",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-1",children:"Region"}),e.jsx("div",{className:"text-slate-700",children:((y=n.region_code)==null?void 0:y.replace(/_/g," "))||"All Regions"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-1",children:"Contact"}),e.jsx("div",{className:"text-slate-700 truncate",children:n.contact_email||"N/A"})]})]})}),e.jsxs("div",{className:"p-4 bg-slate-50 flex gap-2",children:[e.jsx(Me,{variant:"secondary",size:"sm",className:"flex-1",onClick:()=>d(n),children:"View Profile"}),e.jsx(Me,{size:"sm",className:"flex-1",onClick:()=>c(n),children:"Assign Service"})]})]})},dN=()=>{const n=xs(),[d,c]=g.useState([]),[o,f]=g.useState({regions:[],serviceTypes:[]}),[h,p]=g.useState({total:0,active:0,totalServices:0}),[y,N]=g.useState(!0),[j,v]=g.useState(null),[S,M]=g.useState(""),[U,k]=g.useState(""),[B,A]=g.useState(""),[$,Y]=g.useState("");g.useEffect(()=>{(async()=>{try{const[Q,de]=await Promise.all([fetch("/api/v2/sspo-marketplace/filters"),fetch("/api/v2/sspo-marketplace/stats")]);if(Q.ok){const te=await Q.json();f(te.data||{regions:[],serviceTypes:[]})}if(de.ok){const te=await de.json();p(te.data||{total:0,active:0,totalServices:0})}}catch(Q){console.error("Error fetching filters/stats:",Q)}})()},[]);const w=g.useCallback(async()=>{N(!0),v(null);try{const I=new URLSearchParams;S&&I.append("search",S),U&&I.append("region",U),B&&I.append("service_type",B),$&&I.append("status",$);const Q=await fetch(`/api/v2/sspo-marketplace?${I.toString()}`);if(!Q.ok)throw new Error("Failed to fetch partners");const de=await Q.json();c(de.data||[])}catch(I){v(I.message),c([])}finally{N(!1)}},[S,U,B,$]);g.useEffect(()=>{const I=setTimeout(()=>{w()},S?300:0);return()=>clearTimeout(I)},[w]);const D=I=>{n(`/sspo-marketplace/${I.id}`)},z=I=>{alert(`Assignment flow for ${I.name} will be implemented in Phase 2.`)},W=()=>{w()},F=()=>{M(""),k(""),A(""),Y("")},J=S||U||B||$;return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"SSPO Partner Marketplace"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Browse and assign care bundle components to Secondary Service Provider Organizations."})]}),e.jsx(Me,{variant:"secondary",onClick:W,children:"Refresh Directory"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Available Partners"}),e.jsx("div",{className:"text-3xl font-bold text-teal-600",children:h.total})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Active Partners"}),e.jsx("div",{className:"text-3xl font-bold text-emerald-500",children:h.active})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Services Offered"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:h.totalServices})]})]}),e.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1.5",children:"Search"}),e.jsx("input",{type:"text",value:S,onChange:I=>M(I.target.value),placeholder:"Search by name or description...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500"})]}),e.jsxs("div",{className:"min-w-[180px]",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1.5",children:"Region"}),e.jsxs("select",{value:U,onChange:I=>k(I.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",children:[e.jsx("option",{value:"",children:"All Regions"}),o.regions.map(I=>e.jsx("option",{value:I.code,children:I.name},I.code))]})]}),e.jsxs("div",{className:"min-w-[180px]",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1.5",children:"Service Type"}),e.jsxs("select",{value:B,onChange:I=>A(I.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",children:[e.jsx("option",{value:"",children:"All Services"}),o.serviceTypes.map(I=>e.jsx("option",{value:I.id,children:I.name},I.id))]})]}),e.jsxs("div",{className:"min-w-[140px]",children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 uppercase tracking-wide mb-1.5",children:"Status"}),e.jsxs("select",{value:$,onChange:I=>Y(I.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-teal-500 focus:border-teal-500 bg-white",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),J&&e.jsx(Me,{variant:"ghost",size:"sm",onClick:F,children:"Clear Filters"})]})}),e.jsx(Ja,{title:"Partner Directory",children:y?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(ta,{size:"lg"}),e.jsx("span",{className:"ml-3 text-slate-500",children:"Loading partners..."})]}):j?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-2",children:"Error loading partners"}),e.jsx("p",{className:"text-slate-500 text-sm mb-4",children:j}),e.jsx(Me,{variant:"secondary",onClick:W,children:"Try Again"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-slate-400 text-lg mb-2",children:"No partners found"}),e.jsx("p",{className:"text-slate-500 text-sm",children:J?"Try adjusting your filters to see more results.":"No SSPO partners have been added yet."}),J&&e.jsx(Me,{variant:"secondary",size:"sm",className:"mt-4",onClick:F,children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(I=>e.jsx(oN,{partner:I,onViewProfile:D,onAssign:z},I.id))})})]})},uN=()=>{var $,Y,w;const{id:n}=Bi(),d=xs(),[c,o]=g.useState(null),[f,h]=g.useState(!0),[p,y]=g.useState(null);g.useEffect(()=>{n&&(async()=>{h(!0),y(null);try{const z=await fetch(`/api/v2/sspo-marketplace/${n}`);if(!z.ok)throw z.status===404?new Error("Partner not found"):new Error("Failed to fetch partner details");const W=await z.json();o(W.data)}catch(z){y(z.message)}finally{h(!1)}})()},[n]);const N=()=>{d("/sspo-marketplace")},j=()=>{alert(`Assignment flow for ${c==null?void 0:c.name} will be implemented in Phase 2.`)},v=D=>{const z={active:"bg-green-100 text-green-800",draft:"bg-slate-100 text-slate-600",inactive:"bg-red-100 text-red-800"};return z[D]||z.active},S=D=>({nursing:"bg-blue-100 text-blue-600",therapy:"bg-purple-100 text-purple-600",psw:"bg-green-100 text-green-600",monitoring:"bg-amber-100 text-amber-600",support:"bg-rose-100 text-rose-600"})[D==null?void 0:D.toLowerCase()]||"bg-slate-100 text-slate-600",M=D=>D?new Date(D).toLocaleDateString("en-CA",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"N/A",U=D=>{const z={VERIFIED:{color:"bg-emerald-100 text-emerald-700",label:"Verified",icon:"✓"},PENDING:{color:"bg-amber-100 text-amber-700",label:"Pending",icon:"○"},MISSED:{color:"bg-rose-100 text-rose-700",label:"Missed",icon:"✕"}};return z[D]||z.PENDING};if(f)return e.jsxs("div",{className:"flex items-center justify-center min-h-[400px]",children:[e.jsx(ta,{size:"lg"}),e.jsx("span",{className:"ml-3 text-slate-500",children:"Loading partner details..."})]});if(p)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 text-xl mb-2",children:"Error"}),e.jsx("p",{className:"text-slate-500 mb-4",children:p}),e.jsx(Me,{variant:"secondary",onClick:N,children:"Back to Marketplace"})]});if(!c)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-slate-400 text-xl mb-2",children:"Partner Not Found"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"The requested partner could not be found."}),e.jsx(Me,{variant:"secondary",onClick:N,children:"Back to Marketplace"})]});const k=c.capacity_summary||{},B=c.upcoming_assignments||[],A=c.recent_assignments||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Me,{variant:"ghost",onClick:N,className:"mb-2",children:"← Back to Marketplace"}),e.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm overflow-hidden",children:[c.cover_photo_url&&e.jsx("div",{className:"h-48 bg-gradient-to-r from-teal-600 to-teal-500 overflow-hidden",children:e.jsx("img",{src:c.cover_photo_url,alt:"",className:"w-full h-full object-cover opacity-60"})}),!c.cover_photo_url&&e.jsx("div",{className:"h-32 bg-gradient-to-r from-teal-600 to-teal-500"}),e.jsx("div",{className:"p-6 relative",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-6",children:[e.jsx("div",{className:`-mt-16 md:-mt-12 ${c.cover_photo_url?"":"-mt-12"}`,children:c.logo_url?e.jsx("img",{src:c.logo_url,alt:c.name,className:"w-24 h-24 rounded-xl border-4 border-white shadow-lg object-cover bg-white"}):e.jsx("div",{className:"w-24 h-24 rounded-xl border-4 border-white shadow-lg bg-gradient-to-br from-teal-500 to-teal-600 flex items-center justify-center text-white font-bold text-2xl",children:c.initials})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:c.name}),c.tagline&&e.jsx("p",{className:"text-slate-500 mt-1",children:c.tagline}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${v(c.status)}`,children:(($=c.status)==null?void 0:$.charAt(0).toUpperCase())+((Y=c.status)==null?void 0:Y.slice(1))||"Active"}),e.jsx("span",{className:"text-slate-400",children:"|"}),e.jsx("span",{className:"text-slate-600 text-sm",children:((w=c.region_code)==null?void 0:w.replace(/_/g," "))||"All Regions"})]})]}),e.jsx(Me,{onClick:j,children:"Assign Service"})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[c.description&&e.jsx(xt,{title:"About",children:e.jsx("p",{className:"text-slate-600 leading-relaxed whitespace-pre-line",children:c.description})}),e.jsx(xt,{title:"Services Offered",children:c.services&&c.services.length>0?e.jsx("div",{className:"space-y-4",children:c.services.map(D=>{var z;return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm flex-shrink-0 ${S(D.category)}`,children:D.code||((z=D.name)==null?void 0:z.substring(0,2).toUpperCase())}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-slate-800",children:D.name}),D.description&&e.jsx("p",{className:"text-sm text-slate-500 mt-0.5 line-clamp-2",children:D.description}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-slate-500",children:[D.duration_minutes&&e.jsxs("span",{children:[D.duration_minutes," min"]}),D.delivery_mode&&e.jsx("span",{className:"capitalize",children:D.delivery_mode.replace("_"," ")})]})]}),D.is_primary&&e.jsx("span",{className:"px-2 py-0.5 bg-teal-100 text-teal-700 text-xs font-medium rounded-full",children:"Primary"})]},D.id)})}):e.jsx("p",{className:"text-slate-500",children:"No services listed yet."})}),e.jsx(xt,{title:"Assigned Patients & Appointments",children:B.length>0?e.jsx("div",{className:"space-y-4",children:B.map((D,z)=>{var W,F,J,I;return e.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-slate-400 to-slate-500 flex items-center justify-center text-white font-bold text-sm",children:((W=D.patient)==null?void 0:W.initials)||"??"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-800",children:((F=D.patient)==null?void 0:F.name)||"Unknown Patient"}),e.jsxs("div",{className:"text-xs text-slate-500",children:[((J=D.appointments)==null?void 0:J.length)||0," upcoming appointment(s)"]})]})]}),e.jsx("div",{className:"space-y-2 ml-13",children:(I=D.appointments)==null?void 0:I.map(Q=>{var de,te,pe,q;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${S((de=Q.service_type)==null?void 0:de.category)}`,children:((te=Q.service_type)==null?void 0:te.code)||"SVC"}),e.jsx("span",{className:"text-sm text-slate-700",children:(pe=Q.service_type)==null?void 0:pe.name})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("div",{className:"text-slate-800 font-medium",children:M(Q.scheduled_start)}),e.jsx("div",{className:"text-slate-500 text-xs",children:((q=Q.staff)==null?void 0:q.name)||"Unassigned"})]})]},Q.id)})})]},z)})}):e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{children:"No upcoming appointments"})]})}),e.jsx(xt,{title:"Recent Service History",children:A.length>0?e.jsx("div",{className:"space-y-2",children:A.map(D=>{var W,F,J,I,Q;const z=U(D.verification_status);return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-slate-100 rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs ${z.color}`,children:z.icon}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${S((W=D.service_type)==null?void 0:W.category)}`,children:(F=D.service_type)==null?void 0:F.code}),e.jsx("span",{className:"text-sm font-medium text-slate-800",children:(J=D.patient)==null?void 0:J.name})]}),e.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:(I=D.service_type)==null?void 0:I.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-slate-700",children:M(D.scheduled_start)}),e.jsx("div",{className:"text-xs text-slate-500",children:(Q=D.staff)==null?void 0:Q.name})]})]},D.id)})}):e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{children:"No recent service history"})]})}),c.notes&&e.jsx(xt,{title:"Additional Notes",children:e.jsx("p",{className:"text-slate-600 leading-relaxed whitespace-pre-line",children:c.notes})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(xt,{title:"Capacity & Utilization",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Availability"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${k.availability_status==="High"?"bg-emerald-100 text-emerald-700":k.availability_status==="Moderate"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:k.availability_status||c.capacity_status||"Unknown"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-slate-500",children:"Utilization"}),e.jsxs("span",{className:"font-medium text-slate-700",children:[k.utilization_pct||0,"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all ${(k.utilization_pct||0)>=90?"bg-rose-500":(k.utilization_pct||0)>=70?"bg-amber-500":"bg-teal-500"}`,style:{width:`${k.utilization_pct||0}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-3 border-t border-slate-100",children:[e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-teal-600",children:k.scheduled_hours||0}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Scheduled Hours"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:k.available_hours||0}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Available Hours"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:k.patient_count||0}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Patients This Week"})]}),e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:k.visit_count||0}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Visits This Week"})]})]}),k.week_start&&e.jsxs("div",{className:"text-xs text-center text-slate-400 pt-2 border-t border-slate-100",children:["Week of ",k.week_start," to ",k.week_end]})]})}),e.jsx(xt,{title:"Contact Information",children:e.jsxs("div",{className:"space-y-4",children:[c.contact_name&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-1",children:"Contact Person"}),e.jsx("div",{className:"text-slate-800",children:c.contact_name})]}),c.contact_email&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-1",children:"Email"}),e.jsx("a",{href:`mailto:${c.contact_email}`,className:"text-teal-600 hover:text-teal-700",children:c.contact_email})]}),c.contact_phone&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-1",children:"Phone"}),e.jsx("a",{href:`tel:${c.contact_phone}`,className:"text-teal-600 hover:text-teal-700",children:c.contact_phone})]}),c.website_url&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wide mb-1",children:"Website"}),e.jsx("a",{href:c.website_url,target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:text-teal-700",children:c.website_url.replace(/^https?:\/\//,"")})]})]})}),(c.address||c.city)&&e.jsx(xt,{title:"Location",children:e.jsxs("div",{className:"text-slate-700",children:[c.address&&e.jsx("div",{children:c.address}),e.jsxs("div",{children:[c.city,c.province&&`, ${c.province}`,c.postal_code&&` ${c.postal_code}`]})]})}),c.capabilities&&c.capabilities.length>0&&e.jsx(xt,{title:"Special Capabilities",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:c.capabilities.map((D,z)=>e.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-sm rounded-lg border border-purple-100",children:D},z))})}),e.jsx(xt,{title:"Actions",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Me,{className:"w-full",onClick:j,children:"Assign Service"}),e.jsx(Me,{variant:"secondary",className:"w-full",onClick:()=>alert("Contact form coming soon"),children:"Send Message"}),e.jsx(Me,{variant:"ghost",className:"w-full",onClick:()=>alert("Reporting coming soon"),children:"View Reports"})]})})]})]})]})},mN=()=>{const[n,d]=g.useState(""),[c,o]=g.useState(""),[f,h]=g.useState(null),p=async()=>{if(n&&c)try{const N=await ue.post("/api/v2/finance/shadow-billing",{start_date:n,end_date:c});h({totalEncounters:N.data.line_items.length,totalPatients:N.data.total_patients,estimatedValue:N.data.total_amount,lineItems:N.data.line_items})}catch(N){console.error("Billing gen failed",N),alert("Failed to generate billing report.")}else alert("Please select a start and end date.")},y=()=>{alert(f?"Generating Shadow Billing CSV for selected period... (Mock Download)":"Please generate a summary first.")};return e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto py-8",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shadow Billing Engine"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Generate zero-rate billing submissions for OHaH reporting."})]})}),e.jsxs(xt,{title:"Billing Period Selection",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-slate-700",children:"Start Date"}),e.jsx("input",{type:"date",id:"startDate",className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring focus:ring-teal-500 focus:ring-opacity-50",value:n,onChange:N=>d(N.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"endDate",className:"block text-sm font-medium text-slate-700",children:"End Date"}),e.jsx("input",{type:"date",id:"endDate",className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring focus:ring-teal-500 focus:ring-opacity-50",value:c,onChange:N=>o(N.target.value)})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(Me,{onClick:p,disabled:!n||!c,children:"Generate Summary"})})]}),f&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(xt,{title:"Billing Summary (Zero-Rate)",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Total Active Plans"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:f.totalEncounters})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Total Unique Patients"}),e.jsx("p",{className:"text-2xl font-bold text-slate-800",children:f.totalPatients})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Estimated Value (Pro-rated)"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:["$",f.estimatedValue]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(Me,{onClick:y,children:"Export to CSV"})})]}),e.jsx(xt,{title:"Line Items (Pro-rated)",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Patient"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Bundle"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Period"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Days"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:f.lineItems.map((N,j)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-900",children:N.patient_name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-slate-500",children:N.bundle}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-slate-500",children:[N.start_date," to ",N.end_date]}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-slate-500",children:N.active_days}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-700",children:["$",N.total_amount]})]},j))})]})})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg text-sm text-blue-800",children:[e.jsx("p",{className:"font-bold mb-2",children:"Important Note on Shadow Billing:"}),e.jsx("p",{children:"Shadow billing is a non-monetary reporting requirement by OHaH to track service utilization. It does not generate revenue for the SPO but is crucial for compliance and data submission."})]})]})},xN=()=>{const[n,d]=g.useState([]),[c,o]=g.useState(""),[f,h]=g.useState(1),[p,y]=g.useState("SPO"),N=[{id:"dressing",name:"Wound Dressing Kit",spoCost:15,lhinCost:0},{id:"gloves",name:"Examination Gloves (Box)",spoCost:20,lhinCost:0},{id:"catheter",name:"Foley Catheter Kit",spoCost:50,lhinCost:25},{id:"bp_monitor",name:"Blood Pressure Monitor",spoCost:80,lhinCost:0},{id:"wheelchair",name:"Lightweight Wheelchair",spoCost:300,lhinCost:150}],j=()=>{if(!c||f<=0){alert("Please select a supply and quantity.");return}const v=N.find(S=>S.id===c);if(v){const S={id:n.length+1,supply:v.name,quantity:f,funding:p,cost:p==="SPO"?v.spoCost*f:v.lhinCost*f,status:"Pending",orderDate:new Date().toLocaleDateString()};d([...n,S]),alert(`Order placed for ${f} x ${v.name}.`),o(""),h(1),y("SPO")}};return e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto py-8",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Equipment & Supplies Management"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Order and track medical equipment and supplies for patients."})]})}),e.jsxs(xt,{title:"Place New Order",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"supply",className:"block text-sm font-medium text-slate-700",children:"Select Supply"}),e.jsxs("select",{id:"supply",className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring focus:ring-teal-500 focus:ring-opacity-50",value:c,onChange:v=>o(v.target.value),children:[e.jsx("option",{value:"",children:"-- Select --"}),N.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-slate-700",children:"Quantity"}),e.jsx("input",{type:"number",id:"quantity",className:"mt-1 block w-full rounded-md border-slate-300 shadow-sm focus:border-teal-500 focus:ring focus:ring-teal-500 focus:ring-opacity-50",value:f,onChange:v=>h(Math.max(1,parseInt(v.target.value)||1)),min:"1"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Funding Type"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-4",children:[e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",className:"form-radio text-teal-600 focus:ring-teal-500",name:"fundingType",value:"SPO",checked:p==="SPO",onChange:()=>y("SPO")}),e.jsx("span",{className:"ml-2 text-slate-700",children:"SPO-Funded"})]}),e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"radio",className:"form-radio text-teal-600 focus:ring-teal-500",name:"fundingType",value:"LHIN",checked:p==="LHIN",onChange:()=>y("LHIN")}),e.jsx("span",{className:"ml-2 text-slate-700",children:"LHIN-Funded"})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(Me,{onClick:j,disabled:!c||f<=0,children:"Place Order"})})]}),e.jsx(Ja,{title:"Pending Orders",children:n.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"No pending orders."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Supply"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Qty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Funding"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Order Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-200",children:n.map(v=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-900",children:["#",v.id]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:v.supply}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:v.quantity}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${v.funding==="SPO"?"bg-indigo-100 text-indigo-800":"bg-green-100 text-green-800"}`,children:v.funding})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:["$",v.cost.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:v.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-500",children:v.orderDate})]},v.id))})]})})})]})},fN=()=>{var p;const{user:n}=Br(),[d,c]=g.useState([]),[o,f]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const N=await ue.get("/v2/sspo/assignments");c(N.data)}catch(N){console.error("Failed to fetch SSPO assignments",N)}finally{f(!1)}})()},[]);const h=[{header:"Patient",accessor:"patient"},{header:"Service Type",accessor:"service"},{header:"Status",accessor:y=>e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-emerald-100 text-emerald-800",children:y.status})},{header:"Frequency",accessor:"frequency"},{header:"Next Scheduled",accessor:"next_visit"},{header:"Action",accessor:y=>e.jsx(Me,{size:"sm",variant:"secondary",children:"View Care Plan"})}];return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"SSPO Partner Portal"}),e.jsxs("p",{className:"text-slate-500 text-sm",children:["Organization: ",e.jsx("span",{className:"font-bold text-teal-700",children:((p=n==null?void 0:n.organization)==null?void 0:p.name)||"Alexis Lodge"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Me,{variant:"secondary",children:"Manage Staff"}),e.jsx(Me,{children:"Update Capacity"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Active Patients"}),e.jsx("div",{className:"text-3xl font-bold text-teal-600",children:d.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Pending Referrals"}),e.jsx("div",{className:"text-3xl font-bold text-amber-500",children:"0"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Today's Visits"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"1"})]})]}),e.jsx(Ja,{title:"My Caseload (Referrals from SPO)",children:e.jsx(or,{columns:h,data:d,keyField:"id"})})]})},hN=()=>{var I,Q,de,te,pe,q,ae,H;const[n,d]=g.useState(!0),[c,o]=g.useState(null),[f,h]=g.useState(null),[p,y]=g.useState(null),[N,j]=g.useState([]),[v,S]=g.useState([]),[M,U]=g.useState([]),[k,B]=g.useState(null),[A,$]=g.useState({staff_role_code:""}),[Y,w]=g.useState("overview"),D=g.useCallback(async()=>{d(!0);try{const[L,Z,Te,ye,E,ee]=await Promise.all([ue.get("/v2/workforce/summary"),ue.get("/v2/workforce/hhr-complement"),ue.get("/v2/workforce/satisfaction"),ue.get("/v2/workforce/assignment-summary"),ue.get("/v2/workforce/metadata/roles"),ue.get("/v2/workforce/metadata/employment-types")]);o(L.data.data),h(Z.data.data),y(Te.data.data),B(ye.data.data),S(E.data.data||[]),U(ee.data.data||[])}catch(L){console.error("Failed to fetch workforce data:",L)}finally{d(!1)}},[]),z=g.useCallback(async()=>{try{const L=new URLSearchParams({...A.staff_role_code&&{staff_role_code:A.staff_role_code}}),Z=await ue.get(`/v2/workforce/staff?${L}`);j(Z.data.data||[])}catch(L){console.error("Failed to fetch staff:",L)}},[A]);g.useEffect(()=>{D()},[D]),g.useEffect(()=>{Y==="staff"&&z()},[Y,A,z]);const W=L=>({blue:"bg-blue-100 text-blue-800",indigo:"bg-indigo-100 text-indigo-800",green:"bg-emerald-100 text-emerald-800",purple:"bg-purple-100 text-purple-800",teal:"bg-teal-100 text-teal-800",gray:"bg-slate-100 text-slate-600"})[L]||"bg-slate-100 text-slate-600";if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(ta,{size:"lg"})});const F=(c==null?void 0:c.headcount)||{},J=(c==null?void 0:c.capacity)||{};return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"SSPO Workforce"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Contracted staff capacity and assignment tracking"})]}),e.jsx("div",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-xs font-bold rounded-full",children:"SSPO Partner Organization"})]}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-purple-500 text-xl",children:"*"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-purple-800",children:"SSPO Staff Tracking"}),e.jsx("div",{className:"text-sm text-purple-700 mt-1",children:"As a subcontracted service provider, your staff are tracked separately from the primary SPO's FTE ratio calculation. Your workforce metrics focus on contracted capacity and assignment fulfillment."})]})]})}),e.jsx("div",{className:"flex gap-1 bg-slate-100 p-1 rounded-lg w-fit",children:["overview","staff"].map(L=>e.jsx("button",{onClick:()=>w(L),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${Y===L?"bg-white shadow text-slate-900":"text-slate-600 hover:text-slate-900"}`,children:L.charAt(0).toUpperCase()+L.slice(1)},L))}),Y==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Total Staff"}),e.jsx("div",{className:"text-4xl font-bold text-slate-700 mt-1",children:F.total||0}),e.jsx("div",{className:"text-sm text-slate-500 mt-2",children:"Contracted workers"})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Weekly Capacity"}),e.jsxs("div",{className:"text-4xl font-bold text-slate-700 mt-1",children:[J.total_capacity_hours||0,"h"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-purple-500 rounded-full",style:{width:`${Math.min(100,J.utilization_rate||0)}%`}})}),e.jsxs("span",{className:"text-sm font-medium",children:[J.utilization_rate||0,"%"]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Assignments (Week)"}),e.jsx("div",{className:"text-4xl font-bold text-slate-700 mt-1",children:((I=k==null?void 0:k.total)==null?void 0:I.count)||0}),e.jsxs("div",{className:"text-sm text-slate-500 mt-2",children:[((Q=k==null?void 0:k.total)==null?void 0:Q.hours)||0,"h scheduled"]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Staff Satisfaction"}),e.jsx("div",{className:`text-4xl font-bold mt-1 ${((p==null?void 0:p.satisfaction_rate)||0)>=95?"text-emerald-600":"text-amber-600"}`,children:(p==null?void 0:p.satisfaction_rate)!==null?`${p.satisfaction_rate}%`:"N/A"}),e.jsxs("div",{className:"text-sm text-slate-500 mt-2",children:[(p==null?void 0:p.total_responses)||0," responses"]})]})]}),f&&e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Staff by Role"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:(f.complement||[]).filter(L=>L.total>0).map(L=>e.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:`inline-block px-2 py-1 rounded text-xs font-bold mb-2 ${W(L.badge_color)}`,children:L.role_code}),e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:L.total}),e.jsx("div",{className:"text-xs text-slate-500",children:L.role_name})]},L.role_code))})]}),k&&e.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:["Week of ",k.week_start," - ",k.week_end]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Total Assignments"}),e.jsx("div",{className:"text-2xl font-bold text-slate-700 mt-1",children:((de=k.total)==null?void 0:de.count)||0}),e.jsxs("div",{className:"text-sm text-slate-500",children:[((te=k.total)==null?void 0:te.hours)||0," hours"]})]}),e.jsxs("div",{className:"p-4 bg-emerald-50 rounded-lg",children:[e.jsx("div",{className:"text-xs font-bold text-emerald-600 uppercase",children:"Internal Staff"}),e.jsx("div",{className:"text-2xl font-bold text-emerald-700 mt-1",children:((pe=k.internal)==null?void 0:pe.count)||0}),e.jsxs("div",{className:"text-sm text-emerald-600",children:[((q=k.internal)==null?void 0:q.hours)||0," hours"]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-xs font-bold text-purple-600 uppercase",children:"From SPO"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700 mt-1",children:((ae=k.sspo)==null?void 0:ae.count)||0}),e.jsxs("div",{className:"text-sm text-purple-600",children:[((H=k.sspo)==null?void 0:H.hours)||0," hours"]})]})]})]})]}),Y==="staff"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(Jl,{value:A.staff_role_code,onChange:L=>$(Z=>({...Z,staff_role_code:L.target.value})),options:[{value:"",label:"All Roles"},...v.map(L=>({value:L.code,label:`${L.code} - ${L.name}`}))],placeholder:"Filter by role"}),e.jsx(Me,{variant:"secondary",onClick:()=>$({staff_role_code:""}),children:"Clear"})]}),e.jsx(Ja,{title:"Staff Directory",children:e.jsx(or,{columns:[{header:"Name",accessor:"name"},{header:"Role",accessor:"staff_role_code",render:L=>e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${W(L.staff_role_badge_color||"purple")}`,children:L.staff_role_code||L.organization_role||"-"})},{header:"Status",accessor:"staff_status",render:L=>{var Z;return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${L.staff_status==="active"?"bg-emerald-100 text-emerald-800":L.staff_status==="on_leave"?"bg-amber-100 text-amber-800":"bg-slate-100 text-slate-600"}`,children:((Z=L.staff_status)==null?void 0:Z.replace("_"," ").toUpperCase())||"ACTIVE"})}},{header:"Hours/Week",accessor:"max_weekly_hours",render:L=>`${L.max_weekly_hours||40}h`},{header:"Utilization",accessor:"utilization_rate",render:L=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-16 h-2 bg-slate-200 rounded-full",children:e.jsx("div",{className:`h-2 rounded-full ${L.utilization_rate>90?"bg-amber-500":"bg-purple-500"}`,style:{width:`${Math.min(100,L.utilization_rate||0)}%`}})}),e.jsxs("span",{className:"text-sm",children:[L.utilization_rate||0,"%"]})]})},{header:"Satisfaction",accessor:"job_satisfaction",render:L=>L.job_satisfaction!==null?e.jsxs("span",{className:`font-medium ${L.job_satisfaction>=80?"text-emerald-600":L.job_satisfaction>=60?"text-amber-600":"text-red-600"}`,children:[L.job_satisfaction,"%"]}):e.jsx("span",{className:"text-slate-400",children:"-"})}],data:N,keyField:"id"})})]})]})},pN=()=>{const[n,d]=g.useState(!0),[c,o]=g.useState([]),[f,h]=g.useState([]),[p,y]=g.useState([]),[N,j]=g.useState(null),[v,S]=g.useState(!1),[M,U]=g.useState(!1),[k,B]=g.useState("capabilities"),[A,$]=g.useState(null),[Y,w]=g.useState({service_type_id:"",patient_id:"",estimated_hours:""});g.useEffect(()=>{D()},[]);const D=async()=>{d(!0);try{const[Q,de,te]=await Promise.all([ue.get("/v2/sspo-capabilities"),ue.get("/v2/sspo-capabilities/coverage"),ue.get("/v2/service-types")]);o(Q.data.data||[]),y(de.data.data||[]),h(te.data.data||te.data||[])}catch(Q){console.error("Failed to fetch capabilities",Q)}finally{d(!1)}},z=async Q=>{var de,te;try{M?await ue.post("/v2/sspo-capabilities",Q):await ue.put(`/v2/sspo-capabilities/${N.id}`,Q),S(!1),j(null),D()}catch(pe){console.error("Failed to save capability",pe),alert("Failed to save capability: "+(((te=(de=pe.response)==null?void 0:de.data)==null?void 0:te.error)||pe.message))}},W=async Q=>{if(window.confirm("Are you sure you want to delete this capability?"))try{await ue.delete(`/v2/sspo-capabilities/${Q}`),D()}catch(de){console.error("Failed to delete capability",de)}},F=async()=>{if(!Y.service_type_id||!Y.patient_id){alert("Please select a service type and patient");return}try{const Q=await ue.post("/v2/sspo-capabilities/find-matches",Y);$(Q.data)}catch(Q){console.error("Failed to find matches",Q)}},J=()=>{j(null),U(!0),S(!0)},I=Q=>{j(Q),U(!1),S(!0)};return n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"w-8 h-8 border-4 border-teal-200 border-t-teal-600 rounded-full animate-spin"})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"SSPO Capability Management"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Manage service capabilities, capacity, and marketplace visibility"})]}),e.jsxs("button",{onClick:J,className:"bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg shadow-sm flex items-center gap-2 text-sm font-medium",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Add Capability"]})]}),e.jsx("div",{className:"border-b border-slate-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"capabilities",label:"My Capabilities"},{id:"coverage",label:"Service Coverage"},{id:"matching",label:"Find Matches"}].map(Q=>e.jsx("button",{onClick:()=>B(Q.id),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${k===Q.id?"border-teal-500 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:Q.label},Q.id))})}),k==="capabilities"&&e.jsx(gN,{capabilities:c,onEdit:I,onDelete:W}),k==="coverage"&&e.jsx(bN,{coverage:p}),k==="matching"&&e.jsx(vN,{serviceTypes:f,matchingForm:Y,setMatchingForm:w,onFindMatches:F,results:A}),v&&e.jsx(jN,{capability:N,serviceTypes:f,isAddMode:M,onSave:z,onClose:()=>S(!1)})]})},gN=({capabilities:n,onEdit:d,onDelete:c})=>n.length?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(o=>e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-slate-100",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-900",children:o.service_type_name}),e.jsx("p",{className:"text-xs text-slate-500",children:o.service_type_code})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${o.is_active&&o.is_valid?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600"}`,children:o.is_active&&o.is_valid?"Active":"Inactive"})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[e.jsx("span",{children:"Weekly Capacity"}),e.jsxs("span",{children:[o.current_utilization_hours||0,"/",o.max_weekly_hours||0," hrs"]})]}),e.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${o.utilization_rate>80?"bg-rose-500":o.utilization_rate>60?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,o.utilization_rate||0)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-2",children:[e.jsx("div",{className:"text-lg font-bold text-slate-900",children:o.quality_score||"-"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Quality"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-2",children:[e.jsxs("div",{className:"text-lg font-bold text-slate-900",children:[o.acceptance_rate||"-","%"]}),e.jsx("div",{className:"text-xs text-slate-500",children:"Accept"})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-2",children:[e.jsxs("div",{className:"text-lg font-bold text-slate-900",children:[o.completion_rate||"-","%"]}),e.jsx("div",{className:"text-xs text-slate-500",children:"Complete"})]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Pricing"}),e.jsxs("span",{className:"font-medium text-slate-900",children:[o.hourly_rate?`$${o.hourly_rate}/hr`:"",o.hourly_rate&&o.visit_rate?" | ":"",o.visit_rate?`$${o.visit_rate}/visit`:"",!o.hourly_rate&&!o.visit_rate?"Not set":""]})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[o.can_handle_dementia&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-purple-100 text-purple-700 rounded",children:"Dementia"}),o.can_handle_palliative&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-indigo-100 text-indigo-700 rounded",children:"Palliative"}),o.can_handle_complex_care&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-100 text-blue-700 rounded",children:"Complex Care"}),o.bilingual_french&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-teal-100 text-teal-700 rounded",children:"French"})]})]}),e.jsxs("div",{className:"px-4 py-3 bg-slate-50 border-t border-slate-100 flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>d(o),className:"text-sm text-teal-600 hover:text-teal-800 font-medium",children:"Edit"}),e.jsx("button",{onClick:()=>c(o.id),className:"text-sm text-rose-600 hover:text-rose-800 font-medium",children:"Delete"})]})]},o.id))}):e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 text-center",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto text-slate-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-900 mb-2",children:"No Capabilities Configured"}),e.jsx("p",{className:"text-slate-500 mb-4",children:"Add your first service capability to start receiving marketplace requests."})]}),bN=({coverage:n})=>e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100",children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"Service Type Coverage Summary"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Overview of SSPO coverage across all service types"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Service Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-slate-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-slate-500 uppercase",children:"SSPOs"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-slate-500 uppercase",children:"Weekly Capacity"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-slate-500 uppercase",children:"Avg Quality"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-bold text-slate-500 uppercase",children:"Avg Rate"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map(d=>e.jsxs("tr",{className:"hover:bg-slate-50",children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-slate-900",children:d.name}),e.jsx("div",{className:"text-xs text-slate-500",children:d.code})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:d.category}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${d.sspo_count>3?"bg-emerald-100 text-emerald-700":d.sspo_count>0?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-500"}`,children:d.sspo_count})}),e.jsxs("td",{className:"px-6 py-4 text-center text-sm text-slate-600",children:[d.total_weekly_capacity||0," hrs"]}),e.jsx("td",{className:"px-6 py-4 text-center",children:d.avg_quality_score>0?e.jsx("span",{className:`text-sm font-medium ${d.avg_quality_score>=80?"text-emerald-600":d.avg_quality_score>=60?"text-amber-600":"text-rose-600"}`,children:d.avg_quality_score}):e.jsx("span",{className:"text-slate-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-center text-sm text-slate-600",children:d.avg_hourly_rate>0?`$${d.avg_hourly_rate}`:"-"})]},d.id))})]})})]}),vN=({serviceTypes:n,matchingForm:d,setMatchingForm:c,onFindMatches:o,results:f})=>{var h,p,y;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6",children:[e.jsx("h3",{className:"font-bold text-slate-800 mb-4",children:"Find Matching SSPOs"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Service Type"}),e.jsxs("select",{value:d.service_type_id,onChange:N=>c({...d,service_type_id:N.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:"",children:"Select service type"}),n.map(N=>e.jsx("option",{value:N.id,children:N.name},N.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Patient ID"}),e.jsx("input",{type:"text",value:d.patient_id,onChange:N=>c({...d,patient_id:N.target.value}),placeholder:"Enter patient ID",className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Estimated Hours"}),e.jsx("input",{type:"number",step:"0.5",value:d.estimated_hours,onChange:N=>c({...d,estimated_hours:N.target.value}),placeholder:"e.g., 2.5",className:"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:o,className:"w-full bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Find Matches"})})]})]}),f&&e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800",children:"Matching SSPOs"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[((h=f.meta)==null?void 0:h.total_matches)||0," matches for ",(p=f.meta)==null?void 0:p.service_type]})]})}),e.jsx("div",{className:"divide-y divide-slate-100",children:((y=f.data)==null?void 0:y.length)>0?f.data.map((N,j)=>{var v;return e.jsxs("div",{className:"p-4 hover:bg-slate-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-bold text-slate-900",children:N.sspo_name}),N.is_preferred&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-amber-100 text-amber-700 rounded",children:"Preferred"}),j===0&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-emerald-100 text-emerald-700 rounded",children:"Best Match"})]}),e.jsx("p",{className:"text-sm text-slate-500",children:N.service_type})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-teal-600",children:N.overall_score}),e.jsx("div",{className:"text-xs text-slate-500",children:"Match Score"})]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:Object.entries(N.scores||{}).filter(([S])=>S!=="overall").map(([S,M])=>e.jsxs("div",{className:"bg-slate-50 rounded p-2 text-center",children:[e.jsx("div",{className:"text-sm font-bold text-slate-700",children:M}),e.jsx("div",{className:"text-xs text-slate-500 capitalize",children:S.replace("_"," ")})]},S))}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-600",children:[e.jsxs("span",{children:["Available: ",N.available_hours," hrs"]}),e.jsxs("span",{children:["Quality: ",N.quality_score]}),e.jsxs("span",{children:["Rate: $",N.hourly_rate||N.visit_rate,"/hr"]}),N.estimated_cost&&e.jsxs("span",{children:["Est. Cost: $",N.estimated_cost]})]}),((v=N.warnings)==null?void 0:v.length)>0&&e.jsx("div",{className:"mt-2 space-y-1",children:N.warnings.map((S,M)=>e.jsxs("div",{className:"text-xs text-amber-600 flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),S.message]},M))})]},j)}):e.jsx("div",{className:"p-8 text-center text-slate-500",children:"No matching SSPOs found for the specified criteria."})})]})]})},jN=({capability:n,serviceTypes:d,isAddMode:c,onSave:o,onClose:f})=>{const[h,p]=g.useState({sspo_id:(n==null?void 0:n.sspo_id)||"",service_type_id:(n==null?void 0:n.service_type_id)||"",is_active:(n==null?void 0:n.is_active)??!0,max_weekly_hours:(n==null?void 0:n.max_weekly_hours)||"",min_notice_hours:(n==null?void 0:n.min_notice_hours)||24,hourly_rate:(n==null?void 0:n.hourly_rate)||"",visit_rate:(n==null?void 0:n.visit_rate)||"",available_days:(n==null?void 0:n.available_days)||[1,2,3,4,5],earliest_start_time:(n==null?void 0:n.earliest_start_time)||"08:00",latest_end_time:(n==null?void 0:n.latest_end_time)||"20:00",can_handle_dementia:(n==null?void 0:n.can_handle_dementia)||!1,can_handle_palliative:(n==null?void 0:n.can_handle_palliative)||!1,can_handle_complex_care:(n==null?void 0:n.can_handle_complex_care)||!1,bilingual_french:(n==null?void 0:n.bilingual_french)||!1,available_staff_count:(n==null?void 0:n.available_staff_count)||""}),y=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],N=v=>{const S=h.available_days||[];S.includes(v)?p({...h,available_days:S.filter(M=>M!==v)}):p({...h,available_days:[...S,v].sort()})},j=v=>{v.preventDefault(),o(h)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:c?"Add Capability":"Edit Capability"}),e.jsx("button",{onClick:f,className:"text-slate-400 hover:text-slate-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-6",children:[c&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Service Type"}),e.jsxs("select",{value:h.service_type_id,onChange:v=>p({...h,service_type_id:v.target.value}),required:!0,className:"w-full border border-slate-200 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"Select service type"}),d.map(v=>e.jsxs("option",{value:v.id,children:[v.name," (",v.code,")"]},v.id))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:h.is_active,onChange:v=>p({...h,is_active:v.target.checked}),className:"rounded border-slate-300"}),e.jsx("label",{htmlFor:"is_active",className:"text-sm font-medium text-slate-700",children:"Active in Marketplace"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Max Weekly Hours"}),e.jsx("input",{type:"number",value:h.max_weekly_hours,onChange:v=>p({...h,max_weekly_hours:v.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Min Notice (hours)"}),e.jsx("input",{type:"number",value:h.min_notice_hours,onChange:v=>p({...h,min_notice_hours:v.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Available Staff"}),e.jsx("input",{type:"number",value:h.available_staff_count,onChange:v=>p({...h,available_staff_count:v.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Hourly Rate ($)"}),e.jsx("input",{type:"number",step:"0.01",value:h.hourly_rate,onChange:v=>p({...h,hourly_rate:v.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Visit Rate ($)"}),e.jsx("input",{type:"number",step:"0.01",value:h.visit_rate,onChange:v=>p({...h,visit_rate:v.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Available Days"}),e.jsx("div",{className:"flex gap-2",children:y.map((v,S)=>{var M;return e.jsx("button",{type:"button",onClick:()=>N(S),className:`w-10 h-10 rounded-lg text-sm font-medium transition-colors ${(M=h.available_days)!=null&&M.includes(S)?"bg-teal-600 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:v},S)})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Earliest Start"}),e.jsx("input",{type:"time",value:h.earliest_start_time,onChange:v=>p({...h,earliest_start_time:v.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Latest End"}),e.jsx("input",{type:"time",value:h.latest_end_time,onChange:v=>p({...h,latest_end_time:v.target.value}),className:"w-full border border-slate-200 rounded-lg px-3 py-2"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Special Capabilities"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:[{key:"can_handle_dementia",label:"Dementia Care"},{key:"can_handle_palliative",label:"Palliative Care"},{key:"can_handle_complex_care",label:"Complex Care"},{key:"bilingual_french",label:"Bilingual (French)"}].map(({key:v,label:S})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:v,checked:h[v],onChange:M=>p({...h,[v]:M.target.checked}),className:"rounded border-slate-300"}),e.jsx("label",{htmlFor:v,className:"text-sm text-slate-700",children:S})]},v))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-100 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 rounded-lg",children:c?"Add Capability":"Save Changes"})]})]})]})})},vb=({assignments:n=[],weekDays:d=[],patientName:c="",onEditAssignment:o})=>{const f=g.useMemo(()=>{const j={};return d.forEach(v=>{const S=v.toISOString().split("T")[0];j[S]=[]}),n.forEach(v=>{j[v.date]&&j[v.date].push(v)}),Object.keys(j).forEach(v=>{j[v].sort((S,M)=>S.start_time.localeCompare(M.start_time))}),j},[n,d]),h=j=>({nursing:{bg:"#DBEAFE",border:"#3B82F6",text:"#1E40AF"},psw:{bg:"#D1FAE5",border:"#10B981",text:"#065F46"},personal_support:{bg:"#D1FAE5",border:"#10B981",text:"#065F46"},homemaking:{bg:"#FEF3C7",border:"#F59E0B",text:"#92400E"},behaviour:{bg:"#FEE2E2",border:"#EF4444",text:"#991B1B"},behavioral:{bg:"#FEE2E2",border:"#EF4444",text:"#991B1B"},rehab:{bg:"#E9D5FF",border:"#8B5CF6",text:"#5B21B6"},therapy:{bg:"#E9D5FF",border:"#8B5CF6",text:"#5B21B6"}})[j==null?void 0:j.toLowerCase()]||{bg:"#F3F4F6",border:"#9CA3AF",text:"#374151"},p=j=>{const v=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${v[j.getDay()]}, ${S[j.getMonth()]} ${j.getDate()}`},y=j=>{const v=new Date;return j.toDateString()===v.toDateString()},N=j=>j.reduce((v,S)=>v+(S.duration_minutes||60)/60,0);return e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Id,{className:"w-5 h-5 text-teal-600"}),e.jsxs("h2",{className:"text-sm font-bold text-slate-700",children:["Care Timeline for ",c]})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"All scheduled care visits in chronological order"})]}),e.jsx("div",{className:"p-4 space-y-6",children:d.map(j=>{const v=j.toISOString().split("T")[0],S=f[v]||[],M=N(S),U=y(j);return e.jsxs("div",{className:`${U?"ring-2 ring-teal-400 ring-offset-2 rounded-lg":""}`,children:[e.jsxs("div",{className:`flex items-center justify-between px-3 py-2 rounded-t-lg ${U?"bg-teal-50":"bg-slate-100"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${U?"text-teal-700":"text-slate-700"}`,children:p(j)}),U&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium bg-teal-100 text-teal-700 rounded-full",children:"Today"})]}),e.jsxs("span",{className:"text-xs text-slate-500",children:[S.length," visits · ",M.toFixed(1),"h"]})]}),e.jsx("div",{className:"border-l-2 border-slate-200 ml-4 pl-4 py-2 space-y-3",children:S.length===0?e.jsx("div",{className:"text-sm text-slate-400 py-4 text-center",children:"No visits scheduled"}):S.map(k=>{const B=h(k.category);return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[21px] w-3 h-3 rounded-full border-2 border-white",style:{backgroundColor:B.border}}),e.jsx("button",{onClick:()=>o==null?void 0:o(k),className:"w-full text-left p-3 rounded-lg border transition-all hover:shadow-md",style:{backgroundColor:B.bg,borderColor:B.border},children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Di,{className:"w-4 h-4",style:{color:B.text}}),e.jsxs("span",{className:"font-medium text-sm",style:{color:B.text},children:[k.start_time," - ",k.end_time]}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",k.duration_minutes||60," min)"]})]}),e.jsx("div",{className:"text-sm font-medium text-slate-800 mb-1",children:k.service_type_name}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-600",children:[e.jsx(Hf,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:k.staff_name||"Unassigned"}),k.staff_role&&e.jsx("span",{className:"px-1.5 py-0.5 bg-white/50 rounded text-xs",children:k.staff_role})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(yN,{status:k.status,verificationStatus:k.verification_status})})]})})]},k.id)})})]},v)})}),e.jsx("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-600",children:[e.jsxs("span",{children:["Total: ",n.length," visits this week"]}),e.jsxs("span",{children:[n.reduce((j,v)=>j+(v.duration_minutes||60),0)/60," hours of care"]})]})})]})},yN=({status:n,verificationStatus:d})=>{const c=()=>n==="completed"?d==="VERIFIED"?"bg-emerald-100 text-emerald-700":d==="MISSED"?"bg-red-100 text-red-700":"bg-emerald-100 text-emerald-700":n==="planned"||n==="pending"?"bg-blue-100 text-blue-700":n==="in_progress"?"bg-amber-100 text-amber-700":n==="cancelled"?"bg-slate-100 text-slate-500":"bg-slate-100 text-slate-600",o=()=>n==="completed"?d==="VERIFIED"?"Verified":d==="MISSED"?"Missed":"Completed":n==="planned"?"Scheduled":n==="pending"?"Pending":n==="in_progress"?"In Progress":n==="cancelled"?"Cancelled":n;return e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${c()}`,children:o()})},jb=({isOpen:n,onClose:d,suggestion:c,getExplanation:o})=>{var U,k;const[f,h]=g.useState(null),[p,y]=g.useState(!1),[N,j]=g.useState(null);g.useEffect(()=>{n&&(c!=null&&c.suggested_staff_id)?v():(h(null),j(null))},[n,c==null?void 0:c.patient_id,c==null?void 0:c.service_type_id,c==null?void 0:c.suggested_staff_id]);const v=async()=>{y(!0),j(null);try{const B=await o(c.patient_id,c.service_type_id,c.suggested_staff_id);h(B)}catch(B){j(B.message||"Failed to load explanation")}finally{y(!1)}};if(!n)return null;const S=B=>{switch(B){case"High Match":return"bg-emerald-100 text-emerald-800";case"Good Match":return"bg-blue-100 text-blue-800";case"Acceptable":return"bg-amber-100 text-amber-800";case"Limited Options":return"bg-orange-100 text-orange-800";case"No Match":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800"}},M=B=>{switch(B){case"vertex_ai":return{label:"AI Generated",icon:"🤖"};case"rules_based":return{label:"Rules-Based",icon:"📋"};default:return{label:B,icon:"❓"}}};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:d}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-lg w-full transform transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🧠"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Match Explanation"})]}),e.jsx("button",{onClick:d,className:"text-slate-400 hover:text-slate-600 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"px-6 py-4",children:p?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(ta,{size:"md"}),e.jsx("span",{className:"ml-2 text-slate-500",children:"Generating explanation..."})]}):N?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-red-500 mb-2",children:"⚠️"}),e.jsx("p",{className:"text-sm text-red-600",children:N}),e.jsx("button",{onClick:v,className:"mt-3 text-sm text-blue-600 hover:text-blue-800",children:"Try again"})]}):f?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${S(f.confidence_label)}`,children:f.confidence_label}),e.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[M(f.source).icon,M(f.source).label]})]}),e.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:f.short_explanation}),((U=f.detailed_points)==null?void 0:U.length)>0&&e.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2",children:"Key Factors"}),e.jsx("ul",{className:"space-y-2",children:f.detailed_points.map((B,A)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[e.jsx("span",{className:"text-emerald-500 mt-0.5",children:"✓"}),e.jsx("span",{children:B})]},A))})]}),(c==null?void 0:c.scoring_breakdown)&&e.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[e.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2",children:"Score Breakdown"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(c.scoring_breakdown).map(([B,A])=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 capitalize",children:B.replace(/_/g," ")}),e.jsxs("span",{className:"font-medium text-slate-700",children:[A.score,"/",A.max]})]},B))}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-50 flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium text-slate-600",children:"Total Score"}),e.jsx("span",{className:"font-bold text-slate-800",children:((k=c.confidence_score)==null?void 0:k.toFixed(1))||"—"})]})]}),f.response_time_ms>0&&e.jsxs("div",{className:"text-xs text-slate-400 text-right",children:["Generated in ",f.response_time_ms,"ms"]})]}):e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No explanation available"})}),e.jsx("div",{className:"px-6 py-4 border-t border-slate-200 flex justify-end",children:e.jsx("button",{onClick:d,className:"px-4 py-2 text-sm font-medium text-slate-700 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:"Close"})})]})})]})},yb=({suggestion:n,onAccept:d,onManual:c,onExplain:o,isAccepting:f})=>{if(!n||n.match_status==="none")return null;const p=(y=>{switch(y){case"strong":return{bg:"bg-emerald-50",border:"border-emerald-200",badge:"bg-emerald-100 text-emerald-800",icon:"⚡",label:"Strong Match"};case"moderate":return{bg:"bg-blue-50",border:"border-blue-200",badge:"bg-blue-100 text-blue-800",icon:"👍",label:"Good Match"};case"weak":return{bg:"bg-amber-50",border:"border-amber-200",badge:"bg-amber-100 text-amber-800",icon:"🤔",label:"Weak Match"};default:return{bg:"bg-slate-50",border:"border-slate-200",badge:"bg-slate-100 text-slate-800",icon:"❓",label:"Unknown"}}})(n.match_status);return e.jsxs("div",{className:`mt-1 px-2 py-1.5 rounded ${p.bg} border ${p.border} flex items-center justify-between gap-2`,children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("span",{className:"text-sm",children:p.icon}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-xs font-medium text-slate-800 truncate",children:n.suggested_staff_name||"Unknown Staff"}),e.jsxs("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${p.badge}`,children:[Math.round(n.confidence_score),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-500",children:[n.suggested_staff_role&&e.jsx("span",{children:n.suggested_staff_role}),n.estimated_travel_minutes>0&&e.jsxs("span",{children:["• ",n.estimated_travel_minutes," min travel"]}),n.continuity_note&&e.jsxs("span",{className:"text-emerald-600",children:["• ",n.continuity_note]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx("button",{onClick:()=>o(n),className:"p-1 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Why this match?",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),e.jsx("button",{onClick:c,className:"p-1 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded transition-colors",title:"Choose different staff",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsxs("button",{onClick:()=>d(n),disabled:f,className:"flex items-center gap-0.5 px-2 py-1 text-xs font-medium text-white bg-emerald-600 hover:bg-emerald-700 rounded transition-colors disabled:opacity-50",children:[f?e.jsxs("svg",{className:"w-3 h-3 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Accept"})]})]})]})};function Nb(n,d){const[c,o]=g.useState([]),[f,h]=g.useState(!1),[p,y]=g.useState(null),[N,j]=g.useState({}),v=g.useCallback(async()=>{var z,W;h(!0),y(null);try{const F=new URLSearchParams;n&&F.set("week_start",n);const J=await ue.get(`/v2/scheduling/suggestions?${F}`);return o(J.data.data||[]),J.data}catch(F){const J=((W=(z=F.response)==null?void 0:z.data)==null?void 0:W.error)||"Failed to generate suggestions";throw y(J),F}finally{h(!1)}},[n,d]),S=g.useCallback(async(z,W,F)=>{var I,Q;const J=`${z}-${W}-${F}`;if(N[J])return N[J];try{const de=new URLSearchParams({staff_id:F,...n&&{week_start:n}}),pe=(await ue.get(`/v2/scheduling/suggestions/${z}/${W}/explain?${de}`)).data.data;return j(q=>({...q,[J]:pe})),pe}catch(de){throw new Error(((Q=(I=de.response)==null?void 0:I.data)==null?void 0:Q.error)||"Failed to get explanation")}},[n,N]),M=g.useCallback(async(z,W,F)=>{var J,I;try{const Q=await ue.post("/v2/scheduling/suggestions/accept",{patient_id:z.patient_id,service_type_id:z.service_type_id,staff_id:z.suggested_staff_id,scheduled_start:W,scheduled_end:F});return o(de=>de.filter(te=>!(te.patient_id===z.patient_id&&te.service_type_id===z.service_type_id))),Q.data.data}catch(Q){throw new Error(((I=(J=Q.response)==null?void 0:J.data)==null?void 0:I.error)||"Failed to accept suggestion")}},[]),U=g.useCallback(async z=>{var W,F;try{const J=await ue.post("/v2/scheduling/suggestions/accept-batch",{suggestions:z}),I=new Set(J.data.data.successful.map(Q=>`${Q.patient_id}-${Q.service_type_id}`));return o(Q=>Q.filter(de=>!I.has(`${de.patient_id}-${de.service_type_id}`))),J.data.data}catch(J){throw new Error(((F=(W=J.response)==null?void 0:W.data)==null?void 0:F.error)||"Failed to accept batch")}},[]),k=g.useCallback(()=>{o([]),j({}),y(null)},[]),B=g.useCallback((z,W)=>c.find(F=>F.patient_id===z&&F.service_type_id===W),[c]),A=c.length>0,$=c.filter(z=>z.match_status==="strong"),Y=c.filter(z=>z.match_status==="moderate"),w=c.filter(z=>z.match_status==="weak"),D=c.filter(z=>z.match_status==="none");return{suggestions:c,isLoading:f,error:p,hasSuggestions:A,strongMatches:$,moderateMatches:Y,weakMatches:w,noMatches:D,generateSuggestions:v,getExplanation:S,acceptSuggestion:M,acceptBatch:U,clearSuggestions:k,getSuggestionFor:B}}const NN=({isSspoMode:n=!1})=>{var qe,et,Ye,ot,we,Ge,$e,Dt,Qt,At,zt;const[d,c]=wp(),o=xs(),f=d.get("staff_id"),h=d.get("patient_id"),[p,y]=g.useState(!0),[N,j]=g.useState({staff:[],assignments:[],week:{}}),[v,S]=g.useState({data:[],summary:{}}),[M,U]=g.useState({staff:null,patient:null}),[k,B]=g.useState([]),[A,$]=g.useState([]),[Y,w]=g.useState([]),[D,z]=g.useState([]),[W,F]=g.useState(0),[J,I]=g.useState(""),[Q,de]=g.useState(""),[te,pe]=g.useState(!1),[q,ae]=g.useState(!1),[H,L]=g.useState(null),[Z,Te]=g.useState(null),[ye,E]=g.useState(null),[ee,V]=g.useState(null),[re,Re]=g.useState(null),[De,ge]=g.useState(!1),[ke,Oe]=g.useState(!1),[Rt,pt]=g.useState(!1),[ns,Wt]=g.useState(null),[Nt,rs]=g.useState(null),Mt=g.useMemo(()=>{const he=new Date,Ie=he.getDay(),Xe=Ie===0?6:Ie-1,dt=new Date(he);dt.setDate(he.getDate()-Xe+W*7),dt.setHours(0,0,0,0);const _t=new Date(dt);return _t.setDate(dt.getDate()+6),_t.setHours(23,59,59,999),{start:dt.toISOString().split("T")[0],end:_t.toISOString().split("T")[0],startDate:dt,endDate:_t}},[W]),is=g.useMemo(()=>Array.from({length:7},(he,Ie)=>{const Xe=new Date(Mt.startDate);return Xe.setDate(Mt.startDate.getDate()+Ie),Xe}),[Mt.startDate]),{suggestions:zs,isLoading:Bs,hasSuggestions:es,generateSuggestions:It,getExplanation:fs,acceptSuggestion:Is,getSuggestionFor:os,clearSuggestions:Qs}=Nb(Mt.start,null),Us=g.useCallback(async()=>{try{const he=new URLSearchParams({start_date:Mt.start,end_date:Mt.end,...f&&{staff_id:f},...h&&{patient_id:h},...J&&{"role_codes[]":J},...Q&&{"employment_type_codes[]":Q}}),Ie=await ue.get(`/v2/scheduling/grid?${he}`);j(Ie.data.data)}catch(he){console.error("Failed to fetch grid data:",he)}},[Mt.start,Mt.end,f,h,J,Q]),ts=g.useCallback(async()=>{try{const he=new URLSearchParams({start_date:Mt.start,end_date:Mt.end,...h&&{patient_id:h},...n&&{provider_type:"sspo"}}),Ie=await ue.get(`/v2/scheduling/requirements?${he}`);S(Ie.data)}catch(he){console.error("Failed to fetch requirements:",he)}},[Mt.start,Mt.end,h,n]),ds=g.useCallback(async()=>{try{const he=new URLSearchParams;f&&he.set("current_staff_id",f),h&&he.set("current_patient_id",h);const[Ie,Xe,dt,_t,at]=await Promise.all([ue.get("/v2/workforce/metadata/roles"),ue.get("/v2/workforce/metadata/employment-types"),ue.get(`/v2/scheduling/navigation-examples?${he}`),ue.get("/v2/workforce/staff?status=active&limit=100"),ue.get("/patients?status=Active&limit=100")]);B(Ie.data.data||[]),$(Xe.data.data||[]),U(dt.data.data||{}),w(_t.data.data||[]),z(at.data.data||[])}catch(he){console.error("Failed to fetch metadata:",he)}},[f,h]);g.useEffect(()=>{(async()=>{y(!0),await Promise.all([Us(),ts(),ds()]),y(!1)})()},[Us,ts,ds]);const Gs=(he,Ie,Xe=null,dt=null)=>{Te(he),E(Ie),V(Xe),Re(dt),pe(!0)},Vs=he=>{L(he),ae(!0)},sa=async he=>{var Ie,Xe;try{await ue.post("/v2/scheduling/assignments",he),pe(!1),Us(),ts()}catch(dt){console.error("Failed to create assignment:",dt),alert(((Xe=(Ie=dt.response)==null?void 0:Ie.data)==null?void 0:Xe.message)||"Failed to create assignment")}},He=async(he,Ie)=>{var Xe,dt;try{await ue.patch(`/v2/scheduling/assignments/${he}`,Ie),ae(!1),Us()}catch(_t){console.error("Failed to update assignment:",_t),alert(((dt=(Xe=_t.response)==null?void 0:Xe.data)==null?void 0:dt.message)||"Failed to update assignment")}},ht=async he=>{if(confirm("Are you sure you want to cancel this assignment?"))try{await ue.delete(`/v2/scheduling/assignments/${he}`),ae(!1),Us(),ts()}catch(Ie){console.error("Failed to cancel assignment:",Ie)}},gt=()=>{I(""),de(""),o(window.location.pathname)},cs=async()=>{try{await It()}catch(he){console.error("Failed to generate suggestions:",he)}},Ct=async he=>{const Ie=`${he.patient_id}-${he.service_type_id}`;rs(Ie);try{const Xe=Mt.start+"T09:00:00",dt=new Date(new Date(Xe).getTime()+(he.duration_minutes||60)*6e4).toISOString();await Is(he,Xe,dt),Us(),ts()}catch(Xe){console.error("Failed to accept suggestion:",Xe),alert(Xe.message||"Failed to accept suggestion")}finally{rs(null)}},Hs=he=>{Wt(he),pt(!0)},xa=(he,Ie)=>N.assignments.filter(Xe=>Xe.staff_id===he&&Xe.date===Ie&&Xe.status!=="cancelled"),ia=(he,Ie)=>{var Xe;return(Xe=he.availability)==null?void 0:Xe.some(dt=>dt.day_of_week===Ie)},je=he=>({nursing:"#DBEAFE",psw:"#D1FAE5",personal_support:"#D1FAE5",homemaking:"#FEF3C7",behaviour:"#FEE2E2",behavioral:"#FEE2E2",rehab:"#E9D5FF",therapy:"#E9D5FF"})[he==null?void 0:he.toLowerCase()]||"#F3F4F6",Ae=he=>{const Ie=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Xe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${Ie[he.getDay()]} ${Xe[he.getMonth()]} ${he.getDate()}`};if(p)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(ta,{size:"lg"})});const Be=f||h||J||Q;return e.jsxs("div",{className:"min-h-screen bg-slate-50 pt-12",children:[e.jsx("div",{className:`border-b px-6 py-4 ${n?"bg-purple-50 border-purple-200":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-bold ${n?"text-purple-900":"text-slate-900"}`,children:n?"SSPO Scheduler":"Scheduler"}),e.jsx("p",{className:`text-sm ${n?"text-purple-600":"text-slate-500"}`,children:n?"Nursing, Allied Health & Specialized Services":"Manage, view, and assign care appointments"})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{variant:"secondary",size:"sm",onClick:()=>F(he=>he-1),children:"← Prev"}),e.jsxs("span",{className:"text-sm font-medium px-3",children:[Mt.startDate.toLocaleDateString()," - ",Mt.endDate.toLocaleDateString()]}),e.jsx(Me,{variant:"secondary",size:"sm",onClick:()=>F(he=>he+1),children:"Next →"}),W!==0&&e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>F(0),children:"Today"})]})})]})}),e.jsx("div",{className:"bg-white border-b border-slate-200 px-6 py-3",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[e.jsx(Jl,{placeholder:"Filter: By Role",value:J,onChange:he=>I(he.target.value),options:[{value:"",label:"All Roles"},...k.map(he=>({value:he.code,label:`${he.code} - ${he.name}`}))],className:"w-48"}),e.jsx(Jl,{placeholder:"Filter: By Employment Type",value:Q,onChange:he=>de(he.target.value),options:[{value:"",label:"All Employment Types"},...A.map(he=>({value:he.code,label:he.name}))],className:"w-64"}),Be&&e.jsx(Me,{variant:"ghost",size:"sm",onClick:gt,children:"Clear Filters"}),(f||h)&&e.jsxs("span",{className:"text-sm text-slate-500 ml-4 flex items-center gap-2",children:[f&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:["Staff: ",((et=(qe=N.staff)==null?void 0:qe.find(he=>he.id===parseInt(f)))==null?void 0:et.name)||`ID ${f}`]}),h&&e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded",children:["Patient: ",((Ye=M.patient)==null?void 0:Ye.name)||`ID ${h}`]})]})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden mb-4",children:[e.jsxs("button",{onClick:()=>ge(!De),className:"w-full px-4 py-3 flex items-center justify-between bg-slate-50 hover:bg-slate-100 transition-colors",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700",children:"Quick Navigation"}),e.jsx("svg",{className:`w-4 h-4 text-slate-500 transition-transform ${De?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),!De&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-3 rounded-lg border ${f?"bg-blue-100 border-blue-400":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("div",{className:"text-xs font-bold text-blue-800 mb-2",children:["Staff-Centric View",f&&e.jsx("span",{className:"ml-1 text-blue-600",children:"(Active)"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:f||"",onChange:he=>{he.target.value?c({staff_id:he.target.value}):gt()},className:"appearance-none w-full text-sm border border-blue-300 rounded px-2 py-1.5 pr-10 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a staff member..."}),Y.map(he=>{var Ie;return e.jsxs("option",{value:he.id,children:[he.name," (",((Ie=he.role)==null?void 0:Ie.code)||he.organization_role||"Staff",")"]},he.id)})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx("svg",{className:"h-4 w-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${h?"bg-green-100 border-green-400":"bg-green-50 border-green-200"}`,children:[e.jsxs("div",{className:"text-xs font-bold text-green-800 mb-2",children:["Patient-Centric View",h&&e.jsx("span",{className:"ml-1 text-green-600",children:"(Active)"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:h||"",onChange:he=>{he.target.value?c({patient_id:he.target.value}):gt()},className:"appearance-none w-full text-sm border border-green-300 rounded px-2 py-1.5 pr-10 bg-white focus:outline-none focus:ring-1 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Select a patient..."}),D.map(he=>{var Ie;return e.jsx("option",{value:he.id,children:he.name||((Ie=he.user)==null?void 0:Ie.name)||`Patient ${he.id}`},he.id)})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${Be?"bg-slate-50 border-slate-200":"bg-slate-100 border-slate-400"}`,children:[e.jsxs("div",{className:"text-xs font-bold text-slate-700 mb-2",children:["Full Dashboard View",!Be&&e.jsx("span",{className:"ml-1 text-slate-500",children:"(Active)"})]}),e.jsx("button",{onClick:gt,className:`w-full text-sm px-3 py-1.5 rounded ${Be?"bg-slate-600 text-white hover:bg-slate-700":"bg-slate-200 text-slate-600 cursor-default"}`,disabled:!Be,children:Be?"Clear filters & view all":"Viewing all schedules"})]})]})})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 pb-8 space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>Oe(!ke),className:"text-left flex-1 hover:opacity-80 transition-opacity",children:[e.jsx("h2",{className:"text-sm font-bold text-amber-800",children:"Unscheduled Care"}),e.jsxs("p",{className:"text-xs text-amber-600",children:[((ot=v.summary)==null?void 0:ot.patients_with_needs)||0," patients need scheduling",((we=v.summary)==null?void 0:we.total_remaining_hours)>0&&e.jsxs("span",{className:"ml-2",children:["(",v.summary.total_remaining_hours,"h + ",v.summary.total_remaining_visits||0," visits remaining)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!ke&&((Ge=v.data)==null?void 0:Ge.length)>0&&e.jsxs("button",{onClick:he=>{he.stopPropagation(),cs()},disabled:Bs,className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${es?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50`,children:[Bs?e.jsxs("svg",{className:"w-3.5 h-3.5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):e.jsx("span",{children:"⚡"}),e.jsx("span",{children:es?`${zs.length} Suggestions`:"Auto Assign"})]}),es&&e.jsx("button",{onClick:he=>{he.stopPropagation(),Qs()},className:"p-1.5 text-slate-400 hover:text-slate-600 rounded-md hover:bg-slate-100",title:"Clear suggestions",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:()=>Oe(!ke),className:"p-1 hover:bg-amber-100 rounded transition-colors",children:e.jsx("svg",{className:`w-4 h-4 text-amber-600 transition-transform ${ke?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),!ke&&(($e=v.data)==null?void 0:$e.length)>0?e.jsx("div",{className:"overflow-x-auto p-4",children:e.jsx("div",{className:"flex gap-4 min-w-max",children:(Dt=v.data)==null?void 0:Dt.map(he=>{var Ie,Xe,dt,_t;return e.jsxs("div",{className:"bg-slate-50 rounded-lg border border-slate-200 p-3 w-72 flex-shrink-0",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:he.patient_name}),((Ie=he.risk_flags)==null?void 0:Ie.includes("dangerous"))&&e.jsx("span",{className:"text-xs text-red-600 font-bold",children:"!"}),((Xe=he.risk_flags)==null?void 0:Xe.includes("warning"))&&e.jsx("span",{className:"text-xs text-amber-600 font-bold",children:"!"})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["RUG: ",he.rug_category]})]})}),e.jsxs("div",{className:"space-y-2",children:[(dt=he.services)==null?void 0:dt.slice(0,3).map(at=>{const Tt=os(he.patient_id,at.service_type_id),vs=`${he.patient_id}-${at.service_type_id}`;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium",children:at.service_type_name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[at.scheduled,"/",at.required," ",at.unit_type]})]}),e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>Gs(he,at.service_type_id),className:"text-xs text-blue-600",children:"Assign"})]}),Tt&&Tt.match_status!=="none"&&e.jsx(yb,{suggestion:Tt,onAccept:Ct,onManual:()=>Gs(he,at.service_type_id),onExplain:Hs,isAccepting:Nt===vs})]},at.service_type_id)}),((_t=he.services)==null?void 0:_t.length)>3&&e.jsxs("div",{className:"text-xs text-slate-400 text-center",children:["+",he.services.length-3," more services"]})]})]},he.patient_id)})})}):ke?null:e.jsxs("div",{className:"text-center py-6 text-emerald-600",children:[e.jsx("div",{className:"text-2xl mb-1",children:"✓"}),e.jsx("div",{className:"text-sm font-medium",children:"All required care scheduled for this week"})]})]}),e.jsx("div",{children:h?e.jsx(vb,{assignments:(Qt=N.assignments)==null?void 0:Qt.map(he=>{var Ie,Xe,dt,_t,at;return{...he,staff_name:((Xe=(Ie=N.staff)==null?void 0:Ie.find(Tt=>Tt.id===he.staff_id))==null?void 0:Xe.name)||"Unknown",staff_role:(at=(_t=(dt=N.staff)==null?void 0:dt.find(Tt=>Tt.id===he.staff_id))==null?void 0:_t.role)==null?void 0:at.code}}),weekDays:is,patientName:((At=M.patient)==null?void 0:At.name)||`Patient #${h}`,onEditAssignment:Vs}):e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("div",{className:"grid grid-cols-8 border-b border-slate-200 bg-slate-50 sticky top-0 z-10 min-w-[1000px]",children:[e.jsx("div",{className:"px-4 py-3 border-r border-slate-200",children:e.jsx("div",{className:"text-xs font-bold text-slate-600",children:"Staff Member"})}),is.map((he,Ie)=>e.jsx("div",{className:"px-4 py-3 border-r border-slate-200 text-center",children:e.jsx("div",{className:"text-xs font-bold text-slate-600",children:Ae(he)})},Ie))]}),(zt=N.staff)==null?void 0:zt.map(he=>{var Xe,dt,_t,at,Tt,vs;const Ie=f&&parseInt(f)===he.id;return e.jsxs("div",{className:`grid grid-cols-8 border-b border-slate-100 min-w-[1000px] ${Ie?"bg-blue-50":"hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"px-4 py-3 border-r border-slate-200",children:[e.jsx("div",{className:"text-sm font-medium",children:he.name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[((Xe=he.role)==null?void 0:Xe.code)||"-",", ",((dt=he.employment_type)==null?void 0:dt.code)||"-"]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1.5 bg-slate-200 rounded-full",children:e.jsx("div",{className:`h-full rounded-full ${((_t=he.utilization)==null?void 0:_t.utilization)>90?"bg-red-500":((at=he.utilization)==null?void 0:at.utilization)>75?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,((Tt=he.utilization)==null?void 0:Tt.utilization)||0)}%`}})}),e.jsxs("span",{className:"text-xs text-slate-400",children:[((vs=he.utilization)==null?void 0:vs.scheduled)||0,"h/",he.weekly_capacity_hours||40,"h"]})]})]}),is.map((Ea,tn)=>{const $l=Ea.toISOString().split("T")[0],Fl=xa(he.id,$l),el=ia(he,Ea.getDay());return e.jsx("div",{className:`px-2 py-2 border-r border-slate-200 min-h-[80px] ${el?"":"bg-slate-100"}`,onClick:()=>{el&&Fl.length===0&&Gs(null,null,he,$l)},children:el&&e.jsx("div",{className:"space-y-1",children:Fl.map(ca=>e.jsxs("button",{onClick:yl=>{yl.stopPropagation(),Vs(ca)},className:"w-full text-left px-2 py-1 rounded text-xs hover:opacity-80",style:{backgroundColor:ca.color||je(ca.category)},children:[e.jsx("div",{className:"font-medium truncate",children:ca.service_type_name}),e.jsx("div",{className:"text-xs opacity-75",children:ca.patient_name}),e.jsxs("div",{className:"text-xs opacity-75",children:[ca.start_time,"-",ca.end_time]})]},ca.id))})},tn)})]},he.id)}),(!N.staff||N.staff.length===0)&&e.jsx("div",{className:"text-center py-12 text-slate-400",children:e.jsx("div",{className:"text-sm",children:"No staff match the current filters"})})]})})})]}),te&&e.jsx(_N,{isOpen:te,onClose:()=>pe(!1),onAssign:sa,patient:Z,serviceTypeId:ye,staff:ee,date:re,weekRange:Mt}),q&&H&&e.jsx(wN,{isOpen:q,onClose:()=>ae(!1),assignment:H,onUpdate:He,onCancel:ht}),e.jsx(jb,{isOpen:Rt,onClose:()=>{pt(!1),Wt(null)},suggestion:ns,getExplanation:fs})]})},_N=({isOpen:n,onClose:d,onAssign:c,patient:o,serviceTypeId:f,staff:h,date:p,weekRange:y})=>{const[N,j]=g.useState(!1),[v,S]=g.useState([]),[M,U]=g.useState([]),[k,B]=g.useState([]),[A,$]=g.useState({patient_id:(o==null?void 0:o.patient_id)||"",service_type_id:f||"",staff_id:(h==null?void 0:h.id)||"",date:p||y.start,start_time:"09:00",duration_minutes:60,notes:""});g.useEffect(()=>{(async()=>{try{const[D,z]=await Promise.all([ue.get("/v2/service-types"),ue.get("/patients")]);U(D.data.data||D.data||[]),B(z.data.data||z.data||[])}catch(D){console.error("Failed to fetch modal data:",D)}})()},[]),g.useEffect(()=>{if(!A.service_type_id||!A.date||!A.start_time)return;(async()=>{try{const D=`${A.date}T${A.start_time}:00`,z=new URLSearchParams({service_type_id:A.service_type_id,date_time:D,duration_minutes:A.duration_minutes}),W=await ue.get(`/v2/scheduling/eligible-staff?${z}`);S(W.data.data||[])}catch(D){console.error("Failed to fetch eligible staff:",D)}})()},[A.service_type_id,A.date,A.start_time,A.duration_minutes]);const Y=async w=>{if(w.preventDefault(),!A.patient_id||!A.service_type_id||!A.staff_id){alert("Please fill in all required fields");return}j(!0);try{await c(A)}finally{j(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Assign Care Service"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Schedule a new care assignment"})]}),e.jsxs("form",{onSubmit:Y,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Patient *"}),e.jsxs("select",{value:A.patient_id,onChange:w=>$(D=>({...D,patient_id:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select patient..."}),k.map(w=>{var D;return e.jsx("option",{value:w.id,children:((D=w.user)==null?void 0:D.name)||w.name||`Patient ${w.id}`},w.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Service Type *"}),e.jsxs("select",{value:A.service_type_id,onChange:w=>$(D=>({...D,service_type_id:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select service type..."}),M.map(w=>e.jsxs("option",{value:w.id,children:[w.name," (",w.code,")"]},w.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:A.date,onChange:w=>$(D=>({...D,date:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Time *"}),e.jsx("input",{type:"time",value:A.start_time,onChange:w=>$(D=>({...D,start_time:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Duration (minutes) *"}),e.jsxs("select",{value:A.duration_minutes,onChange:w=>$(D=>({...D,duration_minutes:parseInt(w.target.value)})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:45,children:"45 minutes"}),e.jsx("option",{value:60,children:"1 hour"}),e.jsx("option",{value:90,children:"1.5 hours"}),e.jsx("option",{value:120,children:"2 hours"}),e.jsx("option",{value:180,children:"3 hours"}),e.jsx("option",{value:240,children:"4 hours"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Assigned Staff * ",v.length>0&&e.jsxs("span",{className:"text-xs text-slate-400",children:["(",v.length," eligible)"]})]}),e.jsxs("select",{value:A.staff_id,onChange:w=>$(D=>({...D,staff_id:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select staff..."}),v.map(w=>{var D;return e.jsxs("option",{value:w.id,children:[w.name," (",((D=w.role)==null?void 0:D.code)||"Unknown",")"]},w.id)})]}),A.service_type_id&&v.length===0&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No eligible staff available for this service at the selected time."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:A.notes,onChange:w=>$(D=>({...D,notes:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",rows:2,placeholder:"Optional notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[e.jsx(Me,{variant:"secondary",onClick:d,type:"button",children:"Cancel"}),e.jsx(Me,{type:"submit",disabled:N,children:N?"Creating...":"Create Assignment"})]})]})]})}):null},wN=({isOpen:n,onClose:d,assignment:c,onUpdate:o,onCancel:f})=>{const[h,p]=g.useState(!1),[y,N]=g.useState({date:c.date,start_time:c.start_time,duration_minutes:c.duration_minutes||60,notes:c.notes||""}),j=async v=>{v.preventDefault(),p(!0);try{await o(c.id,y)}finally{p(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Edit Assignment"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[c.service_type_name," for ",c.patient_name]})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:y.date,onChange:v=>N(S=>({...S,date:v.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:y.start_time,onChange:v=>N(S=>({...S,start_time:v.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Duration (minutes)"}),e.jsxs("select",{value:y.duration_minutes,onChange:v=>N(S=>({...S,duration_minutes:parseInt(v.target.value)})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:45,children:"45 minutes"}),e.jsx("option",{value:60,children:"1 hour"}),e.jsx("option",{value:90,children:"1.5 hours"}),e.jsx("option",{value:120,children:"2 hours"}),e.jsx("option",{value:180,children:"3 hours"}),e.jsx("option",{value:240,children:"4 hours"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:y.notes,onChange:v=>N(S=>({...S,notes:v.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",rows:2})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t border-slate-200",children:[e.jsx(Me,{variant:"danger",onClick:()=>f(c.id),type:"button",children:"Cancel Assignment"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Me,{variant:"secondary",onClick:d,type:"button",children:"Close"}),e.jsx(Me,{type:"submit",disabled:h,children:h?"Saving...":"Save Changes"})]})]})]})]})}):null},_b=g.createContext(null),ra={AI_OVERVIEW:"ai-overview",SCHEDULE:"schedule",REVIEW:"review",CONFLICTS:"conflicts"},$d={STAFF_LANES:"staff-lanes",LIST:"list"};function SN({children:n,isSspoMode:d=!1}){const[c,o]=g.useState(0),f=g.useMemo(()=>{const ee=new Date,V=ee.getDay(),re=V===0?6:V-1,Re=new Date(ee);Re.setDate(ee.getDate()-re+c*7),Re.setHours(0,0,0,0);const De=new Date(Re);return De.setDate(Re.getDate()+6),De.setHours(23,59,59,999),{start:Re.toISOString().split("T")[0],end:De.toISOString().split("T")[0],startDate:Re,endDate:De}},[c]),h=g.useMemo(()=>Array.from({length:7},(ee,V)=>{const re=new Date(f.startDate);return re.setDate(f.startDate.getDate()+V),re}),[f.startDate]),[p,y]=g.useState(ra.SCHEDULE),[N,j]=g.useState($d.STAFF_LANES),[v,S]=g.useState({staffIds:[],teamLaneIds:[],patientIds:[],roleFilter:"",empTypeFilter:""}),M=g.useCallback((ee,V)=>{S(re=>({...re,[ee]:V}))},[]),U=g.useCallback(()=>{S({staffIds:[],teamLaneIds:[],patientIds:[],roleFilter:"",empTypeFilter:""})},[]),k=g.useMemo(()=>v.staffIds.length>0||v.teamLaneIds.length>0||v.patientIds.length>0||v.roleFilter||v.empTypeFilter,[v]),[B,A]=g.useState(!1),[$,Y]=g.useState(!1),[w,D]=g.useState([]),[z,W]=g.useState([]),[F,J]=g.useState(null),[I,Q]=g.useState({}),[de,te]=g.useState([]),[pe,q]=g.useState([]),[ae,H]=g.useState({isLoadingSuggestions:!1,isAutoAssignRunning:!1,lastAutoAssignRunAt:null,isLoadingOverview:!1,isLoadingConflicts:!1}),L=g.useCallback((ee,V)=>{H(re=>({...re,[ee]:V}))},[]),Z=g.useCallback(()=>{o(ee=>ee-1)},[]),Te=g.useCallback(()=>{o(ee=>ee+1)},[]),ye=g.useCallback(()=>{o(0)},[]),E=g.useMemo(()=>({isSspoMode:d,weekOffset:c,weekRange:f,weekDays:h,goToPreviousWeek:Z,goToNextWeek:Te,goToCurrentWeek:ye,viewMode:p,setViewMode:y,scheduleSubMode:N,setScheduleSubMode:j,filters:v,updateFilter:M,clearFilters:U,hasFilters:k,isNavCollapsed:B,setIsNavCollapsed:A,isUnscheduledCollapsed:$,setIsUnscheduledCollapsed:Y,suggestions:w,setSuggestions:D,proposalGroups:z,setProposalGroups:W,selectedProposalGroupId:F,setSelectedProposalGroupId:J,explanations:I,setExplanations:Q,conflicts:de,setConflicts:te,noMatchItems:pe,setNoMatchItems:q,ui:ae,setUiState:L}),[d,c,f,h,Z,Te,ye,p,N,v,M,U,k,B,$,w,z,F,I,de,pe,ae,L]);return e.jsx(_b.Provider,{value:E,children:n})}function Ur(){const n=g.useContext(_b);if(!n)throw new Error("useSchedulerContext must be used within a SchedulerProvider");return n}function CN(){const{weekRange:n,isSspoMode:d}=Ur(),[c,o]=g.useState(!0),[f,h]=g.useState(null),[p,y]=g.useState(null),[N,j]=g.useState(null),[v,S]=g.useState(null),[M,U]=g.useState(null),[k,B]=g.useState([]),[A,$]=g.useState(!1),[Y,w]=g.useState({data:[],summary:{}}),[D,z]=g.useState([]),[W,F]=g.useState(null),[J,I]=g.useState(!1),Q=g.useCallback(async()=>{try{const ge=await ue.get("/v2/tfs/summary");y(ge.data.data)}catch(ge){console.error("Failed to fetch TFS metrics:",ge)}},[]),de=g.useCallback(async()=>{try{const ke=(await ue.get("/v2/spo-dashboard")).data;j(ke.missed_care)}catch(ge){console.error("Failed to fetch dashboard metrics:",ge)}},[]),te=g.useCallback(async()=>{try{const ge=new URLSearchParams({period_type:"week",start_date:n.start,...d&&{provider_type:"sspo"}}),ke=await ue.get(`/v2/workforce/capacity?${ge}`);S(ke.data.data)}catch(ge){console.error("Failed to fetch capacity metrics:",ge)}},[n.start,d]),pe=g.useCallback(async()=>{try{const ge=await ue.get("/v2/workforce/summary");U(ge.data.data)}catch(ge){console.error("Failed to fetch workforce summary:",ge)}},[]),q=g.useCallback(async()=>{try{const ge=new URLSearchParams({start_date:n.start,end_date:n.end,...d&&{provider_type:"sspo"}}),ke=await ue.get(`/v2/scheduling/requirements?${ge}`);w(ke.data)}catch(ge){console.error("Failed to fetch unscheduled requirements:",ge)}},[n.start,n.end,d]),ae=g.useCallback(async()=>{$(!0);try{const ge=new URLSearchParams({week_start:n.start}),ke=await ue.get(`/v2/scheduling/suggestions?${ge}`);B(ke.data.data||[])}catch(ge){console.error("Failed to fetch suggestions:",ge)}finally{$(!1)}},[n.start]),H=g.useCallback(async()=>{var ge;try{const ke=new URLSearchParams({start_date:n.start,end_date:n.end}),pt=(((ge=(await ue.get(`/v2/scheduling/grid?${ke}`)).data.data)==null?void 0:ge.staff)||[]).filter(ns=>{var Wt;return((Wt=ns.utilization)==null?void 0:Wt.utilization)>85}).sort((ns,Wt)=>{var Nt,rs;return(((Nt=Wt.utilization)==null?void 0:Nt.utilization)||0)-(((rs=ns.utilization)==null?void 0:rs.utilization)||0)}).slice(0,5);z(pt)}catch(ke){console.error("Failed to fetch staff capacity:",ke)}},[n.start,n.end]),L=g.useCallback(async()=>{I(!0);try{const ge=new URLSearchParams({week_start:n.start}),ke=await ue.get(`/v2/scheduling/suggestions/weekly-summary?${ge}`);F(ke.data.data)}catch(ge){console.error("Failed to fetch weekly summary:",ge)}finally{I(!1)}},[n.start]),Z=g.useCallback(async()=>{o(!0),h(null);try{await Promise.all([Q(),de(),te(),pe(),q(),ae(),H(),L()])}catch{h("Failed to load AI Overview data")}finally{o(!1)}},[Q,de,te,pe,q,ae,H,L]);g.useEffect(()=>{Z()},[Z]);const Te=g.useMemo(()=>{const ge=k.filter(pt=>pt.match_status==="strong"),ke=k.filter(pt=>pt.match_status==="moderate"),Oe=k.filter(pt=>pt.match_status==="weak"),Rt=k.filter(pt=>pt.match_status==="none");return{total:k.length,strong:ge.length,moderate:ke.length,weak:Oe.length,none:Rt.length,autoAssignable:ge.length+ke.length}},[k]),ye=g.useMemo(()=>{const ge=k.filter(Oe=>Oe.match_status==="strong"||Oe.match_status==="moderate"),ke=ge.length*3;return{count:ge.length,assignments:ge,estimatedMinutesSaved:ke}},[k]),E=g.useMemo(()=>(Y.data||[]).filter(ge=>{var ke,Oe;return((ke=ge.risk_flags)==null?void 0:ke.includes("dangerous"))||((Oe=ge.risk_flags)==null?void 0:Oe.includes("warning"))}).slice(0,5),[Y.data]),ee=g.useMemo(()=>{const ge=new Set(k.filter(ke=>ke.match_status==="none").map(ke=>ke.patient_id));return(Y.data||[]).filter(ke=>{var Oe,Rt;return((Oe=ke.risk_flags)==null?void 0:Oe.includes("dangerous"))||((Rt=ke.risk_flags)==null?void 0:Rt.includes("warning"))||ge.has(ke.patient_id)}).slice(0,5)},[Y.data,k]),V=g.useMemo(()=>{if(!v)return null;const ge=v.available_hours||0,ke=v.scheduled_hours||0,Oe=v.required_hours||0,Rt=ge-ke;let pt="green";return Rt<0?pt="red":Rt<Oe*.2&&(pt="amber"),{value:Rt,available:ge,scheduled:ke,required:Oe,status:pt}},[v]),re=g.useMemo(()=>{var ge,ke,Oe;return{tfs:{value:(p==null?void 0:p.average_hours)||0,unit:"h",band:(p==null?void 0:p.band)||"C",target:24},unscheduled:{value:((ge=Y.summary)==null?void 0:ge.total_remaining_hours)||0,unit:"h",patients:((ke=Y.summary)==null?void 0:ke.patients_with_needs)||0,visits:((Oe=Y.summary)==null?void 0:Oe.total_remaining_visits)||0},missedCare:{value:(N==null?void 0:N.rate_percent)||0,unit:"%",band:(N==null?void 0:N.band)||"A",target:0},netCapacity:V}},[p,Y.summary,N,V]),Re=g.useCallback(async()=>{await ae()},[ae]),De=g.useCallback(async()=>{await Z()},[Z]);return{loading:c,suggestionsLoading:A,weeklySummaryLoading:J,error:f,tfsMetrics:p,missedCareMetrics:N,capacityMetrics:v,workforceSummary:M,unscheduledRequirements:Y,suggestions:k,staffCapacity:D,weeklySummary:W,suggestionCounts:Te,quickWin:ye,highPriorityUnscheduled:E,patientsRequiringAttention:ee,netCapacity:V,metricsSummary:re,regenerateSuggestions:Re,refreshAll:De}}const AN=()=>{var k,B,A,$,Y,w,D,z,W,F,J,I;const{weekRange:n,setViewMode:d}=Ur(),{loading:c,suggestionsLoading:o,suggestionCounts:f,quickWin:h,highPriorityUnscheduled:p,patientsRequiringAttention:y,staffCapacity:N,metricsSummary:j,weeklySummary:v,regenerateSuggestions:S}=CN(),M=Q=>{switch(Q==null?void 0:Q.toUpperCase()){case"A":return"text-emerald-600";case"B":return"text-blue-600";case"C":return"text-amber-600";case"D":return"text-red-600";default:return"text-slate-600"}},U=Q=>{switch(Q){case"green":return"text-emerald-600";case"amber":return"text-amber-600";case"red":return"text-red-600";default:return"text-slate-600"}};return c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Loading AI insights..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"AI Overview"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Week of ",n.startDate.toLocaleDateString()," - ",n.endDate.toLocaleDateString()]})]}),e.jsxs("button",{onClick:S,disabled:o,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",children:[o?e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):e.jsx("span",{children:"🔄"}),"Refresh Insights"]})]}),h.count>0?e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-200 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-blue-900",children:"Quick Win: Auto-Assign Safe Visits"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Our AI has identified ",e.jsxs("strong",{children:[h.count," visits"]})," with high-confidence matches (",f.strong," strong, ",f.moderate," moderate)."]}),e.jsxs("p",{className:"text-sm text-emerald-600 mt-2",children:["This action can save you an estimated ",h.estimatedMinutesSaved," minutes."]})]}),e.jsx("button",{onClick:()=>d(ra.REVIEW),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:"Review & Approve Assignments"})]})}):e.jsx("div",{className:"bg-slate-50 rounded-lg border border-slate-200 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"✓"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-700",children:"No Quick Wins Available"}),e.jsx("p",{className:"text-sm text-slate-500",children:f.total===0?"Run Auto-Assign from the Schedule tab to generate suggestions.":`${f.weak} weak matches and ${f.none} no-match items require manual review.`})]})]})}),v&&e.jsx("div",{className:"bg-gradient-to-br from-violet-50 to-fuchsia-50 rounded-lg border border-violet-200 p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-violet-100 flex items-center justify-center text-violet-600 text-lg flex-shrink-0",children:"🤖"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-bold text-violet-900",children:"AI Weekly Summary"}),v.source==="vertex_ai"&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-violet-200 text-violet-700 rounded-full",children:"Powered by Gemini"})]}),e.jsx("p",{className:"text-sm text-slate-700 mb-4",children:v.summary}),((k=v.highlights)==null?void 0:k.length)>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-bold text-violet-800 mb-2",children:"HIGHLIGHTS"}),e.jsx("ul",{className:"space-y-1",children:v.highlights.map((Q,de)=>e.jsxs("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[e.jsx("span",{className:"text-violet-500 mt-0.5",children:"•"}),e.jsx("span",{children:Q})]},de))})]}),((B=v.priorities)==null?void 0:B.length)>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-bold text-violet-800 mb-2",children:"RECOMMENDED ACTIONS"}),e.jsx("ol",{className:"space-y-1",children:v.priorities.map((Q,de)=>e.jsxs("li",{className:"text-sm text-slate-600 flex items-start gap-2",children:[e.jsxs("span",{className:"text-violet-600 font-bold",children:[de+1,"."]}),e.jsx("span",{children:Q})]},de))})]})]})]})}),f.total>0&&e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsx("span",{className:"font-medium text-slate-700",children:"AI Suggestions:"}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500"}),e.jsxs("span",{children:[f.strong," Strong"]})]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500"}),e.jsxs("span",{children:[f.moderate," Moderate"]})]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-amber-500"}),e.jsxs("span",{children:[f.weak," Weak"]})]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),e.jsxs("span",{children:[f.none," No Match"]})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-slate-800 mb-4",children:"Key Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-xs font-bold",children:"!"}),e.jsx("h4",{className:"font-bold text-slate-800",children:"Patients Requiring Attention"})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:y.length>0?"High-risk patients or those with no staff match.":"No patients requiring immediate attention."}),e.jsx("div",{className:"space-y-2 text-sm",children:y.length>0?y.map((Q,de)=>{var te,pe;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:Q.patient_name}),e.jsx("div",{className:"text-xs text-red-600",children:(te=Q.risk_flags)!=null&&te.includes("dangerous")?"High risk":(pe=Q.risk_flags)!=null&&pe.includes("warning")?"Needs attention":"No staff match"})]}),e.jsx("button",{onClick:()=>d(ra.SCHEDULE),className:"text-xs text-blue-600 hover:underline",children:"View Schedule"})]},Q.patient_id||de)}):e.jsxs("div",{className:"text-center py-4 text-emerald-600",children:[e.jsx("span",{className:"text-lg",children:"✓"}),e.jsx("p",{className:"text-xs mt-1",children:"All clear"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center text-amber-600",children:"📋"}),e.jsx("h4",{className:"font-bold text-slate-800",children:"High-Priority Unscheduled"})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:p.length>0?"Services that need to be scheduled urgently.":"No high-priority unscheduled services."}),e.jsx("div",{className:"space-y-2 text-sm",children:p.length>0?p.map((Q,de)=>{var te,pe;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:((pe=(te=Q.services)==null?void 0:te[0])==null?void 0:pe.service_type_name)||"Service"}),e.jsxs("div",{className:"text-xs text-amber-600",children:["For: ",Q.patient_name]})]}),e.jsx("button",{onClick:()=>d(ra.SCHEDULE),className:"text-xs text-blue-600 hover:underline",children:"Find Staff"})]},Q.patient_id||de)}):e.jsxs("div",{className:"text-center py-4 text-emerald-600",children:[e.jsx("span",{className:"text-lg",children:"✓"}),e.jsx("p",{className:"text-xs mt-1",children:"All scheduled"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600",children:"📊"}),e.jsx("h4",{className:"font-bold text-slate-800",children:"Staff Approaching Capacity"})]}),e.jsx("p",{className:"text-xs text-slate-500 mb-3",children:N.length>0?"Staff members with high scheduled workloads.":"All staff have comfortable capacity levels."}),e.jsx("div",{className:"space-y-2 text-sm",children:N.length>0?N.map((Q,de)=>{var ae;const te=((ae=Q.utilization)==null?void 0:ae.utilization)||0,pe=te>100?"bg-red-500":te>90?"bg-amber-500":"bg-emerald-500",q=te>100?"text-red-600":te>90?"text-amber-600":"text-emerald-600";return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium truncate max-w-[100px]",children:Q.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 h-2 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${pe} rounded-full`,style:{width:`${Math.min(100,te)}%`}})}),e.jsxs("span",{className:`text-xs font-medium ${q}`,children:[Math.round(te),"%"]})]})]},Q.id||de)}):e.jsxs("div",{className:"text-center py-4 text-emerald-600",children:[e.jsx("span",{className:"text-lg",children:"✓"}),e.jsx("p",{className:"text-xs mt-1",children:"Balanced workloads"})]})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-slate-800 mb-4",children:"Metrics Summary"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Time-to-First-Service"}),e.jsxs("div",{className:"text-2xl font-bold text-slate-900 mt-1",children:[((A=j.tfs.value)==null?void 0:A.toFixed(1))||"—",j.tfs.unit]}),e.jsxs("div",{className:`text-xs font-medium ${M(j.tfs.band)}`,children:["Band ",j.tfs.band," ",j.tfs.band==="A"||j.tfs.value<=j.tfs.target?"✓":"!"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Unscheduled Care"}),e.jsxs("div",{className:"text-2xl font-bold text-slate-900 mt-1",children:[(($=j.unscheduled.value)==null?void 0:$.toFixed(0))||0,j.unscheduled.unit]}),e.jsxs("div",{className:"text-xs text-slate-500",children:[j.unscheduled.patients," patients, ",j.unscheduled.visits," visits"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Missed Care Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-slate-900 mt-1",children:[((Y=j.missedCare.value)==null?void 0:Y.toFixed(2))||"0.00",j.missedCare.unit]}),e.jsxs("div",{className:`text-xs font-medium ${M(j.missedCare.band)}`,children:["Band ",j.missedCare.band," ",j.missedCare.band==="A"?"✓":"!"]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-4",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Net Capacity"}),e.jsxs("div",{className:"text-2xl font-bold text-slate-900 mt-1",children:[((D=(w=j.netCapacity)==null?void 0:w.value)==null?void 0:D.toFixed(1))||"—","h"]}),e.jsxs("div",{className:`text-xs font-medium ${U((z=j.netCapacity)==null?void 0:z.status)}`,children:[((F=(W=j.netCapacity)==null?void 0:W.status)==null?void 0:F.toUpperCase())||"—"," ",((J=j.netCapacity)==null?void 0:J.status)==="green"?"✓":((I=j.netCapacity)==null?void 0:I.status)==="red"?"!":""]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-slate-800 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("button",{onClick:()=>d(ra.SCHEDULE),className:"bg-white rounded-lg border border-slate-200 p-4 text-left hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"📅"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:"View Schedule"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Open the weekly calendar grid"})]})]})}),e.jsx("button",{onClick:()=>d(ra.REVIEW),className:"bg-white rounded-lg border border-slate-200 p-4 text-left hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"📋"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:"Review Proposals"}),e.jsx("div",{className:"text-xs text-slate-500",children:f.autoAssignable>0?`${f.autoAssignable} ready for approval`:"View AI proposal groups"})]})]})}),e.jsx("button",{onClick:()=>d(ra.CONFLICTS),className:"bg-white rounded-lg border border-slate-200 p-4 text-left hover:bg-slate-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"⚠️"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:"Resolve Conflicts"}),e.jsx("div",{className:"text-xs text-slate-500",children:f.none>0?`${f.none} items need attention`:"View scheduling conflicts"})]})]})})]})]})]})};function kN(){const{isSspoMode:n,weekRange:d,filters:c}=Ur(),[o,f]=g.useState(!0),[h,p]=g.useState({staff:[],assignments:[],week:{}}),[y,N]=g.useState({data:[],summary:{}}),[j,v]=g.useState({staff:null,patient:null}),[S,M]=g.useState([]),[U,k]=g.useState([]),[B,A]=g.useState([]),[$,Y]=g.useState([]),w=g.useCallback(async(q,ae)=>{try{const H=new URLSearchParams({start_date:d.start,end_date:d.end,...q&&{staff_id:q},...ae&&{patient_id:ae},...c.roleFilter&&{"role_codes[]":c.roleFilter},...c.empTypeFilter&&{"employment_type_codes[]":c.empTypeFilter}}),L=await ue.get(`/v2/scheduling/grid?${H}`);return p(L.data.data),L.data.data}catch(H){return console.error("Failed to fetch grid data:",H),null}},[d.start,d.end,c.roleFilter,c.empTypeFilter]),D=g.useCallback(async q=>{try{const ae=new URLSearchParams({start_date:d.start,end_date:d.end,...q&&{patient_id:q},...n&&{provider_type:"sspo"}}),H=await ue.get(`/v2/scheduling/requirements?${ae}`);return N(H.data),H.data}catch(ae){return console.error("Failed to fetch requirements:",ae),null}},[d.start,d.end,n]),z=g.useCallback(async(q,ae)=>{try{const H=new URLSearchParams;q&&H.set("current_staff_id",q),ae&&H.set("current_patient_id",ae);const[L,Z,Te,ye,E]=await Promise.all([ue.get("/v2/workforce/metadata/roles"),ue.get("/v2/workforce/metadata/employment-types"),ue.get(`/v2/scheduling/navigation-examples?${H}`),ue.get("/v2/workforce/staff?status=active&limit=100"),ue.get("/patients?status=Active&limit=100")]);M(L.data.data||[]),k(Z.data.data||[]),v(Te.data.data||{}),A(ye.data.data||[]),Y(E.data.data||[])}catch(H){console.error("Failed to fetch metadata:",H)}},[]),W=g.useCallback(async(q,ae)=>{f(!0),await Promise.all([w(q,ae),D(ae),z(q,ae)]),f(!1)},[w,D,z]),F=g.useCallback(async(q,ae)=>{await w(q,ae)},[w]),J=g.useCallback(async q=>{await D(q)},[D]),I=g.useCallback(async(q,ae)=>{await Promise.all([w(q,ae),D(ae)])},[w,D]),Q=g.useCallback((q,ae)=>h.assignments.filter(H=>H.staff_id===q&&H.date===ae&&H.status!=="cancelled"),[h.assignments]),de=g.useCallback((q,ae)=>{var H;return(H=q.availability)==null?void 0:H.some(L=>L.day_of_week===ae)},[]),te=g.useCallback(q=>({nursing:"#DBEAFE",psw:"#D1FAE5",personal_support:"#D1FAE5",homemaking:"#FEF3C7",behaviour:"#FEE2E2",behavioral:"#FEE2E2",rehab:"#E9D5FF",therapy:"#E9D5FF"})[q==null?void 0:q.toLowerCase()]||"#F3F4F6",[]),pe=g.useCallback(q=>{const ae=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],H=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return`${ae[q.getDay()]} ${H[q.getMonth()]} ${q.getDate()}`},[]);return{loading:o,setLoading:f,gridData:h,requirements:y,navExamples:j,roles:S,employmentTypes:U,allStaff:B,allPatients:$,loadAllData:W,refreshGridData:F,refreshRequirements:J,refreshAll:I,getAssignmentsForCell:Q,isStaffAvailable:de,getCategoryColor:te,formatDate:pe}}const EN=({staff:n,assignments:d,weekDays:c,onCellClick:o,onEditAssignment:f,formatDate:h,getCategoryColor:p,getAssignmentsForCell:y,isStaffAvailable:N,highlightedStaffId:j})=>{const[v,S]=g.useState(new Set),[M,U]=g.useState(!1),k=g.useMemo(()=>{if(!n||n.length===0)return[];n.forEach(z=>{var W;(W=z.role)!=null&&W.code});const $={};n.forEach(z=>{var F;const W=((F=z.role)==null?void 0:F.category)||"other";$[W]||($[W]=[]),$[W].push(z)});const Y=[],w=3;return["personal_support","nursing","allied_health","community_support","administrative","other"].forEach(z=>{const W=$[z]||[];if(W.length===0)return;const F={};if(W.forEach(I=>{var de;const Q=((de=I.role)==null?void 0:de.code)||"OTHER";F[Q]||(F[Q]=[]),F[Q].push(I)}),Object.values(F).some(I=>I.length>=w))W.sort((I,Q)=>(I.name||"").localeCompare(Q.name||"")).forEach(I=>{var Q;Y.push({type:"individual",id:`staff-${I.id}`,name:I.name,roleCode:((Q=I.role)==null?void 0:Q.code)||"-",category:z,staff:[I],isExpanded:!0})});else{const I=RN(z);Y.push({type:"grouped",id:`group-${z}`,name:I,category:z,staff:W.sort((Q,de)=>(Q.name||"").localeCompare(de.name||"")),isExpanded:v.has(`group-${z}`),roleBreakdown:Object.entries(F).map(([Q,de])=>({code:Q,count:de.length}))})}}),Y},[n,v]),B=$=>{S(Y=>{const w=new Set(Y);return w.has($)?w.delete($):w.add($),w})},A=M?k:k.slice(0,10);return e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-8 border-b border-slate-200 bg-slate-50 sticky top-0 z-10 min-w-[1000px]",children:[e.jsx("div",{className:"px-4 py-3 border-r border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-bold text-slate-600",children:"Team Lane"}),e.jsxs("span",{className:"text-xs text-slate-400",children:[n.length," staff"]})]})}),c.map(($,Y)=>e.jsx("div",{className:"px-4 py-3 border-r border-slate-200 text-center",children:e.jsx("div",{className:"text-xs font-bold text-slate-600",children:h($)})},Y))]}),e.jsxs("div",{className:"overflow-x-auto",children:[A.map($=>e.jsx(TN,{lane:$,weekDays:c,onToggleExpand:()=>B($.id),onCellClick:o,onEditAssignment:f,getCategoryColor:p,getAssignmentsForCell:y,isStaffAvailable:N,highlightedStaffId:j},$.id)),k.length>10&&!M&&e.jsx("div",{className:"px-4 py-3 bg-slate-50 border-t border-slate-200 text-center",children:e.jsxs("button",{onClick:()=>U(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:["Show ",k.length-10," more lanes..."]})}),A.length===0&&e.jsx("div",{className:"text-center py-12 text-slate-400",children:e.jsx("div",{className:"text-sm",children:"No staff match the current filters"})})]})]})},TN=({lane:n,weekDays:d,onToggleExpand:c,onCellClick:o,onEditAssignment:f,getCategoryColor:h,getAssignmentsForCell:p,isStaffAvailable:y,highlightedStaffId:N})=>{var j,v,S;if(n.type==="individual"){const M=n.staff[0],U=N===M.id;return e.jsxs("div",{className:`grid grid-cols-8 border-b border-slate-100 min-w-[1000px] ${U?"bg-blue-50":"hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"px-4 py-3 border-r border-slate-200",children:[e.jsx("div",{className:"text-sm font-medium",children:M.name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[((j=M.role)==null?void 0:j.code)||"-",", ",((v=M.employment_type)==null?void 0:v.code)||"-"]}),e.jsx(gg,{staff:M})]}),d.map((k,B)=>e.jsx(pg,{staff:M,date:k,getAssignmentsForCell:p,isStaffAvailable:y,getCategoryColor:h,onCellClick:o,onEditAssignment:f},B))]})}return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-8 border-b border-slate-200 bg-slate-100 min-w-[1000px]",children:[e.jsx("div",{className:"px-4 py-2 border-r border-slate-200",children:e.jsxs("button",{onClick:c,className:"flex items-center gap-2 w-full text-left",children:[e.jsx("svg",{className:`w-4 h-4 text-slate-500 transition-transform ${n.isExpanded?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-slate-700",children:n.name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[n.staff.length," staff • ",(S=n.roleBreakdown)==null?void 0:S.map(M=>`${M.count} ${M.code}`).join(", ")]})]})]})}),d.map((M,U)=>e.jsx("div",{className:"border-r border-slate-200 bg-slate-100"},U))]}),n.isExpanded&&n.staff.map(M=>{var U;return e.jsxs("div",{className:"grid grid-cols-8 border-b border-slate-100 min-w-[1000px] hover:bg-slate-50",children:[e.jsxs("div",{className:"px-4 py-2 border-r border-slate-200 pl-10",children:[e.jsx("div",{className:"text-sm font-medium",children:M.name}),e.jsx("div",{className:"text-xs text-slate-500",children:((U=M.role)==null?void 0:U.code)||"-"}),e.jsx(gg,{staff:M,compact:!0})]}),d.map((k,B)=>e.jsx(pg,{staff:M,date:k,getAssignmentsForCell:p,isStaffAvailable:y,getCategoryColor:h,onCellClick:o,onEditAssignment:f,compact:!0},B))]},M.id)})]})},pg=({staff:n,date:d,getAssignmentsForCell:c,isStaffAvailable:o,getCategoryColor:f,onCellClick:h,onEditAssignment:p,compact:y=!1})=>{const N=d.toISOString().split("T")[0],j=c(n.id,N),v=o(n,d.getDay()),S=d.getDay()===0||d.getDay()===6;return e.jsx("div",{className:`px-2 py-2 border-r border-slate-200 ${y?"min-h-[60px]":"min-h-[80px]"} ${v?S?"bg-slate-50":"":"bg-slate-100"}`,onClick:()=>{v&&j.length===0&&(h==null||h(null,null,n,N))},children:v&&e.jsx("div",{className:"space-y-1",children:j.map(M=>e.jsxs("button",{onClick:U=>{U.stopPropagation(),p==null||p(M)},className:`w-full text-left px-2 py-1 rounded text-xs hover:opacity-80 ${y?"py-0.5":""}`,style:{backgroundColor:M.color||f(M.category)},children:[e.jsx("div",{className:"font-medium truncate",children:M.service_type_name}),!y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs opacity-75 truncate",children:M.patient_name}),e.jsxs("div",{className:"text-xs opacity-75",children:[M.start_time,"-",M.end_time]})]})]},M.id))})})},gg=({staff:n,compact:d=!1})=>{var p,y;const c=((p=n.utilization)==null?void 0:p.utilization)||0,o=((y=n.utilization)==null?void 0:y.scheduled)||0,f=n.weekly_capacity_hours||40,h=c>100?"bg-red-500":c>90?"bg-amber-500":c>75?"bg-blue-500":"bg-emerald-500";return e.jsxs("div",{className:`flex items-center gap-2 ${d?"mt-0.5":"mt-1"}`,children:[e.jsx("div",{className:`flex-1 ${d?"h-1":"h-1.5"} bg-slate-200 rounded-full`,children:e.jsx("div",{className:`h-full rounded-full ${h}`,style:{width:`${Math.min(100,c)}%`}})}),!d&&e.jsxs("span",{className:"text-xs text-slate-400",children:[o,"h/",f,"h"]})]})};function RN(n){return{personal_support:"Personal Support (PSW)",nursing:"Nursing",allied_health:"Allied Health",community_support:"Community Support",administrative:"Administrative",other:"Other"}[n]||n}const MN=()=>{var Hs,xa,ia,je,Ae,Be,qe,et,Ye,ot;const[n,d]=wp(),c=xs(),{isSspoMode:o,weekRange:f,weekDays:h,goToPreviousWeek:p,goToNextWeek:y,goToCurrentWeek:N,weekOffset:j,filters:v,updateFilter:S,clearFilters:M,hasFilters:U,isNavCollapsed:k,setIsNavCollapsed:B,isUnscheduledCollapsed:A,setIsUnscheduledCollapsed:$,scheduleSubMode:Y,setScheduleSubMode:w}=Ur(),D=n.get("staff_id"),z=n.get("patient_id"),{gridData:W,requirements:F,navExamples:J,roles:I,employmentTypes:Q,allStaff:de,allPatients:te,loadAllData:pe,refreshAll:q,getAssignmentsForCell:ae,isStaffAvailable:H,getCategoryColor:L,formatDate:Z}=kN(),[Te,ye]=g.useState(!1),[E,ee]=g.useState(!1),[V,re]=g.useState(null),[Re,De]=g.useState(null),[ge,ke]=g.useState(null),[Oe,Rt]=g.useState(null),[pt,ns]=g.useState(null),[Wt,Nt]=g.useState(!1),[rs,Mt]=g.useState(null),[is,zs]=g.useState(null),{suggestions:Bs,isLoading:es,hasSuggestions:It,generateSuggestions:fs,getExplanation:Is,acceptSuggestion:os,getSuggestionFor:Qs,clearSuggestions:Us}=Nb(f.start,null);g.useEffect(()=>{pe(D,z)},[pe,D,z,f.start]),g.useEffect(()=>{S("roleFilter",v.roleFilter),S("empTypeFilter",v.empTypeFilter)},[]);const ts=(we,Ge,$e=null,Dt=null)=>{De(we),ke(Ge),Rt($e),ns(Dt),ye(!0)},ds=we=>{re(we),ee(!0)},Gs=async we=>{var Ge,$e;try{await ue.post("/v2/scheduling/assignments",we),ye(!1),q(D,z)}catch(Dt){console.error("Failed to create assignment:",Dt),alert((($e=(Ge=Dt.response)==null?void 0:Ge.data)==null?void 0:$e.message)||"Failed to create assignment")}},Vs=async(we,Ge)=>{var $e,Dt;try{await ue.patch(`/v2/scheduling/assignments/${we}`,Ge),ee(!1),q(D,z)}catch(Qt){console.error("Failed to update assignment:",Qt),alert(((Dt=($e=Qt.response)==null?void 0:$e.data)==null?void 0:Dt.message)||"Failed to update assignment")}},sa=async we=>{if(confirm("Are you sure you want to cancel this assignment?"))try{await ue.delete(`/v2/scheduling/assignments/${we}`),ee(!1),q(D,z)}catch(Ge){console.error("Failed to cancel assignment:",Ge)}},He=()=>{M(),c(window.location.pathname)},ht=async()=>{try{await fs()}catch(we){console.error("Failed to generate suggestions:",we)}},gt=async we=>{const Ge=`${we.patient_id}-${we.service_type_id}`;zs(Ge);try{const $e=f.start+"T09:00:00",Dt=new Date(new Date($e).getTime()+(we.duration_minutes||60)*6e4).toISOString();await os(we,$e,Dt),q(D,z)}catch($e){console.error("Failed to accept suggestion:",$e),alert($e.message||"Failed to accept suggestion")}finally{zs(null)}},cs=we=>{Mt(we),Nt(!0)},Ct=D||z||v.roleFilter||v.empTypeFilter||U;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white border border-slate-200 rounded-lg px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(Jl,{placeholder:"Filter: By Role",value:v.roleFilter,onChange:we=>S("roleFilter",we.target.value),options:[{value:"",label:"All Roles"},...I.map(we=>({value:we.code,label:`${we.code} - ${we.name}`}))],className:"w-48"}),e.jsx(Jl,{placeholder:"Filter: By Employment Type",value:v.empTypeFilter,onChange:we=>S("empTypeFilter",we.target.value),options:[{value:"",label:"All Employment Types"},...Q.map(we=>({value:we.code,label:we.name}))],className:"w-64"}),e.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[e.jsx("button",{onClick:()=>w($d.STAFF_LANES),className:`px-3 py-1.5 text-xs font-medium rounded-l-md border transition-colors ${Y===$d.STAFF_LANES?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:"Staff Lanes"}),e.jsx("button",{onClick:()=>w($d.LIST),className:`px-3 py-1.5 text-xs font-medium rounded-r-md border-t border-r border-b transition-colors ${Y===$d.LIST?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:"List View"})]}),Ct&&e.jsx(Me,{variant:"ghost",size:"sm",onClick:He,children:"Clear Filters"}),(D||z)&&e.jsxs("span",{className:"text-sm text-slate-500 flex items-center gap-2",children:[D&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:["Staff: ",((xa=(Hs=W.staff)==null?void 0:Hs.find(we=>we.id===parseInt(D)))==null?void 0:xa.name)||`ID ${D}`]}),z&&e.jsxs("span",{className:"bg-green-100 text-green-700 px-2 py-0.5 rounded",children:["Patient: ",((ia=J.patient)==null?void 0:ia.name)||`ID ${z}`]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsxs("button",{onClick:()=>B(!k),className:"w-full px-4 py-3 flex items-center justify-between bg-slate-50 hover:bg-slate-100 transition-colors",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-700",children:"Quick Navigation"}),e.jsx("svg",{className:`w-4 h-4 text-slate-500 transition-transform ${k?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),!k&&e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`p-3 rounded-lg border ${D?"bg-blue-100 border-blue-400":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("div",{className:"text-xs font-bold text-blue-800 mb-2",children:["Staff-Centric View",D&&e.jsx("span",{className:"ml-1 text-blue-600",children:"(Active)"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:D||"",onChange:we=>{we.target.value?d({staff_id:we.target.value}):He()},className:"appearance-none w-full text-sm border border-blue-300 rounded px-2 py-1.5 pr-10 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select a staff member..."}),de.map(we=>{var Ge;return e.jsxs("option",{value:we.id,children:[we.name," (",((Ge=we.role)==null?void 0:Ge.code)||we.organization_role||"Staff",")"]},we.id)})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx("svg",{className:"h-4 w-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${z?"bg-green-100 border-green-400":"bg-green-50 border-green-200"}`,children:[e.jsxs("div",{className:"text-xs font-bold text-green-800 mb-2",children:["Patient-Centric View",z&&e.jsx("span",{className:"ml-1 text-green-600",children:"(Active)"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:z||"",onChange:we=>{we.target.value?d({patient_id:we.target.value}):He()},className:"appearance-none w-full text-sm border border-green-300 rounded px-2 py-1.5 pr-10 bg-white focus:outline-none focus:ring-1 focus:ring-green-500",children:[e.jsx("option",{value:"",children:"Select a patient..."}),te.map(we=>{var Ge;return e.jsx("option",{value:we.id,children:we.name||((Ge=we.user)==null?void 0:Ge.name)||`Patient ${we.id}`},we.id)})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx("svg",{className:"h-4 w-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border ${Ct?"bg-slate-50 border-slate-200":"bg-slate-100 border-slate-400"}`,children:[e.jsxs("div",{className:"text-xs font-bold text-slate-700 mb-2",children:["Full Dashboard View",!Ct&&e.jsx("span",{className:"ml-1 text-slate-500",children:"(Active)"})]}),e.jsx("button",{onClick:He,className:`w-full text-sm px-3 py-1.5 rounded ${Ct?"bg-slate-600 text-white hover:bg-slate-700":"bg-slate-200 text-slate-600 cursor-default"}`,disabled:!Ct,children:Ct?"Clear filters & view all":"Viewing all schedules"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>$(!A),className:"text-left flex-1 hover:opacity-80 transition-opacity",children:[e.jsx("h2",{className:"text-sm font-bold text-amber-800",children:"Unscheduled Care"}),e.jsxs("p",{className:"text-xs text-amber-600",children:[((je=F.summary)==null?void 0:je.patients_with_needs)||0," patients need scheduling",((Ae=F.summary)==null?void 0:Ae.total_remaining_hours)>0&&e.jsxs("span",{className:"ml-2",children:["(",F.summary.total_remaining_hours,"h + ",F.summary.total_remaining_visits||0," visits remaining)"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!A&&((Be=F.data)==null?void 0:Be.length)>0&&e.jsxs("button",{onClick:we=>{we.stopPropagation(),ht()},disabled:es,className:`flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${It?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200":"bg-blue-600 text-white hover:bg-blue-700"} disabled:opacity-50`,children:[es?e.jsxs("svg",{className:"w-3.5 h-3.5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}):e.jsx("span",{children:"⚡"}),e.jsx("span",{children:It?`${Bs.length} Suggestions`:"Auto Assign"})]}),It&&e.jsx("button",{onClick:we=>{we.stopPropagation(),Us()},className:"p-1.5 text-slate-400 hover:text-slate-600 rounded-md hover:bg-slate-100",title:"Clear suggestions",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:()=>$(!A),className:"p-1 hover:bg-amber-100 rounded transition-colors",children:e.jsx("svg",{className:`w-4 h-4 text-amber-600 transition-transform ${A?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]}),!A&&((qe=F.data)==null?void 0:qe.length)>0?e.jsx("div",{className:"overflow-x-auto p-4",children:e.jsx("div",{className:"flex gap-4 min-w-max",children:(et=F.data)==null?void 0:et.map(we=>{var Ge,$e,Dt,Qt;return e.jsxs("div",{className:"bg-slate-50 rounded-lg border border-slate-200 p-3 w-72 flex-shrink-0",children:[e.jsx("div",{className:"flex items-start justify-between mb-2",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium",children:we.patient_name}),((Ge=we.risk_flags)==null?void 0:Ge.includes("dangerous"))&&e.jsx("span",{className:"text-xs text-red-600 font-bold",children:"!"}),(($e=we.risk_flags)==null?void 0:$e.includes("warning"))&&e.jsx("span",{className:"text-xs text-amber-600 font-bold",children:"!"})]}),e.jsxs("div",{className:"text-xs text-slate-500",children:["RUG: ",we.rug_category]})]})}),e.jsxs("div",{className:"space-y-2",children:[(Dt=we.services)==null?void 0:Dt.slice(0,3).map(At=>{const zt=Qs(we.patient_id,At.service_type_id),he=`${we.patient_id}-${At.service_type_id}`;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium",children:At.service_type_name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[At.scheduled,"/",At.required," ",At.unit_type]})]}),e.jsx(Me,{variant:"ghost",size:"sm",onClick:()=>ts(we,At.service_type_id),className:"text-xs text-blue-600",children:"Assign"})]}),zt&&zt.match_status!=="none"&&e.jsx(yb,{suggestion:zt,onAccept:gt,onManual:()=>ts(we,At.service_type_id),onExplain:cs,isAccepting:is===he})]},At.service_type_id)}),((Qt=we.services)==null?void 0:Qt.length)>3&&e.jsxs("div",{className:"text-xs text-slate-400 text-center",children:["+",we.services.length-3," more services"]})]})]},we.patient_id)})})}):A?null:e.jsxs("div",{className:"text-center py-6 text-emerald-600",children:[e.jsx("div",{className:"text-2xl mb-1",children:"✓"}),e.jsx("div",{className:"text-sm font-medium",children:"All required care scheduled for this week"})]})]}),e.jsx("div",{children:z?e.jsx(vb,{assignments:(Ye=W.assignments)==null?void 0:Ye.map(we=>{var Ge,$e,Dt,Qt,At;return{...we,staff_name:(($e=(Ge=W.staff)==null?void 0:Ge.find(zt=>zt.id===we.staff_id))==null?void 0:$e.name)||"Unknown",staff_role:(At=(Qt=(Dt=W.staff)==null?void 0:Dt.find(zt=>zt.id===we.staff_id))==null?void 0:Qt.role)==null?void 0:At.code}}),weekDays:h,patientName:((ot=J.patient)==null?void 0:ot.name)||`Patient #${z}`,onEditAssignment:ds}):Y===$d.LIST?e.jsx(DN,{assignments:W.assignments||[],staff:W.staff||[],onEditAssignment:ds}):e.jsx(EN,{staff:W.staff||[],assignments:W.assignments||[],weekDays:h,onCellClick:ts,onEditAssignment:ds,formatDate:Z,getCategoryColor:L,getAssignmentsForCell:ae,isStaffAvailable:H,highlightedStaffId:D?parseInt(D):null})}),Te&&e.jsx(ON,{isOpen:Te,onClose:()=>ye(!1),onAssign:Gs,patient:Re,serviceTypeId:ge,staff:Oe,date:pt,weekRange:f}),E&&V&&e.jsx(LN,{isOpen:E,onClose:()=>ee(!1),assignment:V,onUpdate:Vs,onCancel:sa}),e.jsx(jb,{isOpen:Wt,onClose:()=>{Nt(!1),Mt(null)},suggestion:rs,getExplanation:Is})]})},ON=({isOpen:n,onClose:d,onAssign:c,patient:o,serviceTypeId:f,staff:h,date:p,weekRange:y})=>{const[N,j]=g.useState(!1),[v,S]=g.useState([]),[M,U]=g.useState([]),[k,B]=g.useState([]),[A,$]=g.useState({patient_id:(o==null?void 0:o.patient_id)||"",service_type_id:f||"",staff_id:(h==null?void 0:h.id)||"",date:p||y.start,start_time:"09:00",duration_minutes:60,notes:""});g.useEffect(()=>{(async()=>{try{const[D,z]=await Promise.all([ue.get("/v2/service-types"),ue.get("/patients")]);U(D.data.data||D.data||[]),B(z.data.data||z.data||[])}catch(D){console.error("Failed to fetch modal data:",D)}})()},[]),g.useEffect(()=>{if(!A.service_type_id||!A.date||!A.start_time)return;(async()=>{try{const D=`${A.date}T${A.start_time}:00`,z=new URLSearchParams({service_type_id:A.service_type_id,date_time:D,duration_minutes:A.duration_minutes}),W=await ue.get(`/v2/scheduling/eligible-staff?${z}`);S(W.data.data||[])}catch(D){console.error("Failed to fetch eligible staff:",D)}})()},[A.service_type_id,A.date,A.start_time,A.duration_minutes]);const Y=async w=>{if(w.preventDefault(),!A.patient_id||!A.service_type_id||!A.staff_id){alert("Please fill in all required fields");return}j(!0);try{await c(A)}finally{j(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Assign Care Service"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Schedule a new care assignment"})]}),e.jsxs("form",{onSubmit:Y,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Patient *"}),e.jsxs("select",{value:A.patient_id,onChange:w=>$(D=>({...D,patient_id:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select patient..."}),k.map(w=>{var D;return e.jsx("option",{value:w.id,children:((D=w.user)==null?void 0:D.name)||w.name||`Patient ${w.id}`},w.id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Service Type *"}),e.jsxs("select",{value:A.service_type_id,onChange:w=>$(D=>({...D,service_type_id:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select service type..."}),M.map(w=>e.jsxs("option",{value:w.id,children:[w.name," (",w.code,")"]},w.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:A.date,onChange:w=>$(D=>({...D,date:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Time *"}),e.jsx("input",{type:"time",value:A.start_time,onChange:w=>$(D=>({...D,start_time:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Duration (minutes) *"}),e.jsxs("select",{value:A.duration_minutes,onChange:w=>$(D=>({...D,duration_minutes:parseInt(w.target.value)})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:45,children:"45 minutes"}),e.jsx("option",{value:60,children:"1 hour"}),e.jsx("option",{value:90,children:"1.5 hours"}),e.jsx("option",{value:120,children:"2 hours"}),e.jsx("option",{value:180,children:"3 hours"}),e.jsx("option",{value:240,children:"4 hours"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Assigned Staff * ",v.length>0&&e.jsxs("span",{className:"text-xs text-slate-400",children:["(",v.length," eligible)"]})]}),e.jsxs("select",{value:A.staff_id,onChange:w=>$(D=>({...D,staff_id:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select staff..."}),v.map(w=>{var D;return e.jsxs("option",{value:w.id,children:[w.name," (",((D=w.role)==null?void 0:D.code)||"Unknown",")"]},w.id)})]}),A.service_type_id&&v.length===0&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No eligible staff available for this service at the selected time."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:A.notes,onChange:w=>$(D=>({...D,notes:w.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",rows:2,placeholder:"Optional notes..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[e.jsx(Me,{variant:"secondary",onClick:d,type:"button",children:"Cancel"}),e.jsx(Me,{type:"submit",disabled:N,children:N?"Creating...":"Create Assignment"})]})]})]})}):null},LN=({isOpen:n,onClose:d,assignment:c,onUpdate:o,onCancel:f})=>{const[h,p]=g.useState(!1),[y,N]=g.useState({date:c.date,start_time:c.start_time,duration_minutes:c.duration_minutes||60,notes:c.notes||""}),j=async v=>{v.preventDefault(),p(!0);try{await o(c.id,y)}finally{p(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-200",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Edit Assignment"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[c.service_type_name," for ",c.patient_name]})]}),e.jsxs("form",{onSubmit:j,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:y.date,onChange:v=>N(S=>({...S,date:v.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",value:y.start_time,onChange:v=>N(S=>({...S,start_time:v.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Duration (minutes)"}),e.jsxs("select",{value:y.duration_minutes,onChange:v=>N(S=>({...S,duration_minutes:parseInt(v.target.value)})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",children:[e.jsx("option",{value:30,children:"30 minutes"}),e.jsx("option",{value:45,children:"45 minutes"}),e.jsx("option",{value:60,children:"1 hour"}),e.jsx("option",{value:90,children:"1.5 hours"}),e.jsx("option",{value:120,children:"2 hours"}),e.jsx("option",{value:180,children:"3 hours"}),e.jsx("option",{value:240,children:"4 hours"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:y.notes,onChange:v=>N(S=>({...S,notes:v.target.value})),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm",rows:2})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t border-slate-200",children:[e.jsx(Me,{variant:"danger",onClick:()=>f(c.id),type:"button",children:"Cancel Assignment"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Me,{variant:"secondary",onClick:d,type:"button",children:"Close"}),e.jsx(Me,{type:"submit",disabled:h,children:h?"Saving...":"Save Changes"})]})]})]})]})}):null},DN=({assignments:n,staff:d,onEditAssignment:c})=>{const[o,f]=g.useState("date"),[h,p]=g.useState("asc"),[y,N]=g.useState("all"),j=g.useMemo(()=>{let U=[...n||[]];return y!=="all"&&(U=U.filter(k=>k.status===y)),U.sort((k,B)=>{var w,D;let A,$;switch(o){case"date":A=`${k.date} ${k.start_time}`,$=`${B.date} ${B.start_time}`;break;case"patient":A=k.patient_name||"",$=B.patient_name||"";break;case"service":A=k.service_type_name||"",$=B.service_type_name||"";break;case"staff":A=((w=d==null?void 0:d.find(z=>z.id===k.staff_id))==null?void 0:w.name)||"",$=((D=d==null?void 0:d.find(z=>z.id===B.staff_id))==null?void 0:D.name)||"";break;case"status":A=k.status||"",$=B.status||"";break;default:A="",$=""}const Y=A.localeCompare($);return h==="asc"?Y:-Y}),U},[n,d,o,h,y]),v=U=>{o===U?p(k=>k==="asc"?"desc":"asc"):(f(U),p("asc"))},S=({field:U})=>o!==U?null:e.jsx("span",{className:"ml-1",children:h==="asc"?"↑":"↓"}),M=g.useMemo(()=>{const U={all:(n==null?void 0:n.length)||0};return(n||[]).forEach(k=>{U[k.status]=(U[k.status]||0)+1}),U},[n]);return e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 bg-slate-50 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-700",children:["Appointments List (",j.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Status:"}),["all","planned","completed","cancelled"].map(U=>e.jsxs("button",{onClick:()=>N(U),className:`px-2 py-1 text-xs rounded-full transition-colors ${y===U?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[U==="all"?"All":U.charAt(0).toUpperCase()+U.slice(1),M[U]>0&&` (${M[U]})`]},U))]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsxs("th",{onClick:()=>v("date"),className:"text-left px-4 py-2 text-slate-600 font-medium cursor-pointer hover:bg-slate-100",children:["Date/Time ",e.jsx(S,{field:"date"})]}),e.jsxs("th",{onClick:()=>v("patient"),className:"text-left px-4 py-2 text-slate-600 font-medium cursor-pointer hover:bg-slate-100",children:["Patient ",e.jsx(S,{field:"patient"})]}),e.jsxs("th",{onClick:()=>v("service"),className:"text-left px-4 py-2 text-slate-600 font-medium cursor-pointer hover:bg-slate-100",children:["Service ",e.jsx(S,{field:"service"})]}),e.jsxs("th",{onClick:()=>v("staff"),className:"text-left px-4 py-2 text-slate-600 font-medium cursor-pointer hover:bg-slate-100",children:["Staff ",e.jsx(S,{field:"staff"})]}),e.jsxs("th",{onClick:()=>v("status"),className:"text-left px-4 py-2 text-slate-600 font-medium cursor-pointer hover:bg-slate-100",children:["Status ",e.jsx(S,{field:"status"})]})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:j.length>0?j.map(U=>{var k;return e.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer",onClick:()=>c==null?void 0:c(U),children:[e.jsxs("td",{className:"px-4 py-2",children:[e.jsx("div",{children:U.date}),e.jsxs("div",{className:"text-xs text-slate-500",children:[U.start_time," - ",U.end_time]})]}),e.jsx("td",{className:"px-4 py-2",children:U.patient_name}),e.jsx("td",{className:"px-4 py-2",children:U.service_type_name}),e.jsx("td",{className:"px-4 py-2",children:((k=d==null?void 0:d.find(B=>B.id===U.staff_id))==null?void 0:k.name)||"Unknown"}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-0.5 text-xs rounded-full ${U.status==="completed"?"bg-emerald-100 text-emerald-700":U.status==="planned"?"bg-blue-100 text-blue-700":U.status==="cancelled"?"bg-slate-100 text-slate-500":"bg-amber-100 text-amber-700"}`,children:U.status})})]},U.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-400",children:(n==null?void 0:n.length)===0?"No appointments for this week":"No appointments match the current filter"})})})]})})]})};function zN(){const{weekRange:n,isSspoMode:d}=Ur(),[c,o]=g.useState(!0),[f,h]=g.useState(null),[p,y]=g.useState([]),[N,j]=g.useState(null),[v,S]=g.useState(new Set),[M,U]=g.useState(new Set),k=g.useCallback(async()=>{o(!0),h(null);try{const F=new URLSearchParams({week_start:n.start}),J=await ue.get(`/v2/scheduling/suggestions?${F}`);y(J.data.data||[])}catch(F){console.error("Failed to fetch suggestions:",F),h("Failed to load suggestions")}finally{o(!1)}},[n.start]);g.useEffect(()=>{k()},[k]);const B=g.useMemo(()=>{if(!p||p.length===0)return[];const F=[],J=p.filter(te=>te.match_status==="strong"||te.match_status==="moderate");J.length>0&&F.push({id:"high-confidence",type:"by_match_quality",title:"High-Confidence Assignments",description:"Strong and moderate matches ready for approval",suggestions:J,count:J.length,status:"pending",source:"AI Action",priority:1,metrics:{strongCount:J.filter(te=>te.match_status==="strong").length,moderateCount:J.filter(te=>te.match_status==="moderate").length,avgConfidence:Math.round(J.reduce((te,pe)=>te+(pe.confidence_score||0),0)/J.length)}});const I={};p.forEach(te=>{const pe=te.service_category||"other";I[pe]||(I[pe]=[]),I[pe].push(te)}),Object.entries(I).forEach(([te,pe])=>{if(pe.length>=3){const q=BN(te);F.push({id:`category-${te}`,type:"by_service_category",title:`${q} Services`,description:`All ${q.toLowerCase()} service assignments`,suggestions:pe,count:pe.length,status:"pending",source:"AI Action",priority:2,metrics:{strongCount:pe.filter(ae=>ae.match_status==="strong").length,moderateCount:pe.filter(ae=>ae.match_status==="moderate").length,weakCount:pe.filter(ae=>ae.match_status==="weak").length}})}});const Q={};p.forEach(te=>{const pe=te.patient_id;Q[pe]||(Q[pe]={name:te.patient_name,suggestions:[]}),Q[pe].suggestions.push(te)}),Object.entries(Q).forEach(([te,pe])=>{pe.suggestions.length>=2&&F.push({id:`patient-${te}`,type:"by_patient",title:`${pe.name}'s Care Plan`,description:`All services for ${pe.name}`,suggestions:pe.suggestions,count:pe.suggestions.length,status:"pending",source:"AI Action",priority:3,metrics:{totalHours:pe.suggestions.reduce((q,ae)=>q+(ae.duration_minutes||60)/60,0),serviceTypes:[...new Set(pe.suggestions.map(q=>q.service_type_name))].length}})});const de=p.filter(te=>te.match_status==="weak");return de.length>0&&F.push({id:"weak-matches",type:"by_match_quality",title:"Requires Manual Review",description:"Weak matches that need careful consideration",suggestions:de,count:de.length,status:"pending",source:"AI Action",priority:4,metrics:{avgConfidence:Math.round(de.reduce((te,pe)=>te+(pe.confidence_score||0),0)/de.length)}}),F.sort((te,pe)=>te.priority-pe.priority)},[p]),A=g.useMemo(()=>N?B.find(F=>F.id===N):null,[B,N]),$=g.useCallback(async F=>{var I,Q;const J=`${F.patient_id}-${F.service_type_id}`;S(de=>new Set([...de,J]));try{const de=`${n.start}T09:00:00`,te=(F.duration_minutes||60)*60*1e3,pe=new Date(new Date(de).getTime()+te).toISOString();return await ue.post("/v2/scheduling/suggestions/accept",{patient_id:F.patient_id,service_type_id:F.service_type_id,staff_id:F.suggested_staff_id,scheduled_start:de,scheduled_end:pe}),y(q=>q.filter(ae=>!(ae.patient_id===F.patient_id&&ae.service_type_id===F.service_type_id))),{success:!0}}catch(de){return console.error("Failed to accept suggestion:",de),{success:!1,error:((Q=(I=de.response)==null?void 0:I.data)==null?void 0:Q.error)||"Failed to accept"}}finally{S(de=>{const te=new Set(de);return te.delete(J),te})}},[n.start]),Y=g.useCallback(async F=>{const J=B.find(Q=>Q.id===F);if(!J)return{success:!1,error:"Group not found"};const I={successful:0,failed:0,errors:[]};for(const Q of J.suggestions){const de=await $(Q);de.success?I.successful++:(I.failed++,I.errors.push(de.error))}return I},[B,$]),w=g.useCallback(async F=>{const J={successful:0,failed:0,errors:[]};for(const I of F){const[Q,de]=I.split("-").map(Number),te=p.find(pe=>pe.patient_id===Q&&pe.service_type_id===de);if(te){const pe=await $(te);pe.success?J.successful++:(J.failed++,J.errors.push(pe.error))}}return J},[p,$]),D=g.useCallback(F=>{const J=`${F.patient_id}-${F.service_type_id}`;U(I=>new Set([...I,J])),setTimeout(()=>{y(I=>I.filter(Q=>!(Q.patient_id===F.patient_id&&Q.service_type_id===F.service_type_id))),U(I=>{const Q=new Set(I);return Q.delete(J),Q})},300)},[]),z=g.useCallback(async()=>{await k()},[k]),W=g.useCallback(F=>{const J=`${F.patient_id}-${F.service_type_id}`;return v.has(J)||M.has(J)},[v,M]);return{loading:c,error:f,suggestions:p,proposalGroups:B,selectedGroupId:N,selectedGroup:A,setSelectedGroupId:j,acceptSuggestion:$,acceptGroup:Y,acceptSelected:w,rejectSuggestion:D,refresh:z,isProcessing:W,totalSuggestions:p.length,totalGroups:B.length}}function BN(n){return{nursing:"Nursing",personal_support:"Personal Support",psw:"Personal Support",allied_health:"Allied Health",rehab:"Rehabilitation",therapy:"Therapy",homemaking:"Homemaking",other:"Other"}[n==null?void 0:n.toLowerCase()]||n||"Other"}const UN=()=>{var Q,de,te,pe,q;const{weekRange:n}=Ur(),{loading:d,error:c,proposalGroups:o,selectedGroupId:f,selectedGroup:h,setSelectedGroupId:p,acceptSuggestion:y,acceptGroup:N,acceptSelected:j,refresh:v,isProcessing:S,totalSuggestions:M}=zN(),[U,k]=g.useState(new Set),[B,A]=g.useState(!1),[$,Y]=g.useState(null),w=ae=>{const H=`${ae.patient_id}-${ae.service_type_id}`;k(L=>{const Z=new Set(L);return Z.has(H)?Z.delete(H):Z.add(H),Z})},D=()=>{if(!h)return;const ae=h.suggestions.map(H=>`${H.patient_id}-${H.service_type_id}`);k(new Set(ae))},z=()=>{k(new Set)},W=async()=>{if(U.size!==0){A(!0),Y(null);try{const ae=await j(Array.from(U));Y(ae),k(new Set)}finally{A(!1)}}},F=async()=>{if(h){A(!0),Y(null);try{const ae=await N(h.id);Y(ae),k(new Set)}finally{A(!1)}}},J=ae=>{switch(ae){case"strong":return"text-emerald-600 bg-emerald-50";case"moderate":return"text-blue-600 bg-blue-50";case"weak":return"text-amber-600 bg-amber-50";default:return"text-slate-600 bg-slate-50"}},I=ae=>{switch(ae){case"by_match_quality":return"⚡";case"by_service_category":return"🏥";case"by_patient":return"👤";default:return"📋"}};return d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Loading proposals..."})]})}):c?e.jsxs("div",{className:"bg-red-50 rounded-lg border border-red-200 p-6 text-center",children:[e.jsx("span",{className:"text-red-600",children:c}),e.jsx("button",{onClick:v,className:"ml-4 text-blue-600 hover:underline",children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Review AI Proposals"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[M," suggestions for ",n.startDate.toLocaleDateString()," - ",n.endDate.toLocaleDateString()]})]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx("span",{children:"🔄"}),"Refresh"]})]}),$&&e.jsx("div",{className:`rounded-lg p-4 ${$.failed===0?"bg-emerald-50 border border-emerald-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[$.successful>0&&e.jsxs("span",{className:"text-emerald-700",children:["✓ ",$.successful," assignment",$.successful!==1?"s":""," created"]}),$.failed>0&&e.jsxs("span",{className:"text-amber-700 ml-3",children:["⚠ ",$.failed," failed"]})]}),e.jsx("button",{onClick:()=>Y(null),className:"text-slate-400 hover:text-slate-600",children:"✕"})]})}),o.length===0?e.jsxs("div",{className:"bg-slate-50 rounded-lg border border-dashed border-slate-300 p-12 text-center",children:[e.jsx("span",{className:"text-4xl",children:"✓"}),e.jsx("h3",{className:"mt-4 text-lg font-bold text-slate-700",children:"All Caught Up!"}),e.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"No pending AI proposals to review. Generate new suggestions from the Schedule tab."})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-3",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-700",children:["PROPOSAL GROUPS (",o.length,")"]}),o.map(ae=>{var H;return e.jsxs("button",{onClick:()=>{p(ae.id),k(new Set)},className:`w-full text-left p-4 rounded-lg border transition-colors ${f===ae.id?"bg-blue-50 border-blue-300":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:I(ae.type)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:ae.title}),e.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[ae.count," suggestion",ae.count!==1?"s":""]})]})]}),((H=ae.metrics)==null?void 0:H.strongCount)>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs rounded-full bg-emerald-100 text-emerald-700",children:[ae.metrics.strongCount," strong"]})]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-2",children:["Source: ",ae.source]})]},ae.id)})]}),e.jsx("div",{className:"lg:col-span-2",children:h?e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:h.title}),e.jsx("p",{className:"text-sm text-slate-500",children:h.description})]}),e.jsx("span",{className:"text-2xl",children:I(h.type)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"METRICS"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[((Q=h.metrics)==null?void 0:Q.strongCount)!==void 0&&e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-emerald-600",children:"Strong Matches"}),e.jsx("div",{className:"text-lg font-bold text-emerald-700",children:h.metrics.strongCount})]}),((de=h.metrics)==null?void 0:de.moderateCount)!==void 0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-blue-600",children:"Moderate"}),e.jsx("div",{className:"text-lg font-bold text-blue-700",children:h.metrics.moderateCount})]}),((te=h.metrics)==null?void 0:te.avgConfidence)!==void 0&&e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Avg Confidence"}),e.jsxs("div",{className:"text-lg font-bold text-slate-700",children:[h.metrics.avgConfidence,"%"]})]}),((pe=h.metrics)==null?void 0:pe.totalHours)!==void 0&&e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Total Hours"}),e.jsxs("div",{className:"text-lg font-bold text-slate-700",children:[h.metrics.totalHours.toFixed(1),"h"]})]}),((q=h.metrics)==null?void 0:q.serviceTypes)!==void 0&&e.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Service Types"}),e.jsx("div",{className:"text-lg font-bold text-slate-700",children:h.metrics.serviceTypes})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700",children:"PROPOSED ASSIGNMENTS"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:D,className:"text-xs text-blue-600 hover:underline",children:"Select All"}),U.size>0&&e.jsx("button",{onClick:z,className:"text-xs text-slate-500 hover:underline",children:"Clear"})]})]}),e.jsx("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-slate-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-8 px-3 py-2"}),e.jsx("th",{className:"text-left px-3 py-2 text-slate-600",children:"Patient"}),e.jsx("th",{className:"text-left px-3 py-2 text-slate-600",children:"Service"}),e.jsx("th",{className:"text-left px-3 py-2 text-slate-600",children:"Staff"}),e.jsx("th",{className:"text-left px-3 py-2 text-slate-600",children:"Match"}),e.jsx("th",{className:"w-20 px-3 py-2"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:h.suggestions.map(ae=>{const H=`${ae.patient_id}-${ae.service_type_id}`,L=U.has(H),Z=S(ae);return e.jsxs("tr",{className:`hover:bg-slate-50 ${Z?"opacity-50":""}`,children:[e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"checkbox",checked:L,onChange:()=>w(ae),disabled:Z,className:"rounded border-slate-300"})}),e.jsx("td",{className:"px-3 py-2 font-medium",children:ae.patient_name}),e.jsx("td",{className:"px-3 py-2",children:ae.service_type_name}),e.jsx("td",{className:"px-3 py-2",children:ae.suggested_staff_name||"TBD"}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("span",{className:`px-2 py-0.5 text-xs rounded-full ${J(ae.match_status)}`,children:[ae.confidence_score||0,"%"]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("button",{onClick:()=>y(ae),disabled:Z,className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium disabled:opacity-50",children:Z?"...":"Accept"})})]},H)})})]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[e.jsx("div",{className:"text-sm text-slate-500",children:U.size>0?`${U.size} selected`:`${h.count} total`}),e.jsxs("div",{className:"flex items-center gap-3",children:[U.size>0&&e.jsxs("button",{onClick:W,disabled:B,className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 disabled:opacity-50",children:["Accept Selected (",U.size,")"]}),e.jsxs("button",{onClick:F,disabled:B,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[B&&e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Accept All (",h.count,")"]})]})]})]}):e.jsx("div",{className:"bg-slate-50 rounded-lg border border-dashed border-slate-300 p-12 text-center h-full flex flex-col items-center justify-center",children:e.jsxs("div",{className:"text-slate-400",children:[e.jsx("span",{className:"text-3xl",children:"📋"}),e.jsx("p",{className:"mt-2 text-sm",children:"Select a proposal group to view details"})]})})})]})]})};function HN(){const{weekRange:n,isSspoMode:d}=Ur(),[c,o]=g.useState(!0),[f,h]=g.useState(null),[p,y]=g.useState([]),[N,j]=g.useState([]),[v,S]=g.useState(null),[M,U]=g.useState("all"),k=g.useCallback(async()=>{o(!0),h(null);try{const F=new URLSearchParams({week_start:n.start}),Q=((await ue.get(`/v2/scheduling/suggestions?${F}`)).data.data||[]).filter(H=>H.match_status==="none").map(H=>({id:`no-match-${H.patient_id}-${H.service_type_id}`,type:"no_match",patient_id:H.patient_id,patient_name:H.patient_name,service_type_id:H.service_type_id,service_type_name:H.service_type_name,date:n.start,summary:H.no_match_reason||"No eligible staff found within constraints",severity:"high",suggestion:H}));j(Q);const de=new URLSearchParams({start_date:n.start,end_date:n.end}),te=await ue.get(`/v2/scheduling/grid?${de}`),{staff:pe,assignments:q}=te.data.data||{staff:[],assignments:[]},ae=B(q,pe);y([...Q,...ae])}catch(F){console.error("Failed to fetch conflicts:",F),h("Failed to load conflicts")}finally{o(!1)}},[n.start,n.end]);g.useEffect(()=>{k()},[k]);function B(F,J){const I=[],Q={};return F.forEach(de=>{if(de.status==="cancelled")return;const te=`${de.staff_id}-${de.date}`;Q[te]||(Q[te]=[]),Q[te].push(de)}),Object.entries(Q).forEach(([de,te])=>{if(te.length<2)return;const pe=[...te].sort((q,ae)=>q.start_time.localeCompare(ae.start_time));for(let q=0;q<pe.length-1;q++){const ae=pe[q],H=pe[q+1];if(ae.end_time>H.start_time){const ye=J.find(E=>E.id===ae.staff_id);I.push({id:`double-${ae.id}-${H.id}`,type:"double_booked",patient_id:ae.patient_id,patient_name:ae.patient_name,service_type_name:ae.service_type_name,staff_id:ae.staff_id,staff_name:(ye==null?void 0:ye.name)||"Unknown",date:ae.date,summary:`${ye==null?void 0:ye.name} is double-booked: ${ae.start_time}-${ae.end_time} overlaps with ${H.start_time}-${H.end_time}`,severity:"high",assignment1:ae,assignment2:H})}const L=A(ae.end_time),Te=A(H.start_time)-L;if(Te>0&&Te<15){const ye=J.find(E=>E.id===ae.staff_id);I.push({id:`travel-${ae.id}-${H.id}`,type:"travel",patient_id:H.patient_id,patient_name:H.patient_name,service_type_name:H.service_type_name,staff_id:ae.staff_id,staff_name:(ye==null?void 0:ye.name)||"Unknown",date:ae.date,summary:`Only ${Te} minutes between visits for ${ye==null?void 0:ye.name} (may be insufficient for travel)`,severity:"medium",assignment1:ae,assignment2:H})}}}),J.forEach(de=>{var pe;const te=((pe=de.utilization)==null?void 0:pe.utilization)||0;te>100&&I.push({id:`capacity-${de.id}`,type:"capacity",staff_id:de.id,staff_name:de.name,date:n.start,summary:`${de.name} is ${Math.round(te)}% utilized (over capacity)`,severity:te>120?"high":"medium",utilization:te})}),I}function A(F){const[J,I]=F.split(":").map(Number);return J*60+I}const $=g.useMemo(()=>M==="all"?p:p.filter(F=>F.type===M),[p,M]),Y=g.useMemo(()=>{const F={all:p.length};return p.forEach(J=>{F[J.type]=(F[J.type]||0)+1}),F},[p]),w=g.useMemo(()=>v?p.find(F=>F.id===v):null,[p,v]),D=g.useCallback(F=>{y(J=>J.filter(I=>I.id!==F)),v===F&&S(null)},[v]),z=g.useCallback(async()=>{await k()},[k]),W=g.useCallback(F=>{var I,Q,de,te;const J=[];switch(F.type){case"no_match":J.push({id:"expand-time",label:"Adjust Time Window",description:"Look for availability in a wider time frame",action:"suggest_times"}),J.push({id:"expand-region",label:"Expand Search Radius",description:"Include staff from adjacent regions",action:"expand_search"}),J.push({id:"escalate",label:"Escalate to SSPO",description:"Request specialized provider assignment",action:"escalate"});break;case"double_booked":J.push({id:"reschedule-first",label:"Reschedule Earlier Visit",description:`Move ${(I=F.assignment1)==null?void 0:I.patient_name}'s visit`,action:"reschedule",target:(Q=F.assignment1)==null?void 0:Q.id}),J.push({id:"reschedule-second",label:"Reschedule Later Visit",description:`Move ${(de=F.assignment2)==null?void 0:de.patient_name}'s visit`,action:"reschedule",target:(te=F.assignment2)==null?void 0:te.id}),J.push({id:"reassign",label:"Assign Different Staff",description:"Find another available staff member",action:"reassign"});break;case"travel":J.push({id:"adjust-time",label:"Adjust Appointment Time",description:"Add buffer time for travel",action:"adjust_time"}),J.push({id:"swap-order",label:"Optimize Route",description:"Reorder visits to minimize travel",action:"optimize_route"});break;case"capacity":J.push({id:"reassign-visits",label:"Redistribute Workload",description:"Move some visits to other staff",action:"redistribute"}),J.push({id:"approve-overtime",label:"Approve Overtime",description:"Allow staff to work over capacity",action:"approve_overtime"});break;default:J.push({id:"manual",label:"Resolve Manually",description:"Open scheduler to fix this issue",action:"manual"})}return J},[]);return{loading:c,error:f,conflicts:p,filteredConflicts:$,conflictCounts:Y,selectedConflictId:v,selectedConflict:w,filterType:M,setSelectedConflictId:S,setFilterType:U,dismissConflict:D,refresh:z,getResolutions:W,totalConflicts:p.length}}const $N=()=>{var Y,w,D,z,W,F,J;const{weekRange:n,setViewMode:d}=Ur(),{loading:c,error:o,filteredConflicts:f,conflictCounts:h,selectedConflictId:p,selectedConflict:y,filterType:N,setSelectedConflictId:j,setFilterType:v,dismissConflict:S,refresh:M,getResolutions:U,totalConflicts:k}=HN(),B=I=>{switch(I){case"no_match":return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-red-100 text-red-700",children:"No Match"});case"double_booked":return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-amber-100 text-amber-700",children:"Double Booked"});case"travel":return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 text-blue-700",children:"Travel"});case"capacity":return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-purple-100 text-purple-700",children:"Capacity"});case"spacing":return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-indigo-100 text-indigo-700",children:"Spacing"});default:return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-slate-100 text-slate-700",children:"Other"})}},A=I=>{switch(I){case"high":return"border-l-red-500";case"medium":return"border-l-amber-500";case"low":return"border-l-blue-500";default:return"border-l-slate-300"}},$=[{id:"all",label:"All"},{id:"no_match",label:"No Match"},{id:"double_booked",label:"Double Booked"},{id:"travel",label:"Travel"},{id:"capacity",label:"Capacity"}];return c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),e.jsx("span",{className:"text-sm text-slate-500",children:"Detecting conflicts..."})]})}):o?e.jsxs("div",{className:"bg-red-50 rounded-lg border border-red-200 p-6 text-center",children:[e.jsx("span",{className:"text-red-600",children:o}),e.jsx("button",{onClick:M,className:"ml-4 text-blue-600 hover:underline",children:"Retry"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Conflicts & No-Match"}),e.jsxs("p",{className:"text-sm text-slate-500",children:[k," issue",k!==1?"s":""," for ",n.startDate.toLocaleDateString()," - ",n.endDate.toLocaleDateString()]})]}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[e.jsx("span",{children:"🔄"}),"Refresh"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:$.map(I=>{const Q=h[I.id]||0;return e.jsxs("button",{onClick:()=>v(I.id),className:`px-3 py-1.5 text-sm rounded-full border transition-colors ${N===I.id?"bg-blue-50 border-blue-300 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[I.label," (",Q,")"]},I.id)})}),f.length===0?e.jsxs("div",{className:"bg-emerald-50 rounded-lg border border-emerald-200 p-12 text-center",children:[e.jsx("span",{className:"text-4xl",children:"✓"}),e.jsx("h3",{className:"mt-4 text-lg font-bold text-emerald-700",children:"No Conflicts!"}),e.jsx("p",{className:"text-sm text-emerald-600 mt-2",children:N==="all"?"All scheduling constraints are satisfied.":`No ${N.replace("_"," ")} conflicts found.`})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-700",children:["CONFLICT LIST (",f.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:f.map(I=>e.jsx("button",{onClick:()=>j(I.id),className:`w-full text-left p-4 rounded-lg border-l-4 transition-colors ${A(I.severity)} ${p===I.id?"bg-blue-50 border border-blue-300":"bg-white border border-slate-200 hover:bg-slate-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:I.patient_name||I.staff_name||"Unknown"}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[I.service_type_name||I.type.replace("_"," ")," - ",I.date]})]}),B(I.type)]})},I.id))})]}),e.jsx("div",{children:y?e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-6 space-y-6 sticky top-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[B(y.type),e.jsxs("span",{className:`text-xs ${y.severity==="high"?"text-red-600":y.severity==="medium"?"text-amber-600":"text-blue-600"}`,children:[(Y=y.severity)==null?void 0:Y.toUpperCase()," priority"]})]}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:y.patient_name||y.staff_name}),y.service_type_name&&e.jsxs("p",{className:"text-sm text-slate-500",children:[y.service_type_name," • ",y.date]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-xs",children:"⚠"}),e.jsx("span",{className:"font-bold text-slate-800",children:"Issue Details"})]}),e.jsx("p",{className:"text-sm text-slate-600",children:y.summary})]}),y.type==="double_booked"&&e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsx("div",{className:"font-medium text-slate-700",children:"Conflicting Assignments:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"bg-slate-50 rounded p-2",children:[e.jsx("div",{className:"font-medium",children:(w=y.assignment1)==null?void 0:w.patient_name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[(D=y.assignment1)==null?void 0:D.start_time," - ",(z=y.assignment1)==null?void 0:z.end_time]})]}),e.jsxs("div",{className:"bg-slate-50 rounded p-2",children:[e.jsx("div",{className:"font-medium",children:(W=y.assignment2)==null?void 0:W.patient_name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[(F=y.assignment2)==null?void 0:F.start_time," - ",(J=y.assignment2)==null?void 0:J.end_time]})]})]})]}),y.type==="capacity"&&e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-slate-700 mb-2",children:"Current Utilization"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-1 h-3 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${y.utilization>120?"bg-red-500":"bg-amber-500"}`,style:{width:`${Math.min(100,y.utilization)}%`}})}),e.jsxs("span",{className:`font-bold ${y.utilization>120?"text-red-600":"text-amber-600"}`,children:[Math.round(y.utilization),"%"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"SUGGESTED RESOLUTIONS"}),e.jsx("div",{className:"space-y-2",children:U(y).map(I=>e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-3",children:[e.jsx("h5",{className:"font-medium text-slate-900",children:I.label}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:I.description}),e.jsx("button",{onClick:()=>{d(ra.SCHEDULE)},className:"mt-2 w-full px-3 py-1.5 text-sm font-medium text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50",children:"Apply Resolution"})]},I.id))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200",children:[e.jsx("button",{onClick:()=>S(y.id),className:"text-sm text-slate-500 hover:text-slate-700",children:"Dismiss"}),e.jsx("button",{onClick:()=>d(ra.SCHEDULE),className:"px-4 py-2 bg-slate-100 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-200",children:"Open in Schedule →"})]})]}):e.jsx("div",{className:"bg-slate-50 rounded-lg border border-dashed border-slate-300 p-12 text-center h-full flex flex-col items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-slate-400",children:[e.jsx("span",{className:"text-3xl",children:"⚠️"}),e.jsx("p",{className:"mt-2 text-sm",children:"Select a conflict to view details and resolution options"})]})})})]})]})},sp=({isSspoMode:n=!1})=>e.jsx(SN,{isSspoMode:n,children:e.jsx(FN,{})}),FN=()=>{const{isSspoMode:n,viewMode:d,setViewMode:c,weekRange:o,goToPreviousWeek:f,goToNextWeek:h,goToCurrentWeek:p,weekOffset:y,ui:N}=Ur(),j=[{id:ra.AI_OVERVIEW,label:"AI Overview",icon:"🧠"},{id:ra.SCHEDULE,label:"Schedule",icon:"📅"},{id:ra.REVIEW,label:"Review",icon:"📋"},{id:ra.CONFLICTS,label:"Conflicts",icon:"⚠️"}];return e.jsxs("div",{className:"min-h-screen bg-slate-50 py-12",children:[e.jsx("div",{className:`border-b px-6 py-4 ${n?"bg-purple-50 border-purple-200":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-xl font-bold ${n?"text-purple-900":"text-slate-900"}`,children:n?"SSPO Scheduler":"Scheduler"}),e.jsx("p",{className:`text-sm ${n?"text-purple-600":"text-slate-500"}`,children:n?"Nursing, Allied Health & Specialized Services":"AI-Assisted Scheduling Control Center"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{variant:"secondary",size:"sm",onClick:f,children:"← Prev"}),e.jsxs("span",{className:"text-sm font-medium px-3 whitespace-nowrap",children:[o.startDate.toLocaleDateString(void 0,{month:"short",day:"numeric"})," - ",o.endDate.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})]}),e.jsx(Me,{variant:"secondary",size:"sm",onClick:h,children:"Next →"}),y!==0&&e.jsx(Me,{variant:"ghost",size:"sm",onClick:p,children:"Today"})]})]}),e.jsx("div",{className:"mt-4 flex gap-1 border-b border-transparent -mb-px",children:j.map(v=>e.jsxs("button",{onClick:()=>c(v.id),className:`flex items-center gap-2 px-4 py-2.5 text-sm font-medium rounded-t-lg border border-b-0 transition-colors ${d===v.id?"bg-white border-slate-200 text-slate-900 -mb-px":"bg-transparent border-transparent text-slate-500 hover:text-slate-700 hover:bg-slate-100"}`,children:[e.jsx("span",{children:v.icon}),e.jsx("span",{children:v.label}),v.id===ra.CONFLICTS&&e.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs rounded-full bg-amber-100 text-amber-700",children:"4"})]},v.id))})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[d===ra.AI_OVERVIEW&&e.jsx(AN,{}),d===ra.SCHEDULE&&e.jsx(MN,{}),d===ra.REVIEW&&e.jsx(UN,{}),d===ra.CONFLICTS&&e.jsx($N,{})]})]})},qN=()=>{var I,Q,de,te,pe,q,ae,H;const{patientId:n}=Bi(),d=xs(),[c,o]=g.useState(0),[f,h]=g.useState(!0),[p,y]=g.useState(!1),[N,j]=g.useState(null),[v,S]=g.useState(null),[M,U]=g.useState(null),[k,B]=g.useState([]),[A,$]=g.useState({assessment_type:"hc",assessment_date:new Date().toISOString().split("T")[0],assessor_role:"Care Coordinator",maple_score:"",adl_hierarchy:"",iadl_difficulty:"",cognitive_performance_scale:"",depression_rating_scale:"",pain_scale:"",chess_score:"",method_for_locomotion:"Independent",falls_in_last_90_days:!1,wandering_flag:!1,caps_triggered:[],primary_diagnosis_icd10:"",secondary_diagnoses:[]}),Y=["Patient","Assessment","Functional","Clinical","CAPs","Review"];g.useEffect(()=>{n&&(async()=>{try{h(!0);const[Z,Te,ye]=await Promise.all([ue.get(`/v2/interrai/patients/${n}/status`),ue.get(`/v2/interrai/patients/${n}/assessments`),ue.get("/v2/interrai/form-schema")]);S(Z.data.data),B(Te.data.data||[]),U(ye.data.data)}catch(Z){console.error("Failed to load InterRAI data:",Z),j("Failed to load patient data. Please try again.")}finally{h(!1)}})()},[n]);const w=g.useCallback((L,Z)=>{$(Te=>({...Te,[L]:Z}))},[]),D=g.useCallback(L=>{$(Z=>({...Z,caps_triggered:Z.caps_triggered.includes(L)?Z.caps_triggered.filter(Te=>Te!==L):[...Z.caps_triggered,L]}))},[]),z=()=>{c<Y.length-1?o(L=>L+1):F()},W=()=>{c>0&&o(L=>L-1)},F=async()=>{var L,Z,Te;try{y(!0),j(null);const ye=await ue.post(`/v2/interrai/patients/${n}/assessments`,A);d(`/patients/${n}`,{state:{message:"InterRAI assessment completed successfully",assessmentId:(L=ye.data.data)==null?void 0:L.id}})}catch(ye){console.error("Failed to submit InterRAI assessment:",ye),j(((Te=(Z=ye.response)==null?void 0:Z.data)==null?void 0:Te.message)||"Failed to submit assessment. Please try again."),y(!1)}},J=()=>{switch(c){case 0:return v!==null;case 1:return A.assessment_type&&A.assessment_date;case 2:return A.maple_score&&A.adl_hierarchy!==""&&A.cognitive_performance_scale!=="";case 3:return!0;case 4:return!0;case 5:return!0;default:return!1}};return f?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-slate-600",children:"Loading patient data..."})]})}):v?e.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"InterRAI HC Assessment"}),e.jsxs("p",{className:"text-slate-600",children:["Complete the InterRAI Home Care assessment for ",v.patient_name]})]}),N&&e.jsx("div",{className:"mb-6 bg-rose-50 border border-rose-200 text-rose-700 px-4 py-3 rounded-lg",children:N}),e.jsxs(bb,{steps:Y,currentStep:c,onNext:z,onBack:W,isNextDisabled:!J(),isSubmitting:p,children:[c===0&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Confirm Patient Information"}),e.jsx("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Patient Name"}),e.jsx("p",{className:"font-bold text-slate-900",children:v.patient_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Patient ID"}),e.jsx("p",{className:"font-bold text-slate-900",children:v.patient_id})]})]})}),v.requires_assessment&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-800",children:"Assessment Required"}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:v.message})]})]})}),k.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-3",children:"Assessment History"}),e.jsx("div",{className:"space-y-2",children:k.slice(0,3).map(L=>{var Z;return e.jsx("div",{className:`p-3 rounded-lg border ${L.is_stale?"bg-amber-50 border-amber-200":"bg-white border-slate-200"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:(Z=L.assessment_date)==null?void 0:Z.split("T")[0]}),e.jsxs("span",{className:"text-slate-500 ml-2 text-sm",children:["(",L.source,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm",children:["MAPLe: ",e.jsx("strong",{children:L.maple_score||"N/A"})]}),L.is_stale&&e.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-800 text-xs rounded-full font-medium",children:"Stale"})]})]})},L.id)})})]})]}),c===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Assessment Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Assessment Type ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("select",{value:A.assessment_type,onChange:L=>w("assessment_type",L.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:(I=M==null?void 0:M.assessment_types)==null?void 0:I.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Assessment Date ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"date",value:A.assessment_date,onChange:L=>w("assessment_date",L.target.value),max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Assessor Role"}),e.jsx("input",{type:"text",value:A.assessor_role,onChange:L=>w("assessor_role",L.target.value),placeholder:"e.g., Care Coordinator, RN, OT",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]})]})]}),c===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Functional Assessment Scores"}),e.jsx("p",{className:"text-slate-600",children:"Enter the calculated InterRAI HC output scores."}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["MAPLe Score ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:A.maple_score,onChange:L=>w("maple_score",L.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select MAPLe Score"}),(Q=M==null?void 0:M.maple_scores)==null?void 0:Q.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Method for Assigning Priority Levels"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["ADL Hierarchy ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:A.adl_hierarchy,onChange:L=>w("adl_hierarchy",parseInt(L.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select ADL Level"}),(de=M==null?void 0:M.adl_hierarchy)==null?void 0:de.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Activities of Daily Living"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"IADL Difficulty"}),e.jsxs("select",{value:A.iadl_difficulty,onChange:L=>w("iadl_difficulty",L.target.value?parseInt(L.target.value):""),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select IADL Level"}),[0,1,2,3,4,5,6].map(L=>e.jsx("option",{value:L,children:L},L))]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Instrumental Activities of Daily Living"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Cognitive Performance Scale ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:A.cognitive_performance_scale,onChange:L=>w("cognitive_performance_scale",parseInt(L.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select CPS Level"}),(te=M==null?void 0:M.cps_scale)==null?void 0:te.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"CPS Score"})]})]})]}),c===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Clinical Indicators"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Pain Scale"}),e.jsxs("select",{value:A.pain_scale,onChange:L=>w("pain_scale",L.target.value?parseInt(L.target.value):""),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Pain Level"}),(pe=M==null?void 0:M.pain_scale)==null?void 0:pe.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CHESS Score"}),e.jsxs("select",{value:A.chess_score,onChange:L=>w("chess_score",L.target.value?parseInt(L.target.value):""),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select CHESS Level"}),(q=M==null?void 0:M.chess_scale)==null?void 0:q.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Changes in Health, End-Stage Disease, Signs and Symptoms"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Depression Rating Scale"}),e.jsx("input",{type:"number",min:"0",max:"14",value:A.depression_rating_scale,onChange:L=>w("depression_rating_scale",L.target.value?parseInt(L.target.value):""),placeholder:"0-14",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"}),e.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"DRS (0-14)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Method for Locomotion"}),e.jsx("select",{value:A.method_for_locomotion,onChange:L=>w("method_for_locomotion",L.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent",children:(ae=M==null?void 0:M.locomotion_methods)==null?void 0:ae.map(L=>e.jsx("option",{value:L,children:L},L))})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-4",children:"Risk Indicators"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50",children:[e.jsx("input",{type:"checkbox",checked:A.falls_in_last_90_days,onChange:L=>w("falls_in_last_90_days",L.target.checked),className:"w-5 h-5 text-teal-600 rounded focus:ring-teal-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-900",children:"Falls in Last 90 Days"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Patient has experienced one or more falls"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg cursor-pointer hover:bg-slate-50",children:[e.jsx("input",{type:"checkbox",checked:A.wandering_flag,onChange:L=>w("wandering_flag",L.target.checked),className:"w-5 h-5 text-teal-600 rounded focus:ring-teal-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-900",children:"Wandering/Elopement Risk"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Patient exhibits wandering behavior"})]})]})]})]})]}),c===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"CAPs & Diagnoses"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Triggered CAPs (Clinical Assessment Protocols)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:(H=M==null?void 0:M.common_caps)==null?void 0:H.map(L=>e.jsxs("label",{className:`flex items-center gap-2 p-2 rounded border cursor-pointer transition-colors ${A.caps_triggered.includes(L)?"bg-teal-50 border-teal-300":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[e.jsx("input",{type:"checkbox",checked:A.caps_triggered.includes(L),onChange:()=>D(L),className:"w-4 h-4 text-teal-600 rounded focus:ring-teal-500"}),e.jsx("span",{className:"text-sm",children:L})]},L))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Primary Diagnosis (ICD-10)"}),e.jsx("input",{type:"text",value:A.primary_diagnosis_icd10,onChange:L=>w("primary_diagnosis_icd10",L.target.value.toUpperCase()),placeholder:"e.g., G30.9",maxLength:20,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Secondary Diagnoses (comma-separated)"}),e.jsx("input",{type:"text",value:A.secondary_diagnoses.join(", "),onChange:L=>w("secondary_diagnoses",L.target.value.split(",").map(Z=>Z.trim().toUpperCase()).filter(Boolean)),placeholder:"e.g., I10, E11.9",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-transparent"})]})]})]}),c===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Review & Submit"}),e.jsx("p",{className:"text-slate-600",children:"Please review the assessment data before submitting."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-2",children:"Patient"}),e.jsx("p",{className:"text-slate-700",children:v.patient_name})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-2",children:"Assessment"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Type:"}),e.jsx("span",{className:"ml-2 font-medium",children:A.assessment_type.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Date:"}),e.jsx("span",{className:"ml-2 font-medium",children:A.assessment_date})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Assessor Role:"}),e.jsx("span",{className:"ml-2 font-medium",children:A.assessor_role})]})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-slate-900 mb-2",children:"Clinical Scores"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-white rounded border",children:[e.jsx("span",{className:"text-slate-500 block text-xs",children:"MAPLe"}),e.jsx("span",{className:"text-xl font-bold text-teal-600",children:A.maple_score||"-"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border",children:[e.jsx("span",{className:"text-slate-500 block text-xs",children:"ADL"}),e.jsx("span",{className:"text-xl font-bold text-blue-600",children:A.adl_hierarchy??"-"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border",children:[e.jsx("span",{className:"text-slate-500 block text-xs",children:"CPS"}),e.jsx("span",{className:"text-xl font-bold text-purple-600",children:A.cognitive_performance_scale??"-"})]}),e.jsxs("div",{className:"text-center p-2 bg-white rounded border",children:[e.jsx("span",{className:"text-slate-500 block text-xs",children:"CHESS"}),e.jsx("span",{className:"text-xl font-bold text-amber-600",children:A.chess_score??"-"})]})]})]}),(A.falls_in_last_90_days||A.wandering_flag)&&e.jsxs("div",{className:"bg-rose-50 border border-rose-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-rose-800 mb-2",children:"Risk Flags"}),e.jsxs("div",{className:"flex gap-2",children:[A.falls_in_last_90_days&&e.jsx("span",{className:"px-2 py-1 bg-rose-100 text-rose-800 text-xs rounded-full font-medium",children:"Fall Risk"}),A.wandering_flag&&e.jsx("span",{className:"px-2 py-1 bg-rose-100 text-rose-800 text-xs rounded-full font-medium",children:"Wandering Risk"})]})]}),A.caps_triggered.length>0&&e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsxs("h3",{className:"font-medium text-slate-900 mb-2",children:["Triggered CAPs (",A.caps_triggered.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.caps_triggered.map(L=>e.jsx("span",{className:"px-2 py-1 bg-teal-100 text-teal-800 text-xs rounded-full",children:L},L))})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Upon submission, this assessment will be automatically queued for upload to the Ontario IAR (Integrated Assessment Record) system."]})})]})]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx("div",{className:"text-rose-500 text-5xl mb-4",children:"!"}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Patient Not Found"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Unable to load patient data for the InterRAI assessment."}),e.jsx(Me,{onClick:()=>d(-1),children:"Go Back"})]})})},bg=({status:n,showLabel:d=!0,size:c="md",daysUntilStale:o=null,className:f=""})=>{const h={current:{label:"Current",icon:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),bgColor:"bg-emerald-100",textColor:"text-emerald-700",borderColor:"border-emerald-200",dotColor:"bg-emerald-500"},stale:{label:"Stale",icon:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),bgColor:"bg-amber-100",textColor:"text-amber-700",borderColor:"border-amber-200",dotColor:"bg-amber-500"},missing:{label:"Missing",icon:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),bgColor:"bg-rose-100",textColor:"text-rose-700",borderColor:"border-rose-200",dotColor:"bg-rose-500"},pending_upload:{label:"IAR Pending",icon:e.jsxs("svg",{className:"w-3.5 h-3.5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),bgColor:"bg-slate-100",textColor:"text-slate-600",borderColor:"border-slate-200",dotColor:"bg-slate-400"},upload_failed:{label:"Upload Failed",icon:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),bgColor:"bg-white",textColor:"text-rose-600",borderColor:"border-rose-400 border-2",dotColor:"bg-rose-500"}},p=h[n]||h.missing,y={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"};let N=null;return n==="current"&&o!==null?N=`${o}d until stale`:n==="stale"&&o!==null&&(N=`${Math.abs(o)}d overdue`),e.jsxs("span",{className:`
                inline-flex items-center gap-1.5 rounded-full font-medium
                ${p.bgColor} ${p.textColor} ${p.borderColor}
                ${y[c]}
                border
                ${f}
            `,children:[p.icon,d&&e.jsxs("span",{className:"flex flex-col leading-tight",children:[e.jsx("span",{children:p.label}),N&&c!=="sm"&&e.jsx("span",{className:"text-xs opacity-75",children:N})]})]})},bl={async getPatientsNeedingAssessment(n=50){return(await ue.get("/v2/interrai/patients-needing-assessment",{params:{limit:n}})).data},async getPatientStatus(n){return(await ue.get(`/v2/interrai/patients/${n}/status`)).data},async getPatientAssessments(n){return(await ue.get(`/v2/interrai/patients/${n}/assessments`)).data},async getAssessment(n){return(await ue.get(`/v2/interrai/assessments/${n}`)).data},async createAssessment(n,d){return(await ue.post(`/v2/interrai/patients/${n}/assessments`,d)).data},async startAssessment(n,d=null){return(await ue.post(`/v2/interrai/patients/${n}/assessments/start`,{reassessment_reason:d})).data},async saveAssessmentProgress(n,d){return(await ue.patch(`/v2/interrai/assessments/${n}/progress`,d)).data},async calculateScores(n,d){return(await ue.post(`/v2/interrai/assessments/${n}/calculate-scores`,{raw_items:d})).data},async completeAssessment(n,d){return(await ue.post(`/v2/interrai/assessments/${n}/complete`,d)).data},async createExternalAssessment(n,d){return(await ue.post(`/v2/interrai/patients/${n}/assessments/external`,d)).data},async linkExternalIar(n,d,c=null){return(await ue.post(`/v2/interrai/patients/${n}/link-external`,{iar_document_id:d,notes:c})).data},async getFormSchema(){return(await ue.get("/v2/interrai/form-schema")).data},async getFullFormSchema(){return(await ue.get("/v2/interrai/full-form-schema")).data},async uploadDocument(n,d,c="pdf",o=null){const f=new FormData;return f.append("document",d),f.append("document_type",c),o&&f.append("notes",o),(await ue.post(`/v2/interrai/assessments/${n}/documents`,f,{headers:{"Content-Type":"multipart/form-data"}})).data},async getDocuments(n){return(await ue.get(`/v2/interrai/assessments/${n}/documents`)).data},async deleteDocument(n,d){return(await ue.delete(`/v2/interrai/assessments/${n}/documents/${d}`)).data},async requestReassessment(n,d,c=null,o="medium"){return(await ue.post(`/v2/interrai/patients/${n}/request-reassessment`,{reason:d,notes:c,priority:o})).data},async getReassessmentTriggers(n=50,d=null){return(await ue.get("/v2/interrai/reassessment-triggers",{params:{limit:n,priority:d}})).data},async resolveReassessmentTrigger(n,d,c=null){return(await ue.post(`/v2/interrai/reassessment-triggers/${n}/resolve`,{assessment_id:d,notes:c})).data},async getReassessmentTriggerOptions(){return(await ue.get("/v2/interrai/reassessment-trigger-options")).data},async retryIarUpload(n){return(await ue.post(`/v2/interrai/assessments/${n}/retry-iar`)).data},async getPendingIarUploads(){return(await ue.get("/v2/interrai/pending-iar-uploads")).data},async getFailedIarUploads(){return(await ue.get("/v2/interrai/failed-iar-uploads")).data},async getDashboardStats(){return(await ue.get("/v2/admin/interrai/dashboard-stats")).data},async getStaleAssessments(n=50){return(await ue.get("/v2/admin/interrai/stale-assessments",{params:{limit:n}})).data},async getMissingAssessments(n=50){return(await ue.get("/v2/admin/interrai/missing-assessments",{params:{limit:n}})).data},async getFailedUploads(n=50){return(await ue.get("/v2/admin/interrai/failed-uploads",{params:{limit:n}})).data},async bulkRetryIar(){return(await ue.post("/v2/admin/interrai/bulk-retry-iar")).data},async syncStatuses(){return(await ue.post("/v2/admin/interrai/sync-statuses")).data},async getPendingTriggers(n=50,d=null){return(await ue.get("/v2/admin/interrai/pending-triggers",{params:{limit:n,priority:d}})).data},async getComplianceReport(){return(await ue.get("/v2/admin/interrai/compliance-report")).data}},vg=()=>{var q,ae,H,L;const n=xs(),[d,c]=g.useState(!0),[o,f]=g.useState(!1),[h,p]=g.useState(null),[y,N]=g.useState("stale"),[j,v]=g.useState(null),[S,M]=g.useState(null),[U,k]=g.useState([]),[B,A]=g.useState([]),[$,Y]=g.useState([]),[w,D]=g.useState([]);g.useEffect(()=>{z()},[]);const z=async()=>{c(!0),p(null);try{const[Z,Te,ye,E,ee,V]=await Promise.all([bl.getDashboardStats(),bl.getComplianceReport(),bl.getStaleAssessments(50),bl.getMissingAssessments(50),bl.getFailedUploads(50),bl.getPendingTriggers(50)]);v(Z.data),M(Te.data),k(ye.data),A(E.data),Y(ee.data),D(V.data)}catch(Z){p("Failed to load dashboard data"),console.error(Z)}finally{c(!1)}},W=async()=>{f(!0),await z(),f(!1)},F=async()=>{if(confirm(`Retry IAR upload for ${(j==null?void 0:j.failed_uploads)||0} failed assessments?`))try{const Z=await bl.bulkRetryIar();alert(Z.message),z()}catch{alert("Failed to queue bulk retry")}},J=async()=>{try{const Z=await bl.syncStatuses();alert(Z.message),z()}catch{alert("Failed to sync statuses")}};if(d)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ta,{})});if(h)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("p",{className:"text-rose-600 mb-4",children:h}),e.jsx(Me,{onClick:z,children:"Retry"})]});const I=[{header:"Patient",accessor:"patient_name",sortable:!0},{header:"Coordinator",accessor:"coordinator"},{header:"Assessment Date",accessor:"assessment_date",render:Z=>Z.assessment_date||"N/A"},{header:"Days Overdue",accessor:"days_stale",render:Z=>e.jsxs("span",{className:Z.days_stale>120?"text-rose-600 font-medium":"text-amber-600",children:[Z.days_stale," days"]})},{header:"MAPLe",accessor:"maple_score"},{header:"Actions",accessor:"patient_id",render:Z=>e.jsx(Me,{variant:"link",onClick:()=>n(`/interrai/complete/${Z.patient_id}`),children:"Reassess"})}],Q=[{header:"Patient",accessor:"patient_name",sortable:!0},{header:"Coordinator",accessor:"coordinator"},{header:"Queue Status",accessor:"queue_status"},{header:"Days in Queue",accessor:"days_in_queue",render:Z=>`${Z.days_in_queue} days`},{header:"Actions",accessor:"patient_id",render:Z=>e.jsx(Me,{variant:"link",onClick:()=>n(`/interrai/complete/${Z.patient_id}`),children:"Complete"})}],de=[{header:"Patient",accessor:"patient_name",sortable:!0},{header:"Assessment Date",accessor:"assessment_date"},{header:"MAPLe",accessor:"maple_score"},{header:"Source",accessor:"source"},{header:"Failed At",accessor:"failed_at",render:Z=>new Date(Z.failed_at).toLocaleString()},{header:"Actions",accessor:"assessment_id",render:Z=>e.jsx(Me,{variant:"link",onClick:async()=>{await bl.retryIarUpload(Z.assessment_id),z()},children:"Retry"})}],te=[{header:"Patient",accessor:"patient_name",sortable:!0},{header:"Reason",accessor:"reason_label",render:Z=>e.jsx("span",{className:"text-sm",children:Z.reason_label})},{header:"Priority",accessor:"priority",render:Z=>e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${Z.priority==="urgent"?"bg-rose-100 text-rose-700":Z.priority==="high"?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-700"}`,children:Z.priority_label})},{header:"Requested",accessor:"triggered_at",render:Z=>new Date(Z.triggered_at).toLocaleDateString()},{header:"Actions",accessor:"patient_id",render:Z=>e.jsx(Me,{variant:"link",onClick:()=>n(`/interrai/complete/${Z.patient_id}`),children:"Assess"})}],pe=[{id:"stale",label:"Stale Assessments",count:U.length},{id:"missing",label:"Missing Assessments",count:B.length},{id:"failed",label:"Failed Uploads",count:$.length},{id:"triggers",label:"Reassessment Requests",count:w.length}];return e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs(Ja,{title:"InterRAI Compliance Dashboard",description:"Monitor assessment status and IAR integration",action:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Me,{variant:"secondary",onClick:J,children:"Sync Statuses"}),e.jsx(Me,{variant:"secondary",onClick:W,disabled:o,children:o?e.jsx(ta,{className:"w-4 h-4"}):"Refresh"})]}),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs(xt,{variant:"kpi",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Assessment Coverage"}),e.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:[((q=S==null?void 0:S.assessment_coverage)==null?void 0:q.completion_rate)||0,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:[((ae=S==null?void 0:S.assessment_coverage)==null?void 0:ae.with_current_assessment)||0," of"," ",((H=S==null?void 0:S.assessment_coverage)==null?void 0:H.total_patients_in_queue)||0," patients"]})]}),e.jsxs(xt,{variant:"kpi",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Stale Assessments"}),e.jsx("p",{className:"text-3xl font-bold text-amber-600",children:(j==null?void 0:j.stale_assessments)||0})]}),e.jsx(bg,{status:"stale",showLabel:!1,size:"lg"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:">90 days old, need reassessment"})]}),e.jsxs(xt,{variant:"kpi",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Missing Assessments"}),e.jsx("p",{className:"text-3xl font-bold text-rose-600",children:(j==null?void 0:j.missing_assessments)||0})]}),e.jsx(bg,{status:"missing",showLabel:!1,size:"lg"})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"No assessment on file"})]}),e.jsxs(xt,{variant:"kpi",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-500",children:"IAR Upload Success"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[((L=S==null?void 0:S.iar_integration)==null?void 0:L.success_rate)||0,"%"]})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs("span",{className:"text-xs text-slate-400",children:[(j==null?void 0:j.failed_uploads)||0," failed"]}),((j==null?void 0:j.failed_uploads)||0)>0&&e.jsx(Me,{variant:"link",onClick:F,className:"text-xs",children:"Retry All"})]})]})]}),((j==null?void 0:j.urgent_triggers)||0)>0&&e.jsxs("div",{className:"mb-6 p-4 bg-rose-50 border border-rose-200 rounded-lg flex items-center gap-3",children:[e.jsx("svg",{className:"w-6 h-6 text-rose-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-rose-700",children:[j==null?void 0:j.urgent_triggers," Urgent Reassessment",(j==null?void 0:j.urgent_triggers)>1?"s":""," Pending"]}),e.jsx("p",{className:"text-sm text-rose-600",children:"These patients have high-priority reassessment requests that need attention."})]})]}),e.jsx("div",{className:"border-b border-slate-200 mb-4",children:e.jsx("nav",{className:"flex gap-4",children:pe.map(Z=>e.jsxs("button",{onClick:()=>N(Z.id),className:`
                                pb-3 px-1 text-sm font-medium border-b-2 transition-colors
                                ${y===Z.id?"border-teal-600 text-teal-600":"border-transparent text-slate-500 hover:text-slate-700"}
                            `,children:[Z.label,e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${y===Z.id?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-600"}`,children:Z.count})]},Z.id))})}),e.jsxs(xt,{children:[y==="stale"&&e.jsx(or,{columns:I,data:U,pagination:!0,pageSize:10,searchable:!0,onRowClick:Z=>n(`/patients/${Z.patient_id}`)}),y==="missing"&&e.jsx(or,{columns:Q,data:B,pagination:!0,pageSize:10,searchable:!0,onRowClick:Z=>n(`/patients/${Z.patient_id}`)}),y==="failed"&&e.jsx(or,{columns:de,data:$,pagination:!0,pageSize:10,searchable:!0}),y==="triggers"&&e.jsx(or,{columns:te,data:w,pagination:!0,pageSize:10,searchable:!0,onRowClick:Z=>n(`/patients/${Z.patient_id}`)})]})]})})},jg=()=>{var pe,q,ae,H,L,Z,Te,ye,E,ee,V,re,Re,De;const{patientId:n,assessmentId:d}=Bi(),c=xs(),[o,f]=g.useState(null),[h,p]=g.useState(null),[y,N]=g.useState("C"),[j,v]=g.useState({}),[S,M]=g.useState([]),[U,k]=g.useState(!0),[B,A]=g.useState(!1),[$,Y]=g.useState(null),[w,D]=g.useState(null),z=[{code:"C",name:"Cognition",description:"Decision making, memory, communication"},{code:"D",name:"Communication & Vision",description:"Hearing, vision, speech"},{code:"E",name:"Mood & Behavior",description:"Depression indicators, behavior"},{code:"G",name:"Functional Status",description:"ADL and IADL performance"},{code:"H",name:"Continence",description:"Bladder and bowel control"},{code:"J",name:"Health Conditions",description:"Pain, symptoms, falls"},{code:"P",name:"Social Supports",description:"Caregiver status"}];g.useEffect(()=>{W()},[n,d]);const W=async()=>{var ge,ke;try{if(k(!0),Y(null),d){const Oe=await bl.getAssessment(d);f(Oe.data),p(Oe.data.patient),v(Oe.data.raw_items||{}),M(Oe.data.sections_completed||[])}else{const Oe=await bl.startAssessment(n);f(Oe.data),p(Oe.data.patient),v({}),M([])}}catch(Oe){Y(((ke=(ge=Oe.response)==null?void 0:ge.data)==null?void 0:ke.message)||"Failed to load assessment")}finally{k(!1)}},F=(ge,ke)=>{const Oe={...j,[ge]:parseInt(ke)};v(Oe),o!=null&&o.id&&J(Oe)},J=Vg.useMemo(()=>{let ge;return ke=>{clearTimeout(ge),ge=setTimeout(()=>I(ke),1e3)}},[o==null?void 0:o.id]),I=async ge=>{if(o!=null&&o.id)try{A(!0),await bl.saveAssessmentProgress(o.id,{raw_items:ge,sections_completed:S,current_section:y})}catch(ke){console.error("Auto-save failed:",ke)}finally{A(!1)}},Q=()=>{if(!S.includes(y)){const ke=[...S,y];M(ke)}const ge=z.findIndex(ke=>ke.code===y);ge<z.length-1&&N(z[ge+1].code)},de=async()=>{try{const ge=await bl.calculateScores(o.id,j);D(ge.data)}catch{Y("Failed to calculate scores")}},te=async()=>{var ge,ke;try{A(!0),await bl.completeAssessment(o.id,{raw_items:j,sections_completed:S}),c(`/patients/${n}`)}catch(Oe){Y(((ke=(ge=Oe.response)==null?void 0:ge.data)==null?void 0:ke.message)||"Failed to submit assessment")}finally{A(!1)}};return U?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-teal-600"})}):$?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:$})}):e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("div",{className:"bg-white border-b border-slate-200 sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"InterRAI HC Assessment"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Patient: ",((pe=h==null?void 0:h.user)==null?void 0:pe.name)||(h==null?void 0:h.name)||"Unknown"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[B&&e.jsxs("span",{className:"text-sm text-slate-500 flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-slate-300 border-t-teal-600 rounded-full"}),"Saving..."]}),e.jsx("button",{onClick:()=>c(-1),className:"px-4 py-2 text-slate-600 hover:text-slate-900",children:"Cancel"})]})]}),e.jsx("div",{className:"mt-4 flex gap-2 overflow-x-auto pb-2",children:z.map((ge,ke)=>{const Oe=S.includes(ge.code),Rt=y===ge.code;return e.jsxs("button",{onClick:()=>N(ge.code),className:`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ${Rt?"bg-teal-600 text-white":Oe?"bg-teal-100 text-teal-700":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[Oe&&!Rt&&e.jsx("span",{className:"mr-1",children:"✓"}),ge.code,". ",ge.name]},ge.code)})})]})}),e.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx(PN,{sectionCode:y,items:j,onItemChange:F}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-200 flex justify-between",children:[e.jsx("button",{onClick:()=>{const ge=z.findIndex(ke=>ke.code===y);ge>0&&N(z[ge-1].code)},disabled:y===z[0].code,className:"px-6 py-2 text-slate-600 hover:text-slate-900 disabled:opacity-50",children:"← Previous Section"}),y===z[z.length-1].code?e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:de,className:"px-6 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200",children:"Preview Scores"}),e.jsx("button",{onClick:te,disabled:B,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 disabled:opacity-50",children:"Complete Assessment"})]}):e.jsx("button",{onClick:Q,className:"px-6 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700",children:"Next Section →"})]})]}),w&&e.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Calculated Scores"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Jc,{label:"CPS",value:(q=w.scores)==null?void 0:q.cognitive_performance_scale,max:6,description:(ae=w.score_descriptions)==null?void 0:ae.cognitive_performance_scale}),e.jsx(Jc,{label:"ADL Hierarchy",value:(H=w.scores)==null?void 0:H.adl_hierarchy,max:6,description:(L=w.score_descriptions)==null?void 0:L.adl_hierarchy}),e.jsx(Jc,{label:"MAPLe",value:(Z=w.scores)==null?void 0:Z.maple_score,max:5,description:(Te=w.score_descriptions)==null?void 0:Te.maple_score}),e.jsx(Jc,{label:"CHESS",value:(ye=w.scores)==null?void 0:ye.chess_score,max:5,description:(E=w.score_descriptions)==null?void 0:E.chess_score}),e.jsx(Jc,{label:"DRS",value:(ee=w.scores)==null?void 0:ee.depression_rating_scale,max:14}),e.jsx(Jc,{label:"Pain",value:(V=w.scores)==null?void 0:V.pain_scale,max:4,description:(re=w.score_descriptions)==null?void 0:re.pain_scale}),e.jsx(Jc,{label:"IADL Difficulty",value:(Re=w.scores)==null?void 0:Re.iadl_difficulty,max:6})]}),w.recommended_psw_hours&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200",children:e.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-teal-900 mb-1",children:"Recommended PSW Hours"}),e.jsxs("p",{className:"text-2xl font-bold text-teal-700",children:[w.recommended_psw_hours," ",e.jsx("span",{className:"text-sm font-normal",children:"hours/week"})]})]})}),((De=w.caps_triggered)==null?void 0:De.length)>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Triggered CAPs"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.caps_triggered.map((ge,ke)=>e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${ge.priority==="high"?"bg-red-100 text-red-700":"bg-amber-100 text-amber-700"}`,children:ge.name},ke))})]})]})]})]})},Jc=({label:n,value:d,max:c,description:o})=>{const f=d!=null?d/c*100:0,h=f>66?"high":f>33?"medium":"low";return e.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-slate-500 mb-1",children:n}),e.jsxs("div",{className:`text-2xl font-bold ${h==="high"?"text-red-600":h==="medium"?"text-amber-600":"text-teal-600"}`,children:[d??"-"," ",e.jsxs("span",{className:"text-sm text-slate-400",children:["/ ",c]})]}),o&&e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:o})]})},PN=({sectionCode:n,items:d,onItemChange:c})=>{const o=YN(n);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900",children:["Section ",n,": ",GN(n)]}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:VN(n)}),o.map(f=>e.jsx(IN,{item:f,value:d[f.code],onChange:h=>c(f.code,h)},f.code))]})},IN=({item:n,value:d,onChange:c})=>e.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[e.jsx("div",{className:"flex items-start justify-between gap-4 mb-3",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-teal-600 mr-2",children:n.code}),e.jsx("span",{className:"font-medium text-slate-900",children:n.label})]})}),n.description&&e.jsx("p",{className:"text-sm text-slate-500 mb-3",children:n.description}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:n.options.map(o=>e.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${d===o.value?"border-teal-500 bg-teal-50":"border-slate-200 hover:border-slate-300"}`,children:[e.jsx("input",{type:"radio",name:n.code,value:o.value,checked:d===o.value,onChange:f=>c(f.target.value),className:"mt-1 text-teal-600 focus:ring-teal-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-slate-700",children:o.value}),e.jsx("span",{className:"mx-1 text-slate-400",children:"-"}),e.jsx("span",{className:"text-slate-600",children:o.label})]})]},o.value))})]});function GN(n){return{C:"Cognition",D:"Communication and Vision",E:"Mood and Behavior",G:"Functional Status",H:"Continence",J:"Health Conditions",P:"Social Supports"}[n]||n}function VN(n){return{C:"Assess cognitive skills for daily decision making and memory recall over the last 3 days.",D:"Evaluate hearing, vision, and ability to make self understood.",E:"Identify indicators of depression and mood disturbance over the last 3 days.",G:"Rate performance in Activities of Daily Living (ADLs) and Instrumental ADLs over the last 3 days.",H:"Assess bladder and bowel continence control.",J:"Document health conditions including pain, symptoms, and fall history.",P:"Evaluate caregiver availability and stress level."}[n]||""}function YN(n){return{C:[{code:"C1",label:"Cognitive Skills for Daily Decision Making",description:"Making decisions about tasks of daily life",options:[{value:0,label:"Independent - Decisions consistent, reasonable, safe"},{value:1,label:"Modified independence - Some difficulty in new situations"},{value:2,label:"Minimally impaired - Poor decisions in specific situations"},{value:3,label:"Moderately impaired - Decisions consistently poor, needs cues"},{value:4,label:"Severely impaired - Never/rarely makes decisions"},{value:5,label:"No discernible consciousness"}]},{code:"C2a",label:"Short-term Memory OK",description:"Seems to recall after 5 minutes",options:[{value:0,label:"Yes, memory OK"},{value:1,label:"Memory problem"}]},{code:"C2b",label:"Procedural Memory OK",description:"Can perform all steps in a multitask sequence",options:[{value:0,label:"Yes, memory OK"},{value:1,label:"Memory problem"}]},{code:"C3",label:"Making Self Understood",description:"Expressing information content",options:[{value:0,label:"Understood"},{value:1,label:"Usually understood"},{value:2,label:"Often understood"},{value:3,label:"Sometimes understood"},{value:4,label:"Rarely/never understood"}]}],E:[{code:"E1a",label:"Made Negative Statements",description:'e.g., "Nothing matters", "Would rather be dead"',options:[{value:0,label:"Not present"},{value:1,label:"Present 1-2 of last 3 days"},{value:2,label:"Present daily in last 3 days"}]},{code:"E1b",label:"Persistent Anger",description:"With self or others",options:[{value:0,label:"Not present"},{value:1,label:"Present 1-2 of last 3 days"},{value:2,label:"Present daily in last 3 days"}]},{code:"E1f",label:"Sad, Pained, Worried Facial Expressions",description:"Observable expressions of distress",options:[{value:0,label:"Not present"},{value:1,label:"Present 1-2 of last 3 days"},{value:2,label:"Present daily in last 3 days"}]},{code:"E1g",label:"Crying, Tearfulness",description:"",options:[{value:0,label:"Not present"},{value:1,label:"Present 1-2 of last 3 days"},{value:2,label:"Present daily in last 3 days"}]}],G:[{code:"G5a",label:"Bathing",description:"How person takes a full-body bath/shower",options:[{value:0,label:"Independent"},{value:1,label:"Setup help only"},{value:2,label:"Supervision"},{value:3,label:"Limited assistance"},{value:4,label:"Extensive assistance"},{value:5,label:"Maximal assistance"},{value:6,label:"Total dependence"},{value:8,label:"Activity did not occur"}]},{code:"G5c",label:"Personal Hygiene",description:"Combing hair, brushing teeth, shaving, washing face/hands",options:[{value:0,label:"Independent"},{value:1,label:"Setup help only"},{value:2,label:"Supervision"},{value:3,label:"Limited assistance"},{value:4,label:"Extensive assistance"},{value:5,label:"Maximal assistance"},{value:6,label:"Total dependence"},{value:8,label:"Activity did not occur"}]},{code:"G5g",label:"Locomotion",description:"How person moves between locations on same floor",options:[{value:0,label:"Independent"},{value:1,label:"Setup help only"},{value:2,label:"Supervision"},{value:3,label:"Limited assistance"},{value:4,label:"Extensive assistance"},{value:5,label:"Maximal assistance"},{value:6,label:"Total dependence"},{value:8,label:"Activity did not occur"}]},{code:"G5i",label:"Toilet Use",description:"Using toilet, cleansing, adjusting clothes",options:[{value:0,label:"Independent"},{value:1,label:"Setup help only"},{value:2,label:"Supervision"},{value:3,label:"Limited assistance"},{value:4,label:"Extensive assistance"},{value:5,label:"Maximal assistance"},{value:6,label:"Total dependence"},{value:8,label:"Activity did not occur"}]},{code:"G5k",label:"Eating",description:"How person eats and drinks",options:[{value:0,label:"Independent"},{value:1,label:"Setup help only"},{value:2,label:"Supervision"},{value:3,label:"Limited assistance"},{value:4,label:"Extensive assistance"},{value:5,label:"Maximal assistance"},{value:6,label:"Total dependence"},{value:8,label:"Activity did not occur"}]},{code:"G4a",label:"IADL: Meal Preparation",description:"Preparing meals for self",options:[{value:0,label:"Independent"},{value:1,label:"Setup help only"},{value:2,label:"Supervision"},{value:3,label:"Limited assistance"},{value:4,label:"Extensive assistance"},{value:5,label:"Maximal assistance"},{value:6,label:"Total dependence"},{value:8,label:"Activity did not occur"}]},{code:"G4d",label:"IADL: Managing Medications",description:"Taking medications as prescribed",options:[{value:0,label:"Independent"},{value:1,label:"Setup help only"},{value:2,label:"Supervision"},{value:3,label:"Limited assistance"},{value:4,label:"Extensive assistance"},{value:5,label:"Maximal assistance"},{value:6,label:"Total dependence"},{value:8,label:"Activity did not occur"}]}],H:[{code:"H1",label:"Bladder Continence",description:"Control of urinary bladder function",options:[{value:0,label:"Continent"},{value:1,label:"Control with catheter/ostomy"},{value:2,label:"Infrequently incontinent"},{value:3,label:"Occasionally incontinent"},{value:4,label:"Frequently incontinent"},{value:5,label:"Incontinent"}]},{code:"H2",label:"Bowel Continence",description:"Control of bowel movement",options:[{value:0,label:"Continent"},{value:1,label:"Control with ostomy"},{value:2,label:"Infrequently incontinent"},{value:3,label:"Occasionally incontinent"},{value:4,label:"Frequently incontinent"},{value:5,label:"Incontinent"}]}],J:[{code:"J1a",label:"Pain Frequency",description:"Frequency of pain",options:[{value:0,label:"No pain"},{value:1,label:"Pain present but not in last 3 days"},{value:2,label:"Less than daily"},{value:3,label:"Daily"}]},{code:"J1b",label:"Pain Intensity",description:"Intensity of highest level of pain",options:[{value:1,label:"Mild"},{value:2,label:"Moderate"},{value:3,label:"Severe"},{value:4,label:"Times when pain is horrible/excruciating"}]},{code:"J3",label:"Falls",description:"Any fall in last 90 days",options:[{value:0,label:"No falls"},{value:1,label:"Fell, no injury"},{value:2,label:"Fell, injury"}]},{code:"J4",label:"Weight Loss",description:"Unintended weight loss",options:[{value:0,label:"No"},{value:1,label:"5% or more in last 30 days"},{value:2,label:"10% or more in last 180 days"}]},{code:"J6",label:"Insufficient Fluid Intake",description:"Dehydration risk",options:[{value:0,label:"No"},{value:1,label:"Yes"}]}],P:[{code:"P1",label:"Primary Caregiver Lives With Client",description:"",options:[{value:0,label:"No"},{value:1,label:"Yes"}]},{code:"P2",label:"Caregiver Unable to Continue",description:"Primary caregiver expresses inability to continue caring activities",options:[{value:0,label:"No"},{value:1,label:"Yes - caregiver unable/unwilling to continue"}]}],D:[{code:"D1",label:"Hearing",description:"Ability to hear with hearing aid if used",options:[{value:0,label:"Adequate - no difficulty in normal conversation"},{value:1,label:"Minimal difficulty"},{value:2,label:"Moderate difficulty"},{value:3,label:"Severe difficulty"},{value:4,label:"No hearing"}]},{code:"D2",label:"Vision",description:"Ability to see in adequate light with glasses if used",options:[{value:0,label:"Adequate"},{value:1,label:"Impaired"},{value:2,label:"Moderately impaired"},{value:3,label:"Severely impaired"},{value:4,label:"No vision"}]}]}[n]||[]}const WN=()=>{const[n,d]=g.useState([]),[c,o]=g.useState(!0),[f,h]=g.useState(!1),[p,y]=g.useState(null),[N,j]=g.useState(!1),[v,S]=g.useState(!1),[M,U]=g.useState(null),[k,B]=g.useState({category:"",search:""}),[A,$]=g.useState(!1),[Y,w]=g.useState(null),D=g.useCallback(async()=>{var q,ae;o(!0),w(null);try{const H=await ue.get("/v2/admin/service-rates");d(((q=H.data.data)==null?void 0:q.rates)||[]),h(H.data.can_edit||!1),y(H.data.user_organization_id),j(((ae=H.data.data)==null?void 0:ae.has_custom_rates)||!1)}catch(H){console.error("Failed to fetch rates:",H),w("Failed to load service rates. Please try again."),d([])}finally{o(!1)}},[]);g.useEffect(()=>{D()},[D]);const z=q=>{U(q),S(!0)},W=async q=>{var ae,H;$(!0),w(null);try{await ue.post("/v2/admin/service-rates",q),await D(),S(!1),U(null)}catch(L){console.error("Failed to save rate:",L),w(((H=(ae=L.response)==null?void 0:ae.data)==null?void 0:H.message)||"Failed to save rate")}finally{$(!1)}},F=async q=>{var ae,H,L;if((ae=q.organization_rate)!=null&&ae.id&&window.confirm("Are you sure you want to remove this custom rate and use the system default?"))try{await ue.delete(`/v2/admin/service-rates/${q.organization_rate.id}`),await D()}catch(Z){console.error("Failed to delete rate:",Z),w(((L=(H=Z.response)==null?void 0:H.data)==null?void 0:L.message)||"Failed to reset rate")}},J=n.filter(q=>{var ae,H;if(k.category&&q.service_type_category!==k.category)return!1;if(k.search){const L=k.search.toLowerCase();return((ae=q.service_type_name)==null?void 0:ae.toLowerCase().includes(L))||((H=q.service_type_code)==null?void 0:H.toLowerCase().includes(L))}return!0}),I=[...new Set(n.map(q=>q.service_type_category).filter(Boolean))],Q=q=>q==null?"-":`$${(q/100).toFixed(2)}`,de=q=>({hour:"/hour",visit:"/visit",month:"/month",trip:"/trip",call:"/call",service:"/service",night:"/night",block:"/block"})[q]||`/${q}`,te=q=>q.has_org_override?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-blue-100 text-blue-800",children:"Custom"}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-600",children:"Default"}),pe=[{header:"Service",accessor:"service_type_name",render:q=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:q.service_type_name}),e.jsx("div",{className:"text-xs text-slate-500",children:q.service_type_code})]})},{header:"Category",accessor:"service_type_category",render:q=>e.jsx("span",{className:"text-sm text-slate-600",children:q.service_type_category||"-"})},{header:"System Default",accessor:"system_default_rate",render:q=>e.jsx("div",{className:"text-sm",children:q.system_default_rate?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:Q(q.system_default_rate.rate_cents)}),e.jsx("span",{className:"text-slate-500",children:de(q.system_default_rate.unit_type)})]}):e.jsx("span",{className:"text-slate-400",children:"Not set"})})},{header:"Your Rate",accessor:"effective_rate",render:q=>e.jsx("div",{className:"text-sm",children:q.effective_rate?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-bold ${q.has_org_override?"text-blue-700":"text-slate-700"}`,children:Q(q.effective_rate.rate_cents)}),e.jsx("span",{className:"text-slate-500",children:de(q.effective_rate.unit_type)}),te(q)]}):e.jsx("span",{className:"text-slate-400",children:"Not set"})})},{header:"Duration",accessor:"default_duration_minutes",render:q=>e.jsx("span",{className:"text-sm text-slate-600",children:q.default_duration_minutes?`${q.default_duration_minutes} min`:"-"})},{header:"Actions",accessor:"service_type_id",render:q=>e.jsx("div",{className:"flex gap-2",children:f&&e.jsxs(e.Fragment,{children:[e.jsx(Me,{size:"sm",variant:"secondary",onClick:()=>z(q),children:q.has_org_override?"Edit":"Override"}),q.has_org_override&&e.jsx(Me,{size:"sm",variant:"danger",onClick:()=>F(q),children:"Reset"})]})})}];return e.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Service Rate Card"}),e.jsx("p",{className:"text-slate-500 text-sm",children:"Manage billing rates for services. System defaults apply unless overridden."})]}),f&&e.jsx("div",{className:"text-sm text-slate-600 bg-slate-100 px-3 py-2 rounded-lg",children:N?e.jsx("span",{className:"text-blue-700 font-medium",children:"Using custom rates"}):e.jsx("span",{children:"Using system defaults"})})]}),Y&&e.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg border border-red-200",children:[Y,e.jsx("button",{className:"ml-4 underline",onClick:()=>w(null),children:"Dismiss"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Total Services"}),e.jsx("div",{className:"text-3xl font-bold text-slate-700",children:n.length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"With Rates"}),e.jsx("div",{className:"text-3xl font-bold text-emerald-600",children:n.filter(q=>q.effective_rate).length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Custom Overrides"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:n.filter(q=>q.has_org_override).length})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Categories"}),e.jsx("div",{className:"text-3xl font-bold text-slate-700",children:I.length})]})]}),e.jsxs("div",{className:"flex gap-4 items-center bg-white p-4 rounded-xl border border-slate-200",children:[e.jsx(ao,{placeholder:"Search services...",value:k.search,onChange:q=>B(ae=>({...ae,search:q.target.value})),className:"w-64"}),e.jsx(Jl,{value:k.category,onChange:q=>B(ae=>({...ae,category:q.target.value})),options:[{value:"",label:"All Categories"},...I.map(q=>({value:q,label:q}))],placeholder:"Filter by category"}),e.jsx(Me,{variant:"secondary",onClick:()=>B({category:"",search:""}),children:"Clear"})]}),e.jsx(Ja,{title:"Service Rates",children:c?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(ta,{size:"lg"})}):J.length===0?e.jsx("div",{className:"text-center py-12 text-slate-500",children:"No service rates found."}):e.jsx(or,{columns:pe,data:J,keyField:"service_type_id"})}),e.jsx(QN,{isOpen:v,onClose:()=>{S(!1),U(null)},rate:M,onSave:W,saving:A})]})},QN=({isOpen:n,onClose:d,rate:c,onSave:o,saving:f})=>{const[h,p]=g.useState({service_type_id:"",rate_cents:"",unit_type:"visit",effective_from:new Date().toISOString().split("T")[0],notes:""});g.useEffect(()=>{if(c){const j=c.organization_rate||c.effective_rate||c.system_default_rate;p({service_type_id:c.service_type_id,rate_cents:j!=null&&j.rate_cents?(j.rate_cents/100).toFixed(2):"",unit_type:(j==null?void 0:j.unit_type)||"visit",effective_from:new Date().toISOString().split("T")[0],notes:""})}},[c]);const y=j=>{j.preventDefault(),o({service_type_id:h.service_type_id,rate_cents:Math.round(parseFloat(h.rate_cents)*100),unit_type:h.unit_type,effective_from:h.effective_from,notes:h.notes||null})},N=[{value:"hour",label:"Per Hour"},{value:"visit",label:"Per Visit"},{value:"month",label:"Per Month"},{value:"trip",label:"Per Trip"},{value:"call",label:"Per Call"},{value:"service",label:"Per Service"},{value:"night",label:"Per Night"},{value:"block",label:"Per Block"}];return e.jsx(J2,{isOpen:n,onClose:d,title:c!=null&&c.has_org_override?"Edit Custom Rate":"Create Custom Rate Override",size:"md",children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg",children:[e.jsx("div",{className:"font-medium text-slate-900",children:c==null?void 0:c.service_type_name}),e.jsx("div",{className:"text-sm text-slate-500",children:c==null?void 0:c.service_type_code}),(c==null?void 0:c.system_default_rate)&&e.jsxs("div",{className:"text-sm text-slate-600 mt-2",children:["System default: $",(c.system_default_rate.rate_cents/100).toFixed(2)," ",c.system_default_rate.unit_type]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ao,{label:"Rate (CAD)",type:"number",step:"0.01",min:"0",value:h.rate_cents,onChange:j=>p(v=>({...v,rate_cents:j.target.value})),placeholder:"0.00",required:!0}),e.jsx(Jl,{label:"Unit Type",value:h.unit_type,onChange:j=>p(v=>({...v,unit_type:j.target.value})),options:N})]}),e.jsx(ao,{label:"Effective From",type:"date",value:h.effective_from,onChange:j=>p(v=>({...v,effective_from:j.target.value})),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Notes (Optional)"}),e.jsx("textarea",{value:h.notes,onChange:j=>p(v=>({...v,notes:j.target.value})),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Reason for rate change..."})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[e.jsx(Me,{type:"button",variant:"secondary",onClick:d,className:"flex-1",disabled:f,children:"Cancel"}),e.jsx(Me,{type:"submit",className:"flex-1",disabled:f||!h.rate_cents,children:f?"Saving...":"Save Rate"})]})]})})},XN=()=>{const{loading:n}=Br();return n?e.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-50",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-teal-200 border-t-teal-600 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Initializing Connected Capacity..."})]})}):e.jsxs(uy,{children:[e.jsx(lt,{path:"/",element:e.jsx(F2,{})}),e.jsx(lt,{path:"/server-error",element:e.jsx(Zy,{})}),e.jsx(lt,{path:"/not-found",element:e.jsx(ig,{})}),e.jsx(lt,{element:e.jsx(Qy,{}),children:e.jsxs(lt,{element:e.jsx(Yy,{}),children:[e.jsx(lt,{path:"/dashboard",element:e.jsx(Wy,{})}),e.jsxs(lt,{element:e.jsx(mg,{roles:["SPO_ADMIN","SSPO_ADMIN","admin","MASTER","ORG_ADMIN","SPO_COORDINATOR","SSPO_COORDINATOR"]}),children:[e.jsx(lt,{path:"/care-dashboard",element:e.jsx(m2,{})}),e.jsx(lt,{path:"/metrics/tfs",element:e.jsx(x2,{})}),e.jsx(lt,{path:"/patients",element:e.jsx(h2,{})}),e.jsx(lt,{path:"/patients/add",element:e.jsx(R2,{})}),e.jsx(lt,{path:"/patients/:id",element:e.jsx(E2,{})}),e.jsx(lt,{path:"/referrals/create",element:e.jsx(O2,{})}),e.jsx(lt,{path:"/organization/profile",element:e.jsx(M2,{})}),e.jsx(lt,{path:"/assignments/:id",element:e.jsx(xg,{})}),e.jsx(lt,{path:"/sspo/dashboard",element:e.jsx(fN,{})}),e.jsx(lt,{path:"/sspo/workforce",element:e.jsx(hN,{})}),e.jsx(lt,{path:"/care-bundles",element:e.jsx(Li,{to:"/patients",replace:!0})}),e.jsx(lt,{path:"/care-bundles/create/:patientId",element:e.jsx(Q2,{})}),e.jsx(lt,{path:"/workforce",element:e.jsx(iN,{})}),e.jsx(lt,{path:"/workforce/capacity",element:e.jsx(cN,{})}),e.jsx(lt,{path:"/staff/:id",element:e.jsx(eN,{})}),e.jsx(lt,{path:"/sspo-marketplace",element:e.jsx(dN,{})}),e.jsx(lt,{path:"/sspo-marketplace/:id",element:e.jsx(uN,{})}),e.jsx(lt,{path:"/sspo-capabilities",element:e.jsx(pN,{})}),e.jsx(lt,{path:"/weekly-huddle",element:e.jsx(K2,{})}),e.jsx(lt,{path:"/spo/scheduling",element:e.jsx(sp,{isSspoMode:!1})}),e.jsx(lt,{path:"/sspo/scheduling",element:e.jsx(sp,{isSspoMode:!0})}),e.jsx(lt,{path:"/scheduling",element:e.jsx(sp,{isSspoMode:!1})}),e.jsx(lt,{path:"/scheduling-legacy",element:e.jsx(NN,{isSspoMode:!1})}),e.jsx(lt,{path:"/qin",element:e.jsx(X2,{})}),e.jsx(lt,{path:"/qip/create/:qinId",element:e.jsx(Z2,{})}),e.jsx(lt,{path:"/qip",element:e.jsx(q2,{title:"QIP Manager"})}),e.jsx(lt,{path:"/billing",element:e.jsx(mN,{})}),e.jsx(lt,{path:"/supplies",element:e.jsx(xN,{})}),e.jsx(lt,{path:"/interrai/complete/:patientId",element:e.jsx(qN,{})}),e.jsx(lt,{path:"/interrai/assess/:patientId",element:e.jsx(jg,{})}),e.jsx(lt,{path:"/interrai/assess/:patientId/:assessmentId",element:e.jsx(jg,{})}),e.jsx(lt,{path:"/interrai/dashboard",element:e.jsx(vg,{})}),e.jsx(lt,{path:"/admin/assessments",element:e.jsx(vg,{})}),e.jsx(lt,{path:"/admin/service-rates",element:e.jsx(WN,{})})]}),e.jsxs(lt,{element:e.jsx(mg,{roles:["FIELD_STAFF","SPO_ADMIN"]}),children:[e.jsx(lt,{path:"/worklist",element:e.jsx(f2,{})}),e.jsx(lt,{path:"/assignments/:id",element:e.jsx(xg,{})})]}),e.jsx(lt,{path:"*",element:e.jsx(ig,{})})]})})]})},ZN=()=>e.jsx(Xy,{children:e.jsx(Gy,{children:e.jsx(XN,{})})});console.log("Connected Capacity: JS Entry Point Loaded");cb().then(()=>{console.log("CSRF protection initialized")}).catch(n=>{console.warn("CSRF initialization delayed:",n)});window.onerror=function(n,d,c,o,f){console.error("Global Error Caught:",n);const h=document.getElementById("app");h&&(h.innerHTML=`
            <div style="color: red; padding: 20px; font-family: monospace;">
                <h3>Application Error</h3>
                <p>${n}</p>
                <p>Source: ${d}:${c}:${o}</p>
                <pre>${f?f.stack:""}</pre>
            </div>
        `)};const Cf=document.getElementById("app");console.log("Container found:",Cf);if(Cf)try{console.log("Creating root...");const n=bj.createRoot(Cf);console.log("Rendering app..."),n.render(e.jsx(Dy,{children:e.jsx(ZN,{})})),console.log("Render called.")}catch(n){console.error("React Mount Error:",n),Cf.innerHTML=`<div style="color: red; padding: 20px;"><h3>React Mount Error</h3><pre>${n.message}
${n.stack}</pre></div>`}else console.error('Target container "app" not found!');
